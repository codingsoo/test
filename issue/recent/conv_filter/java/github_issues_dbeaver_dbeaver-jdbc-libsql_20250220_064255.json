[
  {
    "number": 12,
    "title": "Internal Syntax Error",
    "created_at": "2024-11-16T19:02:26Z",
    "closed_at": "2024-11-20T03:54:15Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/dbeaver/dbeaver-jdbc-libsql/issues/12",
    "body": "I am trying to use the libsql driver for my minecraft server running java 21. Upon attempting to run this query\r\n```kotlin\r\nconn.prepareStatement(\"insert into practicedata (uuid, pitch, npc) values ?, ?, ?\").use { prepStatement ->\r\n                    prepStatement.setString(1, uuid.toString())\r\n                    prepStatement.setString(2, \"normal\")\r\n                    val registry = CitizensAPI.getNPCRegistry()\r\n                    val method = Bukkit.getScheduler().callSyncMethod(\r\n                        JavaPlugin.getPlugin(AutoPitch::class.java)\r\n                    ) {\r\n                        registry.createNPC(EntityType.PLAYER, \"Pitcher\") // Replace arg1, arg2 with the actual arguments\r\n                    }\r\n                    val id = method.get().id\r\n                    prepStatement.setInt(3, id)\r\n                    prepStatement.execute()\r\n\r\n                    return PracticePlayer(\r\n                        uuid,\r\n                        \"normal\",\r\n                        id\r\n                    )\r\n                }\r\n```\r\nI get the error:\r\n```\r\n[11:59:55 WARN]: java.sql.SQLException: Internal Error: `syntax error around L1:53: ```\r\n[11:59:55 WARN]: \tat AutoPitch-1.0.jar//com.dbeaver.jdbc.driver.libsql.client.LibSqlClient.executeBatch(LibSqlClient.java:128)\r\n[11:59:55 WARN]: \tat AutoPitch-1.0.jar//com.dbeaver.jdbc.driver.libsql.client.LibSqlClient.execute(LibSqlClient.java:84)\r\n[11:59:55 WARN]: \tat AutoPitch-1.0.jar//com.dbeaver.jdbc.driver.libsql.LibSqlStatement.execute(LibSqlStatement.java:61)\r\n[11:59:55 WARN]: \tat AutoPitch-1.0.jar//dev.cosmics.autopitch.object.PracticePlayer$Companion.init(PracticePlayer.kt:26)\r\n[11:59:55 WARN]: \tat AutoPitch-1.0.jar//dev.cosmics.autopitch.PracticeManager.getPracticePlayerBypassCache(PracticeManager.kt:47)\r\n[11:59:55 WARN]: \tat AutoPitch-1.0.jar//dev.cosmics.autopitch.PracticeManager.getPracticePlayer(PracticeManager.kt:32)\r\n[11:59:55 WARN]: \tat AutoPitch-1.0.jar//dev.cosmics.autopitch.event.PlayerJoin.preJoin(PlayerJoin.kt:17)\r\n[11:59:55 WARN]: \tat com.destroystokyo.paper.event.executor.asm.generated.GeneratedEventExecutor82.execute(Unknown Source)\r\n[11:59:55 WARN]: \tat org.bukkit.plugin.EventExecutor$2.execute(EventExecutor.java:77)\r\n[11:59:55 WARN]: \tat co.aikar.timings.TimedEventExecutor.execute(TimedEventExecutor.java:77)\r\n[11:59:55 WARN]: \tat org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:70)\r\n[11:59:55 WARN]: \tat io.papermc.paper.plugin.manager.PaperEventManager.callEvent(PaperEventManager.java:54)\r\n[11:59:55 WARN]: \tat io.papermc.paper.plugin.manager.PaperPluginManagerImpl.callEvent(PaperPluginManagerImpl.java:126)\r\n[11:59:55 WARN]: \tat org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:615)\r\n[11:59:55 WARN]: \tat net.minecraft.server.network.LoginListener.callPlayerPreLoginEvents(LoginListener.java:320)\r\n[11:59:55 WARN]: \tat net.minecraft.server.network.LoginListener$2.run(LoginListener.java:265)\r\n[11:59:55 WARN]: \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n[11:59:55 WARN]: \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n[11:59:55 WARN]: \tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n[11:59:55 ERROR]: Could not pass event AsyncPlayerPreLoginEvent to AutoPitch v1.0\r\njava.sql.SQLException: Internal Error: `syntax error around L1:53: ```\r\n\tat com.dbeaver.jdbc.driver.libsql.client.LibSqlClient.executeBatch(LibSqlClient.java:128) ~[AutoPitch-1.0.jar:?]\r\n\tat com.dbeaver.jdbc.driver.libsql.client.LibSqlClient.execute(LibSqlClient.java:84) ~[AutoPitch-1.0.jar:?]\r\n\tat com.dbeaver.jdbc.driver.libsql.LibSqlStatement.execute(LibSqlStatement.java:61) ~[AutoPitch-1.0.jar:?]\r\n\tat dev.cosmics.autopitch.object.PracticePlayer$Companion.init(PracticePlayer.kt:26) ~[AutoPitch-1.0.jar:?]\r\n\tat dev.cosmics.autopitch.PracticeManager.getPracticePlayerBypassCache(PracticeManager.kt:47) ~[AutoPitch-1.0.jar:?]\r\n\tat dev.cosmics.autopitch.PracticeManager.getPracticePlayer(PracticeManager.kt:32) ~[AutoPitch-1.0.jar:?]\r\n\tat dev.cosmics.autopitch.event.PlayerJoin.preJoin(PlayerJoin.kt:17) ~[AutoPitch-1.0.jar:?]\r\n\tat com.destroystokyo.paper.event.executor.asm.generated.GeneratedEventExecutor82.execute(Unknown Source) ~[?:?]\r\n\tat org.bukkit.plugin.EventExecutor$2.execute(EventExecutor.java:77) ~[paper-api-1.20.4-R0.1-SNAPSHOT.jar:?]\r\n\tat co.aikar.timings.TimedEventExecutor.execute(TimedEventExecutor.java:77) ~[paper-api-1.20.4-R0.1-SNAPSHOT.jar:git-Paper-499]\r\n\tat org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:70) ~[paper-api-1.20.4-R0.1-SNAPSHOT.jar:?]\r\n\tat io.papermc.paper.plugin.manager.PaperEventManager.callEvent(PaperEventManager.java:54) ~[paper-1.20.4.jar:git-Paper-499]\r\n\tat io.papermc.paper.plugin.manager.PaperPluginManagerImpl.callEvent(PaperPluginManagerImpl.java:126) ~[paper-1.20.4.jar:git-Paper-499]\r\n\tat org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:615) ~[paper-api-1.20.4-R0.1-SNAPSHOT.jar:?]\r\n\tat net.minecraft.server.network.ServerLoginPacketListenerImpl.callPlayerPreLoginEvents(ServerLoginPacketListenerImpl.java:320) ~[?:?]\r\n\tat net.minecraft.server.network.ServerLoginPacketListenerImpl$2.run(ServerLoginPacketListenerImpl.java:265) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]\r\n\tat java.lang.Thread.run(Thread.java:1583) ~[?:?]\r\n```\r\nI know this probably isn't enough to diagnose the issue so let me know if I need to provide any further details",
    "comments_url": "https://api.github.com/repos/dbeaver/dbeaver-jdbc-libsql/issues/12/comments",
    "author": "supercoolspy",
    "comments": [
      {
        "user": "serge-rider",
        "created_at": "2024-11-18T09:41:12Z",
        "body": "Thanks for the report. Seems to be related to uuid/int parameter binding"
      },
      {
        "user": "serge-rider",
        "created_at": "2024-11-18T15:57:43Z",
        "body": "In fact it is not a bug. You have an incorrect query. It has to be\r\n```sql\r\ninsert into practicedata (uuid, pitch, npc) values (?, ?, ?)\r\n```"
      },
      {
        "user": "supercoolspy",
        "created_at": "2024-11-20T03:54:15Z",
        "body": "Yep, thank you!"
      }
    ]
  }
]