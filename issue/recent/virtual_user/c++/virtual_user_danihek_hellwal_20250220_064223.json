[
  {
    "id": "https://github.com/danihek/hellwal/issues/7",
    "source": {
      "issue_number": 7
    },
    "initial_question": {
      "title": "Compilation Error in Debian Sid",
      "body": "When compiling I got this error\r\nDistro: Debian Sid\r\nGCC: gcc (Debian 14.2.0-12) 14.2.0\r\nMake: GNU Make 4.4.1\r\n\r\nHere is the error:\r\n```\r\n[holland@debian hellwal]$ make\r\ncc -Wall -Wextra -O3 -lm hellwal.c -o hellwal\r\nIn function \u2018process_theme\u2019,\r\n    inlined from \u2018process_themeing\u2019 at hellwal.c:2122:14:\r\nhellwal.c:2110:9: warning: \u2018free\u2019 called on unallocated object \u2018pal\u2019 [-Wfree-nonheap-object]\r\n 2110 |         free(pal);\r\n      |         ^~~~~~~~~\r\nhellwal.c: In function \u2018process_themeing\u2019:\r\nhellwal.c:2118:13: note: declared here\r\n 2118 |     PALETTE pal;\r\n      |             ^~~\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `stbi__load_main':\r\nhellwal.c:(.text+0x19807): undefined reference to `pow'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `stbi__loadf_main':\r\nhellwal.c:(.text+0x1c6b5): undefined reference to `pow'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `saturate_color':\r\nhellwal.c:(.text+0x207ee): undefined reference to `fmaxf'\r\n/usr/bin/ld: hellwal.c:(.text+0x20801): undefined reference to `fmaxf'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `rgb_to_hsl':\r\nhellwal.c:(.text+0x2093e): undefined reference to `fmaxf'\r\n/usr/bin/ld: hellwal.c:(.text+0x20948): undefined reference to `fmaxf'\r\n/usr/bin/ld: hellwal.c:(.text+0x20971): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x2097b): undefined reference to `fminf'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `adjust_luminance':\r\nhellwal.c:(.text+0x21168): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x21188): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x211a6): undefined reference to `fminf'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o:hellwal.c:(.text+0x21221): more undefined references to `fminf' follow\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `apply_grayscale':\r\nhellwal.c:(.text+0x213c8): undefined reference to `fmaxf'\r\n/usr/bin/ld: hellwal.c:(.text+0x213db): undefined reference to `fmaxf'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `apply_offsets':\r\nhellwal.c:(.text+0x214b5): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x214d5): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x214f4): undefined reference to `fminf'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `median_cut':\r\nhellwal.c:(.text+0x21c30): undefined reference to `fmax'\r\n/usr/bin/ld: hellwal.c:(.text+0x21c3a): undefined reference to `fmax'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `palette_handle_color_mode':\r\nhellwal.c:(.text+0x2228d): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x222b4): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x222db): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22302): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22329): undefined reference to `fminf'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o:hellwal.c:(.text+0x22350): more undefined references to `fminf' follow\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `palette_handle_light_mode':\r\nhellwal.c:(.text+0x225c7): undefined reference to `fmaxf'\r\n/usr/bin/ld: hellwal.c:(.text+0x225da): undefined reference to `fmaxf'\r\n/usr/bin/ld: hellwal.c:(.text+0x226a6): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x226ca): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x226ee): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22715): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x2273c): undefined reference to `fminf'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o:hellwal.c:(.text+0x22763): more undefined references to `fminf' follow\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `apply_addtional_arguments':\r\nhellwal.c:(.text+0x22cde): undefined reference to `fmaxf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22cf8): undefined reference to `fmaxf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22e31): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22e52): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22e73): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22edf): undefined reference to `fmaxf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22ef3): undefined reference to `fmaxf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22faf): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22fd0): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x22ff1): undefined reference to `fminf'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o: in function `gen_palette':\r\nhellwal.c:(.text+0x23e06): undefined reference to `fminf'\r\n/usr/bin/ld: hellwal.c:(.text+0x23e2f): undefined reference to `fminf'\r\n/usr/bin/ld: /tmp/ccU0KXxd.o:hellwal.c:(.text+0x23e5a): more undefined references to `fminf' follow\r\ncollect2: error: ld returned 1 exit status\r\nmake: *** [Makefile:9: hellwal] Error 1\r\n[holland@debian hellwal]$\r\n```\r\n\r\n**_Proposed Solution_**\r\nI will submit a pull request to address these issues. The main changes will likely include:\r\n\r\n    Correcting the use of free(pal) in the process_theme function\r\n    Ensuring proper linkage of the math library, possibly by modifying the compilation command or Makefile\r\n\r\nPlease let me know if this approach is acceptable, and I'll proceed with creating the pull request."
    },
    "satisfaction_conditions": [
      "Code compiles without undefined reference errors to math functions",
      "Memory management warning for 'free(pal)' is resolved",
      "Terminal color changes persist after program execution",
      "Color settings are accessible to new terminal sessions",
      "Generated color configurations are properly cached"
    ],
    "created_at": "2025-01-01T13:38:24Z"
  }
]