[
  {
    "number": 83,
    "title": "DashScope: Implement new chat api",
    "created_at": "2025-02-08T17:26:12Z",
    "closed_at": "2025-02-18T01:21:10Z",
    "labels": [
      "enhancement",
      "P3",
      "theme: model"
    ],
    "url": "https://github.com/langchain4j/langchain4j-community/pull/83",
    "body": "## Issue\r\nCloses #29 \r\n\r\n## Change\r\nImplement new chat api. And refactor generate(...) methods with the new chat(...) method.\r\n\r\n\r\n## General checklist\r\n<!-- Please double-check the following points and mark them like this: [X] -->\r\n- [X] There are no breaking changes\r\n- [X] I have added unit and integration tests for my change\r\n- [X] I have manually run all the unit tests in _all_ modules, and they are all green\r\n- [ ] I have manually run all integration tests in the module I have added/changed, and they are all green\r\n",
    "comments_url": "https://api.github.com/repos/langchain4j/langchain4j-community/issues/83/comments",
    "author": "jiangsier-xyz",
    "comments": [
      {
        "user": "Martin7-1",
        "created_at": "2025-02-09T15:58:27Z",
        "body": "@jiangsier-xyz Thank you! Could you please add some tests using new chat API?"
      },
      {
        "user": "jiangsier-xyz",
        "created_at": "2025-02-10T05:50:54Z",
        "body": "> @jiangsier-xyz Thank you! Could you please add some tests using new chat API?\r\n\r\nSince generate(...) has already been re-implemented by chat(...), the old tests can be used to validate it.\r\n\r\nAdditionally, QwenChatModelIT and QwenStreamingChatModelIT have been made to inherit from AbstractChatModelIT and AbstractStreamingChatModelIT, respectively. They provide more test cases for the new chat API.\r\n\r\nAlso, some tests have been added for the qwen-specified parameters."
      },
      {
        "user": "jiangsier-xyz",
        "created_at": "2025-02-12T07:04:09Z",
        "body": "It looks like the build issue has nothing to do with this PR."
      },
      {
        "user": "Martin7-1",
        "created_at": "2025-02-14T07:15:54Z",
        "body": "> It looks like the build issue has nothing to do with this PR.\r\n\r\n@jiangsier-xyz Yeah, the build issue is because the snapshot release of main repo and `langchain4j-spring`. I'm waiting it fixed and then review this PR. Thank you for you patience!"
      },
      {
        "user": "Martin7-1",
        "created_at": "2025-02-16T12:01:41Z",
        "body": "The test failed, @jiangsier-xyz Could you please check?\r\n\r\n```\r\njava.lang.NullPointerException: Cannot invoke \"com.alibaba.dashscope.aigc.generation.SearchInfo.getSearchResults()\" because \"searchInfo\" is null\r\n\r\n\tat dev.langchain4j.community.model.dashscope.QwenHelper.convertSearchInfo(QwenHelper.java:577)\r\n\tat dev.langchain4j.community.model.dashscope.QwenChatModel.generateByNonMultimodalModel(QwenChatModel.java:180)\r\n\tat dev.langchain4j.community.model.dashscope.QwenChatModel.doChat(QwenChatModel.java:211)\r\n\tat dev.langchain4j.model.chat.ChatLanguageModel.chat(ChatLanguageModel.java:58)\r\n\tat dev.langchain4j.community.model.dashscope.QwenChatModel.generate(QwenChatModel.java:140)\r\n\tat dev.langchain4j.community.model.dashscope.QwenChatModelIT.should_send_non_multimodal_messages_and_receive_response(QwenChatModelIT.java:54)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n```"
      },
      {
        "user": "jiangsier-xyz",
        "created_at": "2025-02-16T14:30:03Z",
        "body": "> The test failed, @jiangsier-xyz Could you please check?\r\n\r\nAfter a few changes, I ran only the new tests...\r\n\r\nFixed now.\r\n\r\nAnd, some of the test failures were caused by the dashscope service not being able to access the wiki. Still no suitable way to deal with it.\r\n\r\n"
      },
      {
        "user": "jiangsier-xyz",
        "created_at": "2025-02-16T14:31:40Z",
        "body": "> @jiangsier-xyz Thank you! Maybe the `langchain4j-community-dashscope-spring-boot-starter` also need some updates.\r\n\r\nSupported configuration for new qwen parameters."
      },
      {
        "user": "Martin7-1",
        "created_at": "2025-02-16T14:36:52Z",
        "body": "@jiangsier-xyz Thank you! Could you please remove `lombok` in `langchain4j-community-dashscope-spring-boot-starter`?"
      },
      {
        "user": "jiangsier-xyz",
        "created_at": "2025-02-17T02:02:44Z",
        "body": "> @jiangsier-xyz Thank you! Could you please remove `lombok` in `langchain4j-community-dashscope-spring-boot-starter`?\r\n\r\nDone."
      }
    ]
  },
  {
    "number": 48,
    "title": "[BUG] The Vearch Create Space Cannot Set replica_num",
    "created_at": "2025-01-09T10:50:23Z",
    "closed_at": "2025-01-16T07:40:16Z",
    "labels": [
      "bug",
      "P2",
      "P3",
      "theme: embedding store"
    ],
    "url": "https://github.com/langchain4j/langchain4j-community/issues/48",
    "body": "<!-- Please provide as many details as possible, this will help us to deliver a fix as soon as possible. Thank you! -->\r\n\r\n## Describe the bug\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n```\r\nprivate void createSpace(String databaseName, String space) {\r\n        vearchClient.createSpace(\r\n                databaseName,\r\n                CreateSpaceRequest.builder()\r\n                        .name(space)\r\n                        .replicaNum(1)\r\n                        .partitionNum(1)\r\n                        .fields(vearchConfig.getFields())\r\n                        .build());\r\n    }\r\n```\r\n\r\n## Log and Stack trace\r\n<!-- Please provide a log and a stack trace (with exception), if applicable. -->\r\n\r\n## Minimal Example to Reproduce\r\n<!-- Please provide a relevant code snippets to reproduce this bug. -->\r\n\r\n## Expected behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## Please complete the following information:\r\n- LangChain4j Community version:  0.36.2\r\n- LangChain4j Community Component you used (e.g. `langchain4j-community-clickhouse`):langchain4j-community-vearch\r\n- Java version:  17\r\n- Spring Boot version (if applicable):  3.2.4\r\n\r\n## Additional context\r\n<!-- Add any other context about the problem here. -->\r\nthe space will create with the default replicaNum(1) and  .partitionNum(1) , When your cluster has multiple replicas, high availability cannot be guaranteed. When the number of replica is set to 1\r\n                       \r\n",
    "comments_url": "https://api.github.com/repos/langchain4j/langchain4j-community/issues/48/comments",
    "author": "fanjia1024",
    "comments": [
      {
        "user": "Martin7-1",
        "created_at": "2025-01-10T11:29:24Z",
        "body": "@fanjia1024 Thank you!"
      }
    ]
  },
  {
    "number": 26,
    "title": "DashScope: more clearly and strictly constrain messages ordering to fit the model requirements",
    "created_at": "2024-12-06T03:27:35Z",
    "closed_at": "2024-12-06T12:50:01Z",
    "labels": [
      "enhancement",
      "P3",
      "theme: model"
    ],
    "url": "https://github.com/langchain4j/langchain4j-community/pull/26",
    "body": "## Change\r\nMore clearly and strictly constrain messages ordering to fit the model requirements\r\n\r\n\r\n## General checklist\r\n<!-- Please double-check the following points and mark them like this: [X] -->\r\n- [X] There are no breaking changes\r\n- [X] I have added unit and integration tests for my change\r\n- [X] I have manually run all the unit tests in _all_ modules, and they are all green\r\n",
    "comments_url": "https://api.github.com/repos/langchain4j/langchain4j-community/issues/26/comments",
    "author": "jiangsier-xyz",
    "comments": [
      {
        "user": "Martin7-1",
        "created_at": "2024-12-06T06:09:25Z",
        "body": "@jiangsier-xyz Thank you! Some tests fail in my local env. Could you please check?\r\n\r\nQwenChatModelIT:\r\n\r\n```\r\njava.lang.ClassCastException: class java.util.ArrayList cannot be cast to class java.lang.String (java.util.ArrayList and java.lang.String are in module java.base of loader 'bootstrap')\r\n\r\n\tat com.alibaba.dashscope.common.MessageAdapter.read(MessageAdapter.java:128)\r\n\tat com.alibaba.dashscope.common.MessageAdapter.read(MessageAdapter.java:19)\r\n\tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.readIntoField(ReflectiveTypeAdapterFactory.java:212)\r\n\tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$FieldReflectionAdapter.readField(ReflectiveTypeAdapterFactory.java:433)\r\n\tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:393)\r\n\tat com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40)\r\n\tat com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:82)\r\n\tat com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:61)\r\n\tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.readIntoField(ReflectiveTypeAdapterFactory.java:212)\r\n\tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$FieldReflectionAdapter.readField(ReflectiveTypeAdapterFactory.java:433)\r\n\tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:393)\r\n\tat com.google.gson.Gson.fromJson(Gson.java:1227)\r\n\tat com.google.gson.Gson.fromJson(Gson.java:1329)\r\n\tat com.google.gson.Gson.fromJson(Gson.java:1271)\r\n\tat com.alibaba.dashscope.utils.JsonUtils.fromJsonObject(JsonUtils.java:72)\r\n\tat com.alibaba.dashscope.aigc.generation.GenerationResult.fromDashScopeResult(GenerationResult.java:29)\r\n\tat com.alibaba.dashscope.aigc.generation.Generation.call(Generation.java:102)\r\n\tat dev.langchain4j.community.model.dashscope.QwenChatModel.generateByNonMultimodalModel(QwenChatModel.java:167)\r\n\tat dev.langchain4j.community.model.dashscope.QwenChatModel.generate(QwenChatModel.java:122)\r\n\tat dev.langchain4j.community.model.dashscope.QwenChatModelIT.should_call_function_with_no_argument_then_answer(QwenChatModelIT.java:63)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n```\r\n\r\nQwenChatModelListenerIT:\r\n\r\n```\r\njava.lang.AssertionError: onError() must not be called. Exception: class java.util.ArrayList cannot be cast to class java.lang.String (java.util.ArrayList and java.lang.String are in module java.base of loader 'bootstrap')\r\n\r\n\tat dev.langchain4j.model.chat.ChatModelListenerIT$1.onError(ChatModelListenerIT.java:100)\r\n\tat dev.langchain4j.community.model.dashscope.QwenHelper.lambda$onListenError$30(QwenHelper.java:628)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat dev.langchain4j.community.model.dashscope.QwenHelper.onListenError(QwenHelper.java:626)\r\n\tat dev.langchain4j.community.model.dashscope.QwenChatModel.generateByNonMultimodalModel(QwenChatModel.java:177)\r\n\tat dev.langchain4j.community.model.dashscope.QwenChatModel.generate(QwenChatModel.java:122)\r\n\tat dev.langchain4j.model.chat.ChatModelListenerIT.should_listen_request_and_response(ChatModelListenerIT.java:120)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n```\r\n\r\nQwenStreamingChatModelIT:\r\n\r\n```\r\njava.lang.RuntimeException: java.util.concurrent.ExecutionException: com.alibaba.dashscope.exception.ApiException: {\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}; status body:{\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}\r\n\r\n\tat dev.langchain4j.model.chat.TestStreamingResponseHandler.get(TestStreamingResponseHandler.java:57)\r\n\tat dev.langchain4j.community.model.dashscope.QwenStreamingChatModelIT.should_call_must_be_executed_call_function_with_argument_then_answer(QwenStreamingChatModelIT.java:201)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\nCaused by: java.util.concurrent.ExecutionException: com.alibaba.dashscope.exception.ApiException: {\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}; status body:{\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}\r\n\tat java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)\r\n\tat java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)\r\n\tat dev.langchain4j.model.chat.TestStreamingResponseHandler.get(TestStreamingResponseHandler.java:52)\r\n\t... 53 more\r\nCaused by: com.alibaba.dashscope.exception.ApiException: {\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}; status body:{\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}\r\n\tat com.alibaba.dashscope.protocol.okhttp.OkHttpHttpClient$3.onFailure(OkHttpHttpClient.java:469)\r\n\tat okhttp3.internal.sse.RealEventSource.processResponse(RealEventSource.kt:78)\r\n\tat okhttp3.internal.sse.RealEventSource.onResponse(RealEventSource.kt:46)\r\n\tat okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:519)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:840)\r\n```"
      },
      {
        "user": "jiangsier-xyz",
        "created_at": "2024-12-06T08:18:32Z",
        "body": "> @jiangsier-xyz Thank you! Some tests fail in my local env. Could you please check?\r\n> \r\n> QwenChatModelIT:\r\n> \r\n> ```\r\n> java.lang.ClassCastException: class java.util.ArrayList cannot be cast to class java.lang.String (java.util.ArrayList and java.lang.String are in module java.base of loader 'bootstrap')\r\n> \r\n> \tat com.alibaba.dashscope.common.MessageAdapter.read(MessageAdapter.java:128)\r\n> \tat com.alibaba.dashscope.common.MessageAdapter.read(MessageAdapter.java:19)\r\n> \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.readIntoField(ReflectiveTypeAdapterFactory.java:212)\r\n> \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$FieldReflectionAdapter.readField(ReflectiveTypeAdapterFactory.java:433)\r\n> \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:393)\r\n> \tat com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40)\r\n> \tat com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:82)\r\n> \tat com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:61)\r\n> \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.readIntoField(ReflectiveTypeAdapterFactory.java:212)\r\n> \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$FieldReflectionAdapter.readField(ReflectiveTypeAdapterFactory.java:433)\r\n> \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:393)\r\n> \tat com.google.gson.Gson.fromJson(Gson.java:1227)\r\n> \tat com.google.gson.Gson.fromJson(Gson.java:1329)\r\n> \tat com.google.gson.Gson.fromJson(Gson.java:1271)\r\n> \tat com.alibaba.dashscope.utils.JsonUtils.fromJsonObject(JsonUtils.java:72)\r\n> \tat com.alibaba.dashscope.aigc.generation.GenerationResult.fromDashScopeResult(GenerationResult.java:29)\r\n> \tat com.alibaba.dashscope.aigc.generation.Generation.call(Generation.java:102)\r\n> \tat dev.langchain4j.community.model.dashscope.QwenChatModel.generateByNonMultimodalModel(QwenChatModel.java:167)\r\n> \tat dev.langchain4j.community.model.dashscope.QwenChatModel.generate(QwenChatModel.java:122)\r\n> \tat dev.langchain4j.community.model.dashscope.QwenChatModelIT.should_call_function_with_no_argument_then_answer(QwenChatModelIT.java:63)\r\n> \tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)\r\n> \tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n> \tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)\r\n> \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n> \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n> \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n> \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n> \tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n> \tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n> \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n> \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n> \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n> \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n> \tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n> \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n> \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n> \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n> \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n> \tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n> \tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n> \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n> \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n> \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n> \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n> \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n> \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n> ```\r\n> \r\n> QwenChatModelListenerIT:\r\n> \r\n> ```\r\n> java.lang.AssertionError: onError() must not be called. Exception: class java.util.ArrayList cannot be cast to class java.lang.String (java.util.ArrayList and java.lang.String are in module java.base of loader 'bootstrap')\r\n> \r\n> \tat dev.langchain4j.model.chat.ChatModelListenerIT$1.onError(ChatModelListenerIT.java:100)\r\n> \tat dev.langchain4j.community.model.dashscope.QwenHelper.lambda$onListenError$30(QwenHelper.java:628)\r\n> \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n> \tat dev.langchain4j.community.model.dashscope.QwenHelper.onListenError(QwenHelper.java:626)\r\n> \tat dev.langchain4j.community.model.dashscope.QwenChatModel.generateByNonMultimodalModel(QwenChatModel.java:177)\r\n> \tat dev.langchain4j.community.model.dashscope.QwenChatModel.generate(QwenChatModel.java:122)\r\n> \tat dev.langchain4j.model.chat.ChatModelListenerIT.should_listen_request_and_response(ChatModelListenerIT.java:120)\r\n> \tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n> \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n> \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n> ```\r\n> \r\n> QwenStreamingChatModelIT:\r\n> \r\n> ```\r\n> java.lang.RuntimeException: java.util.concurrent.ExecutionException: com.alibaba.dashscope.exception.ApiException: {\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}; status body:{\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}\r\n> \r\n> \tat dev.langchain4j.model.chat.TestStreamingResponseHandler.get(TestStreamingResponseHandler.java:57)\r\n> \tat dev.langchain4j.community.model.dashscope.QwenStreamingChatModelIT.should_call_must_be_executed_call_function_with_argument_then_answer(QwenStreamingChatModelIT.java:201)\r\n> \tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)\r\n> \tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n> \tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)\r\n> \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n> \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n> \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n> \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n> \tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n> \tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n> \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n> \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n> \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n> \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n> \tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n> \tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n> \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n> \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n> \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n> \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n> \tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)\r\n> \tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n> \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n> \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n> \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n> \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n> \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n> \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n> \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n> Caused by: java.util.concurrent.ExecutionException: com.alibaba.dashscope.exception.ApiException: {\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}; status body:{\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}\r\n> \tat java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)\r\n> \tat java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)\r\n> \tat dev.langchain4j.model.chat.TestStreamingResponseHandler.get(TestStreamingResponseHandler.java:52)\r\n> \t... 53 more\r\n> Caused by: com.alibaba.dashscope.exception.ApiException: {\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}; status body:{\"statusCode\":200,\"message\":\"\",\"code\":\"response_error\",\"isJson\":false}\r\n> \tat com.alibaba.dashscope.protocol.okhttp.OkHttpHttpClient$3.onFailure(OkHttpHttpClient.java:469)\r\n> \tat okhttp3.internal.sse.RealEventSource.processResponse(RealEventSource.kt:78)\r\n> \tat okhttp3.internal.sse.RealEventSource.onResponse(RealEventSource.kt:46)\r\n> \tat okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:519)\r\n> \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n> \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n> \tat java.base/java.lang.Thread.run(Thread.java:840)\r\n> ```\r\n\r\nThis afternoon, the format of dashscope's response changed when a tool_call occurs. I checked with support and they reported that this was an unexpected change and will be reverted soon."
      },
      {
        "user": "jiangsier-xyz",
        "created_at": "2024-12-06T09:02:25Z",
        "body": "@Martin7-1 It looks like DashScope is reverted. I have all the tests passing locally."
      }
    ]
  },
  {
    "number": 15,
    "title": "Migrating langchain4j-chatglm",
    "created_at": "2024-11-18T06:36:32Z",
    "closed_at": "2024-11-18T15:36:18Z",
    "labels": [
      "P2",
      "P3",
      "theme: model"
    ],
    "url": "https://github.com/langchain4j/langchain4j-community/pull/15",
    "body": "<!--\r\nThank you so much for your contribution!\r\n\r\nPlease fill in all the sections below.\r\nPlease open the PR as a draft initially. Once it is reviewed and approved, we will ask you to add documentation and examples.\r\nPlease note that PRs with breaking changes or without tests will be rejected.\r\n\r\nPlease note that PRs will be reviewed based on the priority of the issues they address.\r\nWe ask for your patience. We are doing our best to review your PR as quickly as possible.\r\nPlease refrain from pinging and asking when it will be reviewed. Thank you for understanding!\r\n-->\r\n\r\n## Issue\r\n<!-- Please specify the ID of the issue this PR is addressing. For example: \"Closes #1234\" or \"Fixes #1234\" -->\r\nCloses #12 \r\n\r\n## Change\r\n<!-- Please describe the changes you made. -->\r\n\r\n1. Migrating `langchain4j-chatglm` to `langchain4j-community-chatglm`\r\n2. Remove deprecated `text()` call of `ChatMessage`.\r\n3. Moving embedding stores and models to distinct dir.\r\n\r\n## General checklist\r\n<!-- Please double-check the following points and mark them like this: [X] -->\r\n- [x] There are no breaking changes\r\n- [x] I have added unit and integration tests for my change\r\n- [x] I have manually run all the unit tests in _all_ modules, and they are all green\r\n- [x] I have manually run all integration tests in the module I have added/changed, and they are all green\r\n\r\n## Checklist for adding new maven module\r\n<!-- Please double-check the following points and mark them like this: [X] -->\r\n- [x] I have added my new module in the root `pom.xml` and `langchain4j-community-bom/pom.xml`\r\n",
    "comments_url": "https://api.github.com/repos/langchain4j/langchain4j-community/issues/15/comments",
    "author": "Martin7-1",
    "comments": [
      {
        "user": "langchain4j",
        "created_at": "2024-11-18T15:37:40Z",
        "body": "@Martin7-1 once you are done with migrating, could you please remove migrated modules from the main repo so that I don't accidentally release them? 🙏 "
      },
      {
        "user": "Martin7-1",
        "created_at": "2024-11-18T15:39:45Z",
        "body": "> @Martin7-1 once you are done with migrating, could you please remove migrated modules from the main repo so that I don't accidentally release them? 🙏\r\n\r\n@langchain4j OK. Will remove it once migrating all modules this week."
      }
    ]
  },
  {
    "number": 7,
    "title": "[FEATURE] SearXNG Support",
    "created_at": "2024-10-17T22:57:37Z",
    "closed_at": "2024-11-07T15:22:39Z",
    "labels": [
      "enhancement",
      "P2",
      "P3",
      "theme: web search engine"
    ],
    "url": "https://github.com/langchain4j/langchain4j-community/issues/7",
    "body": "## Is your feature request related to a problem? Please describe.\r\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\r\nSearXNG is a popular search engine aggregator that provides API access and is supported by the Langchain project but not Langchain4j\r\n\r\n## Describe the solution you'd like\r\n<!-- A clear and concise description of what you want to happen. -->\r\nAn implementation of web-search-engine that supports SearXNG similar to the current support for Google, Tavily and Search API\r\n\r\n## Describe alternatives you've considered\r\n<!-- A clear and concise description of any alternative solutions or features you've considered. -->\r\nNone\r\n\r\n## Additional context\r\n<!-- Add any other context or screenshots about the feature request here. -->\r\nNone\r\n",
    "comments_url": "https://api.github.com/repos/langchain4j/langchain4j-community/issues/7/comments",
    "author": "bnayfeh",
    "comments": [
      {
        "user": "Martin7-1",
        "created_at": "2024-10-18T02:36:58Z",
        "body": "@bnayfeh Hi! Thank you for your contribution. Noted that in `langchain4j-community`, the package name should be `dev.langchain4j.community.xxx.xxx`, and we do not want to introduce `lombok` in new integration :)"
      }
    ]
  },
  {
    "number": 3,
    "title": "[FEATURE] Setup CI pipeline",
    "created_at": "2024-10-16T08:13:14Z",
    "closed_at": "2024-10-17T08:31:55Z",
    "labels": [
      "enhancement",
      "P1"
    ],
    "url": "https://github.com/langchain4j/langchain4j-community/issues/3",
    "body": "Setup CI pipeline with github-actions.\r\nIt should be done before we have any features are integrated",
    "comments_url": "https://api.github.com/repos/langchain4j/langchain4j-community/issues/3/comments",
    "author": "kpavlov",
    "comments": [
      {
        "user": "Martin7-1",
        "created_at": "2024-10-16T16:51:50Z",
        "body": "yeah...I'm working on it :)\r\n\r\nBut I'm new to it, could you please help me review this PR? Would be very appreciated! #4 "
      }
    ]
  }
]