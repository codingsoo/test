[
  {
    "number": 173,
    "title": "expected success rate",
    "created_at": "2025-02-17T12:05:02Z",
    "closed_at": "2025-02-17T12:06:23Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/173",
    "body": "I am doing my first bindcraft run after debugging the errors (see other raised issues) - so far, for 62/62 attempted binder design loops, after MPNN stage printed \"No accepted MPNN designs found for this trajectory.\" Could such a low success rate be reasonable, or could there be a code issue?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/173/comments",
    "author": "twaksman001",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-02-17T12:06:23Z",
        "body": "depending on the target it can be reasonable, some targets require thousands of runs, please consult supplementary material in our manuscript"
      }
    ]
  },
  {
    "number": 171,
    "title": "Recommendation for peptide lengths from 10 to 40 aa",
    "created_at": "2025-02-13T08:42:12Z",
    "closed_at": "2025-02-13T11:20:53Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/171",
    "body": "Hello,\n\nI am wondering for some time about which filter and advanced settings files would be \"better\" for lengths between 10 and 40 amino acids. Looking into old opened bugs, it seems that peptide settings are better for lengths up to 20, but I would prefer to not split the runs to search for 10-20 and 20-40 binders. Also, what are the advantages and downsides of choosing peptide filter/settings over default ones?\n\nThanks a lot for the information\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/171/comments",
    "author": "pacho2",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-02-13T09:55:11Z",
        "body": "For 8-25 peptide_3stage_multimer works best. For 40 up the default_4stage multimer. Anything inbetween is a grey zone and could work with either. I would recommend running both settings in parallel into the same output folder and then seeing based on what appears in the final_design_stats.csv which settings work better for that particular lenght for your target"
      },
      {
        "user": "pacho2",
        "created_at": "2025-02-13T10:31:57Z",
        "body": "Fine, I will try\n\nThanks a lot for the info!"
      }
    ]
  },
  {
    "number": 170,
    "title": "Ranking function",
    "created_at": "2025-02-12T15:25:22Z",
    "closed_at": "2025-02-12T16:35:44Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/170",
    "body": "Hi, thank you for your great package! It has been incredibly useful and has made my research/task much more efficient!\n\nI'm using BindCraft and have generated 300 binders. However, they are all running at different times, which forces me to stop the pipeline before it reaches 100. Is there a way to run the ranking function individually?\n\nAny guidance or suggestions would be greatly appreciated!\n\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/170/comments",
    "author": "JH-42",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-02-12T15:31:14Z",
        "body": "Yeah, I just set the number of designs to 1 and run it again"
      },
      {
        "user": "JH-42",
        "created_at": "2025-02-12T16:35:44Z",
        "body": "Thank you for your quick reply!"
      }
    ]
  },
  {
    "number": 169,
    "title": "Missing subunit in output model",
    "created_at": "2025-02-11T13:10:52Z",
    "closed_at": "2025-02-13T15:24:43Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/169",
    "body": "Hello,\n\nIm currently trying to design binders for a complex composed of 3 subunits. To accelerate processing I delete one subunit and trim away parts of the structure of the remaining 2 subunits that are far away from the hotspot and do not interfere with binding of the binder. I successfully managed to design binders for one complex (4ic0) but for a homologous complex (6qgt) I can't get it to work. For some reason one subunit gets skipped during the process. So the output structure only contains subunit G (where the hotspot is on) but subunit B is missing, which probably causes binder design to the interface where subunit B should sit.\nSo far I tried using different trimmed structures as input and also the not trimmed structure (apart from deleting the 3rd subunit) and renaming the chains (don't now if the name of the chain even effects anything). \n\nI am using these settings: \nadvanved filters =default_4stage_multimer_hardtarget.json\nfilters = slightly adjusted version of the peptide_filters.json\nHowever all these settings worked fine on the first complex.\n\nDo you have an idea what causes this issue?\nKind regards",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/169/comments",
    "author": "da-schaefer",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-02-13T11:24:13Z",
        "body": "So if a subunit is missing, it probably was not specified in the 'chains = \"A,B,C\"' of the target_settings file. The chain names there correspond to what chains are taken into account during design so it does matter. Can you double check that it matches to what is in your pdb file?"
      },
      {
        "user": "da-schaefer",
        "created_at": "2025-02-13T15:24:43Z",
        "body": "Thanks, its working fine now!"
      }
    ]
  },
  {
    "number": 165,
    "title": "Customise loss functions",
    "created_at": "2025-02-06T06:24:25Z",
    "closed_at": "2025-02-07T11:35:02Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/165",
    "body": "Hi BindCraft team,\n\nThank you for sharing this fantastic work with the community!\n\nI would like to know whether it is possible to add custom loss functions alongside the existing ones. After briefly reading the repository, I didn’t find a straightforward way to do so without significantly modifying the original code.\n\nI would greatly appreciate any guidance on how to approach this. Thanks in advance for your help!\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/165/comments",
    "author": "Feanor007",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-02-06T07:41:45Z",
        "body": "Hi,\n\nyes, you can write your own custom loss functions! Examples of custom functions are at the end of the colabdesign_utils.py file"
      }
    ]
  },
  {
    "number": 161,
    "title": "Defining non-interacting residues and InterfaceAAs filter",
    "created_at": "2025-01-31T06:59:59Z",
    "closed_at": "2025-02-05T05:15:14Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/161",
    "body": "I try to find the binder for specific antibody, where the structure of the antibody-epitope complex is known, however the orientation of the designed binders does not correspond to the one of the epitopes, as I understood because bindcraft tries to maximize the number of the interactions.\nSince I already defined the hotspots is there any settings for defining non-interacting residues? \n\nAlso one more questions regarding InterfaceAAs filter, does it define interacting amino acids from both target and binder, or only from the target side? As well as n_InterfaceResidues, it accounts only for target residues or both of binder and target?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/161/comments",
    "author": "LongIsland13",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-01-31T13:14:40Z",
        "body": "Currently there is no way to define residues to avoid, as this is a bit more complex to implement and is planned for a later release.\n\nThe Interface_aa filter only counts the residues on the binder chain. Same for N_interface residues"
      }
    ]
  },
  {
    "number": 159,
    "title": "Filters regarding interface residues",
    "created_at": "2025-01-29T21:14:59Z",
    "closed_at": "2025-01-29T22:55:14Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/159",
    "body": "Thanks for your work, @martinpacesa ! \nI noticed that in almost all the filters, regarding the Average_InterfaceAAs, only K and M are given some thresholds. I wanted to ask why you constrained only to lys and met instead of other residues. What was the rationale for limiting the number of these two residues at the interfaces? I found that many designs with even larger numbers of lys would be still experimentally successful.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/159/comments",
    "author": "riiichard",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-01-29T22:39:15Z",
        "body": "1. Lysines are naturally underrepresented at interfaces due to their flexible nature, so there is quite a bit of an entropic penatly to preordering them, so we try to avoid them.\n2. AlphaFold2 seems to love methiones and in the early days of development I saw it was putting an unreasonable number at the interface so I restricted it."
      },
      {
        "user": "riiichard",
        "created_at": "2025-01-29T22:50:33Z",
        "body": "Thanks for your reply. It sounds reasonable.\n\nSo I guess it might not be always the case, depending on the target and binding interface.\nBut since BindCraft is designed to be robust, it’s good to keep those constrains, is it?\n\nBtw, may I know the filters you used for the targets in your preprint. Did you just use the filters in the repo?\n\nThanks so much!"
      },
      {
        "user": "martinpacesa",
        "created_at": "2025-01-29T22:52:29Z",
        "body": "Yeah, we tried to keep the settings and filters as general as possible for most targets.\n\nFor all targets we used the default filters.\n"
      }
    ]
  },
  {
    "number": 157,
    "title": "Feature request: Change numbering of ranked to be 3 (or more) digits",
    "created_at": "2025-01-28T14:19:04Z",
    "closed_at": "2025-02-05T05:15:36Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/157",
    "body": "Hi,\n  I have a feature enhancement regarding the naming of ranked accepted designs.  Currently they are numbered:\n\n1\n2\n3\n4\n5\n6\netc.\n\nWhen you have more than 9, the numbers don't go in order anymore in file lists, etc.  I think it would be more convenient to have them numbered like this:\n\n001\n002\n003\n004\n005\n006\netc\n\nIn reality the number of leading 0s should probably just dictated by the number of digits in the target number of designs to cover a case where someone generates 1000+ designs...",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/157/comments",
    "author": "TimCraigCGPS",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-01-30T12:12:05Z",
        "body": "Where does the numbering not make sense? in the csv or the ranked folder? I guess it might depend what OS you use :D"
      },
      {
        "user": "TimCraigCGPS",
        "created_at": "2025-01-30T13:41:55Z",
        "body": "I would say the numbering makes sense as it is- just slightly less than optimal formatting for doing things like concatenating the rank and the description for registering the constructs in a lims so that the rankings carry through to the experiments. "
      }
    ]
  },
  {
    "number": 156,
    "title": "Just PyRosetta or also RosettaDL/Rosetta Licenses Needed",
    "created_at": "2025-01-27T23:09:44Z",
    "closed_at": "2025-01-28T10:35:32Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/156",
    "body": "Thanks for creating this amazing software.\nI can’t find any exact guidance on which  modules are used precisely by BindCraft for commercial use - is it just PyRosetta, PyRosetta + Rosetta, or even PyRosetta + Rosetta + RosettaDL? They all seem to be licensed separately by UW and any guidance on which are actually needed is much appreciated.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/156/comments",
    "author": "LRParser",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-01-28T07:26:26Z",
        "body": "PyRosetta is only licensed to Rosetta license holders so you would need both. RosettaDL is not used."
      },
      {
        "user": "LRParser",
        "created_at": "2025-01-28T10:35:32Z",
        "body": "Thank you!"
      }
    ]
  },
  {
    "number": 155,
    "title": "How to analyze custom designs",
    "created_at": "2025-01-23T01:08:24Z",
    "closed_at": "2025-01-29T22:52:47Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/155",
    "body": "Hi. I would like to get BindCraft binder statistics for a custom binder, meaning that the binder is not the result of AlphaFold hallucination. I have a few custom binder sequences and a few others that are generated using RFdiffusion and I would like to get the same analysis that BindCraft has on them, to be able to compare BindCraft's designs with them. Is there an easy tweak that I can do to reach this goal?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/155/comments",
    "author": "alirezaomidi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-01-23T08:43:38Z",
        "body": "Not at this time, no."
      }
    ]
  },
  {
    "number": 154,
    "title": "Evaluating homologs of binders",
    "created_at": "2025-01-17T15:39:58Z",
    "closed_at": "2025-01-19T14:31:31Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/154",
    "body": "Thank you for generating such a great tool! \n\nI used BindCraft to design some binders towards a target. I found some of the candidates have homologs in Uniprot. Is there a way to check if these homologs will also pass Bindcraft filters?\n\nThank you!",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/154/comments",
    "author": "aemiol",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-01-17T17:30:12Z",
        "body": "Could you elaborate? Homologs of the target?"
      },
      {
        "user": "aemiol",
        "created_at": "2025-01-17T17:48:10Z",
        "body": "Thanks for the quick response. Homologs of the predicted binders. Basically searching if de novo binders have homologs in public databases. And whether such naturally-occurring homologs can act as a potential binder. Is there a way to evaluate these homologs to see if they pass Bindcraft's parameters as potential binders?"
      },
      {
        "user": "martinpacesa",
        "created_at": "2025-01-19T14:11:46Z",
        "body": "Are these sequence or structural homologs? Determined by Foldseek or Dali?\n\nIf they are struture homologs then that can easily happen, as in the range of sizes that we design (60-150 amino acids) there is a very limited number of folds one can actually conjure. In that case I doubt they will be binders too.\n\nIf they are sequence homologs then that is very intresting as we did not have such a case yet!"
      },
      {
        "user": "aemiol",
        "created_at": "2025-01-19T14:22:56Z",
        "body": "These are structural homologs determined using Foldseek. If I understand correctly, you think they are unlikely to be binders too? And how can I implement the evaluation using Bindcraft?\nThank you!"
      },
      {
        "user": "martinpacesa",
        "created_at": "2025-01-19T14:24:38Z",
        "body": "Pretty sure they are not. You can just do an AlphaFold2 prediction with your target."
      },
      {
        "user": "aemiol",
        "created_at": "2025-01-19T14:30:48Z",
        "body": "Ok, thank you!"
      }
    ]
  },
  {
    "number": 153,
    "title": "Restart after Interruption",
    "created_at": "2025-01-17T14:40:40Z",
    "closed_at": "2025-01-17T17:29:50Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/153",
    "body": "Hello. Is it possible to restart a run if it was interrupted?\nIf a job has been running for a couple of days without any accepted binders, is it different if you restart compared starting over from scratch?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/153/comments",
    "author": "GoldEagle93",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-01-17T17:29:50Z",
        "body": "Yeah you can just continue designing into the same folder, it will not overwrite anything, and will not do the same trajectories again"
      }
    ]
  },
  {
    "number": 150,
    "title": "benchmarking metrics",
    "created_at": "2025-01-13T08:44:39Z",
    "closed_at": "2025-01-19T14:17:54Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/150",
    "body": "Hi Martin,\r\n\r\nFirst of all, amazing work—thank you for developing this approach! I wanted to ask how you benchmark this model. I noticed that you recently released an update with adjusted parameters. Could you share which metrics you use to select the best model parametrization?\r\n\r\nThanks again for your efforts!\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/150/comments",
    "author": "valentas1",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-01-19T14:14:16Z",
        "body": "Hi there,\n\nthanks very much! Generally when i test a new version, I run designs against a couple of our experimentally validated targest (PD-L1, BBF-14, DerF7, etc) and compare the number of passing trajectories and overall success rates, compared to previous versions, to make sure there is no problem. Then there is visual inspection! Super important, the structural intuition is still difficult to put in numbers, so it's always good to take a look at what you are generating. Lastly, it's wetlab validation, running a small binding test, to make sure the things you are generating are real."
      },
      {
        "user": "valentas1",
        "created_at": "2025-01-19T14:16:55Z",
        "body": "thank you!"
      }
    ]
  },
  {
    "number": 149,
    "title": "Single Modeled PDBs?",
    "created_at": "2025-01-12T01:57:27Z",
    "closed_at": "2025-01-17T06:48:53Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/149",
    "body": "I am confident that I am using a Single Modeled pcb, But BindCraft States that I cannot use it. Is there a bypass?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/149/comments",
    "author": "McGruffff",
    "comments": [
      {
        "user": "LennartNickel",
        "created_at": "2025-01-14T10:02:30Z",
        "body": "could you share your input pdb?\r\n"
      },
      {
        "user": "McGruffff",
        "created_at": "2025-01-17T01:53:13Z",
        "body": "Never mind, it works fine! This program is spectacular. It does make my pc hot, though."
      }
    ]
  },
  {
    "number": 148,
    "title": "How does the \"use_termini_distance_loss\" work?",
    "created_at": "2025-01-08T20:36:09Z",
    "closed_at": "2025-01-14T09:59:40Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/148",
    "body": "I have a small protein target (88 aa) and have successfully found binders. I would consider this an \"easy\" target based on the success rate (~1/3) of trajectories. It turns out that a common feature of binders is an a-helix that docks against the \"backside\" of the target. Interestingly, the a-helix of most binders is very near the C-terminus of the target. One thought is to fuse the target and binder (or a-helix) with a linker to make a target/binder hybrid. I've attempted doing this by simply fusing the target with a portion of the docked helix and using AlphaFold3 to predict the viability of the fusion protein. This seems to work pretty well - some fusions seem better than others, but all seem reasonable. Note that I have not tried to optimize the linker between the target and binder, I simply fused the C-term of the target (which is flexible) to the docking a-helix of the binder by eye.\r\n\r\nAlternatively, one might use BindCraft to design a short peptide (20-30 aa) that docks into the site that the larger binders have found. I tested this and it seems to work reasonably well. However, it is much less inefficient than larger designs. One other issue is that the N-terminus of the binder is not necessarily close to the C-term of the target, so I'm back to where I started. \r\n\r\nI came across the \"use_termini_distance_loss\" parameter and am wondering if this might work better with the peptide strategy. Can you explain what this feature does, so I can decide if it is worth trying? It is currently set to \"false\". Also, it appears the \"weights_termini_loss\" (default set to 0.1) is the weight of the loss function. How does this affect the result? Can one direct the designs to be near the C-terminus of the target and in a particular orientation? I have not indicated any hotspots yet, this potentially one way to do it.\r\n\r\nI'll add that I'm using the notebook implementation of BindCraft, so it is not clear how one can ensure that a particular parameter file is used. Maybe it is as simple as adding the .json file (advanced setting file) in the folder being used. Is this true?\r\n\r\nThanks for any insight.\r\n\r\nErnie",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/148/comments",
    "author": "ejfuentes",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2025-01-09T07:15:01Z",
        "body": "The termini distance loss only applies to the binder, where the N and C terminus of the binder are brought closer together for splicing. See the section on AAV engineering in our preprint."
      }
    ]
  },
  {
    "number": 144,
    "title": "Bindcraft 1.5.0 add_cyclic_offset function referenced but missing in colabdesign_utils.py",
    "created_at": "2024-12-31T13:19:48Z",
    "closed_at": "2024-12-31T13:46:30Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/144",
    "body": "Hi! Great work on BindCraft and version 1.5.0!\r\nI noticed that `add_cyclic_offset` is referenced but missing in `colabdesign_utils.py`.\r\nTo resolve the issue, I added the function locally based on its implementation in the ColabDesign repository, and the affected feature (\"cyclize_peptide\": true) now works as expected (or at least no crashes when running it).\r\nCould you clarify if the omission of this function was an oversight or is it intended as a feature for a future version? I didn’t see any mention of it in the patch notes for version 1.5.0.\r\nThank you! ",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/144/comments",
    "author": "mar4mn",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-31T13:46:24Z",
        "body": "Hi, please replace the file with the newly updated function, this has now been fixed"
      }
    ]
  },
  {
    "number": 143,
    "title": "If I want to design a binder for a trimer surface.",
    "created_at": "2024-12-27T02:37:39Z",
    "closed_at": "2025-01-14T09:59:12Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/143",
    "body": "If this trimer has three identical chains DEF, and I wish to bind to certain hot spot amino acids on one of the chains (for example, residues 3-6 on chain D), do I need to rename the chains to ABC and renumber the amino acids for each chain starting from 1 before inputting the corresponding hot spot amino acids? When inputting the hot spot amino acids, do I need to input all the corresponding hot spots at the same positions for all three chains?\r\n\r\nAdditionally, I have tried outputting results, and BindCraft will default to outputting the trimer as a single chain A. Will this affect my design?\r\n\r\nThanks a lot.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/143/comments",
    "author": "Etic2001",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-30T20:52:12Z",
        "body": "You don't need to rename or renumber anything. You can enter hotspots for different chains by adding the chain name before it. For multiple chains you need to enter for each chain. For example\r\nchains = \"D,E,F\"\r\nhotspots = \"D21,D22,D23,E21,E22,E23,F21,F22,F23\"\r\n\r\nNo, it is meant to output the target as a merged A chain, that is normal"
      }
    ]
  },
  {
    "number": 142,
    "title": "Specifying no target hotspot",
    "created_at": "2024-12-19T18:51:51Z",
    "closed_at": "2024-12-31T17:38:12Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/142",
    "body": "If i want to randomly sample binding on a given target, is there a way to input this easily in the target setting? Should I just leave the target_hotspot as blank in the json configuration file?\r\nThank you",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/142/comments",
    "author": "idmjky",
    "comments": [
      {
        "user": "LennartNickel",
        "created_at": "2024-12-23T20:51:43Z",
        "body": "just leave the quotation marks empty\r\n"
      }
    ]
  },
  {
    "number": 141,
    "title": "What does it mean when there is no output data in 'final_design_stats.csv'?",
    "created_at": "2024-12-19T16:37:00Z",
    "closed_at": "2025-01-14T09:59:33Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/141",
    "body": "Hi, the pipeline is amazing! I am trying to run a prediction on a ~300-aa peptide. Everything seems to be running smoothly, but there is no output in the 'final_design_stats.csv' file or the 'Accepted' folder after 6 days of processing. It is still running, though.\r\n\r\nThere is some data in the 'mpnn_design_stats.csv' and 'trajectory_stats.csv' files.\r\n\r\nI used the default settings on my command line.\r\nHere is the content of my JSON file:\r\n\r\n{\r\n    \"design_path\": \"/data/EmiolaLab/duann2/bin_proj/bindcraft/bcraft/BindCraft/candidate4-2/\",\r\n    \"binder_name\": \"can4\",\r\n    \"starting_pdb\": \"/data/EmiolaLab/duann2/bin_proj/bindcraft/bcraft/BindCraft/candidate4-2/can4.pdb\",\r\n    \"chains\": \"A\",\r\n    \"target_hotspot_residues\": null,\r\n    \"lengths\": [1, 289],\r\n    \"number_of_final_designs\": 100\r\n}\r\n\r\nWhat does it mean if there is no final output in the 'final_design_stats.csv' file or the 'Accepted' folder? Should I change any settings? I would greatly appreciate any instructions you can provide.\r\n\r\nThanks!",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/141/comments",
    "author": "nduan1",
    "comments": [
      {
        "user": "LennartNickel",
        "created_at": "2024-12-23T20:57:38Z",
        "body": "This means that no designs have made it through the filters. Have a look at the trajectories being sampled and see if they are reasonable or if you can find a reason for the failure in the failure.csv file. This can help you to adjust the settings. Sometimes, a lot of sampling is necessary, and in rare cases it just doesn't find a solution. However, I would advice to try a few more inputs (af2 prediction, difference crystal structures) and different hotspots.\r\n"
      },
      {
        "user": "linuxfold",
        "created_at": "2024-12-29T22:15:56Z",
        "body": "I am having a similar issue. From preprint:\r\n\r\n> We allow only 2 MPNNsol generated sequences per individual AF2 trajectory to\r\npass filters to promote interface diversity amongst selected binders.\r\n\r\nIf the overall success rate is very low, would it make sense to increase the amount of MPNNsol sequences per trajectory?\r\n\r\nAfter like 1000 trajectories, there are no accepted designs but there are 2 different trajectories (with 5 _mpnn and 2 _mpnn versions) in mpnn_design_stats.csv. \r\n\r\nIs there a way to re-run the mpnn pipeline on these trajectories for more than 2 examples until some of them get accepted designs? Would this be beneficial or am I misunderstanding something?"
      },
      {
        "user": "Mikukub",
        "created_at": "2024-12-30T03:45:01Z",
        "body": "Check at the code, the mpnn design is came from trajectory that mean fitter is too strict for you target. I think plddt, iptm might to high for your target. I think it should possible to redo mpnn step from trajectory but that need skill for python, I think he might update this function soon"
      },
      {
        "user": "LennartNickel",
        "created_at": "2024-12-31T17:42:47Z",
        "body": "The amount of mpnn designs that are tried is by default 20 and can be increased in the advanced settings. The quote you are mentioning is linked to the amount of accepted designs allowed for each trajectory. There will be 20 mpnn sequences generated and the pipeline checks them for both af2 and rosetta filters one after the other. The moment 2 have passed all filters the remaining ones will not be checked and a new trajectory is started. "
      },
      {
        "user": "Mikukub",
        "created_at": "2024-12-31T18:11:51Z",
        "body": "I want to reuse trajectory but don't want to headache with the python, I would love to see it is implementing to the program since many people that tried bindcraft a lot of trajectory "
      },
      {
        "user": "nduan1",
        "created_at": "2025-01-02T17:40:18Z",
        "body": "> This means that no designs have made it through the filters. Have a look at the trajectories being sampled and see if they are reasonable or if you can find a reason for the failure in the failure.csv file. This can help you to adjust the settings. Sometimes, a lot of sampling is necessary, and in rare cases it just doesn't find a solution. However, I would advice to try a few more inputs (af2 prediction, difference crystal structures) and different hotspots.\r\nHi @LennartNickel, thanks for your reply. I tried using AF2 to pick the hotspot, but there is still no final output. I copied my failure.csv file. Could you guide me on how to interpret it? Thanks!\r\n\r\nTrajectory_logits_pLDDT,Trajectory_softmax_pLDDT,Trajectory_one-hot_pLDDT,Trajectory_final_pLDDT,Trajectory_Contacts,Trajectory_Clashes,Trajectory_WrongHotspot,MPNN_score,MPNN_seq_recovery,pLDDT,pTM,i_pTM,pAE,i_pAE,i_pLDDT,ss_pLDDT,Unrelaxed_Clashes,Relaxed_Clashes,Binder_Energy_Score,Surface_Hydrophobicity,ShapeComplementarity,PackStat,dG,dSASA,dG/dSASA,Interface_SASA_%,Interface_Hydrophobicity,n_InterfaceResidues,n_InterfaceHbonds,InterfaceHbondsPercentage,n_InterfaceUnsatHbonds,InterfaceUnsatHbondsPercentage,Interface_Helix%,Interface_BetaSheet%,Interface_Loop%,Binder_Helix%,Binder_BetaSheet%,Binder_Loop%,InterfaceAAs_A,InterfaceAAs_C,InterfaceAAs_D,InterfaceAAs_E,InterfaceAAs_F,InterfaceAAs_G,InterfaceAAs_H,InterfaceAAs_I,InterfaceAAs_K,InterfaceAAs_L,InterfaceAAs_M,InterfaceAAs_N,InterfaceAAs_P,InterfaceAAs_Q,InterfaceAAs_R,InterfaceAAs_S,InterfaceAAs_T,InterfaceAAs_V,InterfaceAAs_W,InterfaceAAs_Y,HotspotRMSD,Target_RMSD,Binder_pLDDT,Binder_pTM,Binder_pAE,Binder_RMSD\r\n60,7,17,43,0,58,0,0,0,573,117,998,0,1136,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\r\n"
      },
      {
        "user": "linuxfold",
        "created_at": "2025-01-02T19:36:37Z",
        "body": "> The amount of mpnn designs that are tried is by default 20 and can be increased in the advanced settings. The quote you are mentioning is linked to the amount of accepted designs allowed for each trajectory. There will be 20 mpnn sequences generated and the pipeline checks them for both af2 and rosetta filters one after the other. The moment 2 have passed all filters the remaining ones will not be checked and a new trajectory is started.\r\n\r\nI am not sure I fully understand. In my mpnn_design_stats, there are 2 different seeds after nearly 1500 trajectories. \r\nOne seed has 5 different mpnn variants; the other has 2 mpnn variants (7 lines total). Each of these lines then has 2 scores (e.g. 1_i_pLDDT and 2_i_pLDDT). \r\n\r\nNone of the 7 made it into final_design_stats.csv. So obviously it is very rare to even make it to mpnn_design_stats.csv and even rarer to pass all filters, is there any parameter that can be altered to try everything computationally possible on the rare seeds that make it this far so that something can make it into final_design_stats?"
      },
      {
        "user": "linuxfold",
        "created_at": "2025-01-08T19:39:29Z",
        "body": "I think I can confirm that using the new _hardtarget settings helps with getting accepted designs. I also reduced the filter stringency slightly but it seems like _hardtarget is more important. "
      }
    ]
  },
  {
    "number": 137,
    "title": "rerank the results from two separate executions",
    "created_at": "2024-12-17T07:46:44Z",
    "closed_at": "2024-12-26T13:56:32Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/137",
    "body": "Hello, I have obtained hundreds of results by running different hotspots and sequence lengths separately. Now I want to put these results together and sort them, how should I proceed?\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/137/comments",
    "author": "Yu-pecs",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-24T10:09:07Z",
        "body": "Copy the .pdb files from Accepted folder into one and then merge also the entries in the csv files. Then run the pipeline again without increasing the number of final designs. If it sees there is the desired number of designs in the Accepted folder it just reranks it"
      }
    ]
  },
  {
    "number": 135,
    "title": "Unable to parse backend config error",
    "created_at": "2024-12-16T04:13:36Z",
    "closed_at": "2025-01-14T10:01:17Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/135",
    "body": "Hi, thank you for this great repo! I encountered an error during the trajectory generation stage. Do you have any idea how to solve this? \r\nStarting trajectory: PDL1_l80_s175484\r\nStage 1: Test Logits\r\n2024-12-15 22:49:06.705978: W external/xla/xla/service/gpu/ir_emitter_unnested.cc:1171] Unable to parse backend config for custom call: Could not convert JSON string to proto: Expected : between key:value pair.\r\n= true, full_matrice\r\n^\r\nFall back to parse the raw backend config str.\r\n2024-12-15 22:52:07.183021: W external/xla/xla/service/gpu/ir_emitter_unnested.cc:1171] Unable to parse backend config for custom call: Could not convert JSON string to proto: Expected : between key:value pair.\r\n= true, full_matrice\r\n^\r\nFall back to parse the raw backend config str.\r\n2024-12-15 22:53:44.051753: E external/xla/xla/service/slow_operation_alarm.cc:73]\r\n********************************\r\n[Compiling module jit__model] Very slow compile? If you want to file a bug, run with envvar XLA_FLAGS=--xla_dump_to=/tmp/foo and attach the results.\r\n********************************\r\nKilled",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/135/comments",
    "author": "idmjky",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-16T07:50:17Z",
        "body": "What is your JAX version?\r\n\r\nAlso can you paste your target input json"
      },
      {
        "user": "idmjky",
        "created_at": "2024-12-16T17:27:08Z",
        "body": "I figured out the problem. I think the JAX 0.4.37 is installed to accomodate CUDA12.4. The script is running properly even though everytime this error comes up. Do you know if this hurts the final designed binder results in anyway?\r\n\r\n\r\n2024-12-15 23:24:12.929214: W external/xla/xla/service/gpu/ir_emitter_unnested.cc:1171] Unable to parse backend config for custom call: Could not convert JSON string to proto: Expected : between key:value pair.\r\n= true, full_matrice\r\n^\r\nFall back to parse the raw backend config str.\r\n2024-12-15 23:26:24.944705: W external/xla/xla/service/gpu/ir_emitter_unnested.cc:1171] Unable to parse backend config for custom call: Could not convert JSON string to proto: Expected : between key:value pair.\r\n= true, full_matrice\r\n^\r\nFall back to parse the raw backend config str.\r\n1 models [4] recycles 1 hard 0 soft 0.02 temp 1 loss 9.66 helix 1.41 pae 0.80 i_pae 0.77 con 4.76 i_con 4.08 plddt 0.29 ptm 0.53 i_ptm 0.10 rg 2.42\r\n2 models [0] recycles 1 hard 0 soft 0.04 temp 1 loss 10.57 helix 1.29 pae 0.79 i_pae 0.80 con 4.55 i_con 3.99 plddt 0.33 ptm 0.53 i_ptm 0.11 rg 6.36\r\n3 models [4] recycles 1 hard 0 soft 0.05 temp 1 loss 8.61 helix 1.18 pae 0.70 i_pae 0.65 con 4.26 i_con 3.59 plddt 0.35 ptm 0.55 i_ptm 0.17 rg 2.19\r\n4 models [3] recycles 1 hard 0 soft 0.07 temp 1 loss 7.89 helix 0.73 pae 0.61 i_pae 0.64 con 3.73 i_con 3.94 plddt 0.45 ptm 0.55 i_ptm 0.16 rg 0.13\r\n5 models [2] recycles 1 hard 0 soft 0.09 temp 1 loss 7.69 helix 0.74 pae 0.62 i_pae 0.61 con 3.75 i_con 3.78 plddt 0.45 ptm 0.55 i_ptm 0.17 rg -0.06\r\n6 models [2] recycles 1 hard 0 soft 0.11 temp 1 loss 7.21 helix 0.72 pae 0.54 i_pae 0.54 con 3.58 i_con 3.44 plddt 0.51 ptm 0.58 i_ptm 0.25 rg 0.15\r\n7 models [2] recycles 1 hard 0 soft 0.13 temp 1 loss 6.59 helix 0.75 pae 0.46 i_pae 0.46 con 3.26 i_con 3.18 plddt 0.58 ptm 0.61 i_ptm 0.33 rg 0.24\r\n8 models [4] recycles 1 hard 0 soft 0.14 temp 1 loss 5.19 helix 0.94 pae 0.30 i_pae 0.24 con 2.76 i_con 2.28 plddt 0.72 ptm 0.76 i_ptm 0.66 rg 0.78\r\n9 models [4] recycles 1 hard 0 soft 0.16 temp 1 loss 7.04 helix 0.65 pae 0.48 i_pae 0.43 con 3.47 i_con 2.64 plddt 0.59 ptm 0.65 i_ptm 0.51 rg 2.77"
      }
    ]
  },
  {
    "number": 132,
    "title": "scipy no attribute 'tril' - need specific version",
    "created_at": "2024-12-13T15:51:51Z",
    "closed_at": "2024-12-14T11:23:34Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/132",
    "body": "The install script does not specify versions for anything except flax and numpy. This results in scipy 1.13.1 being installed in my case. This version of scipy is too new apparently and no longer includes 'tril':\r\n\r\n    @_wraps(scipy.linalg.tril)\r\nAttributeError: module 'scipy.linalg' has no attribute 'tril'\r\n\r\nprint(scipy.__version__)'\r\n1.13.1\r\n\r\nCan you please provide a complete environment.yml file with versions specified from a working install?\r\n\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/132/comments",
    "author": "james-vincent",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-14T11:23:34Z",
        "body": "Scipy should be 1.12.x or lower"
      }
    ]
  },
  {
    "number": 130,
    "title": "Question about over-representation of E,K,F amino acids in sequences",
    "created_at": "2024-12-13T07:06:22Z",
    "closed_at": "2024-12-24T07:57:11Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/130",
    "body": "I noticed that there are a lot of E, K, and F in output sequences that pass filters in the preprint paper and in the sequences that I am generating. They are way above natural levels in your average protein. \r\n\r\nIs this expected for some reason? Would there be a benefit to forcing more variability i.e. E->D/Q, K->R, F->W/Y?\r\n\r\nIt might also be beneficial to reduce the overall charges and stabilize key folds with disulfide bonds.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/130/comments",
    "author": "linuxfold",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-13T10:30:36Z",
        "body": "That seems to be a common bias of using soluble MPNN for optimising sequence. If you use vanilla MPNN it will be more biased to AAAA sequences and we found these to be more soluble and more crystallisable. There are ways to tune it but we have not checked what effect that would have"
      },
      {
        "user": "linuxfold",
        "created_at": "2024-12-15T01:13:21Z",
        "body": "Interesting. I admittedly don't know enough about how all the individual parts work...\r\n\r\nFrom your preprint:\r\n> we and others14,20 have previously demonstrated that AF2-hallucinated proteins can exhibit low levels of\r\n> expression when tested experimentally. We therefore subsequently optimize the sequence of the binder core and surface using MPNNsol13,20 while keeping the interface intact (Fig. 1a).\r\n\r\nThe primary purpose of MPNN is just for solubility/expression?\r\n\r\nIf I were to manually mutate non interface residues to reduce charges or add a disulfide bond and the ipTM score remains the same upon plugging into AF, the chances of it binding, assuming it can be expressed and is soluble, are identical?\r\n\r\nEdit:\r\nI found this in methods: \r\n> a) AF2 confidence pLDDT score of the predicted complex (> 0.8)\r\n> [...]\r\n> f) Hydrophobicity of binder surface (< 35%)\r\n> g) RMSD of binder predicted in bound and unbound form (< 3.5 Å)\r\n\r\nAre these three the only factors that could change if I only edit non interface residues?"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-12-15T12:01:07Z",
        "body": "Yeah, it's to make them stable and expressable. You can try to mutate them, but I cannot say how well that will work. You can also tune the distribution of amino acids but you would have to change the underlying code. \r\n\r\nYeah those are the main filters"
      }
    ]
  },
  {
    "number": 129,
    "title": "How can I parallelize bindcraft?",
    "created_at": "2024-12-13T06:16:50Z",
    "closed_at": "2024-12-14T11:21:53Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/129",
    "body": "I was running bindcraft on a server with 4 GPUs. I found that the process was put on all 4 GPUs but only the first GPU was utilized. How can I run bindcraft on all 4 GPUs? Does BindCraft support parallelization?\r\n\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/129/comments",
    "author": "LAJ-THU",
    "comments": [
      {
        "user": "linuxfold",
        "created_at": "2024-12-13T06:31:50Z",
        "body": "Put CUDA_VISIBLE DEVICES variable right before the Bindcraft command to specify the GPU:\r\n\r\nCUDA_VISIBLE_DEVICES=0 python -u ./bindcraft.py --settings './settings_target/PDL1.json' --filters './settings_filters/default_filters.json' --advanced './settings_advanced/default_4stage_multimer.json'"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-12-13T06:44:47Z",
        "body": "BindCraft can only run on one GPU at a time. But you can run 4 parallel instances of the same job into one output folder to speed things up"
      }
    ]
  },
  {
    "number": 126,
    "title": "set the generated binder chain as chain A",
    "created_at": "2024-12-10T14:05:09Z",
    "closed_at": "2024-12-12T06:15:15Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/126",
    "body": "Hello, can I set the generated binder chain as chain A and the target chain as chain B during the design process? If so, how should I modify it, thank you",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/126/comments",
    "author": "yangyangyang904",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-12T06:15:15Z",
        "body": "Currently not, there are a lot of dependencies on the chains being exactly this so we don'tm plan to change that "
      }
    ]
  },
  {
    "number": 124,
    "title": "BindCraft minimum & optimal hardware requirements",
    "created_at": "2024-12-09T11:08:37Z",
    "closed_at": "2024-12-10T08:09:09Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/124",
    "body": "Hello. \r\n\r\nI am setting up a work platform that can run BindCraft. Could you please tell me the minimum hardware requirements and the optimal hardware requirements for running BindCraft? I would greatly appreciate it.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/124/comments",
    "author": "doge4019",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-09T11:36:13Z",
        "body": "Well depends, I would recommend getting these GPUs: L40s, V100, A100, or H100. About 128 Gb RAM, several Tb of storage space, and at least 4 CPUs, ideally 32 or more (not for BindCraft but more general downstream usage of other tools). Technically it can run on any Linux computer with CUDA compatible GPU, but GPU memory limits how big your designs can be."
      },
      {
        "user": "doge4019",
        "created_at": "2024-12-09T11:53:42Z",
        "body": "Thank you for your quick reply! It helps a lot"
      }
    ]
  },
  {
    "number": 121,
    "title": "Design two binders simultaneously",
    "created_at": "2024-12-05T20:40:39Z",
    "closed_at": "2024-12-06T12:07:33Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/121",
    "body": "Using the BindCraft, is it possible to simultaneously generate two binders binding to different interfaces on one target protein? I am thinking of running the pipeline twice, where you used the output complex from the first round as your target in the second round. Are there other ways?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/121/comments",
    "author": "riiichardh",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-05T22:09:19Z",
        "body": "not two at a time, but you can use target+binder1 as input into a second round"
      },
      {
        "user": "riiichardh",
        "created_at": "2024-12-06T18:44:27Z",
        "body": "Thanks so much, @martinpacesa! I will try this method anyway.\r\n\r\nNow I have another issue. After binder hallucination and optimization, I can get satisfying trajectories with low i_pae (~0.2). But after passing through MPNNsol, the i_pae usually becomes quite large (~0.8+). I know that the binder sequence has been changed a little bit by MPNNsol, but why has the i_pae significantly deteriorated? Do you have some suggestions in this case?"
      }
    ]
  },
  {
    "number": 119,
    "title": "Can I keep part of the binder fixed and fill in the rest?",
    "created_at": "2024-12-04T16:42:30Z",
    "closed_at": "2024-12-05T15:46:19Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/119",
    "body": "I want to keep part of the designed binder chain fixed and only diffuse over a few loops in the residue. Is it possible to do that yet?\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/119/comments",
    "author": "harshagrawal13",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-05T15:46:19Z",
        "body": "Not currently"
      }
    ]
  },
  {
    "number": 116,
    "title": "RMSD weight",
    "created_at": "2024-12-02T06:08:26Z",
    "closed_at": "2024-12-02T08:19:49Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/116",
    "body": "First of all, thank you for your excellent work. The community thrives because of you. When I was looking at your code, I was very interested in your filtering strategy, because we can't always find a suitable standard to filter the structures generated by AFD or RF+MPNN, so I carefully checked your weight file. I found that your weights for hotspot_RMSDhe Binder_RMSD are positive and usually large. Generally speaking, if the RMSD of the target structure in a trajectory is large, doesn't it mean that the prediction is not very reliable? The weight treatment in the code is a simple addition, so if the RMSD is large, will this cause the ranking of unreliable trajectories to rise?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/116/comments",
    "author": "astomer2",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-02T06:23:57Z",
        "body": "Thank you for the kind works! I think you were looking at the filter json file, those are not weights but hard cutoffs of the value to filter against. In the case of RMSD it is the Calpha RMSD in Angstrom. \"higher\": false flag indicates that the value for the passing design should NOT be higher than that. In the case of Binder_RMSD it is to make sure that the binder in bound and unbound form does not have a radically different structure"
      },
      {
        "user": "astomer2",
        "created_at": "2024-12-02T08:12:11Z",
        "body": "Thanks for your quick reply, this means we are just doing a cutoffs of an attribute, right? Different binders apply different cutoffs ."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-12-02T08:15:16Z",
        "body": "You can apply different cutoffs if you wish, but these have been pretty generalisable so far for a variety of different targets"
      },
      {
        "user": "astomer2",
        "created_at": "2024-12-02T08:19:47Z",
        "body": "Ok, thanks for your reply, I will close this issue"
      }
    ]
  },
  {
    "number": 115,
    "title": "Too many tries in `fill_missing_atoms` error",
    "created_at": "2024-11-28T22:03:52Z",
    "closed_at": "2024-12-05T15:43:25Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/115",
    "body": "Hi,\r\n\r\nI get the following error while executing it on the Google Collab notebook, while executing the `Run BindCraft` cell.\r\n\r\nFile: /home/benchmark/rosetta/source/src/core/conformation/Conformation.cc:1933\r\n[ ERROR ] UtilityExitException\r\nERROR: too many tries in fill_missing_atoms!",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/115/comments",
    "author": "shivashankarv",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-12-02T06:24:29Z",
        "body": "Please make sure you trimmed your input pdb correctly and there are no partial residues"
      },
      {
        "user": "astomer2",
        "created_at": "2024-12-03T05:33:13Z",
        "body": "This is generally because the structure of the input rosetta does not meet its standards. I recommend adding a repack processing step in the rosetta filter section to ensure that the structure meets the specifications."
      }
    ]
  },
  {
    "number": 111,
    "title": "suggestion :: log settings used ",
    "created_at": "2024-11-26T12:32:48Z",
    "closed_at": "2024-11-26T13:04:00Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/111",
    "body": "Hello, \r\n\r\nmaybee you would want to consider to display the settings_filter used, or at least corresponding file name and same for used settings_advanced.\r\nor save a copy of the file in the result dir. \r\nthis may helps  for reproductibilty\r\n\r\nregards\r\n\r\nEric",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/111/comments",
    "author": "EricDeveaud",
    "comments": [
      {
        "user": "EricDeveaud",
        "created_at": "2024-11-26T12:46:20Z",
        "body": "NB of course this is for pure bindcraft.py run as bindcraft.slurm does it.\r\n\r\nto be clear I would transfert the display of those information to main script instead of slurm wrapper.\r\n\r\nregards\r\n\r\nEric"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-26T13:04:00Z",
        "body": "Good suggestion, will be added in the next version"
      }
    ]
  },
  {
    "number": 110,
    "title": "comment :: inconsistency bindcraft.py vs bindcraft.slurm",
    "created_at": "2024-11-26T12:30:01Z",
    "closed_at": "2024-11-26T12:59:17Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/110",
    "body": "Hello.\r\n\r\n`bindccraft.py` can be run without specfying settings_filter nor settings_advanced and will use, in this case, the following defaults\r\n`settings_filters/default_filters.json`\r\n`settings_advanced/default_4stage_multimer.json`\r\n\r\nwhile `bindcraft.slurm` have hard requirement for both. well sort off, as if not provided thoses values are transferd to bindcraft.py as empty ones.\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/110/comments",
    "author": "EricDeveaud",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-11-26T12:59:17Z",
        "body": "Good catch, thank you! Will be fixed in the next version"
      }
    ]
  },
  {
    "number": 104,
    "title": "Continuing jobs and optimization",
    "created_at": "2024-11-22T14:08:12Z",
    "closed_at": "2024-11-24T13:08:12Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/104",
    "body": "There are some reasonable relaxed binders (9/100 requested), but the job stopped (see below).\r\n\r\nHow do I continue this job with a lower acceptance rate? What is the default acceptance rate? How to I optimize the settings based on the results from the first job?\r\n\r\nTrajectory successful, final pLDDT: 0.87\r\nTrajectory successful, final pLDDT: 0.74\r\nTrajectory successful, final pLDDT: 0.88\r\nTrajectory successful, final pLDDT: 0.84\r\nTrajectory successful, final pLDDT: 0.8\r\nTrajectory successful, final pLDDT: 0.82\r\nTrajectory successful, final pLDDT: 0.85\r\nTrajectory successful, final pLDDT: 0.89\r\nTrajectory successful, final pLDDT: 0.88\r\nThe ratio of successful designs is lower than defined acceptance rate! Consider changing your design settings!\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/104/comments",
    "author": "mdppdm",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-11-24T13:08:12Z",
        "body": "Set enable_rejection_check to false and continue generating into the same output folder"
      }
    ]
  },
  {
    "number": 103,
    "title": "Missing indicators of what to learn from output to improve results.",
    "created_at": "2024-11-21T18:55:03Z",
    "closed_at": "2024-11-26T11:05:20Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/103",
    "body": "I have now tried for weeks to get a binder to stick. I am using the hints that I could gather:\r\n- truncate target as much as possible\r\n- remove disordered parts\r\n- update local repo to keep up with commits\r\n- try different weights and filters\r\n- different hot spots\r\n\r\nThis led me to exactly *1* design accepted so far. Better than nothing :-) However, how to build on this lone success to improve outcome? \r\n\r\nLogically, you would think that looking at the good design, I would be able to figure out what target residues ended up in the interface and use those in the next run. I could also look at the good trajectories and infer the common residues that are present in all interfaces. I tested both of these strategies, and I got 0 designs passing.\r\n\r\nPlease can you give me a hint on how to use the results of failed runs to try to increase the number of passing designs? How do I infer from the logs and heaps of output WHY the second stage keeps failing (No accepted MPNN designs found for this trajectory)?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/103/comments",
    "author": "bifxcore",
    "comments": [
      {
        "user": "mdppdm",
        "created_at": "2024-11-21T21:26:13Z",
        "body": "Posted this as a new issue\r\n\r\nI have the same question. From  my last job there are some reasonable relaxed binders, but the job stopped (see below).\r\n\r\nHow do I continue this job with a lower acceptance rate? And/or, as bifxcore asked, how to I optimize the settings based on the results from the first job?\r\n\r\nThis could be a great tool, but I would like to be able to use it efficiently. \r\n\r\nTrajectory successful, final pLDDT: 0.87\r\nTrajectory successful, final pLDDT: 0.74\r\nTrajectory successful, final pLDDT: 0.88\r\nTrajectory successful, final pLDDT: 0.84\r\nTrajectory successful, final pLDDT: 0.8\r\nTrajectory successful, final pLDDT: 0.82\r\nTrajectory successful, final pLDDT: 0.85\r\nTrajectory successful, final pLDDT: 0.89\r\nTrajectory successful, final pLDDT: 0.88\r\nThe ratio of successful designs is lower than defined acceptance rate! Consider changing your design settings!"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-21T21:45:18Z",
        "body": "Generally, the thing that affects designs success the most is the target and choice of hotspots. It could be that your target is simply too hard for the pipeline to do. However, if you got one, there is hope! How many trajectories (based on entries in trajectory_stats.csv) did you have to do to get the 1?"
      },
      {
        "user": "bifxcore",
        "created_at": "2024-11-21T23:15:26Z",
        "body": "> However, if you got one, there is hope! How many trajectories (based on entries in trajectory_stats.csv) did you have to do to get the 1?\r\n\r\n144."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-22T09:42:03Z",
        "body": "That's probably very little! For hard targets one might need to sample up to 3000."
      },
      {
        "user": "bifxcore",
        "created_at": "2024-11-22T20:16:13Z",
        "body": "> one might need to sample up to 3000\r\n\r\nThe run died with \"The ratio of successful designs is lower than defined acceptance rate\". Current acceptance_rate=0.01. I suppose I could set it to zero and let it run for a while."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-24T13:07:44Z",
        "body": "You can set enable_rejection_check to false"
      }
    ]
  },
  {
    "number": 102,
    "title": "IndexError: string index out of range when fixing interface residues",
    "created_at": "2024-11-20T06:28:04Z",
    "closed_at": "2024-11-21T21:46:32Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/102",
    "body": "Hi, I encountered the following error while running BindCraft with \"target_hotspot_residues\": \"null\" in the settings file:\r\n\r\nFixing interface residues:\r\nTraceback (most recent call last):\r\n  File \"/app/bindcraft.py\", line 172, in <module>\r\n    mpnn_trajectories = mpnn_gen_sequence(trajectory_pdb, binder_chain, trajectory_interface_residues, advanced_settings)\r\n  File \"/app/functions/colabdesign_utils.py\", line 357, in mpnn_gen_sequence\r\n    mpnn_model.prep_inputs(pdb_filename=trajectory_pdb, chain=design_chains, fix_pos=fixed_positions, rm_aa=advanced_settings[\"omit_AAs\"])\r\n  File \"/usr/local/lib/python3.10/dist-packages/colabdesign/mpnn/model.py\", line 81, in prep_inputs\r\n    p = prep_pos(fix_pos, **pdb[\"idx\"])[\"pos\"]\r\n  File \"/usr/local/lib/python3.10/dist-packages/colabdesign/shared/prep.py\", line 19, in prep_pos\r\n    if i[0].isalpha():\r\nIndexError: string index out of range\r\nThis occurred immediately during the \"Fixing interface residues\" step. The target_hotspot_residues was set to null, as I intended for BindCraft to automatically detect the hotspot residues.\r\n\r\nWould this issue be related to how null is handled in the code? If needed, I can provide additional details or the input files.\r\n\r\nThanks for your help!",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/102/comments",
    "author": "Yutong0420",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-11-20T08:07:33Z",
        "body": "It's because \"null\" is handled as a string. Just leave it empty \"\""
      },
      {
        "user": "Yutong0420",
        "created_at": "2024-11-24T15:24:43Z",
        "body": "Thank you for your response. I followed your suggestions, but the issue still persists. The error does not occur immediately but appears randomly while processing the nth operation"
      }
    ]
  },
  {
    "number": 98,
    "title": "\"AF2 interface predicted alignment error (i_pAE) (> 0.35) \" why >?",
    "created_at": "2024-11-13T14:07:10Z",
    "closed_at": "2024-11-15T09:44:09Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/98",
    "body": "In the preprint, one of the filter is \"AF2 interface predicted alignment error (i_pAE) (> 0.35) \"\r\nWhy ipAE > ?\r\nIsn't the smaller the better for ipAE?  \r\n\r\n\r\n> PAE (predicted aligned error): estimate of the error in the relative position and orientation between two tokens in the predicted structure. Higher values indicate higher predicted error and therefore lower confidence. For proteins and nucleic acids, PAE score is essentially the same as AlphaFold2, where the error is measured relative to frames constructed from the protein backbone. For small molecules and post-translational modifications, a frame is constructed for each atom from its closest neighbors from a reference conformer.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/98/comments",
    "author": "mofatuzi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-11-13T14:08:16Z",
        "body": "It's just a typo, it is actuall < 0.35"
      }
    ]
  },
  {
    "number": 95,
    "title": "Difference between peptide_filters.json and filters_peptides.json",
    "created_at": "2024-11-10T01:58:34Z",
    "closed_at": "2024-11-10T10:21:26Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/95",
    "body": "Hi, there are two files with a similar name in the settings_filters directory called `peptide_filters.json` (the last commit was \"v1.2.0\") and `filters_peptides.json` (the last commit was Add files via upload\") where the only difference between them is the `peptide_filters.json` has `null` values for `Average_PackStat`, `1_PackStat`, and `2_PackStat` threshold values and `filters_peptides.json` has `0.35`. ",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/95/comments",
    "author": "ahmedselim2017",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-11-10T09:22:12Z",
        "body": "Whoops, that's a leftover from previous version, will be removed"
      },
      {
        "user": "ahmedselim2017",
        "created_at": "2024-11-11T19:16:55Z",
        "body": "Thanks!"
      }
    ]
  },
  {
    "number": 92,
    "title": "Update install_bindcraft.sh",
    "created_at": "2024-11-06T12:56:53Z",
    "closed_at": "2024-11-06T14:03:29Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/pull/92",
    "body": "Replaced loose **conda** commands with **$pkg_manager**",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/92/comments",
    "author": "sami-chaaban",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-11-06T13:33:27Z",
        "body": "These have been left on purpose for now as they are more consistent in mamba environments. Mamba really only makes a difference during installation"
      },
      {
        "user": "sami-chaaban",
        "created_at": "2024-11-06T13:34:45Z",
        "body": "I see. My installation failed until I made the change."
      }
    ]
  },
  {
    "number": 91,
    "title": "Shortlisting from the top 20 designs",
    "created_at": "2024-11-05T23:30:21Z",
    "closed_at": "2024-11-21T21:46:14Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/91",
    "body": "Is there any meaningful filter that can be applied to the top 20 designs to narrow down to the top 10 or 5 candidates? What has been your experience?\r\n\r\n1. Perhaps just search for diversity of binder length and binding site?\r\n2. On the AF3 server, passing some of the target-binder sequences gives plDDT, pTm and iPTM values slightly different from the Bindcraft calculations. Do you feel using AF3 as a further filter is worthwhile at all?\r\n3. For some of the top 20 designs I see a note: \"Relaxed structure contains clashes.\" Is this of any consequence and should such designs be discarded?\r\n\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/91/comments",
    "author": "athavalechem",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-11-06T08:39:01Z",
        "body": "1. Higher i_pTM and lower i_pAE scores are more likely to work but generally we like to just sample for diversity from whatever is in Accepted folder.\r\n2. Definitely! More orthogonal predictors can be very helpful\r\n3. We haven't investigated that fully, my intuition tells me it shouldn't be a problem but we put that disclaimer there just in case"
      },
      {
        "user": "ajasja",
        "created_at": "2024-11-06T18:08:37Z",
        "body": "Also giving the binders a quick look by eye can't hurt. Other possible metric we use are ddg, SASA, buried unsat hydrogen bonds. Also charge and/or sap score of the binder is also important.  "
      },
      {
        "user": "TimCraigCGPS",
        "created_at": "2024-11-07T18:25:41Z",
        "body": "> Also giving the binders a quick look by eye can't hurt. Other possible metric we use are ddg, SASA, buried unsat hydrogen bonds. Also charge and/or sap score of the binder is also important.\r\n\r\nWhat ranges are you looking for on those metrics?"
      },
      {
        "user": "ajasja",
        "created_at": "2024-11-08T07:50:21Z",
        "body": "These are a bit dependant on case by case (and size of the interface and the protein etc.)\r\nBut in general shape_comp>0.6, unsat<=1, charge<-3, ddg<-50"
      }
    ]
  },
  {
    "number": 90,
    "title": "Best practices for trimming target",
    "created_at": "2024-11-05T23:22:43Z",
    "closed_at": "2024-11-10T10:21:40Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/90",
    "body": "Any suggestions on how to best trim a target and how much to trim? \r\n\r\nHow to best minimize large scale disruptions to the protein structure (at worst) and/or subtle conformational changes at the binding epitope (at best) because of the trimming? Is the trimmed structure passed through AF3 and compared to the full target to make sure there is minimal RMSD and is this attempted multiple times to identify the best trimming? What other things could be done?\r\n\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/90/comments",
    "author": "athavalechem",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-11-06T08:40:34Z",
        "body": "I would not pass the trimmed structure, as we use a template to constrain the trimmed input so even physically unrealistic trims can be used. We still recommend to use realistic trims though, such as individual domains, ideally something that does not expose core hydrophobics. sometimes this is impossible but we had success with even unrealistic trims. So I suppose you just need to assess whether the binder could still bind to the designed site in the context of the full protein."
      },
      {
        "user": "athavalechem",
        "created_at": "2024-11-06T22:04:13Z",
        "body": "Thanks! Just to clarify - the trimmed structure being constrained is part of the default settings? \r\nIn the preprint, you have a statement which says: \"Unlike other design methods, such as RFdiffusion or RIFdock which keep the target backbone fixed during design, BindCraft co-folds both the target and binder at every iteration.\" Is this contradicting what you are saying about constraining the target?\r\n\r\n "
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-07T11:44:03Z",
        "body": "They are not mutually exclusive, the template constrains the target but it doesn't mean it cannot move"
      }
    ]
  },
  {
    "number": 87,
    "title": "Using the same output folder for multiple parallel runs",
    "created_at": "2024-11-04T07:59:33Z",
    "closed_at": "2024-11-04T08:11:50Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/87",
    "body": "Hi, does BindCraft support using the same output folder for multiple parallel runs?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/87/comments",
    "author": "ahmedselim2017",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-11-04T08:03:14Z",
        "body": "Yes it does"
      },
      {
        "user": "ahmedselim2017",
        "created_at": "2024-11-04T08:11:50Z",
        "body": "Thanks!"
      }
    ]
  },
  {
    "number": 85,
    "title": "Normalized pAE",
    "created_at": "2024-11-01T01:02:47Z",
    "closed_at": "2024-11-03T11:39:37Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/85",
    "body": "Hi,\r\n\r\nI'm interested in how pAE values reported from BindCraft are normalized, so that I can better compare them with pAE values from elsewhere like AF2.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/85/comments",
    "author": "tony9664",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-11-01T05:53:44Z",
        "body": "As stated in the readme, it is simply n/31"
      }
    ]
  },
  {
    "number": 83,
    "title": "Colab Pro+ runtime advice",
    "created_at": "2024-10-30T21:57:18Z",
    "closed_at": "2024-11-05T23:16:30Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/83",
    "body": "Hi Bindcraft team, congratulations for this wonderful pipeline and for opening it up to the community.\r\n\r\nI decided to use this on a ColabPro+ account with a ~100aa target sequence. The following observations may be of interest to others who want to use Colab for executing Bindcraft. In the 24 hr runtime on a A100 GPU, about 270 compute units were utilized. 79 trajectories were run and 43 designs passed all filters. I assume this (the timeframe) is along expected lines? \r\n\r\nMy issue now is that since ColabPro+ times out after the 24h runtime, the code has now stopped. Is there any way I can resume from the current position and if not, what would be the best way to proceed? I think everything was running fine and I do not want to lose out on the progress made so far. ",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/83/comments",
    "author": "athavalechem",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-30T22:36:59Z",
        "body": "Hello, yes you can just continue generating into the same folder, it will keep adding designs"
      },
      {
        "user": "finexzhi",
        "created_at": "2024-10-31T13:57:10Z",
        "body": "I think the question is that the 24h runtime limit will interrupt the calculation in the middle. You can stop the runtime after the end of one run and restart a new 24h runtime (reset the clock). In this way, you will not be worried about the interruption of a run."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-31T16:13:33Z",
        "body": "I don't think it matters. Yes you will lose one trajectory by restarting but it's no big deal."
      },
      {
        "user": "athavalechem",
        "created_at": "2024-11-01T17:09:23Z",
        "body": "Update: A new runtime can be started with all the folder paths identical and new binder designs will simply be added without overwriting anything. No problems there. The trajectory which was interrupted is lost but that is totally fine. I got the 100 designs now.\r\nI am curious about your thoughts on the following things:\r\nThis target (~100aa, mostly helices) took ~48 hrs on ColabPro+ A100 GPU with ~560 compute units. 160 trajectories were tested to generate 101 designs passing all filters (4 stage, all settings were default values).\r\nQuestions:\r\n1) Is this the typical time or is it too slow/fast? Are things faster on a local installation?\r\n2) Does the ratio of trajectories/designs give a sense of how easy the target was and how good the designs may be?\r\n3) Roughly, how are these times expected to change for targets with comparable 'complexity' but that are larger - let's say 300 aa, 800aa, 1400aa?\r\n\r\n\r\n\r\n"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-03T11:33:26Z",
        "body": "1. So the Colab version is certainly much slower than a local installation. It also depends on which GPU you are using. A100 is I think the fastest you can get on colab and is certainly one of the better ones you can have locally as well. H100s are about 5x faster but much more expensive to buy.\r\n2. This is hard to say. We had hard targets and easy targets and generally whatever passed filters also worked in the wetlab, not necessarily better or worse. But in terms of in silico success, your target is definitely amongst the best, we rarely have to sample so little (least we did was 200, most we had to do was 3500).\r\n3. anywhere from 5 minutes to 3 hours per trajectory. Maximum we could test was 500 amino acids at that time. We can now do bigger things with larger GPU memory but the run time in some cases can be half a day per trajectory."
      },
      {
        "user": "athavalechem",
        "created_at": "2024-11-05T23:16:23Z",
        "body": "Thanks for all the insights - this is super useful!"
      }
    ]
  },
  {
    "number": 82,
    "title": "Multi-GPU support",
    "created_at": "2024-10-30T16:35:54Z",
    "closed_at": "2024-11-15T09:44:28Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/82",
    "body": "I tried running with multiple GPUs (specifically two NVIDIA L40 GPUs) to see if BindCraft could make use of memory across both after I hit\r\n```\r\njaxlib.xla_extension.XlaRuntimeError: RESOURCE_EXHAUSTED: Out of memory while trying to allocate 57664967912 bytes.\r\n```\r\nrunning on a single GPU.\r\n\r\nThe code recognized both GPUs, but I encountered the same error. I wanted to confirm this isn't currently supported.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/82/comments",
    "author": "agitter",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-30T16:47:56Z",
        "body": "No, the BindCraft architecture cannot support multiple GPUs. You can let it overflow into RAM memory if you have DDR5 which is still decently fast."
      },
      {
        "user": "maxall41",
        "created_at": "2024-11-02T06:28:53Z",
        "body": "@martinpacesa How can that be configured?"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-03T11:38:16Z",
        "body": "`os.environ[\"XLA_PYTHON_CLIENT_MEM_FRACTION\"] = \"2.0\"`\r\n\r\nAdd this to bindcraft.py. The number can be changed to a muliple of your GPU memory. For example if you have 32 Gb GPU RAM and set this number to 2.0, then the RAM it will allocate is 64 Gb + 32 Gb of GPU memory = effectively 96 Gb of memory."
      },
      {
        "user": "yunong782",
        "created_at": "2024-11-05T14:49:53Z",
        "body": "\"jax.errors.SimplifiedTraceback: For simplicity, JAX has removed its internal frames from the traceback of the following exception. Set JAX_TRACEBACK_FILTERING=off to include these.\r\n\r\nThe above exception was the direct cause of the following exception:\"\r\n\r\n\r\nI also had the same issue as agitter, and another prompt mentioned to set \"JAX_TRACEBACK_FILTERING=off\". I added this script to bindcraft.py script, but it seemed not working. Then I reduced the number of final binder design in target input .json script, it seems running without warning to run out the memory now. But as suggested, the final binder design should be not less than 100, is it? It' running with a number of 80."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-05T14:52:39Z",
        "body": "Hm that should not influence it, as we are not loading the binders into memory. What is your:\r\n\r\n1. GPU memory size\r\n2. Target .pdb size in number of amino acids\r\n3. Your binder size range selected"
      },
      {
        "user": "yunong782",
        "created_at": "2024-11-05T16:06:35Z",
        "body": "> Hm that should not influence it, as we are not loading the binders into memory. What is your:\r\n> \r\n> 1. GPU memory size\r\n> 2. Target .pdb size in number of amino acids\r\n> 3. Your binder size range selected\r\n\r\n1. GPU size: \t20GB per GPU, we have 4 GPU in service\r\n2. target size: 148 residues\r\n3. binder size range: [55,150]"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-05T16:08:15Z",
        "body": "It can only use one GPU per instance, doesn't matter how many you have attached. It could be that the 300 amino acids of target+binder are too large for 20Gb GPU, did not test that size. 500 amino acids are maximum you can fit into 32 Gb memory."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-05T16:08:31Z",
        "body": "What about RAM?"
      },
      {
        "user": "YangPH0624",
        "created_at": "2024-11-13T12:00:00Z",
        "body": "> No, the BindCraft architecture cannot support multiple GPUs. You can let it overflow into RAM memory if you have DDR5 which is still decently fast.\r\n\r\nMy machine has two 4090-24GB GPUs and 128GB of RAM. According to your method, would it be possible to design a 500 amino acid binder-target complex?"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-13T13:07:55Z",
        "body": "For 500 you need about 30 Gb I would say"
      }
    ]
  },
  {
    "number": 81,
    "title": "uniqueness of the binder sequences (question).",
    "created_at": "2024-10-30T13:22:14Z",
    "closed_at": "2024-11-03T11:38:55Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/81",
    "body": "If two different operators use the same parameters to run against the same target PDB file, is that possible for them to get the same hit(s) as an outcome?\r\n\r\nThanks!\r\n\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/81/comments",
    "author": "finexzhi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-30T14:03:32Z",
        "body": "unlikely, unless you constrain it to very small sizes and specific hotspots. It can always sample 100000 unique trajectories per length and per target. And changing any setting would make it unique again. Protein space is vast."
      }
    ]
  },
  {
    "number": 78,
    "title": "shutil.copy(best_model_pdb, design_paths[\"Rejected\"])",
    "created_at": "2024-10-27T03:24:26Z",
    "closed_at": "2024-10-30T16:48:15Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/78",
    "body": "\r\n\r\n I got this error message after running my program. What could be causing it, and how should I fix it? Really looking forward to your help!\r\n\r\n\r\n\r\n\r\nFixing interface residues: B43,B63,B66,B69,B70,B73,B74,B77,B78,B80,B81,B82,B85\r\nBase AF2 filters not passed for /home/BindCraft/example/PDL1_l91_s345674_mpnn1, skipping interface scoring\r\nUnmet filter conditions for /home/BindCraft/example/PDL1_l91_s345674_mpnn2\r\nTraceback (most recent call last):\r\n  File \"/home/BindCraft/./bindcraft.py\", line 411, in <module>\r\n    shutil.copy(best_model_pdb, design_paths[\"Rejected\"])\r\n  File \"/home/anaconda3/envs/BindCraft/lib/python3.10/shutil.py\", line 417, in copy\r\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\r\n  File \"/home/anaconda3/envs/BindCraft/lib/python3.10/shutil.py\", line 254, in copyfile\r\n    with open(src, 'rb') as fsrc:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/home/BindCraft/example/PDL1_l91_s345674_mpnn2_model2.pdb'\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/78/comments",
    "author": "EHHDD2024",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-27T17:45:38Z",
        "body": "Try updating the bindcraft.py file from the latest repo now."
      },
      {
        "user": "EHHDD2024",
        "created_at": "2024-11-01T01:44:06Z",
        "body": "> Try updating the bindcraft.py file from the latest repo now.\r\n\r\nThank you so much! After updating bindcraft.py, it's now running smoothly. But I'm facing another issue now: why does bindcraft.py utilize all the GPUs when I run it? Is there a way to specify and use only a few GPUs?"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-11-01T05:55:32Z",
        "body": "It shouldn't. What if you add this line to bindcraft.py:\n\nos.environ['CUDA_VISIBLE_DEVICES'] = '0'"
      }
    ]
  },
  {
    "number": 77,
    "title": "Reading PDB residue numbers vs appearance order in PDB file?",
    "created_at": "2024-10-25T15:02:39Z",
    "closed_at": "2024-10-28T19:09:31Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/77",
    "body": "Hi,\r\n  While picking hotspots for an uploaded pdb file, I came across an error that my picked hotspot residue actually doesn't exist.  I was using a PDB file where I pruned a large number of residues out of the system in order to make Bindcraft run faster.  The original pdb had ~400AA, and the new one had only 124, but those 124 still have the residue numbers from the original PDB file.  \r\n\r\nMy expected and desired behavior would be to use hotspot choices that are based on residue number in the pdb file rather than their appearance inside the uploaded PDB file.  I'm also not sure if the PDB fetching function has the same issue.\r\n\r\nHere's part of the contents of my PDB file used:\r\n\r\n> ATOM    598  N   ASP A 115     152.516 115.360  99.807  1.00 85.56           N  \r\nATOM    599  CA  ASP A 115     151.122 115.004 100.139  1.00 85.56           C  \r\nATOM    600  C   ASP A 115     150.714 115.453 101.556  1.00 85.56           C  \r\nATOM    601  O   ASP A 115     149.599 115.925 101.773  1.00 85.56           O  \r\nATOM    602  CB  ASP A 115     150.927 113.481 100.043  1.00 85.56           C  \r\nATOM    603  CG  ASP A 115     151.019 112.907  98.624  1.00 85.56           C  \r\nATOM    604  OD1 ASP A 115     150.553 113.580  97.679  1.00 85.56           O  \r\nATOM    605  OD2 ASP A 115     151.529 111.774  98.515  1.00 85.56           O1-\r\nATOM    606  H   ASP A 115     153.049 114.680  99.284  1.00 85.56           H  \r\nATOM    607  HA  ASP A 115     150.453 115.486  99.425  1.00 85.56           H  \r\nATOM    608  HB2 ASP A 115     149.939 113.237 100.431  1.00 85.56           H  \r\nATOM    609  HB3 ASP A 115     151.662 112.991 100.682  1.00 85.56           H  \r\n\r\nHere is the hotspot from my JSON file:\r\n> \"hotspot\":\"A115,A185,A186,A187,A188,A189,A190,A349\"\r\n\r\nAnd here is the error when I run Bindcraft:\r\n>[2024-10-24, 12:18:23 EDT] {EPI_bindcraft.py:127} INFO - AssertionError: ERROR: positions 115 and chain A not found\r\n\r\nIs it possible to somehow change the pdb handling to match the PDB numbering more seamlessly?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/77/comments",
    "author": "TimCraigCGPS",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-27T15:28:45Z",
        "body": "It should match the PDB numbering, so this is a bit strange. How did you do the trimming? Could you try to trim it again, for example in PyMOL or ChimeraX, save and try again?"
      },
      {
        "user": "TimCraigCGPS",
        "created_at": "2024-10-28T14:16:30Z",
        "body": "I did it using pymol and \"remove atoms\" - I wonder if a partial AA would cause this..."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-28T14:17:32Z",
        "body": "most likely! I usually remove either in ChimeraX or manually via editing the .pdb file"
      },
      {
        "user": "TimCraigCGPS",
        "created_at": "2024-10-28T19:09:31Z",
        "body": "I removed the partial residues, which seems to fix the problem.  Thanks!"
      }
    ]
  },
  {
    "number": 75,
    "title": "Update bindcraft.py to fix mpnn counter",
    "created_at": "2024-10-24T14:59:17Z",
    "closed_at": "2024-10-25T08:30:01Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/pull/75",
    "body": "#74 related tiny pull request. I noticed that if base alphafold filter weren't met, the MPNN counter didn't update. Pretty sure it's just because of the continue statement preventing the counter update from executing. Otherwise new sequences are being tested, so no other changes necessary. I didn't look too hard at this, but it's a small enough fix it (hopefully) shouldn't break anything. ",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/75/comments",
    "author": "kyleford8",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-25T08:30:08Z",
        "body": "Good catch, thank you!"
      }
    ]
  },
  {
    "number": 74,
    "title": "Google Colab MPNN Checks",
    "created_at": "2024-10-23T20:23:30Z",
    "closed_at": "2024-10-24T17:51:34Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/74",
    "body": "I was testing a protein on google colab and noticed that when it was going through the MPNN checks at the end of each cycle, instead of testing 10 different sequences it tested the same sequence 10 different times. Is this a new error, because I worked with colab before and it worked properly by testing different sequences. \r\n\r\nAlso, I am working with a group that is looking to temporarily use google colab to work with BindCraft while we work on installing it on our servers. We were wondering what GPU would work best with BindCraft on colab and what plan would be the best for running BindCraft (Pro, Pro+, or Pay as you go).\r\n\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/74/comments",
    "author": "Rohan14T",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-24T08:51:17Z",
        "body": "Can you show an example that it is testing the same sequence? That should not be the case as there is a check to remove duplicate sequences. They can still differ in like 1 or 2 amino acids, if your binder is short.\r\n\r\nGoogle Pro is usually enough"
      },
      {
        "user": "Rohan14T",
        "created_at": "2024-10-24T17:51:34Z",
        "body": "I think it was just the counter not updating properly. Double checking the sequences it was slightly different. \r\n\r\nThank you"
      }
    ]
  },
  {
    "number": 72,
    "title": "Is there a way to restart where a previous run left off?",
    "created_at": "2024-10-23T16:56:48Z",
    "closed_at": "2024-10-25T12:50:15Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/72",
    "body": "Let's say I ran the program and asked for 10 binders, and Bindcraft ended after 10.  Is there a way to go back and then ask for 100, but to start from where the previous one left off?  ",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/72/comments",
    "author": "TimCraigCGPS",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-23T16:59:20Z",
        "body": "Yes, you can just keep outputting to the same folder"
      },
      {
        "user": "TimCraigCGPS",
        "created_at": "2024-10-25T12:50:16Z",
        "body": "Awesome, thanks!"
      }
    ]
  },
  {
    "number": 71,
    "title": "How to set up multiple hotspots located on different chains.",
    "created_at": "2024-10-23T00:18:23Z",
    "closed_at": "2024-10-23T07:10:24Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/71",
    "body": "How should we configure the target_settings JSON to include multiple hotspots on both Chain A and Chain B?\r\n\r\n{\r\n\"design_path\": \"/content/drive/My Drive/BindCraft/PDL1/\",\r\n\"binder_name\": \"PDL1\",\r\n\"starting_pdb\": \"/content/bindcraft/example/PDL1.pdb\",\r\n\"chains\": \"A\",\r\n\"target_hotspot_residues\": \"56\",\r\n\"lengths\": [65, 150],\r\n\"number_of_final_designs\": 100\r\n}",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/71/comments",
    "author": "biochristmas",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-23T07:10:24Z",
        "body": "It is described in the readme: \"A54,A76,B21,B34\" or you can include entire chains as \"A,B\""
      },
      {
        "user": "gieses",
        "created_at": "2024-12-19T09:46:25Z",
        "body": "@martinpacesa apologies for hijacking! Does this also apply to the designed binder? I have some designs but the orientation of the binder is off, wondering if we can enforce an expected orientation? "
      }
    ]
  },
  {
    "number": 69,
    "title": "Question: is 3stage design inside 4stage_multimer_peptides.json a typo",
    "created_at": "2024-10-22T15:28:22Z",
    "closed_at": "2024-10-23T07:43:01Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/69",
    "body": "I do not know enough to determine if this is intentional, but just in case:\r\n\r\n```\r\n grep design_algorithm settings_advanced/4stage_multimer_peptides.json\r\n    \"design_algorithm\": \"3stage\",\r\n``` \r\nIs it intentional?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/69/comments",
    "author": "antorsae",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-22T15:48:00Z",
        "body": "The code is correct, the 3stage seems to work better for peptides. Just gotta change the protocol name"
      }
    ]
  },
  {
    "number": 68,
    "title": "Empty omit_AAs",
    "created_at": "2024-10-22T07:22:30Z",
    "closed_at": "2024-10-22T07:28:57Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/68",
    "body": "When setting `\"omit_AAs\": null`, so that all possible residues can be used, an error arose from Line 25 of functions/biopython_utils.py since you cannot split an empty list. Adding a if clause like `if advanced_settings[\"omit_AAs\"] != None:` could avoid that issue.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/68/comments",
    "author": "tony9664",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-22T07:28:57Z",
        "body": "Good point, thank you!"
      }
    ]
  },
  {
    "number": 67,
    "title": "running BindCraft on modal",
    "created_at": "2024-10-21T22:42:18Z",
    "closed_at": "2024-10-23T07:59:16Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/67",
    "body": "considering the fact that running BindCraft takes a lot of time and GPU and I, myself have problem with google Colab GPU limit, I wish I could run it on Modal(it is cooperating with adaptyve bio now and offer 30$ free use). I mean a code just like google Colab that does not require me to download Pyrosetta(3 Gigabytes is headache for me). I tried running BindCraft on modal but still I had to download Pyrosetta",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/67/comments",
    "author": "Fsoltanmohamadi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-22T05:35:20Z",
        "body": "Hi, currently PyRosetta is a vital component and we do not plan on replacing it for the time being."
      }
    ]
  },
  {
    "number": 66,
    "title": "Floating point exception (core dumped)",
    "created_at": "2024-10-21T19:01:55Z",
    "closed_at": "2024-10-23T07:11:02Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/66",
    "body": "I've installed BindCraft as per the instructions on our lab machine running Ubuntu 22.04 LTS, and everything seemed to go OK (no error messages). However when I run it I get a 'Floating point exception (core dumped)' error.  This doesn't seem to be dependent on the configuration files as a get the error even when I just run python -u bindcraft.py\r\n\r\nAny assistance you can give would be greatly appreciated.\r\n\r\nAll the best,\r\n\r\nRhys",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/66/comments",
    "author": "RhysWG",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-21T20:10:49Z",
        "body": "Did you install the 1.1.0 or 1.0.0 version? What is your CUDA version? What is your Jax version?"
      },
      {
        "user": "RhysWG",
        "created_at": "2024-10-21T20:39:52Z",
        "body": "Thanks for the quick response. I install is 1.1.0 (I also got this error with 1.0.0, so I repeated the install, but it didn't go away)\r\n\r\nThe CUDA version is: 12.2 \r\nJax version = 0.4.33"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-21T20:42:56Z",
        "body": "Can you try running the commands from the install script manually via command line one by one?\r\nDid you specify the CUDA version during install?"
      },
      {
        "user": "RhysWG",
        "created_at": "2024-10-21T20:46:19Z",
        "body": "I'll try running the commands individually. \r\n\r\nYes, I specified 12.2 as the CUDA version as that's what the system is currently running. Is there a Jax and CUDA version you would recommend?\r\n\r\nThanks. :-)"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-21T20:49:02Z",
        "body": "The CUDA should correspond to the one on the system. Perhaps Jax 0.4.23 could also work?"
      },
      {
        "user": "RhysWG",
        "created_at": "2024-10-22T22:31:32Z",
        "body": "Looks like BindCraft is running now. It appears the issue was my base conda environment not changing to the BindCraft environment when instructed. An extra round of 'conda deactivate' solved the issue. Thanks for the help. :-)"
      }
    ]
  },
  {
    "number": 65,
    "title": "DAlphaBall fails to load libgfortran.so.5 in conda environment",
    "created_at": "2024-10-20T12:53:19Z",
    "closed_at": "2024-10-23T07:59:12Z",
    "labels": [
      "documentation"
    ],
    "url": "https://github.com/martinpacesa/BindCraft/issues/65",
    "body": "Thank you for your excellent work on the BindCraft project. \r\nI encountered a minor issue while running the PDL1.pdb example, which I was able to resolve, and I'm reporting it here.\r\n\r\n## Problem\r\nWhen running the PDL1.pdb example locally, an error occurs due to DAlphaBall being unable to find libgfortran.so.5.\r\n\r\n## Environment\r\n- OS: Ubuntu 22.04.4 LTS\r\n- Conda version: 24.7.1\r\n- BindCraft version: v1.1.0\r\n- CUDA version: 12.2\r\n\r\n## Error Message\r\n- run.sh\r\n```\r\npython -u ./bindcraft.py \\\r\n    --settings './settings_target/PDL1.json' \\\r\n    --filters './settings_filters/default_filters.json' \\\r\n    --advanced './settings_advanced/4stage_multimer.json'\r\n```\r\n\r\n- terminal\r\n```\r\n(base) $ conda activate BindCraft\r\n(BindCraft) $ bash run.sh\r\nAvailable GPUs:\r\n\r\n...\r\n\r\nTrajectory successful, final pLDDT: 0.91\r\nStarting trajectory took: 0 hours, 7 minutes, 19 seconds\r\n\r\n/home/suzuki/workspace/protein-design/BindCraft/functions/DAlphaBall.gcc: error while loading shared libraries: libgfortran.so.5: cannot open shared object file: No such file or directory\r\nWARNING!! DALPHABALL output nan at index 18446744073709551488\r\nDALPHABALL output indicies not matching! 1!=18446744073709551488\r\nERROR:: Exit from: /home/benchmark/rosetta/source/src/core/scoring/packing/surf_vol.cc line: 164\r\nTraceback (most recent call last):\r\n  File \"/home/suzuki/workspace/protein-design/BindCraft/./bindcraft.py\", line 141, in <module>\r\n    trajectory_interface_scores, trajectory_interface_AA, trajectory_interface_residues = score_interface(trajectory_relaxed, binder_chain)\r\n  File \"/home/suzuki/workspace/protein-design/BindCraft/functions/pyrosetta_utils.py\", line 75, in score_interface\r\n    interface_delta_unsat_hbonds = buns_filter.report_sm(pose)\r\nRuntimeError: \r\nFile: /home/benchmark/rosetta/source/src/core/scoring/packing/surf_vol.cc:164\r\n[ ERROR ] UtilityExitException\r\nERROR:\r\n\r\n```\r\n\r\n## Solution\r\nThe issue can be resolved by adding the conda environment's lib directory to LD_LIBRARY_PATH:\r\n```bash\r\nexport LD_LIBRARY_PATH=$CONDA_PREFIX/lib\r\n```\r\n\r\n***\r\nThanks.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/65/comments",
    "author": "suzuki-2001",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-21T20:06:55Z",
        "body": "Thank you for the report!"
      }
    ]
  },
  {
    "number": 59,
    "title": "After hits, how to do the negative selection?",
    "created_at": "2024-10-16T14:52:20Z",
    "closed_at": "2024-10-16T14:57:09Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/59",
    "body": "I have two similar proteins A and B. The only difference in sequence is about 4 amino acids. I am trying to get a specific binder recognizing A but not B. I have used the different amino acids in A as hot spots. Finally, I got about 20 hits, which all bind to these \"hot spot\" amino acids. I want to know if these binders will have no or weak binding to B. What software or algorism I should use to evaluate their binding to B before I jump to the wet lab examination. Thanks.\r\n\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/59/comments",
    "author": "finexzhi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-16T14:56:45Z",
        "body": "That will be very very hard for BindCraft to differentiate. We are currently developing a method for it, but this won't be public for a while."
      }
    ]
  },
  {
    "number": 58,
    "title": "ImportError: /lib64/libm.so.6: version `GLIBC_2.27' not found",
    "created_at": "2024-10-16T12:16:47Z",
    "closed_at": "2024-10-27T15:29:41Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/58",
    "body": " I'm running into some issues during the installation. \r\nMy NVIDIA driver version is 12.2. When I set up a Conda environment with Python 3.10, I get an error saying 'GLIBC_2.27' not found, which indicates that my GLIBC version is too low. But when I switch to Python 3.9 in the Conda environment and try to install the corresponding version of PyRosetta, I end up with a \"Floating point exception\" error. Do you have any ideas on how to fix this? I'd really appreciate your help.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/58/comments",
    "author": "Ava-cmd123",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-17T08:10:18Z",
        "body": "Can you try again now with a clean install? A new PyRosetta version was pushed"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-20T10:33:23Z",
        "body": "What kind of jax version are you running? It is quite difficult to get the versions right on certain systems. What if you include \"libgcc-ng\" as package during the conda install?"
      }
    ]
  },
  {
    "number": 56,
    "title": "How to change the location of a binder",
    "created_at": "2024-10-16T09:01:41Z",
    "closed_at": "2024-10-18T06:32:28Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/56",
    "body": "Dear authors, congratulations on your excellent work. I have a question regarding the manipulation of the binder's location.\r\n\r\nThe hotspots on my protein are located on one side, but the binder is being generated on the opposite side. I am considering the following approaches:\r\n\r\n1.  Adding the surroundings of the hotspots to the hotspot set to potentially guide the binder's growth closer to the hotspots.\r\n\r\n2. Is there a weight parameter in the loss function that can be adjusted to prioritize the interaction between the hotspots and the binder in Bindcraft?\r\n\r\n3. I plan to trim the target protein by removing some amino acids on the side opposite to my hotspot.  I'm concerned about significantly altering the conformation of the hotspots. Although Bindcraft can adjust both the target and binder flexibly, I wish to maintain the target's conformation unchanged. Is this feasible?\r\n\r\nThank you for your help",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/56/comments",
    "author": "bzhousd",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-16T09:24:06Z",
        "body": "Thank you!\r\n\r\nYes, the pipeline optimises for a combined loss function of confidence and other terms described in the paper. The hotspots are only part of it. All 3 strategies you describe are feasible.\r\n\r\n1. could help, the contact loss is calculated only for the residues you select, so selecting more and perhaps more appropriate residues would help. Avoid residues with a lot of entropy like lysines.\r\n2. You can increase the contact loss between chains/hotspots which is 'weights_con_inter'. Try different values, like 2,5,10,20 and see what works.\r\n3. This is the best strategy. With the default settings it should work fine."
      },
      {
        "user": "bzhousd",
        "created_at": "2024-10-18T09:58:24Z",
        "body": "Hello , @martinpacesa ,   thank you for your valuable suggestions. Following your advice, I've made progress, and the binder is now positioned closer to the hotpot.\r\n\r\nHowever, I've yet to see any designs marked as 'accepted'. Could you provide some insight on adjusting the cutoff? Also, I've found that PDB files are scattered across several directories, including Trajectory/Relaxed and Trajectory/LowConfidence, MPNN/Relaxed. If there are no accepted designs, which folder would you recommend for finding relatively good designs?\r\n\r\nI was hoping trajectory_stats.csv would help identify superior designs, but it seems to be missing a 'rank' column. Your advice on how to proceed would be immensely helpful."
      },
      {
        "user": "LennartNickel",
        "created_at": "2024-10-21T11:15:18Z",
        "body": "Quick note on the structure of the pdb-file distribution. First, the PDB files are created from the trajectory (AF2 backprop) and classified depending if they have low confidence, clashes etc. If they pass the initial filters, they are relaxed and go into the Trajectories/Relaxed folder. These sequences are not ready to be tested experimentally. They are still missing the MPNN step to redesign every residue except for the ones involved in the interface. The repredictions of these MPNN designs (default 20x per trajectory) are collected in the MPNN folder and subsequently filtered and classified into either rejected or accepted. Therefore, you will find potential designs in the rejected folder. The stats for these can be found in the mpnn_design_stats.csv file. You might want to look here and rank them yourself. Be aware that you will find two models per design (model 1, model 2), referring to two different repredictions of the same design. The better one of the two is saved.\r\n\r\nHope that helps!"
      },
      {
        "user": "bzhousd",
        "created_at": "2024-10-21T21:30:01Z",
        "body": "thank you for your reply.  It appears that adjustments to the default settings are necessary on my end. \r\n\r\nCurrently, the Accepted, Rejected, and MPNN folders are empty, with only a headline present in the mpnn_design_stats.csv file. There are 42 proteins in the Relax folder. However, when Bindcraft employs MPNN for designing non-interface sequences, none of the relaxed designs meet the AF2 filter criteria.  the original message is \"Base AF2 filters not passed for gd4h_l85_s653444_mpnn1, skipping interface scoring\".\r\n\r\nand  I also found bindcraft print out this message when it was done.\r\n\r\nThe ratio of successful designs is lower than defined acceptance rate! Consider changing your design settings!\r\nScript execution stopping...\r\nFinished all designs. Script execution for 52 trajectories took: 45 hours, 57 minutes, 33 seconds\r\n\r\nCould you give me some advices to adjust the setting? "
      },
      {
        "user": "sami-chaaban",
        "created_at": "2024-10-21T22:34:19Z",
        "body": "You can have it keep trying depsite the low acceptance rate by setting acceptance_rate to false (see #51 )"
      },
      {
        "user": "bzhousd",
        "created_at": "2024-10-21T23:39:42Z",
        "body": "I appreciate your suggestion. However, I've already executed Bindcraft for 45 hours on the H100 GPU. while acceptance_rate  could keep the program running , I'm considering reducing the filter's cutoff to generate some designs., but I'd like to lower filter's cutoff,  so that I can get some designs in MPNN step. "
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-22T05:43:16Z",
        "body": "BindCraft is computationally heavy, especially if your target+binder is large. Perhaps your input pdb is not trimmed well and results in overall low pLDDTs?"
      }
    ]
  },
  {
    "number": 55,
    "title": "Is this compatible with Mac GPU?",
    "created_at": "2024-10-16T07:59:27Z",
    "closed_at": "2024-10-16T08:04:25Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/55",
    "body": "Is this compatible with Mac GPU?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/55/comments",
    "author": "titocali1",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-16T08:03:10Z",
        "body": "No, only Nvidia CUDA compatible GPUs"
      },
      {
        "user": "titocali1",
        "created_at": "2024-10-16T08:04:25Z",
        "body": "Thanks a lot"
      }
    ]
  },
  {
    "number": 52,
    "title": "what is the minimum size of the design ",
    "created_at": "2024-10-15T20:13:24Z",
    "closed_at": "2024-10-16T08:03:28Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/52",
    "body": "I am not sure if any limit has been set for the minimum size of the design.\r\nIs that possible to design peptide-like binders?\r\nThanks!",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/52/comments",
    "author": "finexzhi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-15T20:22:38Z",
        "body": "Minimum is 4 amino acids"
      }
    ]
  },
  {
    "number": 51,
    "title": "Parameters to alter",
    "created_at": "2024-10-15T09:36:36Z",
    "closed_at": "2024-10-15T11:35:28Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/51",
    "body": "Hello,\r\n\r\nI've tried a few targets now and have failed to obtain binders with the default parameters. The PDL1 example works just fine, so it's not the installation as far as I can tell. What parameters would you recommend I play with?\r\n\r\nThanks!",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/51/comments",
    "author": "sami-chaaban",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-15T10:43:36Z",
        "body": "How many trajectories did you generate so far? Easy targets require about 200-300 trajectories, while hard targets might require more like 2000-3000/"
      },
      {
        "user": "sami-chaaban",
        "created_at": "2024-10-15T10:58:41Z",
        "body": "It's not clear to me how many trajectories it generates or how to specify this. My trajectory_stats.csv has between 18-80 rows."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-15T11:00:20Z",
        "body": "each row is one trajectory. You need to just keep it running longer probably"
      },
      {
        "user": "sami-chaaban",
        "created_at": "2024-10-15T11:25:30Z",
        "body": "The script seems to have finished in these cases. Is the workflow to keep re-running or is there a way to specify for it to run longer?"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-15T11:27:40Z",
        "body": "Just keep running or run parallel jobs into the same output folder. You can also reduce the acceptance_rate setting so it doesn't stop, or just set it to false"
      },
      {
        "user": "sami-chaaban",
        "created_at": "2024-10-15T11:32:34Z",
        "body": "Ok I'll try that, thanks!"
      }
    ]
  },
  {
    "number": 47,
    "title": "How to deal with files in the rejected folder?",
    "created_at": "2024-10-13T22:31:16Z",
    "closed_at": "2024-10-15T10:51:35Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/martinpacesa/BindCraft/issues/47",
    "body": "I assume these files were rejected because they did not pass the filter.\r\nBut why were they still saved in the folder?\r\nDo you think they are worth experimental examination?\r\nThanks!",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/47/comments",
    "author": "finexzhi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-14T07:31:22Z",
        "body": "In case you want to examine why they are failing and perhaps still use the for seeding new trajectories, but that is a feature that is coming next year."
      }
    ]
  },
  {
    "number": 46,
    "title": "Question on backprop",
    "created_at": "2024-10-13T19:40:37Z",
    "closed_at": "2024-10-15T10:51:35Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/martinpacesa/BindCraft/issues/46",
    "body": "Hello,\r\nI don't have any issues with the code, but I have a question about the pipeline. Generally, the term \"backpropagation\" is referred to as updating the weights of neurons to train the neural network. However, in this pipeline, it seems that the weights of the neurons only change in that AF2 selects one of the five different trained model weights in each iteration. The only variable that changes is the sequence to ensure that its complex with the target protein fits more the loss function after each iteration, but the weights do not change at all (asunder from what I mentioned of swapping among the 5 different model weights). Is that correct?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/46/comments",
    "author": "henrySmith659",
    "comments": [
      {
        "user": "sokrypton",
        "created_at": "2024-10-15T11:08:17Z",
        "body": "Generally the term \"backpropagation\" refers to propagating the error through the model and updating some parameters/weights. In this case the free parameters/weights are the input sequence of the binder, the rest of the alphafold parameters of the model are frozen (not updated)."
      }
    ]
  },
  {
    "number": 44,
    "title": "Failing due to lack of interface residues for mpnn fixed positions?",
    "created_at": "2024-10-11T16:29:16Z",
    "closed_at": "2024-10-21T20:02:07Z",
    "labels": [
      "bug"
    ],
    "url": "https://github.com/martinpacesa/BindCraft/issues/44",
    "body": "I had a job fail because I think the fixed_positions is empty. The error I got:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"bindcraft/BindCraft/bindcraft.py\", line 171, in <module>\r\n    mpnn_trajectories = mpnn_gen_sequence(trajectory_pdb, binder_chain, trajectory_interface_residues, advanced_settings)\r\n  File \"bindcraft/BindCraft/functions/colabdesign_utils.py\", line 357, in mpnn_gen_sequence\r\n    mpnn_model.prep_inputs(pdb_filename=trajectory_pdb, chain=design_chains, fix_pos=fixed_positions, rm_aa=advanced_settings[\"omit_AAs\"])\r\n  File \"bindcraft/BindCraftEnv/lib/python3.9/site-packages/colabdesign/mpnn/model.py\", line 81, in prep_inputs\r\n    p = prep_pos(fix_pos, **pdb[\"idx\"])[\"pos\"]\r\n  File \"bindcraft/BindCraftEnv/lib/python3.9/site-packages/colabdesign/shared/prep.py\", line 19, in prep_pos\r\n    if i[0].isalpha():\r\nIndexError: string index out of range\r\n```\r\n\r\nAnd the output for this ended with:\r\n```\r\nTrajectory successful, final pLDDT: 0.82\r\nStarting trajectory took: 0 hours, 42 minutes, 0 seconds\r\n\r\nFixing interface residues: \r\n```\r\n\r\nIs this happening because the predicted model has no interface residues?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/44/comments",
    "author": "jacknicoludis",
    "comments": [
      {
        "user": "finexzhi",
        "created_at": "2024-10-11T17:11:18Z",
        "body": "I think the trajectory run was successful.\r\n\r\n\"fixing\" here might mean \"not changing\"? And the interface residues will be those on the binder interface.\r\n\r\nI did not see any wrong here. You can check the accepted folder to find any hits that passed the filter."
      },
      {
        "user": "jacknicoludis",
        "created_at": "2024-10-11T18:02:25Z",
        "body": "Yes, I agree it was unsuccessful, but this is an error causing the process to crash. I would hope that the process would keep going to find a binder"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-14T07:32:24Z",
        "body": "That is strange, did the trajectory have no contacts with the target? Normally those should be excluded"
      },
      {
        "user": "Yutong0420",
        "created_at": "2024-11-24T15:30:35Z",
        "body": "Yeah I think I got the same problem：\r\n\r\nStarting trajectory took: 1 hours, 16 minutes, 9 seconds\r\nFixing interface residues:\r\nTraceback (most recent call last):\r\n  File \"/app/bindcraft.py\", line 172, in <module>\r\n    mpnn_trajectories = mpnn_gen_sequence(trajectory_pdb, binder_chain, trajectory_interface_residues, advanced_settings)\r\n  File \"/app/functions/colabdesign_utils.py\", line 357, in mpnn_gen_sequence\r\n    mpnn_model.prep_inputs(pdb_filename=trajectory_pdb, chain=design_chains, fix_pos=fixed_positions, rm_aa=advanced_settings[\"omit_AAs\"])\r\n  File \"/usr/local/lib/python3.10/dist-packages/colabdesign/mpnn/model.py\", line 81, in prep_inputs\r\n    p = prep_pos(fix_pos, **pdb[\"idx\"])[\"pos\"]\r\n  File \"/usr/local/lib/python3.10/dist-packages/colabdesign/shared/prep.py\", line 19, in prep_pos\r\n    if i[0].isalpha():\r\nIndexError: string index out of range\r\n"
      }
    ]
  },
  {
    "number": 43,
    "title": "Base AF2 filters not passed and OOM",
    "created_at": "2024-10-11T13:17:32Z",
    "closed_at": "2024-10-14T07:32:34Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/43",
    "body": "Hello,\r\n\r\nTrying to get new binder sequences. After a 10hr run, I still dont get Accepted design and it fails with OOM error. I see multiple message in log like this one:\r\n\r\n```\r\nTrajectory successful, final pLDDT: 0.75\r\nStarting trajectory took: 1 hours, 35 minutes, 13 seconds\r\n\r\nFixing interface residues: B1,B3,B4,B5,B6,B7,B9,B14,B15,B18,B19,B30,B33,B34,B37,B42,B43,B45,B46,B48,B49,B51,B52,B53,B54,B58,B59,B60,B61,B62,B63,B64,B65,B68,B69,B71,B72,B73,B75,B76\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nBase AF2 filters not passed for bctest_l93_s353310_mpnn1, skipping interface scoring\r\nNo accepted MPNN designs found for this trajectory.\r\nDesign and validation of trajectory IL2_l93_s353310 took: 0 hours, 9 minutes, 21 seconds\r\n\r\n```\r\n\r\nThe error in log is:\r\n```\r\nStage 1: Test Logits\r\n2024-10-10 20:52:13.892001: W external/xla/xla/service/hlo_rematerialization.cc:2218] Can't reduce memory use below 29.54GiB (31713951744 b\r\nytes) by rematerialization; only reduced to 30.12GiB (32346241902 bytes)\r\n2024-10-10 20:53:13.636531: W external/tsl/tsl/framework/bfc_allocator.cc:485] Allocator (GPU_0_bfc) ran out of memory trying to allocate 3\r\n0.13GiB (rounded to 32353028864)requested by op \r\n2024-10-10 20:53:13.638477: W external/tsl/tsl/framework/bfc_allocator.cc:497] ********_\r\n\r\n```\r\nI am running on a A100 GPU with 40Gb ram. I tested using 250Gb node ram allocation. Job details informs me that no more then 22GB of node ram is used and that 30Gb of GPU ram is used at most. \r\n\r\nFor the job, I am using default json files for filters and advance parameters (default_filters.json & 4stage_multimer.json). Could help me pinpoint parameters I should try testing out first to get BindCraft to predict new binders sequences.\r\n\r\nFor the memory error, I have seen that these parameters could help: num_seqs & sample_seq_parallel\r\n\r\nBut this wont help I think getting rid of `Base AF2 filters not passed ` error.\r\n\r\nThank you very much for your help,\r\nJF\r\n\r\n\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/43/comments",
    "author": "jflucier",
    "comments": [
      {
        "user": "jflucier",
        "created_at": "2024-10-11T13:21:33Z",
        "body": "Forgot to mention that I have successfully run the PDL1 example with my install\r\nThank you again for your help"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-11T13:35:43Z",
        "body": "How many trajectories have you sampled? It is recommended to sample at least 200 trajectories, for hard targets more like 2000"
      },
      {
        "user": "jflucier",
        "created_at": "2024-10-11T14:17:30Z",
        "body": "If I look at trajectory_stats.csv, there is only 4 trajectory detailled\r\n\r\nIn PLD1 example there is 126 trajectories defined in that file...\r\n\r\nThis confirms that something is wrong possibly with my input. I am in putting a pdb in complex with a receptor whereas the example file is a single protein. Could this be the problem?\r\n\r\nThe complex is composed of 4 chains, where A is the ligand and B,C and D are the target. In json, I specify \r\n`\"chains\": \"B,C,D\" `\r\n\r\nand some hotspots based on this complex \r\n`\"target_hotspot_residues\": \"B20,B88,B91,B92,C123,C126,C129,D42,D44,D45,D62\",`\r\n\r\nthanks for your awesome support.\r\n\r\n"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-11T14:26:01Z",
        "body": "How big are those three chains together? If they are bigger than 600 amino acids you simply might be running out of GPU memory and might need to trim it. Also, the bigger it is, the slower it runs."
      },
      {
        "user": "jflucier",
        "created_at": "2024-10-11T14:35:19Z",
        "body": "Think you got it... total size is 630 aa\r\n\r\nWill try to trim and retry. \r\n\r\nthanks again for your help"
      }
    ]
  },
  {
    "number": 41,
    "title": "Is that OK to use AlphaFold generated PDB as a template",
    "created_at": "2024-10-10T23:59:01Z",
    "closed_at": "2024-10-11T13:38:24Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/41",
    "body": "My target does not have a published PDB. Thus I used AlphaFold to generate a PDB as the template.\r\n\r\nHowever, after I ran the software, I continued to see the buffer error messages:\r\nBuffer 9:\r\n\t\tSize: 1.22GiB\r\n\t\tXLA Label: fusion\r\n\t\tShape: bf16[4,1130,1130,128]\r\n\t\t==========================\r\n\r\n\tBuffer 10:\r\n\t\tSize: 623.49MiB\r\n\t\tOperator: op_name=\"jit(_model)/jit(main)/transpose(jvp(jit(apply)))/jit(apply_fn)/alphafold/alphafold_iteration/evoformer/__layer_stack_no_state/while/body/checkpoint/rematted_computation/extra_msa_stack/triangle_multiplication_outgoing/projection/...a, ah->...h/dot_general[dimension_numbers=(((2,), (0,)), ((), ())) precision=None preferred_element_type=bfloat16]\" source_file=\"/content/colabdesign/af/alphafold/model/common_modules.py\" source_line=118\r\n\t\tXLA Label: custom-call\r\n\t\tShape: bf16[1276900,256]\r\n\t\t==========================\r\n\r\n\tBuffer 11:\r\n\t\tSize: 623.49MiB\r\n\t\tOperator: op_name=\"jit(_model)/jit(main)/transpose(jvp(jit(apply)))/jit(apply_fn)/alphafold/alphafold_iteration/evoformer/__layer_stack_no_state/while/body/checkpoint/rematted_computation/extra_msa_stack/triangle_multiplication_outgoing/div\" source_file=\"/content/colabdesign/af/alphafold/model/modules.py\" source_line=1038 deduplicated_name=\"input_transpose_fusion.31\"\r\n\t\tXLA Label: fusion\r\n\t\tShape: bf16[256,1130,1130]\r\n\t\t==========================\r\n\r\n\tBuffer 12:\r\n\t\tSize: 623.49MiB\r\n\t\tXLA Label: fusion\r\n\t\tShape: f32[1130,1130,128]\r\n\t\t==========================\r\n\r\n\tBuffer 13:\r\n\t\tSize: 623.49MiB\r\n\t\tOperator: op_name=\"jit(_model)/jit(main)/transpose(jvp(jit(apply)))/jit(apply_fn)/alphafold/alphafold_iteration/evoformer/__layer_stack_no_state/while/body/checkpoint/rematted_computation/extra_msa_stack/add\" source_file=\"/content/colabdesign/af/alphafold/model/modules.py\" source_line=73\r\n\t\tXLA Label: fusion\r\n\t\tShape: f32[1130,1130,128]\r\n\t\t==========================\r\n\r\n\tBuffer 14:\r\n\t\tSize: 623.49MiB\r\n\t\tOperator: op_name=\"jit(_model)/jit(main)/transpose(jvp(jit(apply)))/jit(apply_fn)/alphafold/alphafold_iteration/evoformer/__layer_stack_no_state_1/while/body/checkpoint/rematted_computation/evoformer_iteration/msa_row_attention_with_pair_bias/feat_2d_norm/feat_2d_norm/jit(_var)/sub\" source_file=\"/usr/local/lib/python3.10/dist-packages/haiku/_src/layer_norm.py\" source_line=166\r\n\t\tXLA Label: fusion\r\n\t\tShape: f32[1130,1130,128]\r\n\t\t==========================\r\n\r\n\tBuffer 15:\r\n\t\tSize: 623.49MiB\r\n\t\tEntry Parameter Subshape: f32[1130,1130,128]\r\n\t\t==========================",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/41/comments",
    "author": "finexzhi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-11T10:31:10Z",
        "body": "How big is the pdb you are inputting in amino acids? It is probably too big for your GPU memory, you may have to try it"
      },
      {
        "user": "finexzhi",
        "created_at": "2024-10-11T11:54:34Z",
        "body": "Thanks, Martin. You are giving the right direction to solve this problem.\r\nThe protein is about 1000 amino acids. But I have defined the hot spot residues to be the first 100 amino acids.\r\nI thought the software will only take it as a 100-aa-long target. But I could be wrong.\r\n"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-11T12:05:12Z",
        "body": "It takes the whole pdb you provide as input"
      },
      {
        "user": "finexzhi",
        "created_at": "2024-10-11T12:27:02Z",
        "body": "Thanks, Martin. That is very important information to me. :)\r\nI have used the notepad to modify the original PDB to a new one containing a smaller part of before.\r\nNow it is working. Thank you. "
      }
    ]
  },
  {
    "number": 40,
    "title": "How to resume the computation in the colab?",
    "created_at": "2024-10-10T13:10:09Z",
    "closed_at": "2024-10-11T13:38:37Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/40",
    "body": "I ran the computation to the 4th stage of \"run BindCraft\" . However, it was stopped because my computer went to sleep.\r\n\r\nAs such, I could not run the next step \"consolidate and rank designs\".\r\n\r\nIs that anyway to resume the computation from where I left? Or I have to start over.\r\n\r\nThanks!\r\n\r\nI am using colab pro+.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/40/comments",
    "author": "finexzhi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-10T16:08:52Z",
        "body": "Since the data is saved on your google drive, you can just start it again and as long as it points to the same output folder it will continue doing the designs. Note, the cosolidate and rank designs part will only start automatically once sufficient number of designs have passed the filters (100 by defualt). This can take a long time depending on your target size, generally you need to generate like 500-3000 trajectories to get 100 that pass the filters. However, if less is okay for you, then you can stop the design loop cell and just run consolidate and rank designs. You can also continue any time and consolidate again, the pipeline is designed in a way that you can always generate more designs and it does not \"break\" anything."
      },
      {
        "user": "finexzhi",
        "created_at": "2024-10-10T16:30:44Z",
        "body": "Thanks for the clarification. It is very clear now that the newly found hits were stored under the project folder. We can always run the software to search the sequence universe to find potentially better hits. I know this could be a random process. But when I start a new round of run, how can the software know which space it has already searched?"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-10T16:32:50Z",
        "body": "Based on the filename, that's why we include the binder length and seed number which is what in an oversimplified manner \"roughly\" determines the search space."
      }
    ]
  },
  {
    "number": 39,
    "title": "scientific question",
    "created_at": "2024-10-10T06:29:27Z",
    "closed_at": "2024-10-10T07:29:30Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/39",
    "body": "does it work for the ligands protein design？ to detecte the ligands or chemical？",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/39/comments",
    "author": "GanQiao1990",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-10T06:32:12Z",
        "body": "No, only with proteins or peptides."
      },
      {
        "user": "GanQiao1990",
        "created_at": "2024-10-10T06:32:51Z",
        "body": "could you add some function, guys？"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-10T06:48:39Z",
        "body": "Unforrunately AlphaFold2 which is the main part of the software only runs on proteins."
      }
    ]
  },
  {
    "number": 36,
    "title": "any recommended workstation or laptop to run BindCraft",
    "created_at": "2024-10-09T17:00:01Z",
    "closed_at": "2024-10-09T17:26:57Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/36",
    "body": "I see some workstations but built with only 12-16GB of GPU.\r\nThanks!",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/36/comments",
    "author": "finexzhi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-09T17:08:26Z",
        "body": "I guess the answer is, if it runs for your target then it's okay :D however, the big downside of BindCraft is that the GPU memory requirements scale quickly with target+binder size, so with 16 Gb you might only be able to design for 350 amino acids, that's binder+target combined, which is very small in most applications. For most of the time we got away with 32 Gb GPUs but there are some targets that cannot be trimmed efficiently to that size. There is always the option of running it on colab pro subscription with A100 gpus, since the design data is saved on your google drive, you can just keep running it again and again"
      },
      {
        "user": "finexzhi",
        "created_at": "2024-10-09T17:25:48Z",
        "body": "Thanks, Martin. Good point and suggestions. :)\r\nSubscription of google Colab pro is definitely the best pathway for me now. \r\n"
      }
    ]
  },
  {
    "number": 33,
    "title": "Provide initial binder structure",
    "created_at": "2024-10-09T12:10:33Z",
    "closed_at": "2024-10-09T15:51:23Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/33",
    "body": "is there the possibility to provide an initial binder structure in the input pdb, and follow the workflow for the optimization?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/33/comments",
    "author": "dgranata",
    "comments": [
      {
        "user": "LennartNickel",
        "created_at": "2024-10-09T15:21:49Z",
        "body": "Unfortunately that is not yet implemented."
      }
    ]
  },
  {
    "number": 32,
    "title": "versions of packages",
    "created_at": "2024-10-09T08:33:45Z",
    "closed_at": "2024-10-14T07:32:45Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/32",
    "body": "Hello!\r\nI am using BindCraft locally and I am often getting errors due to the version of the different packages needed (I opened an issue about it yesterday and few days ago).\r\nThis time the problem comes from mk_mpnn_model (mpnn_model = mk_mpnn_model(backbone_noise=advanced_settings[\"backbone_noise\"], model_name=advanced_settings[\"model_path\"], weights=advanced_settings[\"mpnn_weights\"])\r\nTypeError: __init__() got an unexpected keyword argument 'weights')\r\n\r\nIn order to avoid to constantly annoy you with these questions, would it be possible to have the versions of all the required packages? I think this might help other users as well.\r\n\r\nThanks and best regards\r\nIrene",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/32/comments",
    "author": "GEC-git",
    "comments": [
      {
        "user": "LennartNickel",
        "created_at": "2024-10-09T15:22:31Z",
        "body": "Absolutely, we will update the install script asap. "
      },
      {
        "user": "LennartNickel",
        "created_at": "2024-10-09T15:35:42Z",
        "body": "For your error with the weights argument, please try to upgrade the colabdesign version to 1.1.2 as described here: #28 \r\nLet us know if that helps!"
      }
    ]
  },
  {
    "number": 31,
    "title": "multiple target chains",
    "created_at": "2024-10-08T17:15:58Z",
    "closed_at": "2024-10-08T18:46:13Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/31",
    "body": "Hi\r\n\r\nfor the target_settings json. How can we specifiy multiple chains?\r\n\r\nIn PDL1 its only 1 chain:\r\n\r\n> {\r\n>     \"design_path\": \"/content/drive/My Drive/BindCraft/PDL1/\",\r\n>     \"binder_name\": \"PDL1\",\r\n>     \"starting_pdb\": \"/content/bindcraft/example/PDL1.pdb\",\r\n>     **\"chains\": \"A\",**\r\n>     \"target_hotspot_residues\": \"56\",\r\n>     \"lengths\": [65, 150],\r\n>     \"number_of_final_designs\": 100\r\n> }\r\n\r\nIf my pdb is a complex, how can I specifiy that my target is chain B, C and D in json file?\r\n\r\nThank you in advance for your help,\r\nJF\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/31/comments",
    "author": "jflucier",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-08T17:18:57Z",
        "body": "\"chains\": \"A,B,C,D\","
      },
      {
        "user": "jflucier",
        "created_at": "2024-10-08T18:46:13Z",
        "body": "thank you very much for quick response!"
      }
    ]
  },
  {
    "number": 30,
    "title": "Biopython issue with module three_to_one",
    "created_at": "2024-10-08T14:48:57Z",
    "closed_at": "2024-10-08T14:51:17Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/30",
    "body": "Hello,\r\n\r\nWhich version of Biopython should be installed? I am running BindCraft locally and I end up with an attribute error: AttributeError: module 'Bio.PDB.Polypeptide' has no attribute 'three_to_one'\r\n\r\nThanks for the help,\r\nBest\r\nIrene",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/30/comments",
    "author": "GEC-git",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-08T14:51:17Z",
        "body": "You need version 1.78. I will update the repo next week to work with newer versions of biopython"
      }
    ]
  },
  {
    "number": 29,
    "title": "Allow working directory to be outside of repo for bindcraft.py",
    "created_at": "2024-10-08T14:34:59Z",
    "closed_at": "2024-10-14T08:01:47Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/pull/29",
    "body": "Hello,\r\nThank you for open sourcing this library! I'm eager to try it out.\r\n\r\nCurrently the bindcraft.py script expects you to be in the repo directory when you run it. You can instead get the scripts directory from the __file__ variable, enabling the ability to run it from outside the repo directory.\r\n\r\nCheers.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/29/comments",
    "author": "danpf",
    "comments": [
      {
        "user": "RHoejland",
        "created_at": "2024-10-11T11:04:01Z",
        "body": "Wouldn't it be better to simply exclude the lines, and add the paths to the advanced_settings.json file instead? I don't quite understand why they're being appended to the dict at runtime instead of being part of the settings. It could be made such that these set the default value, if the setting is not included. "
      },
      {
        "user": "danpf",
        "created_at": "2024-10-11T17:23:26Z",
        "body": "If that's something Martin would like it can be changed. I just tried to make the smallest change possible. "
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-14T07:30:14Z",
        "body": "The choice to put them in the main file was so that it is comaptible with the Colab as well as local installation, and the user has to specifiy the minimum amount of settings manually."
      }
    ]
  },
  {
    "number": 27,
    "title": "Colab misses 4stage_multimer_beta.json for beta-sheet option",
    "created_at": "2024-10-08T07:25:16Z",
    "closed_at": "2024-10-08T08:06:59Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/27",
    "body": "Hi Martin,\r\n\r\nthanks for the great Colab!\r\n\r\nUnfortunately, the colab seems to miss a file for the beta-sheet mode. It throws: FileNotFoundError: [Errno 2] No such file or directory: '/content/bindcraft/settings_advanced/4stage_multimer_beta.json'\r\n\r\nBest,\r\n\r\nJens",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/27/comments",
    "author": "QuantitativeVirology",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-08T08:06:59Z",
        "body": "Thank you for the report! I fixed it now"
      }
    ]
  },
  {
    "number": 26,
    "title": "unused config `extract_interfaces`",
    "created_at": "2024-10-08T07:20:22Z",
    "closed_at": "2024-10-08T08:10:33Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/26",
    "body": "First, thanks for creating this tool!  Very helpful to the community.\r\n\r\nMy question: `extract_interfaces` seems not used either in BindCraft or in ColabDesign?  From the description, it seems a useful util function",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/26/comments",
    "author": "pagpires",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-08T08:10:33Z",
        "body": "Thanks for the catch! This was a feature that was removed for the initial release as it was not performing very consistently for interface analysis, I will reimplement this at a later date."
      }
    ]
  },
  {
    "number": 25,
    "title": "How long does this usually take on an A100?",
    "created_at": "2024-10-08T03:10:48Z",
    "closed_at": "2024-10-09T08:19:30Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/25",
    "body": "To find binders for a well folded, 25kDa soluble domain enzyme?  How long should I expect this to run?  Is there some point where it automatically stops?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/25/comments",
    "author": "utimcraig",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-08T08:14:39Z",
        "body": "It stop when:\r\n\r\n1. the number of specified final designs passes filters\r\n2. the number of rejected designs is higher than the acceptence rate specified in the settings (5%).\r\n\r\nThe run time depends on your target size, the bigger the longer it will run so it is difficult to say. However, you can monitor the progress of passing designs in the final_designs_stats.csv and the passing designs are located in the Accepted folder."
      },
      {
        "user": "LennartNickel",
        "created_at": "2024-10-08T09:39:46Z",
        "body": "One quick note on that: Every target and cluster/workstation is different, which is why its hard to predict how long it will take to get enough passing designs! For some targets, you will get a good amount of passing designs in some hours (for us e.g. PDL1, EGFR). However, this is a rare case. Usually sampling overnight on a few GPUs (on our systems) is sufficient to get enough designs to make a selection for experimental validation. However, there are cases where you have to sample a lot more to get a few designs passing filters, and its not given that you find hits for every protein at all!"
      },
      {
        "user": "nfloquet",
        "created_at": "2024-10-08T10:58:18Z",
        "body": "On local machines (local GPUs), to avoid memory problems, does it make sense to limit the structure of the target to the binder's expected pocket ?"
      },
      {
        "user": "LennartNickel",
        "created_at": "2024-10-08T11:15:14Z",
        "body": "Generally yes, but be careful not to open the hydrophobic core too much as the binders will then be preferentially placed there. Unfortunately, for some proteins (especially some transporters, ion channels, GPCRs, etc.) that do not have a well-defined/separated extracellular domain or where the binding site is well integrated into the protein, it can be difficult to find a good starting point. In this case, it is worth doing some shorter test runs with different settings (especially different cropping, different hotspots) to find a working setup. It is not necessary to wait for accepted designs during these test runs. Simply look at the sampled trajectories and check whether the desired binding mode is achieved."
      },
      {
        "user": "utimcraig",
        "created_at": "2024-10-08T14:02:01Z",
        "body": "I was doing a test on the A100 collab environment with a small soluble protein (25kDa) and found 2 \"successful\" binders after about 8 hours as a data point."
      }
    ]
  },
  {
    "number": 24,
    "title": "Binders binding to the cell membrane internal chains",
    "created_at": "2024-10-07T18:16:11Z",
    "closed_at": "2024-10-09T15:51:34Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/24",
    "body": "I specify hotspots that are outside the cell membrane part of the target, but the binder seems to be binding mostly to the part of the target that's embedded in the cell membrane. \r\n\r\nAre there config options that would filter those out? ",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/24/comments",
    "author": "dionjwa",
    "comments": [
      {
        "user": "finexzhi",
        "created_at": "2024-10-07T18:51:47Z",
        "body": "That is what I am thinking of a negative design to avoid the common epitopes and undesirable domains. But still if you increase the design numbers, you should be able to get enough hits to your ECD or extracellular loops."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-08T08:12:25Z",
        "body": "Unfortunately not at this time. The best course of action is to trim the transmembrane segments away from the input .PDB. It will always preferentially bind to the transmembrane regions as they are hydrophobic."
      }
    ]
  },
  {
    "number": 22,
    "title": "specification of the number of GPUs",
    "created_at": "2024-10-07T12:47:49Z",
    "closed_at": "2024-10-08T08:04:36Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/22",
    "body": "Is it possible to specify the number of GPUs without using `Slurm` when running `bindcraft.py`?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/22/comments",
    "author": "komatsuna-san",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-07T13:52:29Z",
        "body": "It only runs on 1 GPU at a time but you can run multiple instances of the pipeline in parallel and point to the same output folder to speed it up."
      },
      {
        "user": "finexzhi",
        "created_at": "2024-10-07T15:31:37Z",
        "body": "I am assuming that Slurm can do the parallel computation."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-07T15:33:35Z",
        "body": "You can use slurm to launch multiple jobs. You can also just open multiple command line instances and run the python if you have multiple GPUs."
      }
    ]
  },
  {
    "number": 21,
    "title": "GPU Setup",
    "created_at": "2024-10-07T12:34:11Z",
    "closed_at": "2024-10-08T08:04:30Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/21",
    "body": "What is your recommended hardware to run this? Do we need a single GPU with 32+ GB of memory or can his be parallelized on several GPUs?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/21/comments",
    "author": "GoldEagle93",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-07T13:51:15Z",
        "body": "BindCraft can only use one GPU at a time but of course you can run multiple instances of the pipeline  pointing to the same output folder to \"paralelise\" it, I wrote it in a way that it doesn't clash. In terms of GPU types, memory allows you to work with bigger targets, 32 Gb will allow you to design for about 500 amino acids of combined target+binder size. 80 Gb will allow for about 900 amino acids."
      },
      {
        "user": "GoldEagle93",
        "created_at": "2024-10-07T14:29:38Z",
        "body": "Thank you. May I ask what GPU you used for testing this? There are very few options with so much memory."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-07T14:31:15Z",
        "body": "We tried on V100, A100, L40s, and H100. Again, you only need so much memory if you want to run this size of complexes, if you trim it and run smaller then it will easily run on 4080s."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-07T14:31:46Z",
        "body": "In theory it also just runs on CPU and RAM but it's very very very slow."
      }
    ]
  },
  {
    "number": 20,
    "title": "BrokenPipeError: [Errno 32] Broken pipe",
    "created_at": "2024-10-07T12:17:33Z",
    "closed_at": "2024-10-08T12:41:35Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/20",
    "body": "As shown in Tital. When i run a test for bindcraft, it will stop by this error.\r\nhere is the whole message:\r\n\r\nTrajectory successful, final pLDDT: 0.87\r\n** MovieWriter stderr: **\r\n[libopenh264 @ 0x6259495b54c0] Incorrect library version loaded\r\nError initializing output stream 0:0 -- Error while opening encoder for output stream #0:0 - maybe incorrect parameters such as bit_rate, rate, width or height\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/animation.py\", line 223, in saving\r\n    yield self\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/animation.py\", line 1089, in save\r\n    writer.grab_frame(**savefig_kwargs)\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/animation.py\", line 351, in grab_frame\r\n    self.fig.savefig(self._proc.stdin, format=self.frame_format,\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/figure.py\", line 3395, in savefig\r\n    self.canvas.print_figure(fname, **kwargs)\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/backend_bases.py\", line 2204, in print_figure\r\n    result = print_method(\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/backend_bases.py\", line 2054, in <lambda>\r\n    print_method = functools.wraps(meth)(lambda *args, **kwargs: meth(\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/backends/backend_agg.py\", line 435, in print_raw\r\n    fh.write(renderer.buffer_rgba())\r\nBrokenPipeError: [Errno 32] Broken pipe\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/weilab/BindCraft/./bindcraft.py\", line 108, in <module>\r\n    trajectory = binder_hallucination(design_name, target_settings[\"starting_pdb\"], target_settings[\"chains\"],\r\n  File \"/home/weilab/BindCraft/functions/colabdesign_utils.py\", line 227, in binder_hallucination\r\n    plots = af_model.animate(dpi=150)\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/colabdesign/af/utils.py\", line 118, in animate\r\n    return make_animation(**sub_traj, pos_ref=pos_ref, length=self._lengths,\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/colabdesign/shared/plot.py\", line 336, in make_animation\r\n    return ani.to_html5_video()\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/animation.py\", line 1269, in to_html5_video\r\n    self.save(str(path), writer=writer)\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/animation.py\", line 1089, in save\r\n    writer.grab_frame(**savefig_kwargs)\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/contextlib.py\", line 137, in __exit__\r\n    self.gen.throw(typ, value, traceback)\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/animation.py\", line 225, in saving\r\n    self.finish()\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/site-packages/matplotlib/animation.py\", line 340, in finish\r\n    raise subprocess.CalledProcessError(\r\nsubprocess.CalledProcessError: Command '['ffmpeg', '-f', 'rawvideo', '-vcodec', 'rawvideo', '-s', '1200x900', '-pix_fmt', 'rgba', '-framerate', '16.666666666666668', '-loglevel', 'error', '-i', 'pipe:', '-vcodec', 'h264', '-pix_fmt', 'yuv420p', '-y', '/tmp/tmppb6wuo_j/temp.m4v']' returned non-zero exit status 1.\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/20/comments",
    "author": "zengdashi",
    "comments": [
      {
        "user": "zengdashi",
        "created_at": "2024-10-07T12:54:21Z",
        "body": "I tried to install libopen264-6 using apt-get, but still have this problem\r\nhere is my system info：\r\nubuntu 22.04, \r\ncuda version 12.2\r\ngcc version 11.4\r\n"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-07T13:53:25Z",
        "body": "Hmm, seems like you dont have ffmpeg maybe installed? As a workaround you can disable save_animation in advanced settings json"
      },
      {
        "user": "sami-chaaban",
        "created_at": "2024-10-07T16:37:45Z",
        "body": "I think you mean save_design_animations? I am also troubleshooting a \"Requested MovieWriter (ffmpeg) not available\" error and for now have disabled the animations."
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-07T16:43:50Z",
        "body": "Yeah that setting. I think in both cases it is the lack of codec to convert the animation into a movie. It's not needed though, just fancy movie to show in group meeting :D"
      },
      {
        "user": "zengdashi",
        "created_at": "2024-10-08T02:23:00Z",
        "body": "Thanks for your advice\r\nI tried to disable __save_design_animations__, but a new problem appeared:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/weilab/BindCraft/./bindcraft.py\", line 380, in <module>\r\n    shutil.copy(os.path.join(design_paths[\"Trajectory/Animation\"], f\"{design_name}.html\"), accepted_animation)\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/shutil.py\", line 427, in copy\r\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\r\n  File \"/home/weilab/miniconda3/envs/BinderCraft/lib/python3.9/shutil.py\", line 264, in copyfile\r\n    with open(src, 'rb') as fsrc:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/home/weilab/BindCraft/B2M/Trajectory/Animation/B2M_l141_s363892.html'\r\n\r\nIt seems animations are used in some of the subsequent steps.\r\nAnd I check if I have __ffmpeg__ installed, here is the info: \r\n(base) weilab@weilab-desktop:~/BindCraft$ ffmpeg \r\nffmpeg version 4.3 Copyright (c) 2000-2020 the FFmpeg developers\r\n  built with gcc 7.3.0 (crosstool-NG 1.23.0.449-a04d0)\r\n  configuration: --prefix=/opt/conda/conda-bld/ffmpeg_1597178665428/_h_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh --cc=/opt/conda/conda-bld/ffmpeg_1597178665428/_build_env/bin/x86_64-conda_cos6-linux-gnu-cc --disable-doc --disable-openssl --enable-avresample --enable-gnutls --enable-hardcoded-tables --enable-libfreetype --enable-libopenh264 --enable-pic --enable-pthreads --enable-shared --disable-static --enable-version3 --enable-zlib --enable-libmp3lame\r\n  libavutil      56. 51.100 / 56. 51.100\r\n  libavcodec     58. 91.100 / 58. 91.100\r\n  libavformat    58. 45.100 / 58. 45.100\r\n  libavdevice    58. 10.100 / 58. 10.100\r\n  libavfilter     7. 85.100 /  7. 85.100\r\n  libavresample   4.  0.  0 /  4.  0.  0\r\n  libswscale      5.  7.100 /  5.  7.100\r\n  libswresample   3.  7.100 /  3.  7.100\r\nHyper fast Audio and Video encoder\r\nusage: ffmpeg [options] [[infile options] -i infile]... {[outfile options] outfile}...\r\n\r\nshould I reinstall the ffmpeg to fix this problem?"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-08T08:18:43Z",
        "body": "Ah no, this is indeed a bug. I just pushed a fix to bindcraft.py main running file, redownload it from the github and now the save_design_animations = False should actually work"
      }
    ]
  },
  {
    "number": 18,
    "title": "I tried using the pipeline for my design however, I am encountering this error",
    "created_at": "2024-10-07T00:26:24Z",
    "closed_at": "2024-10-08T08:03:19Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/18",
    "body": "I am getting similar issue of floating point error and tried the methods stated but it isnt working. I am also getting this issue:\r\ndash 2.15.0 requires requests, which is not installed.\r\nflask 3.0.2 requires click>=8.1.3, which is not installed.\r\nflask 3.0.2 requires Jinja2>=3.1.2, which is not installed.\r\nipython 8.18.1 requires decorator, which is not installed.\r\n\r\n\r\n\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/18/comments",
    "author": "zarbuk",
    "comments": [
      {
        "user": "finexzhi",
        "created_at": "2024-10-07T15:29:53Z",
        "body": "For any modules are missing, you can easily use ChatGPT to ask \"install dash 2.15.0 to Ubuntu/Linux (for example)'. You will be instructed to install the required modules."
      }
    ]
  },
  {
    "number": 17,
    "title": "Do I have to use NVDIA GPU?",
    "created_at": "2024-10-06T23:18:12Z",
    "closed_at": "2024-10-08T08:03:08Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/17",
    "body": "The software asks for JAX [CUBA]. It seems that I had to install NVDIA drivers.\r\nThanks!",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/17/comments",
    "author": "finexzhi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-07T05:22:53Z",
        "body": "Yes, the software requires an NVIDIA GPU"
      },
      {
        "user": "ajasja",
        "created_at": "2024-10-07T07:17:13Z",
        "body": "I guess you can run jax and pytorch etc without a GPU, but it would be painfully slow? "
      }
    ]
  },
  {
    "number": 16,
    "title": "seems there is compatibility issue using conda on MacOS M1",
    "created_at": "2024-10-06T21:44:04Z",
    "closed_at": "2024-10-08T08:02:57Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/16",
    "body": "Hello all, there is the error as shown below. It is run on MacOS M1 system. Not sure if it is better to run on Linux system. thanks a lot. \r\njax, jaxlib==0.4.13\r\npython 3.8\r\n\r\n(myenv) XX@ BindCraft % python -u /Users/Documents/BindCraft/bindcraft.py --settings 'path/to/settings_target/.json' --filters 'path/to/settings_filters/.json' --advanced 'path/to/settings_advanced/.json'\r\nTraceback (most recent call last):\r\n  File \"/Users/Documents/BindCraft/bindcraft.py\", line 5, in <module>\r\n    from functions import *\r\n  File \"/Users/Documents/BindCraft/functions/__init__.py\", line 12, in <module>\r\n    from .colabdesign_utils import *\r\n  File \"/Users/Documents/BindCraft/functions/colabdesign_utils.py\", line 11, in <module>\r\n    from colabdesign import mk_afdesign_model, clear_mem\r\n  File \"/opt/homebrew/anaconda3/envs/myenv/lib/python3.8/site-packages/colabdesign/__init__.py\", line 10, in <module>\r\n    from colabdesign.af.model import mk_af_model\r\n  File \"/opt/homebrew/anaconda3/envs/myenv/lib/python3.8/site-packages/colabdesign/af/__init__.py\", line 10, in <module>\r\n    from colabdesign.af.model import mk_af_model\r\n  File \"/opt/homebrew/anaconda3/envs/myenv/lib/python3.8/site-packages/colabdesign/af/model.py\", line 7, in <module>\r\n    from colabdesign.af.alphafold.model import data, config, model, all_atom\r\n  File \"/opt/homebrew/anaconda3/envs/myenv/lib/python3.8/site-packages/colabdesign/af/alphafold/model/data.py\", line 20, in <module>\r\n    from colabdesign.af.alphafold.model import utils\r\n  File \"/opt/homebrew/anaconda3/envs/myenv/lib/python3.8/site-packages/colabdesign/af/alphafold/model/utils.py\", line 23, in <module>\r\n    import haiku as hk\r\n  File \"/opt/homebrew/anaconda3/envs/myenv/lib/python3.8/site-packages/haiku/__init__.py\", line 19, in <module>\r\n    from haiku import data_structures\r\n  File \"/opt/homebrew/anaconda3/envs/myenv/lib/python3.8/site-packages/haiku/data_structures.py\", line 18, in <module>\r\n    from haiku._src.data_structures import to_haiku_dict\r\n  File \"/opt/homebrew/anaconda3/envs/myenv/lib/python3.8/site-packages/haiku/_src/data_structures.py\", line 30, in <module>\r\n    from haiku._src import utils\r\n  File \"/opt/homebrew/anaconda3/envs/myenv/lib/python3.8/site-packages/haiku/_src/utils.py\", line 42, in <module>\r\n    def auto_repr(cls: type[Any], *args, **kwargs) -> str:\r\nTypeError: 'type' object is not subscriptable\r\n\r\n\r\n",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/16/comments",
    "author": "biocatchen",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-07T05:23:40Z",
        "body": "The software is configured to run on an NVIDIA GPU, I am not quite sure it will run on an M1 mac, and if yes then it would be incredibly slow"
      },
      {
        "user": "biocatchen",
        "created_at": "2024-10-08T13:56:16Z",
        "body": "> The software is configured to run on an NVIDIA GPU, I am not quite sure it will run on an M1 mac, and if yes then it would be incredibly slow\r\n\r\nGood to know. Thanks for the comments. \r\nWhen running on Colab, the execution often gets interrupted midway in many trials. Is there a way to resume the run without starting over? Thank you!"
      },
      {
        "user": "martinpacesa",
        "created_at": "2024-10-08T14:10:14Z",
        "body": "Yes, since the data is saved on your google drive, you can just point it to the same output folder again and it will continue"
      }
    ]
  },
  {
    "number": 14,
    "title": "af_params_dir in settings_advanced",
    "created_at": "2024-10-05T15:29:34Z",
    "closed_at": "2024-10-07T05:24:28Z",
    "labels": [
      "documentation"
    ],
    "url": "https://github.com/martinpacesa/BindCraft/issues/14",
    "body": "As a test, I added `\"af_params_dir\": \"/path/to/params\"` to `4stage_multimer.json` in an attempt to make the `AF weights` located in any directory recognizable. \r\nHowever, I received the following warning and the job did not execute. (It works normally when I place `params` within the repository and run `bindcraft.py` inside the repository.)\r\n\r\n```log\r\nStarting trajectory: PDL1_l116_s500265\r\nWARNING: 'model_1_multimer_v3' not found\r\nWARNING: 'model_2_multimer_v3' not found\r\nWARNING: 'model_3_multimer_v3' not found\r\nWARNING: 'model_4_multimer_v3' not found\r\nWARNING: 'model_5_multimer_v3' not found\r\n```\r\n\r\nHas anyone managed to get this setting to function properly?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/14/comments",
    "author": "komatsuna-san",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-05T15:31:31Z",
        "body": "Yeah, the path actually needs to point to the **parent** directory of params, so in that case it would be `/path/to/`"
      }
    ]
  },
  {
    "number": 9,
    "title": "how to find the path to \"package manager installation\"",
    "created_at": "2024-10-04T01:33:47Z",
    "closed_at": "2024-10-04T08:13:37Z",
    "labels": [
      "duplicate"
    ],
    "url": "https://github.com/martinpacesa/BindCraft/issues/9",
    "body": "Then navigate into your install folder using cd and run the installation code. In pkg_manager specify whether you are using 'mamba' or 'conda' and **in the conda_env specify the path to your package manger installation. For example: /path/to/mambaforge/**\r\n\r\nbash install_bindcraft.sh --pkg_manager 'mamba' --conda_env '/path/to/mambaforge/'\r\n\r\nI am confused about ' /path/to/mambaforge/'. Do I need to find the location of my package manager installation?\r\n\r\nThanks.",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/9/comments",
    "author": "finexzhi",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-04T08:13:37Z",
        "body": "Hi,\r\n\r\nyes, that would be the path to your package manager installation. However, this is actually a left over from a previous version and is not needed anymore, I just updated the installation script to remove that."
      }
    ]
  },
  {
    "number": 4,
    "title": "ValueError: RGBA values should be within 0-1 range",
    "created_at": "2024-10-02T22:13:42Z",
    "closed_at": "2024-10-03T06:36:50Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/4",
    "body": "Hey, \r\nsorry, but I ran into another issue when running the provided example. Stage 4 finishes, but then I get the following: \r\n\r\nTrajectory successful, final pLDDT: 0.74\r\nTraceback (most recent call last):\r\n  File \"/home/joe/Software/BindCraft/bindcraft.py\", line 108, in <module>\r\n    trajectory = binder_hallucination(design_name, target_settings[\"starting_pdb\"], target_settings[\"chains\"],\r\n  File \"/home/joe/Software/BindCraft/functions/colabdesign_utils.py\", line 227, in binder_hallucination\r\n    plots = af_model.animate(dpi=150)\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/colabdesign/af/utils.py\", line 118, in animate\r\n    return make_animation(**sub_traj, pos_ref=pos_ref, length=self._lengths,\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/colabdesign/shared/plot.py\", line 303, in make_animation\r\n    ims[-1].append(plot_pseudo_3D(pos[k], c=plddt[k], Ls=Ls, cmin=0.5, cmax=0.9, **flags))\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/colabdesign/shared/plot.py\", line 177, in plot_pseudo_3D\r\n    lines = mcoll.LineCollection(seg_xy[order], colors=colors[order], linewidths=linewidths,\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/matplotlib/collections.py\", line 1393, in __init__\r\n    super().__init__(\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/matplotlib/collections.py\", line 206, in __init__\r\n    self._internal_update(kwargs)\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/matplotlib/artist.py\", line 1216, in _internal_update\r\n    return self._update_props(\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/matplotlib/artist.py\", line 1192, in _update_props\r\n    ret.append(func(v))\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/matplotlib/collections.py\", line 1463, in set_color\r\n    self.set_edgecolor(c)\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/matplotlib/collections.py\", line 834, in set_edgecolor\r\n    self._set_edgecolor(c)\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/matplotlib/collections.py\", line 813, in _set_edgecolor\r\n    self._edgecolors = mcolors.to_rgba_array(c, self._alpha)\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/matplotlib/colors.py\", line 476, in to_rgba_array\r\n    raise ValueError(\"RGBA values should be within 0-1 range\")\r\nValueError: RGBA values should be within 0-1 range\r\n\r\nDid anyone else encounter this?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/4/comments",
    "author": "joerloeffler",
    "comments": [
      {
        "user": "sokrypton",
        "created_at": "2024-10-03T04:30:42Z",
        "body": "Can you try downgrade matplotlib?\r\n```pip install matplotlib==3.7.1```"
      },
      {
        "user": "joerloeffler",
        "created_at": "2024-10-03T06:04:03Z",
        "body": "Thank you for pointing this out! with the downgrade the code runs! Thank you @sokrypton "
      }
    ]
  },
  {
    "number": 3,
    "title": "TypeError: Cannot convert numpy.ndarray to numpy.ndarray",
    "created_at": "2024-10-02T19:47:29Z",
    "closed_at": "2024-10-03T06:37:12Z",
    "labels": [],
    "url": "https://github.com/martinpacesa/BindCraft/issues/3",
    "body": "hey, \r\nafter following the steps of reinstalling pyrosetta, I ended up with the following error message when trying to rerun the example locally.\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/joe/Software/BindCraft/./bindcraft.py\", line 52, in <module>\r\n    create_dataframe(trajectory_csv, trajectory_labels)\r\n  File \"/home/joe/Software/BindCraft/functions/generic_utils.py\", line 262, in create_dataframe\r\n    df = pd.DataFrame(columns=columns)\r\n  File \"/home/mojoe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/pandas/core/frame.py\", line 876, in __init__\r\n    mgr = dict_to_mgr(\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/pandas/core/internals/construction.py\", line 443, in dict_to_mgr\r\n    arrays = Series(data, index=columns, dtype=object)\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/pandas/core/series.py\", line 490, in __init__\r\n    index = ensure_index(index)\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/pandas/core/indexes/base.py\", line 7647, in ensure_index\r\n    return Index(index_like, copy=copy, tupleize_cols=False)\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/pandas/core/indexes/base.py\", line 565, in __new__\r\n    arr = sanitize_array(data, None, dtype=dtype, copy=copy)\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/pandas/core/construction.py\", line 654, in sanitize_array\r\n    subarr = maybe_convert_platform(data)\r\n  File \"/home/joe/miniforge3/envs/BindCraft/lib/python3.9/site-packages/pandas/core/dtypes/cast.py\", line 138, in maybe_convert_platform\r\n    arr = lib.maybe_convert_objects(arr)\r\n  File \"lib.pyx\", line 2538, in pandas._libs.lib.maybe_convert_objects\r\nTypeError: Cannot convert numpy.ndarray to numpy.ndarray\r\n\r\nThank you for your support! ",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/3/comments",
    "author": "joerloeffler",
    "comments": [
      {
        "user": "LandonGetz",
        "created_at": "2024-10-02T21:29:54Z",
        "body": "I also hit this error after following the solutions in #2, but I managed to get around this by reinstalling jax (guided by some suggestions also in #2). \r\n`pip install --force-reinstall jax`"
      },
      {
        "user": "joerloeffler",
        "created_at": "2024-10-02T21:32:26Z",
        "body": "@LandonGetz this seems to do the trick! Thank you for the suggestion!!! "
      }
    ]
  },
  {
    "number": 1,
    "title": "Support for fixing parts of the binder?",
    "created_at": "2024-10-02T10:13:05Z",
    "closed_at": "2024-10-02T11:14:15Z",
    "labels": [
      "enhancement"
    ],
    "url": "https://github.com/martinpacesa/BindCraft/issues/1",
    "body": "I want to design a binder where I hold a the scaffold sequence fixed and only hallucinate / redesign my loops that are in contact with the protein. Is there a way to specify that?",
    "comments_url": "https://api.github.com/repos/martinpacesa/BindCraft/issues/1/comments",
    "author": "harshagrawal13",
    "comments": [
      {
        "user": "martinpacesa",
        "created_at": "2024-10-02T10:14:52Z",
        "body": "Hi! This is not implemented yet, but we hope to put out that feature by the end of the year."
      }
    ]
  }
]