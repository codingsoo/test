[
  {
    "number": 992,
    "title": "å¤šçº¿ç¨‹æ¨ç†æŠ¥é”™",
    "created_at": "2025-02-18T11:58:09Z",
    "closed_at": "2025-02-20T08:47:27Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/992",
    "body": "Traceback (most recent call last):\n  File \"/home/omadmin/miniconda3/envs/cosyvoice/lib/python3.10/threading.py\", line 1016, in _bootstrap_inner\n    self.run()\n  File \"/home/omadmin/miniconda3/envs/cosyvoice/lib/python3.10/threading.py\", line 953, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/cli/model.py\", line 113, in llm_job\n    for i in self.llm.inference(text=text.to(self.device),\n  File \"/home/omadmin/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/torch/utils/_contextlib.py\", line 56, in generator_context\n    response = gen.send(request)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/llm/llm.py\", line 326, in inference\n    top_ids = self.sampling_ids(logp.squeeze(dim=0), out_tokens, sampling, ignore_eos=True if i < min_len else False).item()\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/llm/llm.py\", line 150, in sampling_ids\n    top_ids = self.sampling(weighted_scores, decoded_tokens, sampling)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/utils/common.py\", line 110, in ras_sampling\n    top_ids = nucleus_sampling(weighted_scores, top_p=top_p, top_k=top_k)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/utils/common.py\", line 131, in nucleus_sampling\n    top_ids = indices[prob.multinomial(1, replacement=True)]\nRuntimeError: probability tensor contains either `inf`, `nan` or element < 0\nException in thread Thread-11 (llm_job):\nTraceback (most recent call last):\n  File \"/home/omadmin/miniconda3/envs/cosyvoice/lib/python3.10/threading.py\", line 1016, in _bootstrap_inner\n    self.run()\n  File \"/home/omadmin/miniconda3/envs/cosyvoice/lib/python3.10/threading.py\", line 953, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/cli/model.py\", line 113, in llm_job\n    for i in self.llm.inference(text=text.to(self.device),\n  File \"/home/omadmin/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/torch/utils/_contextlib.py\", line 56, in generator_context\n    response = gen.send(request)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/llm/llm.py\", line 326, in inference\n    top_ids = self.sampling_ids(logp.squeeze(dim=0), out_tokens, sampling, ignore_eos=True if i < min_len else False).item()\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/llm/llm.py\", line 150, in sampling_ids\n    top_ids = self.sampling(weighted_scores, decoded_tokens, sampling)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/utils/common.py\", line 110, in ras_sampling\n    top_ids = nucleus_sampling(weighted_scores, top_p=top_p, top_k=top_k)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/utils/common.py\", line 131, in nucleus_sampling\n    top_ids = indices[prob.multinomial(1, replacement=True)]\nRuntimeError: probability tensor contains either `inf`, `nan` or element < 0\nException in thread Thread-10 (llm_job):\nTraceback (most recent call last):\n  File \"/home/omadmin/miniconda3/envs/cosyvoice/lib/python3.10/threading.py\", line 1016, in _bootstrap_inner\n    self.run()\n  File \"/home/omadmin/miniconda3/envs/cosyvoice/lib/python3.10/threading.py\", line 953, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/cli/model.py\", line 113, in llm_job\n    for i in self.llm.inference(text=text.to(self.device),\n  File \"/home/omadmin/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/torch/utils/_contextlib.py\", line 56, in generator_context\n    response = gen.send(request)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/llm/llm.py\", line 326, in inference\n    top_ids = self.sampling_ids(logp.squeeze(dim=0), out_tokens, sampling, ignore_eos=True if i < min_len else False).item()\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/llm/llm.py\", line 150, in sampling_ids\n    top_ids = self.sampling(weighted_scores, decoded_tokens, sampling)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/utils/common.py\", line 110, in ras_sampling\n    top_ids = nucleus_sampling(weighted_scores, top_p=top_p, top_k=top_k)\n  File \"/home/omadmin/zhengyi/CosyVoice/cosyvoice/utils/common.py\", line 131, in nucleus_sampling\n    top_ids = indices[prob.multinomial(1, replacement=True)]\nRuntimeError: probability tensor contains either `inf`, `nan` or element < 0\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/992/comments",
    "author": "scutfrank",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-02-18T13:35:32Z",
        "body": "çœ‹ä¸Šå»è·Ÿå¤šçº¿ç¨‹åº”è¯¥æ˜¯æ²¡æœ‰å…³ç³»"
      }
    ]
  },
  {
    "number": 986,
    "title": "CosyVoice2 flowæ¨¡å‹ï¼Œéæµå¼æ¨ç†å’Œæµå¼æ¨ç†ï¼Œæ¨¡å‹åŠ è½½æœ‰ä½•ä¸åŒï¼Ÿ",
    "created_at": "2025-02-18T02:36:53Z",
    "closed_at": "2025-02-19T02:29:28Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/986",
    "body": "CosyVoicd2çš„  causal-attention flow æ¨¡å‹ï¼Œå…¶æµå¼æ¨ç†å’Œéæµå¼æ¨ç†æœ‰ä½•ä¸åŒï¼Ÿ æ¨¡å‹åŠ è½½æ—¶è®¾ç½® flow_model.encoder.static_chunk_size å’Œ flow_model.decoder.estimator.static_chunk_size ï¼Œæ˜¯å› ä¸ºæµå¼æ¨ç†éœ€è¦çš„å§ï¼Ÿå¦‚æœéæµå¼ï¼Œè¿™ä¸¤ä¸ªå€¼åº”è¯¥è®¾ç½®ä¸ºå•¥å€¼å‘¢ï¼Ÿ0è¿˜æ˜¯-1ï¼Ÿ\n    å¦å¤– utils/mask.py 182è¡Œ ä»£ç é‡Œï¼Œå…³äºstatic_chunk_size è¿™ä¸ªå‚æ•°æ³¨é‡Šæ˜¯å¦é”™è¯¯äº†ï¼Ÿ åº”è¯¥æ˜¯â€œif it is  NOT greater than 0, \n or,  if use_dynamic_chunk is true, this parameter will be ignoredâ€ ?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/986/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-02-18T13:38:30Z",
        "body": "static_chunk_sizeå¦‚æœæ˜¯0æˆ–è´Ÿå€¼ä¼šè¢«å¿½ç•¥ï¼Œæ³¨é‡Šåº”è¯¥æ²¡æœ‰é”™è¯¯ã€‚éæµå¼çš„è¯static_chunk_sizeå¯ä»¥è®¾ç½®ä¸º0æˆ–-1éƒ½å¯ä»¥"
      }
    ]
  },
  {
    "number": 972,
    "title": "å…³äºCosyVoice2-0.5Bæ¨¡å‹åŠç¬‘å£°è¯­æ°”æ”¯æŒçš„ä¸€äº›é—®é¢˜",
    "created_at": "2025-02-13T09:58:46Z",
    "closed_at": "2025-02-14T03:15:22Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/972",
    "body": "æ‚¨å¥½ï¼Œæ„Ÿè°¢æ‚¨ä»¬çš„å‡ºè‰²å·¥ä½œï¼åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜æƒ³è¯·æ•™ï¼š\n\nCosyVoice2-0.5Bæ¨¡å‹æ˜¯å¦å¯ä»¥æ‹†åˆ†ï¼Ÿ \n  - ç›®å‰æ¨¡å‹è¾ƒå¤§ï¼Œå¦‚æœèƒ½å¤Ÿæ‹†åˆ†ï¼Œåˆå§‹åŒ–é€Ÿåº¦æ˜¯å¦ä¼šæ¯”1.0ç‰ˆæœ¬æ›´å¿«ï¼Ÿå¦å¤–ï¼Œåœ¨Instructæ¨¡å¼ä¸‹ç”Ÿæˆé•¿å¥æ—¶ï¼Œè§’è‰²ä¸€è‡´æ€§å¶å°”ä¼šæœ‰äº›ä¸ç¨³å®šï¼Œæˆ‘ä¸»è¦å¸Œæœ›ä½¿ç”¨CloneåŠŸèƒ½ã€‚\n\ninference_zero_shotæ˜¯å¦æ”¯æŒè¯­æ°”è¯å’Œç¬‘å£°ï¼Ÿ \n  - å¦‚æœç›®å‰è¿˜ä¸æ”¯æŒï¼Œæ˜¯å¦å¯ä»¥é€šè¿‡å¾®è°ƒåŒ…å«ç¬‘å£°çš„éŸ³é¢‘æˆ–è¯­æ°”è¯æ•°æ®æ¥å¢å¼ºå¯¹ç¬‘å£°æˆ–è¯­æ°”çš„è¡¨ç°èƒ½åŠ›ï¼Ÿ\n \næœŸå¾…æ‚¨çš„è§£ç­”ï¼Œéå¸¸æ„Ÿè°¢ï¼ ğŸ˜Š\n\n\n\n\n\n\n\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/972/comments",
    "author": "laishujie",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-02-13T12:17:05Z",
        "body": "1.æ‹†åˆ†ä»€ä¹ˆæ„æ€ï¼Ÿä¸äº†è§£\n2. æ”¯æŒå¾®è°ƒï¼Œå‡†å¤‡å¥½ç›¸åº”è¡¨ç°åŠ›æ•°æ®å³å¯"
      },
      {
        "user": "laishujie",
        "created_at": "2025-02-14T02:41:43Z",
        "body": "> 1.æ‹†åˆ†ä»€ä¹ˆæ„æ€ï¼Ÿä¸äº†è§£\n\nCosyVoice2-0.5Bæ¨¡å‹èåˆäº†æŒ‡ä»¤ç”Ÿæˆï¼ˆInstructï¼‰å’Œé›¶æ ·æœ¬æ–‡æœ¬åˆ°è¯­éŸ³åˆæˆï¼ˆZero-shot TTSï¼‰çš„èƒ½åŠ›ã€‚æ˜¯å¦å¯ä»¥ä¿æŒCosyVoice1.0æ¨¡å‹çš„è§„èŒƒä¸€æ ·ï¼Œæ‹†åˆ†ä¸º0.5bå’Œ0.5b-Instruct. å°±è¿™æ„æ€ã€‚"
      },
      {
        "user": "aluminumbox",
        "created_at": "2025-02-14T02:51:23Z",
        "body": "> > 1.æ‹†åˆ†ä»€ä¹ˆæ„æ€ï¼Ÿä¸äº†è§£\n> \n> CosyVoice2-0.5Bæ¨¡å‹èåˆäº†æŒ‡ä»¤ç”Ÿæˆï¼ˆInstructï¼‰å’Œé›¶æ ·æœ¬æ–‡æœ¬åˆ°è¯­éŸ³åˆæˆï¼ˆZero-shot TTSï¼‰çš„èƒ½åŠ›ã€‚æ˜¯å¦å¯ä»¥ä¿æŒCosyVoice1.0æ¨¡å‹çš„è§„èŒƒä¸€æ ·ï¼Œæ‹†åˆ†ä¸º0.5bå’Œ0.5b-Instruct. å°±è¿™æ„æ€ã€‚\n\nè€ƒè™‘åˆ°å¤§æ¨¡å‹èƒ½åŠ›æ¶Œç°ï¼Œå®˜æ–¹æ²¡æœ‰æ‹†åˆ†è®¡åˆ’ï¼Œä¸ªäººå¯ä»¥å°è¯•"
      }
    ]
  },
  {
    "number": 965,
    "title": "Update requirements.txt",
    "created_at": "2025-02-11T13:38:49Z",
    "closed_at": "2025-02-12T13:03:42Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/965",
    "body": "I updated to always use the latest version of the libraries, cleaned up the order, and added pyarrow to fix errors. It worked fine.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/965/comments",
    "author": "hwangsihu",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-02-12T13:03:42Z",
        "body": "thank you, but we fixed the library version because we do not want to introduce problems related with version, and our current cuda version in alibaba is cuda12.1"
      }
    ]
  },
  {
    "number": 963,
    "title": "è¯·é—®CosyVoice2çš„Speech Tokenizeræ˜¯å› æœçš„å—ï¼Ÿæ”¯æŒæµå¼éŸ³é¢‘è¾“å…¥å—ï¼Ÿ",
    "created_at": "2025-02-11T10:26:34Z",
    "closed_at": "2025-02-18T11:44:11Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/963",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/963/comments",
    "author": "zzy1026",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-02-12T13:05:41Z",
        "body": "ä¸æ”¯æŒ"
      }
    ]
  },
  {
    "number": 955,
    "title": "ä¸­æ–‡æ•°å­—è¯»é”™",
    "created_at": "2025-02-10T09:16:03Z",
    "closed_at": "2025-02-11T09:39:52Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/955",
    "body": "\"æ¢è®¨äº†è¶…è¿‡200é¡¹å‰æ²¿ç§‘æŠ€é¡¹ç›®\"æ¨¡å‹ç”Ÿæˆçš„éŸ³é¢‘ä¸­è¯»æˆäº†2-0-0,è€Œä¸æ˜¯ä¸¤ç™¾ï¼Œæœ‰ä»€ä¹ˆè§£å†³åŠæ³•å—ï¼Ÿ\nå¦å¤–å‘ç°æ”¹æˆ200å¤šé¡¹æ—¶ï¼Œæ˜¯æ­£å¸¸çš„ä¸¤ç™¾",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/955/comments",
    "author": "Sunnycl",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-02-11T02:40:14Z",
        "body": "è‡ªè¡Œå¤„ç†ä¸€ä¸‹å‰ç«¯"
      },
      {
        "user": "Sunnycl",
        "created_at": "2025-02-11T07:52:51Z",
        "body": "> è‡ªè¡Œå¤„ç†ä¸€ä¸‹å‰ç«¯\n\nä½†æ˜¯æˆ‘æœ‰çš„éœ€è¦æ˜¯ä¸­æ–‡è¯»æ³•ï¼Œæœ‰çš„éœ€è¦æ˜¯æ’­æŠ¥çš„è¯»æ³•ï¼Œæ²¡æ³•ç›´æ¥è§„åˆ™è½¬æ¢ï¼Œæœ‰ä»€ä¹ˆå‰ç«¯å¤„ç†çš„å¥½æ–¹æ³•å—ï¼Ÿ"
      },
      {
        "user": "Sunnycl",
        "created_at": "2025-02-11T09:39:52Z",
        "body": "> è‡ªè¡Œå¤„ç†ä¸€ä¸‹å‰ç«¯\n\nåŠ äº†ä¸€ä¸ªç»†åŒ–çš„è§„åˆ™è§£å†³äº†ï¼Œæ„Ÿè°¢"
      }
    ]
  },
  {
    "number": 948,
    "title": "HIFI-GAN é‰´åˆ«å™¨æ¨¡å‹",
    "created_at": "2025-02-08T06:43:24Z",
    "closed_at": "2025-02-12T06:57:51Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/948",
    "body": "hiï¼Œæ„Ÿè°¢å›¢é˜Ÿçš„å·¥ä½œã€‚è¯·é—®æœ‰è®¡åˆ’å¼€æºhifigan çš„é‰´åˆ«å™¨é¢„è®­ç»ƒæƒé‡å—ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/948/comments",
    "author": "Wentao795",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-02-11T02:41:04Z",
        "body": "æ²¡æœ‰è®¡åˆ’ï¼ŒHifiganè®­ç»ƒå¹¶ä¸éº»çƒ¦ï¼Œå¯ä»¥è‡ªå·±å¤ç°"
      }
    ]
  },
  {
    "number": 947,
    "title": "dpoå¾®è°ƒ",
    "created_at": "2025-02-07T09:52:58Z",
    "closed_at": "2025-02-17T06:24:59Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/947",
    "body": "ç›®å‰çš„åšæ³•æ˜¯instructæ¨¡å‹çš„åŸºç¡€ä¸ŠæŒ‡ä»¤å¾®è°ƒäº†ä¸€ç‰ˆï¼Œå½“ä½œpolicyæ¨¡å‹ï¼Œç„¶åç”¨instruct+textå»æ¨ç†tokenï¼Œç°åœ¨æƒ³ç”¨llmç”Ÿæˆlogitsï¼Œå¯æ˜¯ä¼šå‡ºç°tokenå’Œlogitsç»´åº¦å¯¹ä¸ä¸Šæ‰€ä»¥ç®—ä¸äº†dpo lossï¼›æœ‰æ²¡æœ‰åšè¿‡çš„åŒå­¦å¯ä»¥äº¤æµä¸€ä¸‹ï¼Œæˆ–è€…å®˜æ–¹æœ‰ç›¸å…³ä»£ç å—",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/947/comments",
    "author": "yunpeili",
    "comments": [
      {
        "user": "FlynnFlag",
        "created_at": "2025-02-08T01:24:58Z",
        "body": "æˆ‘åœ¨ç”¨cosyvoice1åšï¼Œæˆ‘æ˜¯è‡ªå·±é‡å†™äº†æ¨ç†ä»£ç ï¼Œè®©llm.inferenceè¾“å‡ºæ¯ä¸€ä¸ªtokenå’Œæ€»è¯æ±‡è¡¨çš„æ¦‚ç‡ï¼Œå†è®¡ç®—æ¯ä¸ªtokençš„æ¦‚ç‡ã€‚LLMæ¨ç†æ”¹æˆéšæœºé‡‡æ ·ã€‚å…¶ä»–ä¸å˜"
      },
      {
        "user": "yunpeili",
        "created_at": "2025-02-08T02:17:12Z",
        "body": "> æˆ‘åœ¨ç”¨cosyvoice1åšï¼Œæˆ‘æ˜¯è‡ªå·±é‡å†™äº†æ¨ç†ä»£ç ï¼Œè®©llm.inferenceè¾“å‡ºæ¯ä¸€ä¸ªtokenå’Œæ€»è¯æ±‡è¡¨çš„æ¦‚ç‡ï¼Œå†è®¡ç®—æ¯ä¸ªtokençš„æ¦‚ç‡ã€‚LLMæ¨ç†æ”¹æˆéšæœºé‡‡æ ·ã€‚å…¶ä»–ä¸å˜\n\næ˜¯æ¨ç†tokençš„æ—¶å€™åŒæ—¶è¿”å›logpçš„æ„æ€å—ï¼Ÿæˆ‘ä¹Ÿæ˜¯cosyvoice1ï¼Œä¹‹å‰ä¹Ÿæ˜¯æ”¹äº†llm.inferenceï¼Œä½†ç®—logitsä¸çŸ¥é“è¯¥ä¸è¯¥è®©llm.forward"
      },
      {
        "user": "FlynnFlag",
        "created_at": "2025-02-09T08:44:48Z",
        "body": "> > æˆ‘åœ¨ç”¨cosyvoice1åšï¼Œæˆ‘æ˜¯è‡ªå·±é‡å†™äº†æ¨ç†ä»£ç ï¼Œè®©llm.inferenceè¾“å‡ºæ¯ä¸€ä¸ªtokenå’Œæ€»è¯æ±‡è¡¨çš„æ¦‚ç‡ï¼Œå†è®¡ç®—æ¯ä¸ªtokençš„æ¦‚ç‡ã€‚LLMæ¨ç†æ”¹æˆéšæœºé‡‡æ ·ã€‚å…¶ä»–ä¸å˜\n> \n> æ˜¯æ¨ç†tokençš„æ—¶å€™åŒæ—¶è¿”å›logpçš„æ„æ€å—ï¼Ÿæˆ‘ä¹Ÿæ˜¯cosyvoice1ï¼Œä¹‹å‰ä¹Ÿæ˜¯æ”¹äº†llm.inferenceï¼Œä½†ç®—logitsä¸çŸ¥é“è¯¥ä¸è¯¥è®©llm.forward\n\næˆ‘æ˜¯å…ˆæ”¹äº†inference éšæœºç”ŸæˆåŒæ ·æ–‡æœ¬ä¸åŒéŸ³é¢‘çš„æ•°æ®ï¼Œç„¶åæ‰“åˆ†å¾—åˆ°å¤šä¸ªæ­£è´Ÿåå¥½ï¼Œç­‰é€ å®Œå†æ”¹llmçš„forwardï¼Œç›´æ¥è¾“å…¥é€ çš„æ•°æ®çš„logpå½“reference modelçš„éƒ¨åˆ†æ¥è®¡ç®—lossï¼Œè¿˜æ²¡åšå¥½ï¼Œä¸çŸ¥é“å¯ä¸å¯è¡Œ"
      }
    ]
  },
  {
    "number": 945,
    "title": "cosyvoice2 llm training supportï¼Ÿ",
    "created_at": "2025-02-06T07:42:11Z",
    "closed_at": "2025-02-11T13:25:10Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/945",
    "body": "I noticed that flow training code was updated at dev/lyuxiang.lx branch two weeks ago.  Is there any plan to update llm training code like cosyvoice1ï¼Ÿ If so, about whenï¼Ÿ\nThanksï¼",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/945/comments",
    "author": "kiraYuukiAsuna",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-02-07T08:25:33Z",
        "body": "later, maybe in this month"
      }
    ]
  },
  {
    "number": 942,
    "title": "No module named 'matcha.models'; 'matcha' is not a package",
    "created_at": "2025-02-05T14:19:03Z",
    "closed_at": "2025-02-08T00:28:16Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/942",
    "body": "run `python webui.py`\n```\nTraceback (most recent call last):\n  File \"D:\\sdk\\miniconda3\\envs\\cosyvoice2\\Lib\\pydoc.py\", line 457, in safeimport\n    module = __import__(path)\n             ^^^^^^^^^^^^^^^^\n  File \"e:\\Projects\\CosyVoice\\cosyvoice\\flow\\flow_matching.py\", line 17, in <module>\n    from matcha.models.components.flow_matching import BASECFM\nModuleNotFoundError: No module named 'matcha.models'; 'matcha' is not a package\n```",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/942/comments",
    "author": "Cupcc",
    "comments": [
      {
        "user": "zhihei2623",
        "created_at": "2025-02-05T18:12:56Z",
        "body": "æˆ‘ç›´æ¥é‡æ–°æäº†ä¸ªè™šæ‹Ÿç¯å¢ƒå°±å¥½å•¦ã€‚"
      },
      {
        "user": "hwangsihu",
        "created_at": "2025-02-06T07:24:02Z",
        "body": "Try `git submodule update --init --recursive` in CosyVoice Folder"
      },
      {
        "user": "Cupcc",
        "created_at": "2025-02-08T00:28:08Z",
        "body": "> Try `git submodule update --init --recursive` in CosyVoice Folder\n\nthanks, I solved it by installing `third_party/matcha-TTS`"
      }
    ]
  },
  {
    "number": 912,
    "title": "è¯·é—®è®­ç»ƒfrom scratchæ—¶æ»¡è¶³æ¡ä»¶çš„ batch_sizeæ˜¯ä»€ä¹ˆï¼Ÿ",
    "created_at": "2025-01-21T08:06:53Z",
    "closed_at": "2025-01-24T02:44:39Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/912",
    "body": "è¯·é—®é…ç½®æ–‡ä»¶é‡Œ 4å¡ï¼Œ12000å¸§çš„batché…ç½®ï¼Œæ˜¯ç»è¿‡è¯•éªŒè°ƒä¼˜åçš„æœ€ä½³batch é…ç½®å—ï¼Ÿ æ€»batchçš„å€¼ [å¡æ•° X å•å¡ä¸Šçš„å¸§æ•°] åº”è¯¥åœ¨ä»€ä¹ˆå€¼èŒƒå›´å†…ï¼Œæ˜¯ä¸€ä¸ªåˆç†çš„é…ç½®ï¼Ÿ å› ä¸ºå¯èƒ½æœ‰çš„ç¯å¢ƒç¡¬ä»¶æ¡ä»¶æœ‰é™ï¼Œæ²¡åŠæ³•æ”¯æŒè¿™æ ·å¤§çš„batché…ç½®ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/912/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-01-23T16:45:19Z",
        "body": "æš‚æ—¶æ²¡æœ‰ï¼Œä½†ç»éªŒæ˜¯batch sizeä¸èƒ½å¤ªå°"
      }
    ]
  },
  {
    "number": 911,
    "title": "hiï¼Œæœ‰è®¡åˆ’å¼€æºä¸€ä¸‹hifigan è®­ç»ƒçš„é‰´åˆ«å™¨å—ï¼Ÿ",
    "created_at": "2025-01-21T06:52:18Z",
    "closed_at": "2025-01-21T07:51:43Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/911",
    "body": "hiï¼Œæ„Ÿè°¢å›¢é˜Ÿçš„å·¥ä½œã€‚æˆ‘åœ¨è‡ªå·±å¾®è°ƒhiftæ¨¡å‹çš„æ—¶å€™å‘ç°é‰´åˆ«å™¨éå¸¸éš¾è®­ç»ƒï¼Œè¯·é—®æœ‰è®¡åˆ’å¼€æºä¸‹è¿™ä¸ªé‰´åˆ«å™¨æ¨¡å‹å—ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/911/comments",
    "author": "Wentao795",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-01-21T07:27:36Z",
        "body": "å·²ç»æœ‰Hiftå¾—è®­ç»ƒï¼Œä½†æ˜¯torch2.3.1ä¸æ”¯æŒpitchæå–ï¼Œåé¢ä¼šæ›´æ–°ä¸€ä¸‹è¿™ä¸ªä»£ç "
      }
    ]
  },
  {
    "number": 898,
    "title": "Error when start a webui. server",
    "created_at": "2025-01-17T09:49:50Z",
    "closed_at": "2025-01-20T03:03:23Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/898",
    "body": "**Describe the bug**\nwhen I start webui server \n\npython webui.py --port 50000 --model_dir pretrained_models/CosyVoice-300M\n\nI got this \n\n File \"/Users/li/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/hyperpyyaml/core.py\", line 778, in recursive_update\n    raise KeyError(f\"Override '{k}' not found in: {[key for key in d.keys()]}\")\nKeyError: \"Override 'qwen_pretrain_path' not found in: ['__set_seed1', '__set_seed2', '__set_seed3', '__set_seed4', 'sample_rate', 'text_encoder_input_size', 'llm_input_size', 'llm_output_size', 'spk_embed_dim', 'llm', 'flow', 'hift', 'parquet_opener', 'get_tokenizer', 'allowed_special', 'tokenize', 'filter', 'resample', 'feat_extractor', 'compute_fbank', 'parse_embedding', 'shuffle', 'sort', 'batch', 'padding', 'data_pipeline', 'train_conf']\"\n\nDuring handling of the above exception, another exception occurred:\n\nI guess there is no module ,but  I looked the pretrain dir, the files are there.\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/898/comments",
    "author": "skytraveler",
    "comments": [
      {
        "user": "skytraveler",
        "created_at": "2025-01-17T10:01:00Z",
        "body": "/Users/li/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/diffusers/models/lora.py:393: FutureWarning: `LoRACompatibleLinear` is deprecated and will be removed in version 1.0.0. Use of `LoRACompatibleLinear` is deprecated. Please switch to PEFT backend by installing PEFT: `pip install peft`.\n  deprecate(\"LoRACompatibleLinear\", \"1.0.0\", deprecation_message)\n2025-01-17 17:59:17,309 INFO input frame rate=50\nTraceback (most recent call last):\n  File \"/Users/li/ai/CosyVoice/webui.py\", line 188, in <module>\n    cosyvoice = CosyVoice(args.model_dir)\n  File \"/Users/li/ai/CosyVoice/cosyvoice/cli/cosyvoice.py\", line 37, in __init__\n    self.frontend = CosyVoiceFrontEnd(configs['get_tokenizer'],\n  File \"/Users/li/ai/CosyVoice/cosyvoice/cli/frontend.py\", line 52, in __init__\n    self.campplus_session = onnxruntime.InferenceSession(campplus_model, sess_options=option, providers=[\"CPUExecutionProvider\"])\n  File \"/Users/li/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 419, in __init__\n    self._create_inference_session(providers, provider_options, disabled_optimizers)\n  File \"/Users/li/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 472, in _create_inference_session\n    sess = C.InferenceSession(session_options, self._model_path, True, self._read_config_from_model)\nonnxruntime.capi.onnxruntime_pybind11_state.InvalidProtobuf: [ONNXRuntimeError] : 7 : INVALID_PROTOBUF : Load model from pretrained_models/CosyVoice-300M/campplus.onnx failed:Protobuf parsing failed.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/li/ai/CosyVoice/webui.py\", line 191, in <module>\n    cosyvoice = CosyVoice2(args.model_dir)\n  File \"/Users/li/ai/CosyVoice/cosyvoice/cli/cosyvoice.py\", line 135, in __init__\n    configs = load_hyperpyyaml(f, overrides={'qwen_pretrain_path': os.path.join(model_dir, 'CosyVoice-BlankEN')})\n  File \"/Users/li/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/hyperpyyaml/core.py\", line 157, in load_hyperpyyaml\n    yaml_stream = resolve_references(yaml_stream, overrides, overrides_must_match)\n  File \"/Users/li/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/hyperpyyaml/core.py\", line 316, in resolve_references\n    recursive_update(preview, overrides, must_match=overrides_must_match)\n  File \"/Users/li/miniconda3/envs/cosyvoice/lib/python3.10/site-packages/hyperpyyaml/core.py\", line 778, in recursive_update\n    raise KeyError(f\"Override '{k}' not found in: {[key for key in d.keys()]}\")\nKeyError: \"Override 'qwen_pretrain_path' not found in: ['__set_seed1', '__set_seed2', '__set_seed3', '__set_seed4', 'sample_rate', 'text_encoder_input_size', 'llm_input_size', 'llm_output_size', 'spk_embed_dim', 'llm', 'flow', 'hift', 'parquet_opener', 'get_tokenizer', 'allowed_special', 'tokenize', 'filter', 'resample', 'feat_extractor', 'compute_fbank', 'parse_embedding', 'shuffle', 'sort', 'batch', 'padding', 'data_pipeline', 'train_conf']\"\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/li/ai/CosyVoice/webui.py\", line 193, in <module>\n    raise TypeError('no valid model_type!')\nTypeError: no valid model_type!"
      },
      {
        "user": "aluminumbox",
        "created_at": "2025-01-17T10:44:01Z",
        "body": "æ¨¡å‹ä¸‹è½½ä¸å®Œæ•´"
      },
      {
        "user": "skytraveler",
        "created_at": "2025-01-20T03:03:21Z",
        "body": "thank you. I redownloaded it .and the problem solved!"
      }
    ]
  },
  {
    "number": 881,
    "title": "instructæŒ‡ä»¤åˆæˆè¯­éŸ³ï¼Œä¼šå‡ºç°æ‰å­—",
    "created_at": "2025-01-14T10:16:22Z",
    "closed_at": "2025-01-15T10:26:33Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/881",
    "body": "**Describe the bug**\r\ninstructæŒ‡ä»¤åˆæˆè¯­éŸ³ï¼Œä¼šå‡ºç°æ‰å­—\r\n\r\n**To Reproduce**\r\n```\r\n    for i, j in enumerate(cosyvoice.inference_instruct2('æ­¦æ±‰è¯<|endofprompt|>æ”¶åˆ°å¥½å‹ä»è¿œæ–¹å¯„æ¥çš„ç”Ÿæ—¥ç¤¼ç‰©ï¼Œé‚£ä»½æ„å¤–çš„æƒŠå–œä¸æ·±æ·±çš„ç¥ç¦è®©æˆ‘å¿ƒä¸­å……æ»¡äº†ç”œèœœçš„å¿«ä¹ï¼Œç¬‘å®¹å¦‚èŠ±å„¿èˆ¬ç»½æ”¾ã€‚',# è¿™ç¢—çƒ­å¹²é¢è›®å¥½åƒã€‚å“å‘€ï¼Œå’‹ä¸ªè¿™ä¹ˆå€’éœ‰å“¦ï¼\r\n        'ç”¨æ­¦æ±‰è¯è¯´è¿™å¥è¯', # é€šè¿‡è¯­è¨€æ§åˆ¶è¯­éŸ³åˆæˆ\r\n        prompt_speech_16k, stream=False)):\r\n```\r\nåˆæˆçš„éŸ³é¢‘ä¸­æŠŠæŒ‡ä»¤æ­¦æ±‰è¯è¯»å‡ºæ¥äº†ï¼Œå¹¶ä¸”å‰é¢â€œæ”¶åˆ°å¥½å‹â€å‡ ä¸ªå­—æ‰äº†\r\n\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/881/comments",
    "author": "wwfcnu",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-01-14T13:05:39Z",
        "body": "å»æ‰'æ­¦æ±‰è¯<|endofprompt|>ï¼Œçœ‹readmeé‡Œçš„å…·ä½“ç”¨æ³•"
      }
    ]
  },
  {
    "number": 869,
    "title": "NoneType object has no attribute set_input_shape",
    "created_at": "2025-01-10T10:08:01Z",
    "closed_at": "2025-02-11T02:24:43Z",
    "labels": [
      "stale"
    ],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/869",
    "body": "æ›´æ–°äº†ä»Šå¤©ï¼ˆ2025-01-10ï¼‰æœ€æ–°çš„ä»£ç ä¸æ¨¡å‹ï¼ˆCosyVoice2-0.5Bï¼‰ï¼Œæˆ‘è¿è¡Œçš„æ˜¯å¤šçº¿ç¨‹æ–¹å¼ã€‚\r\n\r\n```python\r\nimport multiprocessing as mp\r\nfrom cosyvoice.cli.cosyvoice import CosyVoice, CosyVoice2\r\n\r\ndef worker_process():\r\nÂ·Â·Â·\r\n    model_id = \"pretrained_models/CosyVoice2-0.5B\"\r\n    CosyVoiceModel = CosyVoice2(model_id, load_jit=False, load_trt=True, fp16=True)\r\nÂ·Â·Â·Â·\r\n\r\nprocesses = []\r\n    for _ in range(3):\r\n        p = mp.Process(target=worker_process)\r\n        p.start()\r\n        processes.append(p)\r\n\r\n    for p in processes:\r\n        p.join()\r\n```\r\n\r\nåœ¨è¿è¡Œ `CosyVoiceModel.inference_cross_lingual(tts_text, prompt_speech_16k)` åæŠ¥é”™å¦‚ä¸‹\r\n```\r\n<class 'AttributeError'>:'NoneType' object has no attribute 'set_input_shape'\r\n```\r\n\r\næ„Ÿè°¢ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/869/comments",
    "author": "cpken",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-01-10T16:16:26Z",
        "body": "æ”¹æˆäº†åœ¨çº¿å¯¼å‡ºtensorrtæ¨¡å‹ï¼Œå…ˆå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯¼å‡ºæˆåŠŸåï¼Œå†å¯åŠ¨å…¶ä»–çº¿ç¨‹"
      },
      {
        "user": "cpken",
        "created_at": "2025-01-11T08:49:10Z",
        "body": "è§£å†³æ–¹æ¡ˆ\r\n\r\n```python\r\nimport threading\r\nimport multiprocessing as mp\r\nfrom funasr import AutoModel\r\nfrom cosyvoice.cli.cosyvoice import CosyVoice, CosyVoice2\r\nimport asyncio\r\nimport os\r\nfrom loguru import logger\r\n\r\nasync def main(pid, logger):\r\n    pass\r\n\r\ndef export_tensorrt_model():\r\n    \"\"\"å¯¼å‡º TensorRT æ¨¡å‹çš„ä»£ç \"\"\"\r\n    global SenseVoiceModel\r\n    global CosyVoiceModel\r\n    SenseVoiceModel = AutoModel()\r\n    CosyVoiceModel = CosyVoice2(model_id, load_jit=False, load_trt=False, fp16=False)\r\n\r\ndef worker_process():\r\n    # å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¥å¯¼å‡º TensorRT æ¨¡å‹\r\n    export_thread = threading.Thread(target=export_tensorrt_model)\r\n    export_thread.start()\r\n    export_thread.join()  # ç­‰å¾…å¯¼å‡ºå®Œæˆ\r\n    asyncio.run(main(os.getpid(), logger))\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    processes = []\r\n    for _ in range(SUB_PROCESS):\r\n        p = mp.Process(target=worker_process)\r\n        p.start()\r\n        processes.append(p)\r\n\r\n    for p in processes:\r\n        p.join()\r\n```\r\n\r\nä½†æ˜¯æˆ‘å¦‚æœè¿™æ ·å­å†™ï¼Œä¾ç„¶ä¼šæŠ¥é”™\r\n```python\r\nCosyVoiceModel = CosyVoice2(model_id, load_jit=False, load_trt=True, fp16=False)\r\n```\r\n\r\nä¸åŠ è½½ load_trt ä¸ä¼šæŠ¥é”™ï¼š\r\n```python\r\nCosyVoiceModel = CosyVoice2(model_id, load_jit=False, load_trt=False, fp16=True)\r\n```\r\n"
      },
      {
        "user": "cpken",
        "created_at": "2025-01-11T09:00:32Z",
        "body": "> æ”¹æˆäº†åœ¨çº¿å¯¼å‡ºtensorrtæ¨¡å‹ï¼Œå…ˆå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯¼å‡ºæˆåŠŸåï¼Œå†å¯åŠ¨å…¶ä»–çº¿ç¨‹\r\n\r\nå°è¯•æ”¹äº†ä»£ç ï¼Œæ˜¯ load_trt=True çš„é—®é¢˜å¯¼è‡´çš„ï¼Œå¹¶ä¸”æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œå¤šçº¿ç¨‹æ²¡æœ‰ä¸€æ¬¡æˆåŠŸçš„ã€‚\r\n```\r\n<class 'AttributeError'>:'NoneType' object has no attribute 'set_input_shape'\r\n```"
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2025-02-11T01:59:57Z",
        "body": "This issue is stale because it has been open for 30 days with no activity."
      }
    ]
  },
  {
    "number": 866,
    "title": "æ€æ ·æ‰èƒ½æ§åˆ¶è¯´è¯çš„æƒ…ç»ª",
    "created_at": "2025-01-10T06:18:34Z",
    "closed_at": "2025-01-10T06:40:17Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/866",
    "body": "```\r\ncosyvoice = CosyVoice2(\r\n    \"pretrained_models/CosyVoice2-0.5B\", load_jit=False, load_trt=False, fp16=False\r\n)\r\n\r\n# zero_shot usage\r\nprompt_speech_16k = load_wav(\"my_voice.wav\", 16000)\r\nprompt_text = \"è¿™æ˜¯ä¸€æ¬¾æ€§ä»·æ¯”è¶…é«˜çš„æ——èˆ°æ‰‹æœº,å¤§å®¹é‡ç”µæ± ,å¿«å……,é«˜æ¸…æ‹ç…§,æ€§èƒ½æ‹‰æ»¡,ä»Šå¤©ç›´æ’­é—´é™æ—¶ä¼˜æƒ ,å¿«æ¥ä¸‹å•å§\"\r\nfor i, j in enumerate(\r\n    cosyvoice.inference_zero_shot(\r\n        \"è¿™æ˜¯ä¸€æ¬¾æ€§ä»·æ¯”è¶…é«˜çš„æ——èˆ°æ‰‹æœº,å¤§å®¹é‡ç”µæ± ,å¿«å……,é«˜æ¸…æ‹ç…§,æ€§èƒ½æ‹‰æ»¡,ä»Šå¤©ç›´æ’­é—´é™æ—¶ä¼˜æƒ ,å¿«æ¥ä¸‹å•å§[HAPPY]\",\r\n        prompt_text,\r\n        prompt_speech_16k,\r\n        stream=False,\r\n        text_frontend=True\r\n    )\r\n):\r\n    torchaudio.save(\r\n        \"tests/daihuo-cn-happy.wav\", j[\"tts_speech\"], cosyvoice.sample_rate\r\n    )\r\n```\r\næ¯”å¦‚æˆ‘è¦å…´å¥‹åœ°è¯´è¿™å¥è¯ï¼Œæˆ‘çœ‹åˆ°cosyvoice/tokenizer/tokenizer.pyé‡Œé¢æœ‰```HAPPY```ï¼Œåº”è¯¥æ˜¯å¯ä»¥æ§åˆ¶çš„å§ï¼Œä½†æ˜¯ä¸çŸ¥é“åœ¨å“ªé‡ŒåŠ ä¸Šå»",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/866/comments",
    "author": "wzr0108",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-01-10T06:39:34Z",
        "body": "çœ‹demoé‡Œçš„ç¤ºä¾‹ç”¨æ³•"
      }
    ]
  },
  {
    "number": 842,
    "title": "support online onnx to trt conversion",
    "created_at": "2025-01-07T09:23:32Z",
    "closed_at": "2025-01-08T03:21:42Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/842",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/842/comments",
    "author": "Vinkle-hzt",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-01-08T03:20:15Z",
        "body": "çœ‹ä¸Šå»æ˜¯å¯è¡Œçš„ï¼Œå…ˆmergeåˆ°devï¼Œåç»­ç»Ÿä¸€ä¿®æ”¹å¥½æ ¼å¼åå†mergeåˆ°main"
      }
    ]
  },
  {
    "number": 827,
    "title": "å…³äºREADMEä¸­çš„Basic Usage",
    "created_at": "2025-01-03T04:10:29Z",
    "closed_at": "2025-01-04T05:41:01Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/827",
    "body": "æˆ‘è§‰å¾—Basic Usageé‚£éƒ¨åˆ†æè¿°æœ‰äº›è®©äººæ™•å¤´è½¬å‘äº†ã€‚æ—¢ç„¶è¯´äº†æ¨èä½¿ç”¨CosyVoice2-0.5Bï¼Œè€Œä¸”CosyVoice2ç¤ºä¾‹ä»£ç ä¸­CosyVoice2-0.5Bæ˜¯é’ˆå¯¹inference_zero_shotã€inference_cross_lingualã€inference_instruct2çš„ï¼Œ\r\nè€Œæè¿°ä¸­åˆè¯´â€œ For zero_shot/cross_lingual inference, please use CosyVoice-300M model. For sft inference, please use CosyVoice-300M-SFT model. For instruct inference, please use CosyVoice-300M-Instruct model.â€ï¼Œçœ‹ä¸Šå»åˆè®©ç”¨cosyvoice1å‡ ä¸ªæ¨¡å‹æ‰èƒ½å¾ˆå¥½æ”¯æŒzero_shot/cross_lingual inferenceï¼Œsft inference, For instruct inference.\r\n\r\næ€»ä¹‹ï¼Œè¿™éƒ¨åˆ†æè¿°è®©äººä¸€å¤´é›¾æ°´ã€‚\r\n\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/827/comments",
    "author": "cn-knight",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-01-04T05:41:01Z",
        "body": "å·²æ›´æ–°"
      }
    ]
  },
  {
    "number": 823,
    "title": "å’±ä»¬CosyVoice2çš„25hzï¼Œå¤§æ¦‚å•¥æ—¶å€™èƒ½å‘å¸ƒå‘¢ï¼Ÿ",
    "created_at": "2025-01-02T09:07:44Z",
    "closed_at": "2025-01-03T03:35:24Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/823",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/823/comments",
    "author": "0xCAFEBABE0",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2025-01-02T14:06:33Z",
        "body": "è¿™ä¸ªå°±æ˜¯25hz"
      }
    ]
  },
  {
    "number": 807,
    "title": "æ–°ç‰ˆçš„çš„æ¨¡å‹èƒ½æ”¯æŒè°ƒæ•´éŸ³é‡ã€è°ƒæ•´è¯­è°ƒã€è°ƒæ•´å¤šéŸ³å­—ã€è°ƒæ•´è¯­é€Ÿç­‰åŠŸèƒ½å—ï¼Ÿè¿˜æœ‰æœ€ç»ˆè¯­éŸ³å¯¹åº”çš„å­—å¹•æ–‡ä»¶",
    "created_at": "2024-12-30T03:37:48Z",
    "closed_at": "2024-12-30T03:46:10Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/807",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/807/comments",
    "author": "hjj-lmx",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-12-30T03:46:10Z",
        "body": "çœ‹readmeï¼Œè¯­éŸ³éŸ³é‡è°ƒæ•´å¯ä»¥è‡ªè¡Œsoxå®ç°"
      }
    ]
  },
  {
    "number": 802,
    "title": "CosyVoice2, è°ƒç”¨ FastAPI çš„ `inference_zero_shot` æ¥å£åï¼Œç”ŸæˆéŸ³é¢‘çš„éŸ³è‰²å˜ç²—äº†",
    "created_at": "2024-12-29T05:19:14Z",
    "closed_at": "2025-01-09T13:36:02Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/802",
    "body": "**Describe the bug**\r\nCosyVoice1 æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯CosyVoice2 ç”Ÿæˆçš„éŸ³é¢‘ä¸­ï¼Œäººçš„éŸ³è‰²å˜ç²—ã€‚prompt éŸ³é¢‘å’Œ 1 ä¸­ä½¿ç”¨çš„æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚\r\n\r\n**Expected behavior**\r\nNormal voice quality. \r\n\r\n**Desktop (please complete the following information):**\r\n - OS: Ubuntu 22.04\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/802/comments",
    "author": "AspadaX",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-12-29T09:25:01Z",
        "body": "å…ˆçœ‹ç›´æ¥pythoné‡Œå‚ç…§readmeé‡Œå‘½ä»¤ç”Ÿæˆæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯è¿™æ ·"
      },
      {
        "user": "hit-xpf",
        "created_at": "2024-12-29T10:20:31Z",
        "body": "`torchaudio.save(output_wav, tts_speech, sample_rate)`\r\nä¿å­˜çš„æ—¶å€™ï¼Œå—sample_rateå½±å“ï¼Œæˆ‘çš„è¾“å‡ºä¹Ÿæ˜¯å¯¹ä¸ä¸Šï¼ˆç”¨16000çš„sample_rateï¼‰ã€‚\r\nä¸çŸ¥é“æ˜¯ä¸æ˜¯å‰ä¸€æ­¥å¯¹è¿”å›çš„responseçš„éŸ³é¢‘å­—èŠ‚æµçš„å¤„ç†æœ‰é—®é¢˜ã€‚ã€‚ã€‚"
      },
      {
        "user": "AspadaX",
        "created_at": "2024-12-29T14:12:41Z",
        "body": "> å…ˆçœ‹ç›´æ¥pythoné‡Œå‚ç…§readmeé‡Œå‘½ä»¤ç”Ÿæˆæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯è¿™æ ·\r\n\r\næˆ‘è¿™é‡Œçœ‹äº†ä¸€ä¸‹ 2 å’Œ 1 çš„æ¨¡å‹æ–‡ä»¶å¤¹é‡Œé¢çš„ `cosyvoice.yaml`ã€‚é‡Œé¢çš„ sample rate 2æ˜¯ 24000ï¼Œ1æ˜¯ 22050ã€‚ç„¶å`CosyVoice2` class åœ¨ init çš„æ—¶å€™ä¼šåŠ è½½é…ç½®æ–‡ä»¶é‡Œé¢å†™çš„ sample rateï¼Ÿæ˜¯å› ä¸ºè¿™ä¸ªåŸå› å—ï¼Ÿ"
      },
      {
        "user": "JiajunDou",
        "created_at": "2024-12-30T04:38:38Z",
        "body": "> å…ˆçœ‹ç›´æ¥pythoné‡Œå‚ç…§readmeé‡Œå‘½ä»¤ç”Ÿæˆæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯è¿™æ ·\r\n\r\nç”¨readmeé‡Œé¢æ˜¯æ­£å¸¸çš„"
      },
      {
        "user": "EnochX",
        "created_at": "2024-12-31T03:37:59Z",
        "body": "æˆ‘ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜ï¼ŒåŒæ ·çš„promptéŸ³é¢‘ï¼Œcosyvoice2ï¼Œinference_zero_shotç”Ÿæˆçš„éŸ³è‰²å¾ˆç²—ï¼Œç›¸ä¼¼åº¦æ¯”cosyvoice1å·®å¾ˆå¤šã€‚æƒ³è¦è¯•ä¸€ä¸‹å®˜æ–¹æ•ˆæœï¼Œmodelscope studioåˆä¸€ç›´è·‘ä¸é€š"
      },
      {
        "user": "hit-xpf",
        "created_at": "2024-12-31T03:41:25Z",
        "body": "@hit-xpf \r\nè¾“å‡ºä¿å­˜çš„ `sample_rete` ç”¨ 22050 å¤§è‡´å¯ä»¥ã€‚è¿˜æ²¡æœ‰è¯• 24000"
      },
      {
        "user": "EnochX",
        "created_at": "2024-12-31T03:52:41Z",
        "body": "ç¡®å®æ˜¯sample_rateçš„é—®é¢˜ï¼Œæ”¹æˆ24000å°±å¥½äº†"
      },
      {
        "user": "cpken",
        "created_at": "2025-01-02T10:35:56Z",
        "body": "ä¿å­˜éŸ³é¢‘çš„æ—¶å€™ï¼Œè¦ç”¨promptéŸ³é¢‘çš„ sample_reteï¼Œæ‰ä¸ä¼šå¯¼è‡´å¯¼å‡ºéŸ³é¢‘å˜å·®ã€‚"
      },
      {
        "user": "CodePothunter",
        "created_at": "2025-01-09T05:00:44Z",
        "body": "å¾—ä¿å­˜æˆ22050æˆ–è€…24000"
      },
      {
        "user": "AspadaX",
        "created_at": "2025-01-09T13:36:02Z",
        "body": "> ç¡®å®æ˜¯sample_rateçš„é—®é¢˜ï¼Œæ”¹æˆ24000å°±å¥½äº†\r\n\r\næ˜¯çš„ï¼Œä¿®æ”¹æˆ 24000 åå£°éŸ³æ­£å¸¸ã€‚æˆ‘è¿™é‡Œ prompt éŸ³é¢‘æ˜¯ 44K å·¦å³çš„ sample rateï¼Œä¸è¿‡å¹¶ä¸å¦¨ç¢ã€‚\r\n\r\næˆ‘è¿™é‡Œæµ‹è¯•åå‘ç°ï¼Œsample rate è¶Šé«˜ï¼Œå£°éŸ³è¶Šç»†ï¼Œåä¹‹äº¦ç„¶ã€‚ä¹‹å‰ CosyVoice 1 çš„æ—¶å€™ç”¨çš„æ˜¯ 22050ï¼Œè¿™ä¸ªé‡‡æ ·ç‡åœ¨ 2 é‡Œé¢å°±ä¼šè®©å£°éŸ³å˜ç²—ã€‚"
      }
    ]
  },
  {
    "number": 787,
    "title": "å…³äºCosyVoice2çš„SFTè®­ç»ƒ",
    "created_at": "2024-12-25T09:54:07Z",
    "closed_at": "2024-12-29T11:53:10Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/787",
    "body": "æ‚¨å¥½ï¼Œ\r\n      æˆ‘ä»¬åœ¨CosyVoice1çš„ Flow-Matchingçš„ SFTè®­ç»ƒå¹¶æ²¡æœ‰å¾—åˆ°ç†æƒ³çš„æ•ˆæœï¼ŒSFTè®­ç»ƒåçš„æ¨¡å‹è¿˜ä¸å¦‚baseline çš„CERæ›´ä½ã€‚åœ¨å­¦ä¹ CosyVoice2è®ºæ–‡ä¸­ï¼Œç¬¬2.7 Multi-Speaker Fine-tuningï¼Œ ç¬¬2.8  Reinforcement Learning for SFT éƒ½æåˆ°äº†ç›®æ ‡éŸ³è‰²çš„ç²¾è°ƒè®­ç»ƒè¿‡ç¨‹ï¼Œä½†æ˜¯æ²¡æœ‰æ˜ç¡®çš„è¯´æ˜è¿™æ˜¯é’ˆå¯¹ TextSpeech LMçš„ï¼Œè¿˜æ˜¯flow-matchingçš„ï¼Œè¿˜æ˜¯è¯´ä¸¤è€…éƒ½æ¶‰åŠï¼Ÿ  åœ¨2.7ç« èŠ‚æè¿°ä¸­ï¼ŒåŠ tagçš„æ“ä½œå¥½åƒæ˜¯ è¯´çš„TextSpeech LMï¼Œä½†æ˜¯TextSpeech LMæ ¹æœ¬å°±ä¸å…³å¿ƒéŸ³è‰²ï¼Œè¿speaker-embeddingéƒ½æ²¡æœ‰ç”¨åˆ°ã€‚ä½†æ˜¯è¯´å®ƒæ˜¯é¢å‹flowæ¨¡å‹çš„ï¼Œé‚£ä¹ˆç›¸å½“äºç»™flowæ¨¡å‹å¢åŠ äº†ä¸€ä¸ªæ¡ä»¶ï¼Œåœ¨æ¨ç†æ—¶å¢åŠ ä¸ä¸€è‡´ï¼Œä¹Ÿä¸åƒã€‚ æ‰€ä»¥æœ‰ç‚¹ç³Šæ¶‚ï¼Œèƒ½å¦æ˜ç¡®ä¸€ä¸‹ï¼Œè®ºæ–‡ä¸­è¿™ä¸¤ä¸ªSFTç« èŠ‚ï¼Œä¸»è¦è¯´çš„æ˜¯å“ªä¸ªéƒ¨åˆ†å‘¢?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/787/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "MonolithFoundation",
        "created_at": "2024-12-27T08:15:28Z",
        "body": "éŸ³è‰²ç²¾è°ƒå®ç°äº†å—"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-12-27T08:27:09Z",
        "body": "> éŸ³è‰²ç²¾è°ƒå®ç°äº†å—\r\n\r\næ²¡æœ‰ï¼Œflowæ¨¡å‹çš„SFTã€Speaker éƒ½æ˜¯baseæ¨¡å‹è§è¿‡çš„ï¼Œä½†æ˜¯è¿™éƒ¨åˆ†è¯­éŸ³è´¨é‡æœ€é«˜ã€‘ï¼Œè®­ç»ƒåå‘ç°æ•ˆæœåè€Œå·®äº†ã€‚å¯èƒ½LLMéƒ¨åˆ†çš„SFTå¯¹æ•ˆæœæœ‰æ˜¾è‘—æå‡ã€‚"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-12-27T08:51:10Z",
        "body": "æˆ‘æ„Ÿè§‰cosyvoice2å¯¹éŸ³è‰²çš„æŠ½å–æ•ˆæœï¼Œæ²¡æœ‰F5å¥½"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-12-27T08:56:16Z",
        "body": "> æˆ‘æ„Ÿè§‰cosyvoice2å¯¹éŸ³è‰²çš„æŠ½å–æ•ˆæœï¼Œæ²¡æœ‰F5å¥½\r\n\r\nä¸å¥½è¯´ã€‚å¯¹æ¯”æ¨¡å‹æ•ˆæœä¹‹å‰ï¼Œå¾—å…ˆçœ‹ä¸¤è€…è®­ç»ƒç¯å¢ƒï¼Œæ•°æ®é‡ï¼Œæ•°æ®è´¨é‡æ˜¯å¦æœ‰å¯æ¯”æ€§çš„ã€‚"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-12-27T11:02:31Z",
        "body": "è‚¯å®šæ˜¯å„è‡ªé‡Šæ”¾å‡ºçš„æƒé‡ï¼Œcosyvoiceæ²¡æœ‰è®­ç»ƒè„šæœ¬å’Œæ•°æ®\r\n\r\nå¦å¤–cosyvoice2é‡Œé¢çš„äººç‰©ä¿¡æ¯ï¼Œåº”è¯¥æ˜¯ç”¨å›ºå®šçš„æ¨¡å‹ï¼ˆcam++ï¼‰æŠ½å–çš„ï¼Œä¸å¤ªç¡®å®šè¿™ä¸ªæ˜¯ä¸æ˜¯å›ºå®šæ­»çš„"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-12-27T13:23:23Z",
        "body": "cosyvoice æœ‰ç¤ºä¾‹è®­ç»ƒè„šæœ¬ï¼Œæ•°æ®ä½ è‡ªå·±å‡†å¤‡ï¼Œå¯ä»¥å¤ç°çš„ã€‚   \r\ncosyvoiceä½¿ç”¨complus å£°çº¹æå–å™¨åšéŸ³è‰²ç‰¹å¾æŠ½å–ï¼Œå¯¹äºSFTï¼Œå¯ä»¥æ˜¯è®¾ç½®æ­»çš„ï¼›å¯¹äºzeroshotï¼Œä½ æ¥ä»€ä¹ˆpromptå°±æå–ä»€ä¹ˆcompluså‘é‡ï¼Œæ²¡æ‰€è°“é™åˆ¶æ­»çš„ã€‚    \r\nå¯ä»¥çœ‹ä¸€ä¸‹ä»–ä»¬é‡Šæ”¾çš„è®ºæ–‡ä»¥åŠå·¥ç¨‹ä»£ç ã€‚\r\n"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-12-29T09:31:41Z",
        "body": "sftåªæ˜¯é’ˆå¯¹æŸä¸ªäººçš„æ•ˆæœæ›´å¥½ï¼Œå¤§æ•°æ®é›†ä¸Šcerå˜é«˜æ˜¯æ­£å¸¸çš„"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-12-30T02:10:14Z",
        "body": "@JohnHerry complusæ˜¯å›ºå®šçš„onnxæ¨¡å‹ï¼Œåº”è¯¥ä¹Ÿä¸æ”¯æŒpromptï¼Ÿæˆ‘ç†è§£promptæ˜¯åœ¨LLMé˜¶æ®µåŠ é™å®šçš„ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œæ˜¯å¦æ˜¯complusæ²¡æœ‰å‚ä¸è®­ç»ƒï¼Œç›´æ¥å°±æ˜¯ä¸€ä¸ªonnxå›ºå®šç‰¹å¾æå–ç”¨äºå…¶ä»–æ¨¡å—è®­ç»ƒçš„ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼ŒcampluséŸ³è‰²æ•ˆæœä¸å¥½ï¼Œä¸å¤ªç¡®å®šæ˜¯å¦èƒ½å®ç°å¾®è°ƒå…¶ä»–æ¨¡å—æå‡éŸ³è‰²ã€‚"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-12-30T02:23:24Z",
        "body": "> @JohnHerry complusæ˜¯å›ºå®šçš„onnxæ¨¡å‹ï¼Œåº”è¯¥ä¹Ÿä¸æ”¯æŒpromptï¼Ÿæˆ‘ç†è§£promptæ˜¯åœ¨LLMé˜¶æ®µåŠ é™å®šçš„ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œæ˜¯å¦æ˜¯complusæ²¡æœ‰å‚ä¸è®­ç»ƒï¼Œç›´æ¥å°±æ˜¯ä¸€ä¸ªonnxå›ºå®šç‰¹å¾æå–ç”¨äºå…¶ä»–æ¨¡å—è®­ç»ƒçš„ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼ŒcampluséŸ³è‰²æ•ˆæœä¸å¥½ï¼Œä¸å¤ªç¡®å®šæ˜¯å¦èƒ½å®ç°å¾®è°ƒå…¶ä»–æ¨¡å—æå‡éŸ³è‰²ã€‚\r\n\r\ncomplusæ¨¡å—è‡ªèº«ä¸å‚ä¸CosyVoiceè®­ç»ƒï¼Œå‚ä¸è®­ç»ƒçš„æ˜¯complusç”Ÿæˆçš„å£°çº¹ç‰¹å¾ã€‚æ‰€ä»¥ä½ æŠŠå®ƒå½“æˆè·Ÿæå–æ¢…å°”è°±ä¸€æ ·çš„ç‰¹å¾æå–å™¨å°±è¡Œäº†ï¼Œä¸ç®¡æ˜¯å¯¹è®­ç»ƒæ ·æœ¬ï¼Œè¿˜æ˜¯zero-shotæ—¶ç»™çš„promptéŸ³é¢‘ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚ å¦‚æœä½ æ˜¯åœ¨åŸºç¡€æ¨¡å‹ä¸ŠåšSFTè®­ç»ƒï¼Œè€Œåšzero-shotåˆæˆï¼Œé‚£è‚¯å®šéŸ³è‰²ä¸å¥½çš„ã€‚ä½ è¦æƒ³zero-shotå¥½ï¼Œé‚£å°±ç›´æ¥ç”¨åŸºåº§æ¨¡å‹ï¼Œä¸è¦ç”¨SFT[å°‘é‡ç²¾æ ‡éŸ³è‰²]çš„å¾®è°ƒè®­ç»ƒã€‚    \r\ncomplus è‡ªèº«å°±æ˜¯ä¸€ä¸ªå£°çº¹æå–å™¨ï¼Œå®ƒè¾“å‡ºæ˜¯ä¸€ä¸ª192ç»´åº¦çš„å›ºå®šé•¿åº¦çš„å¼ é‡ï¼Œæœ¬èº«å°±æ˜¯èµ·åˆ°ä¸€ä¸ªéŸ³è‰²æ ‡è®°çš„ä½œç”¨ï¼Œå¹¶ä¸è´Ÿè´£éŸ³è‰²çš„å®Œç¾å¤ç°çš„ã€‚æ‰€ä»¥è·Ÿå®ƒæ— å…³ã€ä½ è¯´çš„campluséŸ³è‰²æ•ˆæœä¸å¥½ï¼Œè¿™ä¸ªä¸å‡†ç¡®ï¼Œåº”è¯¥è·Ÿå®ƒæ²¡æœ‰å…³ç³»ã€‘ã€‚ ä½ è¦æƒ³æé«˜éŸ³è‰²ç›¸ä¼¼åº¦ï¼Œä½ å°±è¦æå‡ä½ çš„CosyVoice_Flowæ¨¡å‹ï¼Œä»¥åŠåç»­çš„Vocoderçš„éŸ³è‰²å¤åŸæ•ˆæœã€‚å®ƒä»¬æ˜¯çœŸæ­£è¯­ä¹‰tokenè½¬åŒ–ä¸ºå£°å­¦çš„å…³é”®éƒ¨åˆ†ã€‚ ä¸»è¦æ˜¯åœ¨flowæ¨¡å‹ã€‚"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-12-31T03:27:48Z",
        "body": "æˆ‘ç”¨çš„å°±æ˜¯0.5bçš„v2æ¨¡å‹ï¼Œcross language éŸ³è‰²ä¸è´´åˆï¼Œä¸æ˜¯zeroshotã€‚\r\nè¿™ä¸ªæœ‰å•¥åŠæ³•ä¼˜åŒ–å—"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-12-31T03:31:05Z",
        "body": "> æˆ‘ç”¨çš„å°±æ˜¯0.5bçš„v2æ¨¡å‹ï¼Œcross language éŸ³è‰²ä¸è´´åˆï¼Œä¸æ˜¯zeroshotã€‚ è¿™ä¸ªæœ‰å•¥åŠæ³•ä¼˜åŒ–å—\r\n\r\næŠŠè°ƒç”¨ä»£ç ä¸promptéŸ³é¢‘æä¾›ä¸€ä¸‹"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-12-31T03:44:17Z",
        "body": "\r\n```\r\na = self.model.inference_cross_lingual(\r\n                text,\r\n                prompt_speech_16k,\r\n                stream=stream,\r\n            )\r\n```\r\n\r\nä¸»è¦æ˜¯è¿™ä¸ªï¼ŒéŸ³è‰²ä¸æ˜¯è¯´ä¸åƒï¼Œä¸»è¦æ˜¯å’ŒF5å¯¹æ¯”èµ·æ¥ï¼Œæ²¡æœ‰é‚£ä¹ˆè´´åˆ\r\n\r\n"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-12-31T07:32:15Z",
        "body": "æ²¡åšè¿‡è·¨è¯­è¨€çš„å°è¯•ï¼Œä½†æ˜¯çœ‹ä»–ä»¬å¼€æºä»£ç ï¼Œ inference_cross_lingual æœ¬è´¨ä¸Šå°±æ˜¯zero_shot,  å¹¶ä¸”ä¸æä¾› Prompt Textå’ŒPromt Speechï¼Œç›¸å½“äºé›¶æ¡ä»¶çš„zero Prompt zero shotï¼Œç”šè‡³è¿æ¨¡å‹çš„In-Context Learningçš„èƒ½åŠ›éƒ½æ²¡åŠæ³•ç”¨åˆ°ï¼Œæ‰€ä»¥æ•ˆæœä¸å¤ªç†æƒ³æ˜¯å¯ä»¥æƒ³è§çš„ã€‚   \r\n ç¬¬ä¸€ä½ åªèƒ½ç”¨base modelä¸è¦ç”¨ç²¾è°ƒæ¨¡å‹ï¼›ç¬¬äºŒå¦‚æœbaseæ¨¡å‹è¿˜æ˜¯æ•ˆæœä¸å¥½ï¼Œé‚£ä¹Ÿæ²¡åˆ«çš„åŠæ³•äº†ã€‚å¢å¤§æ¨¡å‹å°ºå¯¸å®¹é‡ï¼Œå¢åŠ è®­ç»ƒæ•°æ®ã€ç‰¹åˆ«æ˜¯éŸ³è‰²ç±»å‹è¦†ç›–åº¦ã€‘ï¼Œå¤šè®­ç»ƒä¸€äº›æ­¥éª¤ï¼Œå¯èƒ½ä¼šå¥½ä¸€äº›ã€‚  å¦å¤–å¦‚æœè®­ç»ƒçš„æ—¶å€™ï¼Œèƒ½å¤Ÿå¼ºè°ƒè®©æ¨¡å‹åœ¨åªæœ‰ å£°çº¹promptï¼Œä¸åŒ…å«æ–‡æœ¬promptå’Œè¯­éŸ³promtä¸Šçš„åˆæˆæ•ˆæœï¼Œè·ŸçœŸå®ç›®æ ‡ä¹‹é—´çš„æŸå¤±ï¼Œæœ‰å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚ä½†æ˜¯æˆ‘è§‰å¾—å¤§æ¦‚ç‡å¸®åŠ©ä¸ä¼šå¾ˆå¤§ã€‚å› ä¸ºæˆ‘è§‰å¾—å£°çº¹ï¼Œ192ç»´å‘é‡ï¼Œä¸»è¦ä½œç”¨è¿˜æ˜¯â€œåŒºåˆ†â€ï¼Œ è€Œä¸æ˜¯â€œè•´å«â€ï¼› ä¹Ÿå°±æ˜¯å®ƒæ˜¯åŒºåˆ†ä¸åŒéŸ³è‰²çš„æ•ˆæœæ›´å¤§ä¸€äº›ï¼Œè€Œå¹¶ä¸æ˜¯åŒ…å«äº†å½“å‰å£°çº¹ä»£è¡¨éŸ³è‰²çš„æ‰€æœ‰å£°å­¦ç‰¹å¾ï¼Œæ‰€ä»¥æŒ‡æœ›è¿™ä¸ªä¸œè¥¿èƒ½éå¸¸ç†æƒ³çš„å¤åˆ»ä½ çš„å¤–è¯­éŸ³è‰²ï¼Œå¯èƒ½æ€§ä¸å¤§ã€‚ è€Œå£°çº¹æœ¬è´¨æ¥æºäºåˆ†ç±»ï¼Œæ‰€ä»¥åœ¨å½“å‰æ¨¡å‹ä¸‹ï¼Œå¤§æ¦‚ç‡æ¨¡å‹ä¼šç”¨ä¸€ä¸ªéå¸¸é è¿‘ä½ çš„å£°çº¹éŸ³è‰²çš„æŸä¸ªå…¶å®ƒè®­ç»ƒæ ·æœ¬ä¸­è§è¿‡çš„éŸ³è‰²ï¼Œæ¥åˆæˆä½ çš„å£°éŸ³ï¼Œä¸å¤ªå¯èƒ½éå¸¸åƒçš„ã€‚ åªæ˜¯ä¸ªäººè§è§£ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ã€‚"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-12-31T07:34:35Z",
        "body": "prompt_speech æ˜¯è‚¯å®šç”¨åˆ°äº†çš„ã€‚\r\nä¸å¤ªç¡®å®šä¸ºä»€ä¹ˆæ²¡ç”¨åˆ°prompt text"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-12-31T07:37:12Z",
        "body": "æ‚¨æŠŠå®ƒç”¨åˆ°prompt speechçš„ä¾‹å­ä»£ç è´´å‡ºæ¥ï¼Ÿ å®ƒçš„front_endé‡Œè¾¹ï¼Œcross_lingualçš„æ—¶å€™ï¼Œæ˜¯æŠŠprompt textï¼Œ prompt melï¼Œä»¥åŠä¸¤ä¸ªé•¿åº¦ï¼Œéƒ½delæ‰äº†çš„ã€‚ä½ çš„prompt speechåªèƒ½ç”¨æ¥æå–å£°çº¹äº†ã€‚"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-12-31T08:22:29Z",
        "body": "æ²¡æœ‰æ·±ç©¶cosyvoice2åŸç†ä»£ç ï¼Œä»å‰ç«¯æ¥å£æ¥çœ‹ï¼ŒF5ä¼šç”¨åˆ°promptspeechå’Œprompttextï¼Œcosyvoice2ç”šè‡³æ²¡ä¼ å…¥textè‚¯å®šæ²¡ç”¨åˆ°ï¼Œspeechç”¨åˆ°äº†å“ªä¸€å±‚ä¸å¤ªç¡®å®šï¼Œä»¥åŠä¸ºä»€ä¹ˆä¸éœ€è¦textå­˜ç–‘"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-12-31T09:42:38Z",
        "body": "cosyvoice2ï¼Œåœ¨ä¸€èˆ¬çš„åŒè¯­ç§ Promptçš„åˆæˆçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å¯ä»¥æ”¯æŒPrompt Speech å’ŒPrompt Textçš„ã€‚åªæ˜¯è·¨è¯­ç§çš„Promptè¯­éŸ³ï¼Œå®ƒå¯¹åº”çš„æ–‡æœ¬è¯­è¨€ï¼Œå¯èƒ½ä¸åœ¨CosyVoice2æ”¯æŒè¯­è¨€ç§ç±»èŒƒå›´å†…å•Šï¼Ÿæ€ä¹ˆè¾“å…¥å‘¢ï¼Ÿ  ä½ è¿™è·¨è¯­ç§çš„ï¼Œè€Œä¸”PromptåŒ…å«çš„è¯­ç§ä¸æ˜¯æ¨¡å‹æ”¯æŒèŒƒå›´å†…çš„è¯ï¼Œæˆ‘ä¼°è®¡F5é‚£ä¸ªä¹Ÿä¸æ•¢ç”¨ã€‚è°çŸ¥é“ç”¨è¿™ä¸ªPromptçš„ä¸œè¥¿ä¼šå¼•å¯¼ç”Ÿæˆå•¥ä¸ç¨³å®šçš„ç»“æœå‡ºæ¥å•Šã€‚å…³é”®æ˜¯è·¨è¯­ç§ã€‚    \r\nè€Œä¸”è·Ÿç›¸å…³åŒå­¦äº†è§£åˆ°ï¼Œå£°çº¹æå–ï¼Œå…¶å®ä¹Ÿæ˜¯è·Ÿè¯­ç§æœ‰ä¸€å®šå…³ç³»çš„ã€‚æˆ‘ä»¬ä¸æ¸…æ¥šè¿™ä¸ªé¢„è®­ç»ƒçš„complusæ˜¯ä¸æ˜¯æ”¯æŒå„ç§è·¨è¯­ç§ï¼Œæˆ–è€…åªæ˜¯æ”¯æŒä¸­è‹±æ—¥éŸ©ç­‰å°‘é‡å¤§è¯­ç§ï¼Œè€Œä½ ç”¨å­ŸåŠ æ‹‰ã€ç¥–é² ç­‰ç­‰è¿™äº›å°è¯­ç§çš„è¯­éŸ³ï¼Œå¯èƒ½ä¹Ÿæ˜¯æœ‰å½±å“çš„ã€‚"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-12-31T10:55:11Z",
        "body": "tts å’Œ cloning ä¸¤ç äº‹"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-12-31T12:38:55Z",
        "body": "> tts å’Œ cloning ä¸¤ç äº‹\r\n\r\nå“ªå¥è¯æåˆ°å…‹éš†äº†ï¼Ÿ ....  è·³è·ƒå¤ªå¤§ï¼Œç†è§£ä¸èƒ½ã€‚"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2025-01-02T04:05:09Z",
        "body": "æ— æ³•äº¤æµã€‚ã€‚"
      },
      {
        "user": "LzyloveRila",
        "created_at": "2025-01-06T11:18:22Z",
        "body": "è¿™ä¸ªMonoæŠŠæˆ‘çœ‹ä¹äº†ï¼Œæºç éƒ½ä¸æ„¿æ„çœ‹ï¼Œçº¯æ "
      },
      {
        "user": "CrossLee1",
        "created_at": "2025-02-06T09:45:37Z",
        "body": "@JohnHerry helloï¼Œè¯·é—®ä¸‹è¿™ä¸ªé—®é¢˜ä½ ä»¬è§£å†³äº†ä¹ˆï¼Œæ˜¯ finetune llmï¼Œè¿˜æ˜¯ finetune flow matching æ•ˆæœå¥½å‘¢"
      },
      {
        "user": "CHIHHSIANGLI",
        "created_at": "2025-02-06T09:49:32Z",
        "body": "è¿™ä¸ªMonoå°±ä¸æ˜¯åšç®—æ³•çš„  ä½ ä»¬äº¤æµä¸äº†"
      }
    ]
  },
  {
    "number": 786,
    "title": "Voice cloning of Chinglish issue",
    "created_at": "2024-12-25T09:14:23Z",
    "closed_at": "2024-12-26T08:13:56Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/786",
    "body": "Occasionally, there is the issue of Chinglish. Is there a way to address it?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/786/comments",
    "author": "MonolithFoundation",
    "comments": [
      {
        "user": "darkacorn",
        "created_at": "2024-12-26T07:54:02Z",
        "body": "finetuneing on more english - natualy its dominant chinese - but nothing that can not be fixed with more data"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-12-26T08:13:12Z",
        "body": "å¬å›ä¸€å¸­å¦‚å¬ä¸€å¸­"
      }
    ]
  },
  {
    "number": 779,
    "title": "CosyVoice2 æ¨¡å‹é…ç½®æ–‡ä»¶æ›´æ–°",
    "created_at": "2024-12-24T07:17:14Z",
    "closed_at": "2024-12-24T09:56:31Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/779",
    "body": "**Is your feature request related to a problem? Please describe.**\r\nçœ‹è®ºæ–‡é‡ŒCosyVoice2åº”è¯¥æ˜¯24Khzçš„ï¼Œä½†æ˜¯ç°åœ¨çš„exampleé…ç½®é‡Œè¿˜æ˜¯22Khzå‘¢ï¼Œå»ºè®®æ›´æ–°ä¸€ä¸‹é…ç½®æ–‡ä»¶ï¼Œä»¥å…æ··æ·†ã€‚\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/779/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "cpken",
        "created_at": "2024-12-24T08:05:40Z",
        "body": "å› ä¸º 2.0 çš„è®­ç»ƒè„šæœ¬è¿˜æ²¡æœ‰æä¾›å‡ºæ¥ï¼Œä½ çœ‹åˆ°çš„æ˜¯ 1.0 çš„è®­ç»ƒè„šæœ¬ã€‚"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-12-24T09:56:31Z",
        "body": "æ”¶åˆ°ï¼Œè°¢è°¢ï¼ æŒç»­å­¦ä¹ ä¸­!"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-12-31T09:55:15Z",
        "body": "> å› ä¸º 2.0 çš„è®­ç»ƒè„šæœ¬è¿˜æ²¡æœ‰æä¾›å‡ºæ¥ï¼Œä½ çœ‹åˆ°çš„æ˜¯ 1.0 çš„è®­ç»ƒè„šæœ¬ã€‚\r\n\r\nè¯·æ•™ä¸€ä¸‹ï¼Œå°±flowæ¨¡å‹è€Œè¨€ï¼Œ CosyVoice2 å’Œ CosyVoice1çš„è®­ç»ƒé…ç½®ï¼Œå’Œè®­ç»ƒè„šæœ¬åº”è¯¥æ²¡æœ‰å¤ªå¤§å˜åŒ–å§ï¼Ÿ"
      }
    ]
  },
  {
    "number": 776,
    "title": "CosyVoice2.0æ”¯æŒå¾®è°ƒå—ï¼Ÿ",
    "created_at": "2024-12-24T02:10:26Z",
    "closed_at": "2025-01-02T01:30:07Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/776",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/776/comments",
    "author": "wjddd",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-12-29T09:38:21Z",
        "body": "æ”¯æŒï¼Œ1æœˆåº•æ›´æ–°"
      },
      {
        "user": "wjddd",
        "created_at": "2025-01-02T01:30:07Z",
        "body": "> æ”¯æŒï¼Œ1æœˆåº•æ›´æ–°\r\n\r\nå¥½çš„ï¼Œè°¢è°¢ï¼"
      },
      {
        "user": "Kingdroper",
        "created_at": "2025-01-20T09:26:08Z",
        "body": "> æ”¯æŒï¼Œ1æœˆåº•æ›´æ–°\n\nHi, It's the end of January, when will you update"
      },
      {
        "user": "Downupanddownup",
        "created_at": "2025-01-24T01:41:48Z",
        "body": "æ„Ÿè§‰å¾—å¹´åäº†å‘€"
      },
      {
        "user": "aluminumbox",
        "created_at": "2025-01-24T03:09:26Z",
        "body": "dev/lyuxiang.lxåˆ†æ”¯å·²ç»æ›´æ–°cosyvoice2.0 flowè®­ç»ƒä»¥åŠflowæ¨ç†cacheä»£ç ï¼Œç”±äºè¿™ä¸ªæ›´æ–°å½±å“å…¶ä»–æœåŠ¡ï¼Œå› æ­¤ä¼šå¹´åæµ‹è¯•å¥½åå†merge main"
      },
      {
        "user": "zw76859420",
        "created_at": "2025-02-12T08:02:44Z",
        "body": "æœŸå¾…"
      }
    ]
  },
  {
    "number": 749,
    "title": "fix the bug of constantlr and deespeed",
    "created_at": "2024-12-19T06:34:35Z",
    "closed_at": "2025-01-07T02:52:48Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/749",
    "body": "ä¿®å¤ä½¿ç”¨deepspeedè®­ç»ƒï¼Œä¸”schedulerä¸ºconstantlræ—¶çš„bugï¼š\r\n1. åŸæœ‰ä»£ç ä¼ å…¥çš„æ˜¯conf/ds_stage2.jsonä¸­çš„optimizerï¼Œå¹¶æœªä¼ å…¥yamlæ–‡ä»¶ä¸­çš„optimizerã€‚\r\n2. constantlrä¼šæŠ¥å…³äºscheduler_confå’Œwarmup_stepsçš„KeyError\r\n\r\nåœ¨yamlä¸­è®¾ç½®lrä¸º0.00001ï¼Œ\r\nä¿®å¤bugä¹‹å‰çš„logï¼š\r\n`TypeError: __init__() got an unexpected keyword argument 'warmup_steps'`\r\n`2024-12-19 11:25:00,526 DEBUG TRAIN Batch 0/100 loss 3.138866 acc 0.303122 lr 0.00100000 grad_norm 0.286094 rank 0`\r\nä¿®å¤bugä¹‹åçš„logï¼š\r\n`2024-12-19 06:20:32,664 DEBUG TRAIN Batch 0/100 loss 3.581383 acc 0.204409 lr 0.00001000 grad_norm 1.757465 rank 0`\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/749/comments",
    "author": "Shengqiang-Li",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-12-29T09:18:36Z",
        "body": "è¿™é‡Œæ˜¯å› ä¸ºdeepspeed optimizeræ•ˆç‡æ›´é«˜ï¼Œå› æ­¤ä¼ å…¥çš„æ˜¯noneï¼Œä½†ç¡®å®éœ€è¦æ ¹æ®yamlé‡Œé…ç½®è°ƒæ•´ä¸€ä¸‹dsçš„optimizeré…ç½®"
      },
      {
        "user": "Shengqiang-Li",
        "created_at": "2024-12-29T12:35:10Z",
        "body": "> è¿™é‡Œæ˜¯å› ä¸ºdeepspeed optimizeræ•ˆç‡æ›´é«˜ï¼Œå› æ­¤ä¼ å…¥çš„æ˜¯noneï¼Œä½†ç¡®å®éœ€è¦æ ¹æ®yamlé‡Œé…ç½®è°ƒæ•´ä¸€ä¸‹dsçš„optimizeré…ç½®\r\n\r\näº†è§£ï¼Œé‚£è¿™å—çš„optimizerå°±ä¸æ”¹äº†ã€‚"
      }
    ]
  },
  {
    "number": 743,
    "title": "[Bug] Tags < and > are removed during inference when text_frontend=True",
    "created_at": "2024-12-17T22:45:17Z",
    "closed_at": "2025-01-08T10:06:22Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/743",
    "body": "### **Bug Report**\r\n\r\n#### **Description**\r\nWhen setting `text_frontend=True` (or leaving it as the default), the `<` and `>` tags are removed from the text during inference.\r\n\r\nFor example:\r\n```text\r\nINFO synthesis text è¿™ä¹Ÿstrongå¤ªstrongç¦»è°±äº†å§ï¼\r\n```\r\n---\r\n\r\n#### **To Reproduce**\r\n\r\n```python\r\nfrom cosyvoice.cli.cosyvoice import CosyVoice, CosyVoice2\r\nfrom cosyvoice.utils.file_utils import load_wav\r\nimport torchaudio\r\n\r\n# Initialize the CosyVoice2 model\r\ncosyvoice = CosyVoice2(\r\n    'pretrained_models/CosyVoice2-0.5B',\r\n    load_jit=True,\r\n    load_onnx=False,\r\n    load_trt=False\r\n)\r\n\r\naudio_file_path = 'audio/48k.wav'\r\nprompt_speech_16k = load_wav(audio_file_path, 16000)\r\n\r\nfor i, j in enumerate(cosyvoice.inference_cross_lingual(\r\n    'è¿™ä¹Ÿ<strong>å¤ª</strong>ç¦»è°±äº†å§ï¼',\r\n    prompt_speech_16k,\r\n    stream=False\r\n)):\r\n    torchaudio.save(\r\n        'fine_grained_control_{}.wav'.format(i),\r\n        j['tts_speech'],\r\n        cosyvoice.sample_rate\r\n    )\r\n```\r\n\r\n---\r\n\r\n#### **Expected Behavior**\r\nThe inference should preserve the `<` and `>` tags as part of the input text.\r\n\r\n```text\r\nè¿™ä¹Ÿ<strong>å¤ª</strong>ç¦»è°±äº†å§ï¼\r\n```\r\n\r\n---\r\n\r\n#### **Actual Behavior**\r\nThe tags `<` and `>` are removed, resulting in:\r\n```text\r\nè¿™ä¹Ÿstrongå¤ªstrongç¦»è°±äº†å§\r\n```\r\n\r\n---\r\n\r\n#### **Environment**\r\nPlease provide details about your environment:\r\n\r\n- **Operating System**: WSL2\r\n- **Python Version**: Python3.10 on `conda`",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/743/comments",
    "author": "youngercloud",
    "comments": [
      {
        "user": "darkacorn",
        "created_at": "2024-12-18T11:11:22Z",
        "body": "interesting .. maybe just a display thing as <laughter></laughter> does work - on cross lingual that is"
      },
      {
        "user": "youngercloud",
        "created_at": "2024-12-20T04:28:32Z",
        "body": "@darkacorn I reinstalled the Cosyvoice2 step by step on a new Ubuntu-based machine, and I got the log below.\r\n\r\n```\r\n2024-12-20 15:17:49,499 INFO synthesis text è¿™ä¹Ÿ<strong>å¤ª</strong>ã€‚\r\n```\r\n\r\nIn terms of actual inference, the model uses the post-processed string, which indicates an incorrect string, and outputs the wrong audio.\r\n\r\nThe reason of re-installing is that I wanted to see if `WeTextProcessing` works properly, and it works fine for the above sentence.\r\n\r\nAnyway, I will set the `text_frontend` to `False` and leave this issue open for a while to see if someone encounters a similar issue."
      }
    ]
  },
  {
    "number": 731,
    "title": "can MBP M3 Pro run this cosyvoice2? can not install requirements.txt.",
    "created_at": "2024-12-16T09:42:13Z",
    "closed_at": "2024-12-17T05:55:55Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/731",
    "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/731/comments",
    "author": "hildazzz",
    "comments": [
      {
        "user": "darkacorn",
        "created_at": "2024-12-16T16:58:11Z",
        "body": "how about you fill the form out ^^ - not just spam an empty report template"
      },
      {
        "user": "hildazzz",
        "created_at": "2024-12-17T05:55:53Z",
        "body": "after commenting out some lines in requiremens.txt, the reference of v2 works well, while the v1 model can not work, as issue #724.\r\nI will close this issue. "
      }
    ]
  },
  {
    "number": 712,
    "title": "èƒ½å¦åœ¨è¯­éŸ³åˆæˆçš„åŒæ—¶å‡ºsrtå­—å¹•ï¼Œè¿˜æ˜¯å¾—åˆæˆå®Œåå†whisperè¯†åˆ«å‡ºæ¥å‘¢ï¼Ÿ",
    "created_at": "2024-12-13T03:20:07Z",
    "closed_at": "2024-12-14T09:24:13Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/712",
    "body": "èƒ½å¦åœ¨è¯­éŸ³åˆæˆçš„åŒæ—¶å‡ºsrtå­—å¹•ï¼Œè¿˜æ˜¯å¾—åˆæˆå®Œåå†whisperè¯†åˆ«å‡ºæ¥å‘¢ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/712/comments",
    "author": "bk111",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-12-14T09:24:13Z",
        "body": "åˆæˆçš„å†…å®¹å’Œæ–‡æœ¬æ˜¯å¯¹åº”çš„ï¼Œå¯ä»¥è‡ªè¡Œå¤„ç†"
      },
      {
        "user": "Lennon-cheng",
        "created_at": "2024-12-24T11:11:14Z",
        "body": "@aluminumbox  TTS åå¾—åˆ°æ¯ä¸ªå­—å¯¹åº”çš„æ—¶é—´æˆ³ã€‚è¿™ä¸ªæ˜¯ åªèƒ½åå¤„ç† whisper è¯†åˆ«åå¯¹åº”æ–‡æœ¬ï¼Œè¿˜æ˜¯è¯´ï¼Œæ¨¡å‹å“ªä¸ªåœ°æ–¹å¯ä»¥åå‡ºæ—¶é—´æˆ³ï¼Ÿ"
      }
    ]
  },
  {
    "number": 711,
    "title": "transformer is not installed, please install it if you want to use related modules",
    "created_at": "2024-12-13T02:14:21Z",
    "closed_at": "2024-12-14T09:24:21Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/711",
    "body": "2024-12-12 17:47:19,464 - modelscope - INFO - PyTorch version 2.0.1+cu118 Found.\r\n2024-12-12 17:47:19,465 - modelscope - INFO - Loading ast index from /home/dengz/.cache/modelscope/ast_indexer\r\n2024-12-12 17:47:19,616 - modelscope - INFO - Loading done! Current index file version is 1.15.0, with md5 c6929b755ba51ba218327722832189d6 and a total number of 980 components indexed\r\ntransformer is not installed, please install it if you want to use related modules\r\n\r\n\r\n\r\ntransformer  æ˜¯  transformers åŒ…æ²¡æœ‰å®‰è£…å—ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/711/comments",
    "author": "bk111",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-12-14T09:24:21Z",
        "body": "å› ä¸ºä¸éœ€è¦"
      }
    ]
  },
  {
    "number": 710,
    "title": "fix(bug).when generating text that contains only punctuation marks orâ€¦",
    "created_at": "2024-12-12T08:50:55Z",
    "closed_at": "2024-12-30T02:55:56Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/710",
    "body": "fix(bug).when generating text that contains only punctuation marks or whitespace characters, the CPU usage reaches 100%, and the process crashes.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/710/comments",
    "author": "0xCAFEBABE0",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-12-29T09:22:27Z",
        "body": "è¿™ä¸ªæ£€æµ‹å¾ˆå¥½ï¼Œä½†æ˜¯æˆ‘ä¼šè€ƒè™‘ç›´æ¥æŠŠè¿™ä¸ªæ£€æµ‹æ”¾åˆ°frontend.pyé‡Œï¼Œå¦‚æœå…¨æ˜¯æ ‡ç‚¹åˆ™è¿”å›ç©ºlistï¼Œåé¢å°±ä¸ä¼šè¿›å…¥model.pyé‡Œçš„ttsæ–¹æ³•"
      },
      {
        "user": "0xCAFEBABE0",
        "created_at": "2024-12-30T02:50:38Z",
        "body": "> è¿™ä¸ªæ£€æµ‹å¾ˆå¥½ï¼Œä½†æ˜¯æˆ‘ä¼šè€ƒè™‘ç›´æ¥æŠŠè¿™ä¸ªæ£€æµ‹æ”¾åˆ°frontend.pyé‡Œï¼Œå¦‚æœå…¨æ˜¯æ ‡ç‚¹åˆ™è¿”å›ç©ºlistï¼Œåé¢å°±ä¸ä¼šè¿›å…¥model.pyé‡Œçš„ttsæ–¹æ³•\r\n\r\n@aluminumbox å¥½ä¸»æ„ï¼Œå·²æ›´æ–°ä»£ç ã€‚"
      }
    ]
  },
  {
    "number": 706,
    "title": "å¤šä¸ªè¯·æ±‚çš„æ—¶å€™gpuåˆ©ç”¨ç‡100%å¡æ­»",
    "created_at": "2024-12-10T09:25:03Z",
    "closed_at": "2024-12-30T09:47:02Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/706",
    "body": "å¤§ä½¬å¥½ï¼Œubuntu20.04  4090,æŒ‰ç…§æ–‡æ¡£éƒ¨ç½²åï¼Œå†™äº†ä¸ªdemoï¼ŒåŒæ—¶è¯·æ±‚è¶…è¿‡5ä¸ªåï¼Œå‡ºç°gpuåˆ©ç”¨ç‡100%ï¼Œå¡æ­»ä¸é‡Šæ”¾ï¼ŒæœåŠ¡ä¹Ÿå‡æ­»äº†ï¼Œæ—¥å¿—æœ‰æ‰“å°ï¼š\r\n/root/miniconda3/envs/cv/lib/python3.8/site-packages/torch/nn/modules/module.py:1501: UserWarning: operator() sees varying value in profiling, ignoring and this should be handled by GUARD logic (Triggered internally at ../third_party/nvfuser/csrc/parser.cpp:3777.)                                                                                                                                                                              | 0/1 [00:00<?, ?it/s]\r\n  return forward_call(*args, **kwargs) ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/706/comments",
    "author": "xuejiale929",
    "comments": [
      {
        "user": "xuejiale929",
        "created_at": "2024-12-10T09:25:15Z",
        "body": "è¡¥å……ï¼š/root/miniconda3/envs/cv/lib/python3.8/site-packages/torch/nn/modules/module.py:1501: UserWarning: operator() profile_node %359 : int[] = prim::profile_ivalue[profile_failed=\"varying profile values\"](%357)\r\n does not have profile information (Triggered internally at ../third_party/nvfuser/csrc/graph_fuser.cpp:104.)â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:08<00:00,  8.85s/it]\r\n  return forward_call(*args, **kwargs)\r\n"
      },
      {
        "user": "xuejiale929",
        "created_at": "2024-12-10T09:26:19Z",
        "body": "cuda11.8,é©±åŠ¨550.135"
      },
      {
        "user": "ganfengbao",
        "created_at": "2024-12-11T06:53:50Z",
        "body": "+1 é‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œä¸¤ä¸ªæµå¼æ¨ç†ç›´æ¥å°±å¡æ­»äº†ï¼Œåˆ©ç”¨webuiåšæµ‹è¯•çš„æ—¶å€™"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-12-30T09:47:02Z",
        "body": "ä¸è¦ç”¨webuiå¹¶å‘æ¨ç†ï¼Œruntimeé‡Œçš„grpcæˆ‘æ˜¯è¯•è¿‡å¯ä»¥å¹¶å‘æ²¡é—®é¢˜çš„ï¼Œå…¶ä»–çš„éƒ¨åˆ†å¹¶å‘ä¸æ˜¯å®˜æ–¹ä¿è¯ï¼Œå¦‚æœä¸€å®šè¦ç”¨gradioæä¾›æœåŠ¡ï¼Œé‚£ä¹ˆéœ€è¦è‡ªå·±ç ”ç©¶ä¸€ä¸‹"
      }
    ]
  },
  {
    "number": 698,
    "title": "å¦‚ä½•ç¦æ­¢ttsfrd æ‰“å° tn xxx to xxx çš„log",
    "created_at": "2024-12-05T06:29:38Z",
    "closed_at": "2024-12-05T09:23:43Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/698",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/698/comments",
    "author": "vra",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-12-05T08:32:40Z",
        "body": "æ²¡æœ‰åŠæ³•"
      }
    ]
  },
  {
    "number": 692,
    "title": "æ¨¡å‹æ”¯æŒå•†ç”¨ä¹ˆ",
    "created_at": "2024-12-03T07:13:07Z",
    "closed_at": "2025-02-05T02:38:16Z",
    "labels": [
      "stale"
    ],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/692",
    "body": "é™¤äº†ä»“åº“æœ‰ä¸ªå¼€æºåè®®ï¼Œæ²¡æœ‰çœ‹åˆ°æ¨¡å‹ç›¸å…³çš„æè¿°",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/692/comments",
    "author": "the-loki",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-12-03T09:42:03Z",
        "body": "å¯ä»¥ï¼Œä¹Ÿé€‚ç”¨äºæ¨¡å‹"
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2025-01-03T02:00:25Z",
        "body": "This issue is stale because it has been open for 30 days with no activity."
      }
    ]
  },
  {
    "number": 690,
    "title": "å¦‚ä½•å¼€å¯LOGæ—¥å¿—ï¼Œå¯åŠ¨æ— ååº”",
    "created_at": "2024-12-03T02:33:47Z",
    "closed_at": "2024-12-03T16:18:53Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/690",
    "body": "å¦‚ä½•å¼€å¯LOGæ—¥å¿—ï¼Œå¯åŠ¨æ— ååº”ï¼Œä¹Ÿä¸æŠ¥é”™ï¼Œä¹Ÿæ— ä»»ä½•ä¿¡æ¯è¾“å‡ºï¼Œ æœç´¢æ–‡ä»¶ä¹Ÿæœªçœ‹åˆ°logæ–‡ä»¶ã€‚\r\n\r\næ±‚å¤§ä½¬æŒ‡å¯¼ï¼Œæ„Ÿè°¢ï¼",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/690/comments",
    "author": "iloveuaa",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-12-03T09:40:17Z",
        "body": "terminalé‡Œåº”è¯¥æœ‰æ—¥å¿—"
      },
      {
        "user": "iloveuaa",
        "created_at": "2024-12-03T14:35:20Z",
        "body": "> terminalé‡Œåº”è¯¥æœ‰æ—¥å¿—\r\n\r\nç„¶è€Œæ˜¯æ²¡æœ‰çš„ï¼Œä¸çŸ¥é“æ€ä¹ˆæäº†ã€‚\r\n5600x 4060TI 16G"
      }
    ]
  },
  {
    "number": 686,
    "title": "åˆ†æ®µæ–‡æœ¬è¿ç»­è°ƒç”¨CosyVoice-300Mçš„ttsæ¨ç†ï¼ŒéŸ³é¢‘åæ®µç”µéŸ³è¶Šæ¥è¶Šä¸¥é‡ã€‚",
    "created_at": "2024-11-29T05:18:09Z",
    "closed_at": "2024-12-02T03:04:20Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/686",
    "body": "æˆ‘åœ¨ä¸»è¿›ç¨‹æŒ‚è½½äº†CosyVoice-300Mæ¨¡å‹ï¼ŒæŠŠé•¿æ–‡æœ¬è¿›è¡Œåˆ‡ç‰‡ï¼ŒæŠŠåˆ‡ç‰‡æ–‡æœ¬è¾“å…¥ç»™TTSæ–¹æ³•æ¨ç†ï¼Œæœ€åæŠŠç”Ÿæˆçš„éŸ³é¢‘è¿›è¡Œåˆå¹¶ã€‚å‰é¢çš„éŸ³é¢‘å¬èµ·æ¥å¾ˆæ­£å¸¸ï¼Œåç»­ç”µéŸ³è¶Šæ¥è¶Šä¸¥é‡ï¼Œæˆ‘çŒœæµ‹æ˜¯æ¨¡å‹æŒ‚è½½åå­˜åœ¨ç¼“å­˜é€ æˆå½±å“ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œæœ‰æ²¡æœ‰æ–¹æ³•å®šæœŸæ¸…ç†ç¼“å­˜æ•°æ®é¿å…è¿™ç§ç”µéŸ³ã€‚\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/686/comments",
    "author": "ZzMLvzZ-792998470",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-30T02:54:56Z",
        "body": "åº”è¯¥è·Ÿç¼“å­˜æ²¡å…³ç³»ï¼Œç¡®å®šæ˜¯ä¸æ˜¯åˆ‡äº†çŸ­å¥åï¼Œæ¯ä¸€å¥åˆ†å¼€æ¨ç†ã€‚torch.cuda.empty_cacheæ¸…æ¥šç¼“å­˜"
      },
      {
        "user": "ZzMLvzZ-792998470",
        "created_at": "2024-11-30T10:03:44Z",
        "body": "> åº”è¯¥è·Ÿç¼“å­˜æ²¡å…³ç³»ï¼Œç¡®å®šæ˜¯ä¸æ˜¯åˆ‡äº†çŸ­å¥åï¼Œæ¯ä¸€å¥åˆ†å¼€æ¨ç†ã€‚torch.cuda.empty_cacheæ¸…æ¥šç¼“å­˜\r\n\r\næˆ‘æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œåˆ†æˆå•å¥ï¼Œéå†èµ°å•ç‹¬æ¨ç†ï¼Œæ¯æ¬¡æ‰§è¡Œä¸ºä½¿ç”¨toch.cuda.empty_cache()ï¼Œä½†æ˜¯é—®é¢˜è¿˜æ˜¯å­˜åœ¨ã€‚\r\n```\r\n# for text in tts_split:\r\n    while index < len(tts_split):\r\n        text = tts_split[index]\r\n        origin = origin_split[index]\r\n\r\n        ret, content = extract_special(text, '#<', '>#')\r\n        subtitle_content = origin if not ret else ''\r\n        # ttså¤„ç†å¹¶ç”ŸæˆéŸ³é¢‘æ•°æ®\r\n        json_data = {\r\n            'content': subtitle_content,\r\n            'start': -1,\r\n            'end': -1\r\n        }\r\n\r\n        # å•å¥æ¨ç†\r\n        audio_data, duration = tts_warp(ret, content, text, model_input, language)\r\n        audio_data_list.append(audio_data)\r\n\r\n        # -------------------------------------\r\n        json_data['start'] = startTime\r\n        json_data['end'] = startTime + duration\r\n        subtitle_list.append(json_data)\r\n        startTime += duration\r\n        # -------------------------------------\r\n\r\n        torch.cuda.empty_cache()\r\n        index += 1\r\n\r\n```"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-12-02T02:59:16Z",
        "body": "ä¸æ¸…æ¥šï¼Œå¦‚æœæ¯ä¸€å¥éƒ½è¿™æ ·çš„è¯ï¼Œé‚£æ˜¯æ¨¡å‹é—®é¢˜ã€‚å¦‚æœåªæ˜¯åé¢çš„å¥å­è¿™æ ·ï¼Œå‰é¢å¥å­æ­£å¸¸ï¼Œé‚£åº”è¯¥æ˜¯è°ƒç”¨æœ‰é—®é¢˜"
      },
      {
        "user": "ZzMLvzZ-792998470",
        "created_at": "2024-12-02T03:04:17Z",
        "body": "> ä¸æ¸…æ¥šï¼Œå¦‚æœæ¯ä¸€å¥éƒ½è¿™æ ·çš„è¯ï¼Œé‚£æ˜¯æ¨¡å‹é—®é¢˜ã€‚å¦‚æœåªæ˜¯åé¢çš„å¥å­è¿™æ ·ï¼Œå‰é¢å¥å­æ­£å¸¸ï¼Œé‚£åº”è¯¥æ˜¯è°ƒç”¨æœ‰é—®é¢˜\r\n\r\nå¥½å§ æˆ‘å†ç ”ç©¶ä¸€ä¸‹ã€‚æ„Ÿè°¢å›å¤"
      }
    ]
  },
  {
    "number": 685,
    "title": "ERROR: ttsfrd-0.3.6-cp38-cp38-linux_x86_64.whl is not a supported wheel on this platform.",
    "created_at": "2024-11-29T02:14:17Z",
    "closed_at": "2025-01-15T01:58:43Z",
    "labels": [
      "stale"
    ],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/685",
    "body": " ttsfrd-0.3.6-cp38-cp38-linux_x86_64.whl æœ‰python3.10çš„ç‰ˆæœ¬å—",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/685/comments",
    "author": "LIUKAI0815",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-30T02:55:02Z",
        "body": "æ²¡æœ‰"
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-12-31T02:00:02Z",
        "body": "This issue is stale because it has been open for 30 days with no activity."
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2025-01-15T01:58:43Z",
        "body": "This issue was closed because it has been inactive for 14 days since being marked as stale."
      }
    ]
  },
  {
    "number": 679,
    "title": "in Chinaè¯»çš„æ—¶å€™inå’ŒChinaä¸­é—´æ€»å¤šç‚¹ä¸œè¥¿?",
    "created_at": "2024-11-26T06:05:50Z",
    "closed_at": "2025-01-10T02:02:27Z",
    "labels": [
      "stale"
    ],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/679",
    "body": "in Chinaè¿™ä¸ªæ˜¯è¦åšå•¥æ ¼å¼åŒ–å¤„ç†å—ï¼Ÿç”¨é¢„è®­ç»ƒè‹±æ–‡å¥³çš„æ¨¡å‹è¯»ï¼Œin Chinaä¸­é—´ä¼šå¤šä¸€ä¸ªéŸ³ï¼Œin chinaå°å†™è¿™ä¸ªæ²¡æœ‰å¤šéŸ³ã€‚ä½†æ˜¯ä¸ç®¡å¤§å†™è¿˜æ˜¯å°å†™æ”¾åˆ° a pride of Shenyang inÂ China è¿™å¥è¯é‡Œéƒ½ä¼šå¤šä¸ªéŸ³ï¼Œè¿™æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ\r\nä»¥ä¸Šæµ‹è¯•æ˜¯åœ¨webui.pyæµ‹è¯•çš„ï¼Œç”¨çš„æ¨¡å‹æ˜¯300Mã€‚\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/679/comments",
    "author": "slash130",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-26T13:55:19Z",
        "body": "å¯ä»¥è‡ªå·±debugçœ‹çœ‹frontend.pyé‡Œtokenizeçš„ç»“æœï¼Œè¯•è¯• a pride of Shenyangå’Œin Chinaåˆ†åˆ«tokenizeç„¶åæ‹¼èµ·æ¥"
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-12-27T02:00:10Z",
        "body": "This issue is stale because it has been open for 30 days with no activity."
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2025-01-10T02:02:27Z",
        "body": "This issue was closed because it has been inactive for 14 days since being marked as stale."
      }
    ]
  },
  {
    "number": 675,
    "title": "ã€VCæ¨¡å¼ã€‘VCæ¨¡å¼ä¸‹çš„æµå¼æ¨ç†ï¼Œå·²ç»æ˜¯åˆ†æ®µè¿”å›ï¼Œä½†åˆæˆéŸ³é¢‘æ—¶ä»ç„¶åªæœ‰æœ€åä¸€æ®µ",
    "created_at": "2024-11-24T15:17:35Z",
    "closed_at": "2024-11-25T07:43:57Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/675",
    "body": "VCæ¨¡å¼ä¸‹çš„æµå¼æ¨ç†ï¼Œå·²ç»æ˜¯åˆ†æ®µè¿”å›ï¼Œä½†åˆæˆéŸ³é¢‘æ—¶ä»ç„¶åªæœ‰æœ€åä¸€æ®µï¼Œä¸‹é¢æ˜¯æˆ‘çš„è°ƒç”¨ä»£ç \r\n\r\n\r\n`cosyvoice = CosyVoice(\"tts_weight/CosyVoice-300M-25Hz\")\r\nprompt_speech_16k = load_wav('girl_cut.wav', 16000)\r\nsource_speech_16k = load_wav('AP.wav', 16000)\r\n\r\naudio_tts = []\r\nfor i, j in enumerate(cosyvoice.inference_vc(source_speech_16k, prompt_speech_16k, stream=False)):\r\n    audio_tts.append(j[\"tts_speech\"])\r\nfull_tts = torch.cat(audio_tts, dim=1)\r\ntorchaudio.save(\"vc_{}.wav\".format(2222), j[\"tts_speech\"], 22050)`",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/675/comments",
    "author": "wang-TJ-20",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-25T06:14:21Z",
        "body": "ä½ è¿™é‡Œstream=False"
      },
      {
        "user": "wang-TJ-20",
        "created_at": "2024-11-25T07:43:35Z",
        "body": "@aluminumbox å—¯å—¯ï¼Œè§£å†³å•¦ï¼Œæˆ‘ä»£ç æœ‰ä¸ªbug"
      }
    ]
  },
  {
    "number": 673,
    "title": "Question",
    "created_at": "2024-11-24T02:00:16Z",
    "closed_at": "2024-11-24T03:17:22Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/673",
    "body": "Is this able to change the language of vocals? Like a singer?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/673/comments",
    "author": "dillfrescott",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-24T03:10:29Z",
        "body": "no"
      },
      {
        "user": "dillfrescott",
        "created_at": "2024-11-24T03:17:15Z",
        "body": "Okay"
      }
    ]
  },
  {
    "number": 637,
    "title": "æœ€æ–°ç‰ˆæœ¬ æ–‡æœ¬æ­£åˆ™ ä¸¢å­—ï¼Œå®˜æ–¹ä¾‹å­ä¸‹",
    "created_at": "2024-11-11T10:27:42Z",
    "closed_at": "2024-11-14T03:34:38Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/637",
    "body": "**Describe the bug**\r\nç‰ˆæœ¬ï¼š\r\ncommit 6d22d0b76f7daf01324f8f569167c110af7bcb1e (HEAD -> main, origin/main, origin/HEAD)\r\nMerge: 3914b54 487701c\r\nAuthor: Xiang Lyu <lyuxiang.lx@alibaba-inc.com>\r\nDate:   Tue Nov 5 09:36:51 2024 +0800\r\n\r\n    Merge pull request #618 from FunAudioLLM/dev/lyuxiang.lx\r\n    \r\n    Dev/lyuxiang.lx\r\n\r\n\r\n\r\nè¿è¡Œä»£ç ï¼š \r\n\r\n\r\nfrom cosyvoice.cli.cosyvoice import CosyVoice\r\nfrom cosyvoice.utils.file_utils import load_wav\r\nimport torchaudio\r\n\r\ncosyvoice = CosyVoice('pretrained_models/CosyVoice-300M-SFT', load_jit=True, load_onnx=False, fp16=True)\r\ncosyvoice = CosyVoice('pretrained_models/CosyVoice-300M-25Hz') \r\n\r\nprompt_speech_16k = load_wav('zero_shot_prompt.wav', 16000)\r\nfor i, j in enumerate(cosyvoice.inference_zero_shot('æ”¶åˆ°å¥½å‹ä»å¯„æ¥çš„ç”Ÿæ—¥ç¤¼ç‰©ï¼Œé‚£ä»½æ„å¤–çš„æƒŠå–œä¸æ·±æ·±çš„ç¥ç¦è®©æˆ‘å¿ƒä¸­å……æ»¡äº†ç”œèœœçš„å¿«ä¹ï¼Œç¬‘å®¹å¦‚èŠ±å„¿èˆ¬ç»½æ”¾ã€‚', 'å¸Œæœ›ä½ ä»¥åèƒ½å¤Ÿåšçš„æ¯”æˆ‘è¿˜å¥½å‘¦ã€‚', prompt_speech_16k, stream=False)):\r\n    torchaudio.save('zero_shot_{}.wav'.format(i), j['tts_speech'], 22050)\r\n\r\n\r\n\r\n\r\n\r\n\r\nå®é™…åˆæˆéŸ³é¢‘ï¼Œ\"å¦‚èŠ±å„¿èˆ¬ç»½æ”¾\" è¢« ä¿®æ”¹ä¸ºï¼š \"å¦‚èŠ±èˆ¬ç»½æ”¾\"  å°‘äº†ä¸€ä¸ª \"å„¿\"\r\n\r\n**æ—¥å¿—ï¼š **\r\n\r\n(cosyvoice) os@zrway:~/.wtt/CosyVoice$ python test.py \r\n2024-11-11 10:06:41,326 - modelscope - INFO - PyTorch version 2.0.1 Found.\r\n2024-11-11 10:06:41,326 - modelscope - INFO - Loading ast index from /home/os/.cache/modelscope/ast_indexer\r\n2024-11-11 10:06:41,406 - modelscope - INFO - Loading done! Current index file version is 1.15.0, with md5 092a6171a3704eb030d97bb4a88f4275 and a total number of 980 components indexed\r\ntransformer is not installed, please install it if you want to use related modules\r\nfailed to import ttsfrd, use WeTextProcessing instead\r\n/home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/diffusers/models/lora.py:393: FutureWarning: `LoRACompatibleLinear` is deprecated and will be removed in version 1.0.0. Use of `LoRACompatibleLinear` is deprecated. Please switch to PEFT backend by installing PEFT: `pip install peft`.\r\n  deprecate(\"LoRACompatibleLinear\", \"1.0.0\", deprecation_message)\r\n2024-11-11 10:06:47,177 INFO input frame rate=50\r\n2024-11-11 10:06:49.025035641 [W:onnxruntime:, session_state.cc:1162 VerifyEachNodeIsAssignedToAnEp] Some nodes were not assigned to the preferred execution providers which may or may not have an negative impact on performance. e.g. ORT explicitly assigns shape related ops to CPU to improve perf.\r\n2024-11-11 10:06:49.025050272 [W:onnxruntime:, session_state.cc:1164 VerifyEachNodeIsAssignedToAnEp] Rerunning with verbose output on a non-minimal build will show node assignments.\r\n2024-11-11 10:06:49,813 WETEXT INFO found existing fst: /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/zh_tn_tagger.fst\r\n2024-11-11 10:06:49,813 INFO found existing fst: /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/zh_tn_tagger.fst\r\n2024-11-11 10:06:49,813 WETEXT INFO                     /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/zh_tn_verbalizer.fst\r\n2024-11-11 10:06:49,813 INFO                     /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/zh_tn_verbalizer.fst\r\n2024-11-11 10:06:49,813 WETEXT INFO skip building fst for zh_normalizer ...\r\n2024-11-11 10:06:49,813 INFO skip building fst for zh_normalizer ...\r\n2024-11-11 10:06:50,160 WETEXT INFO found existing fst: /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/en_tn_tagger.fst\r\n2024-11-11 10:06:50,160 INFO found existing fst: /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/en_tn_tagger.fst\r\n2024-11-11 10:06:50,160 WETEXT INFO                     /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/en_tn_verbalizer.fst\r\n2024-11-11 10:06:50,160 INFO                     /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/en_tn_verbalizer.fst\r\n2024-11-11 10:06:50,160 WETEXT INFO skip building fst for en_normalizer ...\r\n2024-11-11 10:06:50,160 INFO skip building fst for en_normalizer ...\r\n['ä¸­æ–‡å¥³', 'ä¸­æ–‡ç”·', 'æ—¥è¯­ç”·', 'ç²¤è¯­å¥³', 'è‹±æ–‡å¥³', 'è‹±æ–‡ç”·', 'éŸ©è¯­å¥³']\r\n2024-11-11 10:06:56,493 INFO input frame rate=25\r\n2024-11-11 10:06:57.617058157 [W:onnxruntime:, session_state.cc:1162 VerifyEachNodeIsAssignedToAnEp] Some nodes were not assigned to the preferred execution providers which may or may not have an negative impact on performance. e.g. ORT explicitly assigns shape related ops to CPU to improve perf.\r\n2024-11-11 10:06:57.617073624 [W:onnxruntime:, session_state.cc:1164 VerifyEachNodeIsAssignedToAnEp] Rerunning with verbose output on a non-minimal build will show node assignments.\r\n2024-11-11 10:06:57,792 WETEXT INFO found existing fst: /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/zh_tn_tagger.fst\r\n2024-11-11 10:06:57,792 WETEXT INFO found existing fst: /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/zh_tn_tagger.fst\r\n2024-11-11 10:06:57,792 INFO found existing fst: /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/zh_tn_tagger.fst\r\n2024-11-11 10:06:57,792 WETEXT INFO                     /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/zh_tn_verbalizer.fst\r\n2024-11-11 10:06:57,792 WETEXT INFO                     /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/zh_tn_verbalizer.fst\r\n2024-11-11 10:06:57,792 INFO                     /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/zh_tn_verbalizer.fst\r\n2024-11-11 10:06:57,792 WETEXT INFO skip building fst for zh_normalizer ...\r\n2024-11-11 10:06:57,792 WETEXT INFO skip building fst for zh_normalizer ...\r\n2024-11-11 10:06:57,792 INFO skip building fst for zh_normalizer ...\r\n2024-11-11 10:06:58,139 WETEXT INFO found existing fst: /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/en_tn_tagger.fst\r\n2024-11-11 10:06:58,139 WETEXT INFO found existing fst: /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/en_tn_tagger.fst\r\n2024-11-11 10:06:58,139 INFO found existing fst: /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/en_tn_tagger.fst\r\n2024-11-11 10:06:58,139 WETEXT INFO                     /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/en_tn_verbalizer.fst\r\n2024-11-11 10:06:58,139 WETEXT INFO                     /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/en_tn_verbalizer.fst\r\n2024-11-11 10:06:58,139 INFO                     /home/os/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/tn/en_tn_verbalizer.fst\r\n2024-11-11 10:06:58,139 WETEXT INFO skip building fst for en_normalizer ...\r\n2024-11-11 10:06:58,139 WETEXT INFO skip building fst for en_normalizer ...\r\n2024-11-11 10:06:58,139 INFO skip building fst for en_normalizer ...\r\n  0%|                                                                                                                                                                  | 0/1 [00:00<?, ?it/s]2024-11-11 10:07:02,346 INFO synthesis text æ”¶åˆ°å¥½å‹ä»å¯„æ¥çš„ç”Ÿæ—¥ç¤¼ç‰©,é‚£ä»½æ„å¤–çš„æƒŠå–œä¸æ·±æ·±çš„ç¥ç¦è®©æˆ‘å¿ƒä¸­å……æ»¡äº†ç”œèœœçš„å¿«ä¹,ç¬‘å®¹å¦‚èŠ±èˆ¬ç»½æ”¾ã€‚\r\n2024-11-11 10:07:11,595 INFO yield speech len 10.669569160997732, rtf 0.8668492293295423\r\n100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:09<00:00,  9.60s/it]\r\n\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/637/comments",
    "author": "wantt",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-13T05:42:54Z",
        "body": "è¿™ä¸ªæ˜¯wetextprocessingçš„åŸå› ï¼Œæœ‰ç©ºæˆ‘ä»¬å¯ä»¥æ¢ä¸€ä¸ªä¾‹å­ï¼Œä½†å‰ç«¯é—®é¢˜ä¸æ˜¯è¿™ä¸ªrepoçš„é‡ç‚¹"
      },
      {
        "user": "wantt",
        "created_at": "2024-11-28T03:00:40Z",
        "body": "ä¹‹å‰çš„ç‰ˆæœ¬ä¹Ÿæ˜¯ wetextprocessing ä¸ä¸¢å­—ï¼Œæœ€æ–°ç‰ˆæœ¬æŒç»­å‘ç°ä¸¢å­—é—®é¢˜ï¼Œæ¯”å¦‚ï¼š \r\n\r\nä½ æ˜¯ä¸æ˜¯å°±æƒ³é€—æˆ‘ç©å•Š?  -->  ä½ æ˜¯ä¸æ˜¯å°±æƒ³é€—æˆ‘ç©?\r\n\r\n"
      }
    ]
  },
  {
    "number": 627,
    "title": "finetune è®­ç»ƒå¡æ­»",
    "created_at": "2024-11-07T10:18:00Z",
    "closed_at": "2024-11-08T05:56:04Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/627",
    "body": "æ­£åœ¨finetuneä¸€ä¸ªflowæ¨¡å—ï¼Œ ç”¨6å¡ç¯å¢ƒåšçš„ï¼Œ è®­ç»ƒæ•°æ®åˆ†åˆ° 156ä¸ªä¸åŒçš„ å—åŠ è½½æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶åŒ…å«çš„æ ·æœ¬æ•°å°äºç­‰äº1000ä¸ªã€‚\r\nè®­ç»ƒåˆ°ç¬¬ä¸€ä¸ªepochç»“æŸçš„æ—¶å€™ï¼Œåœ¨ executor.py :47\r\n```\r\nwith model_context():\r\n   .... æ‰§è¡Œå®Œæ¯•\r\n   è¿™é‡Œå¡æ­» hangä½\r\n```    \r\næ•´ä¸ªè®­ç»ƒæµç¨‹å µæ­»äº†ã€‚ è¯·é—®è¿™ç§æƒ…å†µæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ æ˜¯å¦æ˜¯ ä¸¤ä¸ªæ­¥éª¤forwardå¯¹åº”ä¸€ä¸ªbackwordçš„è®¾ç½®ã€accum_grad=2ã€‘ï¼Œå¦‚æœå¡ä¸Šçš„batchæ•°ä¸æ˜¯2çš„æ•´æ•°å€ï¼Œå°±ä¼šå¼•å‘è¿™ç§ç°è±¡å‘¢ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/627/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-08T01:32:57Z",
        "body": "æ•°æ®æç«¯çš„ä¸å‡è¡¡ä¼šå¯¼è‡´å¡æ­»ï¼Œå¯ä»¥è¯•è¯•train_dataseté‡Œè®¾ç½®partition=Falseè¯•è¯•ï¼Œä»£ç åº”è¯¥ä¸éœ€è¦ä¿®æ”¹"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-11-08T05:56:04Z",
        "body": "> æ•°æ®æç«¯çš„ä¸å‡è¡¡ä¼šå¯¼è‡´å¡æ­»ï¼Œå¯ä»¥è¯•è¯•train_dataseté‡Œè®¾ç½®partition=Falseè¯•è¯•ï¼Œä»£ç åº”è¯¥ä¸éœ€è¦ä¿®æ”¹\r\n\r\næ„Ÿè°¢ï¼Œä¸‹ä¿®äº†è®­ç»ƒçš„ prefetch å‚æ•°å’Œtimeoutå‚æ•°ï¼Œç°åœ¨å¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚ prefetch 100-> 1,   timeout 6000 -> 60"
      },
      {
        "user": "JohnHerry",
        "created_at": "2025-02-07T09:09:04Z",
        "body": "> æ•°æ®æç«¯çš„ä¸å‡è¡¡ä¼šå¯¼è‡´å¡æ­»ï¼Œå¯ä»¥è¯•è¯•train_dataseté‡Œè®¾ç½®partition=Falseè¯•è¯•ï¼Œä»£ç åº”è¯¥ä¸éœ€è¦ä¿®æ”¹\n\nå¤šå¡è®­ç»ƒæ—¶ï¼Œè®¾ç½®partition=False, å²‚ä¸æ˜¯æ‰€æœ‰å¡çœ‹åˆ°çš„æ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Ÿè¿™æ ·å°±å¤±å»ddpçš„æ„ä¹‰äº†å§ï¼Ÿ"
      },
      {
        "user": "zw76859420",
        "created_at": "2025-02-12T08:11:47Z",
        "body": "> > æ•°æ®æç«¯çš„ä¸å‡è¡¡ä¼šå¯¼è‡´å¡æ­»ï¼Œå¯ä»¥è¯•è¯•train_dataseté‡Œè®¾ç½®partition=Falseè¯•è¯•ï¼Œä»£ç åº”è¯¥ä¸éœ€è¦ä¿®æ”¹\n> \n> æ„Ÿè°¢ï¼Œä¸‹ä¿®äº†è®­ç»ƒçš„ prefetch å‚æ•°å’Œtimeoutå‚æ•°ï¼Œç°åœ¨å¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚ prefetch 100-> 1, timeout 6000 -> 60\n\nè¿™é‡Œçœ‹ç€æœ‰ç‚¹åƒæ˜¯IOé—®é¢˜ï¼Œé¿å…ä½¿ç”¨ç½‘ç›˜DDPè®­ç»ƒ"
      },
      {
        "user": "JohnHerry",
        "created_at": "2025-02-12T08:23:45Z",
        "body": "ä¸æ˜¯IOå±‚é¢çš„é—®é¢˜ã€‚ å› ä¸ºCosyVoiceçš„IterableDatasetï¼Œ fix_length dynamic mini-batchçš„é…ç½®ï¼Œå¯èƒ½ä¼šå¯¼è‡´å„ä¸ªå¡ä¸Šåˆ†åˆ°çš„è®­ç»ƒæ•°æ®é‡ä¸ä¸€è‡´ï¼Œå¯¼è‡´åˆ†æ´¾æ•°æ®å¤šçš„å¡å¯¹åº”çš„è®­ç»ƒè¿›ç¨‹ï¼Œç­‰å¾…æ•°æ®å°‘çš„å¡å¯¹åº”çš„è®­ç»ƒè¿›ç¨‹ åŒæ­¥æ¢¯åº¦ï¼Œè€Œå¡æ­»ã€‚ç”¨å¼€æºçš„é»˜è®¤è®­ç»ƒè„šæœ¬çš„å‚æ•°å°±ä¸ä¼šå¡æ­»ï¼Œå› ä¸ºè¿™é‡Œæœ€å¤šç­‰å¾…60ç§’ï¼Œå°±è‡ªå·±è¶…æ—¶é€€å‡ºï¼Œä»è€Œå¼€å§‹ä¸‹ä¸€ä¸ªæ–°epochäº†ã€‚ æˆ‘çš„è®­ç»ƒå¡æ­»æ—¶å› ä¸ºè¯¯è§£äº†è¿™ä¸ªè¶…æ—¶å€¼çš„å«ä¹‰ï¼ŒæŠŠå®ƒè°ƒçš„å¤ªå¤§äº†ã€‚"
      }
    ]
  },
  {
    "number": 616,
    "title": "modify the output sampling rate to 16000hz",
    "created_at": "2024-11-04T07:34:49Z",
    "closed_at": "2024-11-10T08:17:46Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/616",
    "body": "I tried to modify the output sampling rate to 16000hz, but the audio sounds clunky, how should I correctly output 16000Hz.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/616/comments",
    "author": "yanxp1227",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-05T04:53:29Z",
        "body": "use torchaudio.resample(22050, 16000)"
      },
      {
        "user": "yanxp1227",
        "created_at": "2024-11-05T09:15:00Z",
        "body": "> use torchaudio.resample(22050, 16000)\r\n\r\nThanks"
      }
    ]
  },
  {
    "number": 606,
    "title": "LOAD WAV AUTO CUTTER",
    "created_at": "2024-10-28T11:48:01Z",
    "closed_at": "2024-11-04T14:39:34Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/606",
    "body": "```\r\ndef load_wav(wav, target_sr):\r\n    speech, sample_rate = torchaudio.load(wav)\r\n    speech = speech.mean(dim=0, keepdim=True)\r\n    \r\n \r\n    if sample_rate != target_sr:\r\n        assert sample_rate > target_sr, f'wav sample rate {sample_rate} must be greater than {target_sr}'\r\n        speech = torchaudio.transforms.Resample(orig_freq=sample_rate, new_freq=target_sr)(speech)\r\n    \r\n    \r\n    max_length = target_sr * 30  \r\n    if speech.size(1) > max_length:\r\n        speech = speech[:, :max_length]\r\n    \r\n    return speech\r\n```\r\n\r\n\r\nHello! When audio files exceed 30 seconds, they trigger an error. Automatically trimming any excess beyond 30 seconds would simplify the process. Instead of performing operations on the audio, saving it, and then changing the path name (which is time-consuming), this approach would be more efficient.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/606/comments",
    "author": "osmankrblt",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-04T03:27:46Z",
        "body": "we want the user to process the audio, simply truncate it may lead to undesired result, for example prompt wav and audio mismatch"
      },
      {
        "user": "osmankrblt",
        "created_at": "2024-11-04T14:39:33Z",
        "body": "Thank you for answer."
      }
    ]
  },
  {
    "number": 601,
    "title": "how does llm model prosody?",
    "created_at": "2024-10-28T01:58:56Z",
    "closed_at": "2024-11-04T04:02:16Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/601",
    "body": "\r\nWhich of the LLM inputs, speech_token or embedding, contains prosody information? Isnâ€™t the speech_feat input for flow_matching supposed to carry prosody information? Does the LLM only focus on reconstructing semantic content, while flow_matching handles the reconstruction of prosody and timbre?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/601/comments",
    "author": "yangyazhou97",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-04T03:32:11Z",
        "body": "llm focus on semantic and prosody, llm also influence timbre, flow matching focus on timbre and audio quality"
      },
      {
        "user": "yangyazhou97",
        "created_at": "2024-11-04T04:02:14Z",
        "body": "Thanks a lot"
      }
    ]
  },
  {
    "number": 598,
    "title": "Confirmation of License?",
    "created_at": "2024-10-27T07:22:49Z",
    "closed_at": "2024-11-04T10:06:54Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/598",
    "body": "So code is Apache-2.0 license but does the same apply to models are they free to use for commercial purposes?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/598/comments",
    "author": "lukaLLM",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-11-04T03:33:01Z",
        "body": "yes model is also opensource"
      },
      {
        "user": "lukaLLM",
        "created_at": "2024-11-04T10:06:54Z",
        "body": "Thank you for your confirmation!"
      }
    ]
  },
  {
    "number": 594,
    "title": "â€œå•Šå•Šå•Šå•Šâ€ å‘éŸ³å‘ä¸å‡ºæ¥",
    "created_at": "2024-10-25T11:28:56Z",
    "closed_at": "2024-10-26T11:21:28Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/594",
    "body": "æ–‡æœ¬ä¸­æœ‰â€œå•Šâ€è¯ï¼Œâ€œå•Šâ€å­—å‘éŸ³å‘ä¸å‡ºæ¥ï¼Œä½†å°‘äº†å£å­—æ—çš„â€œé˜¿â€å°±æ²¡é—®é¢˜ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/594/comments",
    "author": "liuhuang31",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-26T11:19:10Z",
        "body": "æŠŠå…·ä½“ä»£ç ä»¥åŠPromptéŸ³é¢‘è´´ä¸Šæ¥"
      },
      {
        "user": "liuhuang31",
        "created_at": "2024-10-26T11:21:17Z",
        "body": "> æŠŠå…·ä½“ä»£ç ä»¥åŠPromptéŸ³é¢‘è´´ä¸Šæ¥\r\n\r\nå‰ç«¯é—®é¢˜ï¼Œwenetprocessä¼šæŠŠâ€œå•Šâ€å­—æŠ¹æ‰ï¼Œæ¢æˆttsfrdå°±è¡Œäº†ï¼Œè°¢è°¢å›å¤ï½"
      }
    ]
  },
  {
    "number": 593,
    "title": "During single-machine multi-GPU training, the memory changes abnormally",
    "created_at": "2024-10-25T03:49:53Z",
    "closed_at": "2024-10-31T09:09:29Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/593",
    "body": "**Describe the bug**\r\nDuring single-machine multi-GPU training, the memory changes abnormally. \r\nTraining with 2 docker containers, which are bound to 1 Gpus and 2 GPUs \r\nbatchsize=2ï¼Œsingle-machine 1 gpu is used for training, GPU memory is 26483 MIB\r\nbatchsize=2ï¼Œsingle-machine 2 gpus is used for training, GPU 0 memory is 38335MBã€GPU 1 memory is 45733MB\r\n\r\n\r\nUse the default Settingsï¼Œcosyvoice.fromscratch.yamlï¼Œbatch_type: 'static'ï¼Œbatchsize=2\r\n\r\ntrain.shï¼š\r\n\r\nstage=5\r\nstop_stage=5\r\npretrained_model_dir=./pretrained_models/CosyVoice-300M\r\n#export CUDA_VISIBLE_DEVICES=\"2\"\r\n#num_gpus=$(echo $CUDA_VISIBLE_DEVICES | awk -F \",\" '{print NF}')\r\nnum_gpus=2\r\njob_id=1986\r\ndist_backend=\"nccl\"\r\nnum_workers=2\r\nprefetch=100\r\ntrain_engine=torch_ddp\r\nif [ ${stage} -le 5 ] && [ ${stop_stage} -ge 5 ]; then\r\n  echo \"Run train. We only support llm traning for now. If your want to train from scratch, please use conf/cosyvoice.fromscratch.yaml\"\r\n  if [ $train_engine == 'deepspeed' ]; then\r\n    echo \"Notice deepspeed has its own optimizer config. Modify conf/ds_stage2.json if necessary\"\r\n  fi\r\n  # cat examples/libritts/cosyvoice/data/{train-clean-100,train-clean-360,train-other-500}/parquet/data.list > examples/libritts/cosyvoice/data/train.data.list\r\n  # cat examples/libritts/cosyvoice/data/{dev-clean,dev-other}/parquet/data.list > examples/libritts/cosyvoice/data/dev.data.list\r\n  for model in flow; do\r\n    torchrun --nnodes=1 --nproc_per_node=$num_gpus \\\r\n        --rdzv_id=$job_id --rdzv_backend=\"c10d\" --rdzv_endpoint=\"localhost:0\" \\\r\n      train.py \\\r\n      --train_engine $train_engine \\\r\n      --config examples/libritts-test/cosyvoice/conf/cosyvoice.fromscratch.yaml \\\r\n      --train_data examples/libritts-test/cosyvoice/data/train.data.list \\\r\n      --cv_data examples/libritts-test/cosyvoice/data/dev.data.list \\\r\n      --model $model \\\r\n      --model_dir `pwd`/exp/cosyvoice/$model/$train_engine \\\r\n      --tensorboard_dir `pwd`/tensorboard/cosyvoice/$model/$train_engine \\\r\n      --ddp.dist_backend $dist_backend \\\r\n      --num_workers ${num_workers} \\\r\n      --prefetch ${prefetch} \\\r\n      --pin_memory \\\r\n      --deepspeed_config examples/libritts/cosyvoice/conf/ds_stage2.json \\\r\n      --deepspeed.save_states model+optimizer\r\n  done\r\nfi\r\n\r\nWhy does memory get much larger when training on multiple Gpusï¼Ÿ\r\n\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/593/comments",
    "author": "shenlou11",
    "comments": [
      {
        "user": "shenlou11",
        "created_at": "2024-10-25T03:54:51Z",
        "body": "When trained to epoch=2, the memory of both Gpus is 40G+"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-10-25T08:11:29Z",
        "body": "40g memory useage is normal, because each gpu each worker consumes memory"
      },
      {
        "user": "shenlou11",
        "created_at": "2024-10-25T08:53:57Z",
        "body": "> 40g memory useage is normal, because each gpu each worker consumes memory40gå†…å­˜ä½¿ç”¨æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºæ¯ä¸ªgpuæ¯ä¸ªworkeréƒ½æ¶ˆè€—å†…å­˜\r\n\r\nWhy in the same batchsize same num_workers situation, 1gpu, memory is 20G+? 2 gpu, each card memory is 40G+"
      },
      {
        "user": "shenlou11",
        "created_at": "2024-10-25T09:01:10Z",
        "body": "> > 40g memory useage is normal, because each gpu each worker consumes memory40gå†…å­˜ä½¿ç”¨æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºæ¯ä¸ªgpuæ¯ä¸ªworkeréƒ½æ¶ˆè€—å†…å­˜\r\n> \r\n> Why in the same batchsize same num_workers situation, 1gpu, memory is 20G+? 2 gpu, each card, the memory is 40G+\r\n\r\nNormally it should be 2 Gpus, each card  the memory is 20G+ ï¼Ÿ\r\n"
      }
    ]
  },
  {
    "number": 526,
    "title": "ModuleNotFoundError: No module named 'onnxruntime'",
    "created_at": "2024-10-20T17:00:00Z",
    "closed_at": "2024-10-29T12:31:13Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/526",
    "body": "requirement.txté‡Œé¢çš„åŒ…å¤ªè€äº†ã€‚å¾ˆå¤šå·²ç»æ— æ³•è·å–ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/526/comments",
    "author": "dandiago",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-22T03:26:31Z",
        "body": "å¯ä»¥æ›´æ¢ç‰ˆæœ¬ï¼Œrequirementsé‡Œå†™æ­»åªæ˜¯ä¸ºäº†æ–¹ä¾¿å¤ç°"
      }
    ]
  },
  {
    "number": 524,
    "title": "fade_in_out error when steam = True",
    "created_at": "2024-10-18T23:29:59Z",
    "closed_at": "2024-10-22T06:01:56Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/524",
    "body": "**Efficient tensor handling**: You're using .cpu() and .to(device) to move tensors between devices (CPU/GPU), which is fine for this operation. \r\n\r\n**Ensure** that this moving between devices doesn't introduce unnecessary overhead if used within large loops.\r\n\r\n**Clone operation**: The clone() method is a good choice here to avoid in-place modifications to the input fade_in_mel.\r\n\r\n**Window length check**: Ensure that the windowâ€™s length matches or exceeds the required overlap length.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/524/comments",
    "author": "RoyRonik",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-22T06:01:57Z",
        "body": "the change is not intended"
      }
    ]
  },
  {
    "number": 521,
    "title": "termination time solved",
    "created_at": "2024-10-18T16:56:44Z",
    "closed_at": "2024-10-22T05:59:38Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/521",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/521/comments",
    "author": "ARVINDH-CT06",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-22T05:59:38Z",
        "body": "we can add a switch button on webui to change from ZH to EN, but simply change the webui to EN is not intended"
      }
    ]
  },
  {
    "number": 518,
    "title": "Resolving GPU Timeout Issue During LLM Training",
    "created_at": "2024-10-18T16:40:07Z",
    "closed_at": "2024-10-22T05:56:35Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/518",
    "body": "This solution addresses the \"GPU communication timed out\" error encountered during the training of a large language model (LLM). The updated code includes gradient accumulation, mixed precision training (FP16), and batch size optimization to manage GPU memory usage and reduce operation times. Additionally, recommendations are provided for adjusting system timeout settings (TDR) to prevent GPU timeouts, ensuring a more stable and efficient training process. The solution focuses on optimizing model training without compromising performance or accuracy.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/518/comments",
    "author": "ARVINDH-CT06",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-22T05:56:35Z",
        "body": "I believe this is a false PR, I didn't see any relation with the repo"
      }
    ]
  },
  {
    "number": 512,
    "title": "Update bug_report.md",
    "created_at": "2024-10-18T09:46:11Z",
    "closed_at": "2024-10-25T05:34:44Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/512",
    "body": "bug_report in python has been cleared ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/512/comments",
    "author": "Kalpana-Salva",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-22T05:55:11Z",
        "body": "what does the change mean? why change * to **? I didn't see any problem in bug_report issue template"
      }
    ]
  },
  {
    "number": 503,
    "title": "å®‰è£…ttsfrdåå‡ºç°libre2.so.11æ‰¾ä¸åˆ°çš„æƒ…å†µ",
    "created_at": "2024-10-16T14:46:48Z",
    "closed_at": "2024-10-23T04:12:53Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/503",
    "body": "æˆ‘æ˜¯py3.10ï¼Œä¸Šç½‘æ‰¾äº†3.10ç‰ˆæœ¬çš„ttsfrdè¿›è¡Œpip installä¹‹åå‘ç°libre2.so.11: cannot open shared object file: No such file or directoryã€‚è¯·é—®è¿™ä¸ªå¦‚ä½•è§£å†³å‘¢ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/503/comments",
    "author": "czydfj",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-16T15:48:04Z",
        "body": "ä¸æ¸…æ¥šï¼Œå»ºè®®ä½¿ç”¨wetextprocessingæœ‰äººç»´æŠ¤"
      }
    ]
  },
  {
    "number": 486,
    "title": "12ç§’çš„å‚è€ƒéŸ³é¢‘æ—¶å¡ç€ä¸€ç›´æ— æ³•ç”Ÿæˆå‡ºéŸ³é¢‘",
    "created_at": "2024-10-13T01:52:40Z",
    "closed_at": "2024-10-16T14:47:06Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/486",
    "body": "æƒ³è¯·é—®ä¸€ä¸‹zero shotæ¨¡å¼ä¸‹è¾“å…¥å‚è€ƒéŸ³é¢‘çš„æ—¶å€™ï¼Œæ˜¯å¦æœ‰æ—¶é•¿çš„é™åˆ¶å‘¢ï¼Ÿ\r\n\r\næˆ‘è¯•äº†ä¸€ä¸‹6ç§’çš„å‚è€ƒéŸ³é¢‘æ—¶å¯ä»¥å¾ˆå¿«è¾“å‡ºç»“æœçš„ï¼Œä½†æ˜¯åŠ åˆ°12ç§’ï¼Œå®ƒå°±ä¸€ç›´å¡ç€ä¸åŠ¨ï¼Œåå‡ åˆ†é’Ÿäº†ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/486/comments",
    "author": "czydfj",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-16T05:20:00Z",
        "body": "æŠŠå…·ä½“è°ƒç”¨ä»£ç ä»¥åŠpromptéŸ³é¢‘è´´ä¸Šæ¥"
      }
    ]
  },
  {
    "number": 475,
    "title": "æœ€åç”Ÿæˆçš„è¯­éŸ³åªèƒ½æ˜¯22050é‡‡æ ·ç‡å—ï¼Ÿæˆ‘æ”¹æˆ16000ï¼Œç”Ÿæˆçš„è¯­éŸ³å¾ˆå¥‡æ€ª",
    "created_at": "2024-10-11T06:05:33Z",
    "closed_at": "2024-10-16T05:25:21Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/475",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/475/comments",
    "author": "hjj-lmx",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-16T05:25:21Z",
        "body": "å› ä¸ºè¿”å›ç»“æœå°±æ˜¯22050é‡‡æ ·ç‡"
      }
    ]
  },
  {
    "number": 449,
    "title": "éƒ¨åˆ†æ ‡ç‚¹ç¬¦å·ä¼šå¯¼è‡´è¯­éŸ³ç”Ÿæˆä¸­æ–­",
    "created_at": "2024-09-29T03:24:43Z",
    "closed_at": "2024-09-29T07:26:19Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/449",
    "body": "```\r\nfrom cosyvoice.cli.cosyvoice import CosyVoice\r\nimport os\r\nimport torch\r\nimport gc\r\nimport random\r\nimport io\r\nimport soundfile as sf\r\nimport librosa\r\nimport torchaudio\r\n\r\n# os.environ[\"PYTHONPATH\"] = \"/workspace/third_party/Matcha-TTS\" # export PYTHONPATH=/workspace/third_party/Matcha-TTS\r\n\r\nif __name__ == \"__main__\":\r\n\r\n    content = \"â€œæ˜å¤©ä¼šæ›´å¥½ï¼â€ä»–è¯´é“\"\r\n    sr = 22050\r\n\r\n    os.environ[\"CUDA_VISIBLE_DEVICES\"] = str(7)\r\n    torch.cuda.empty_cache()\r\n    gc.collect()\r\n\r\n    #####################\r\n    cosyvoice = CosyVoice('/workspace/CosyVoice-300M-SFT')\r\n    #####################\r\n\r\n    speaker = random.sample(['ä¸­æ–‡ç”·', 'ä¸­æ–‡å¥³'], 1)[0]\r\n    output = cosyvoice.inference_sft(content, speaker)\r\n\r\n    audio_tensor = output['tts_speech']\r\n\r\n    audio_np = audio_tensor.squeeze().cpu().numpy() \r\n    duration = audio_tensor.size(1) / sr\r\n\r\n    byte_io = io.BytesIO()\r\n    sf.write(byte_io, audio_np, sr, format='WAV')\r\n    byte_data = byte_io.getvalue()\r\n    audio, _ = librosa.load(io.BytesIO(byte_data), sr=sr)\r\n\r\n    audio_tensor, sr = torchaudio.load(io.BytesIO(byte_data))\r\n    torchaudio.save(f\"output.wav\", audio_tensor, sr)\r\n    \r\n\r\n    print(\"saved ...\")\r\n\r\n    byte_io.close()\r\n```\r\n\r\næ„Ÿå¹å·ä¹‹åçš„çš„å†…å®¹å°±æ— æ³•ç”Ÿæˆäº†\r\n\r\nå¦å¤–ï¼Œæˆ‘å‘ç°å¦‚æœæˆ‘ä½¿ç”¨ `os.environ[\"PYTHONPATH\"] = \"/workspace/third_party/Matcha-TTS\"`ä»£ç å°±æ— æ³•è¯†åˆ«`PYTHONPATH`è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä½†æ˜¯æˆ‘åœ¨å¤–éƒ¨ä½¿ç”¨`export PYTHONPATH=/workspace/third_party/Matcha-TTS`å°±å¯ä»¥è¯†åˆ«ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/449/comments",
    "author": "Timaos123",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-29T07:26:14Z",
        "body": "æ›´æ–°ä»£ç ï¼Œæ— æ³•å¤ç°ä¸¢å¥æƒ…å†µï¼Œçœ‹ä¸€ä¸‹æ—¥å¿—æ˜¯å¦æ˜¯å‰æ®µåå¥å­ä¸¢å¤±ã€‚\r\nsys.path.append('{}/third_party/Matcha-TTS'.format(ROOT_DIR))"
      }
    ]
  },
  {
    "number": 448,
    "title": "fix nucleus_sampling",
    "created_at": "2024-09-28T14:31:52Z",
    "closed_at": "2024-10-16T05:35:33Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/448",
    "body": "When the first value of `prob` is greater than 0.8 and its `ids` is `speech_token_size` (4096), it causes `prob.multinomial` to always select this value, ultimately resulting in an infinite loop (`cosyvoice/llm/llm.py` sampling_ids() method). \r\n\r\n**Fix:** Ensure that `prob` always has at least two values for `multinomial`.\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/448/comments",
    "author": "zhuzizyf",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-16T05:36:16Z",
        "body": "è¿™ç¡®å®æ˜¯ä¸ªé—®é¢˜ï¼Œä½†æœ¬è´¨åº”è¯¥æ˜¯çœ‹ä¸ºä»€ä¹ˆllmç»™å‡ºäº†è¿™æ ·çš„ç»“æœï¼Œç›´æ¥è§„åˆ™è·³è¿‡å¯èƒ½ä¼šç»™å‡ºä¸æ­£å¸¸çš„åˆæˆç»“æœ"
      }
    ]
  },
  {
    "number": 447,
    "title": "inference_cross_lingual about - ",
    "created_at": "2024-09-28T11:45:18Z",
    "closed_at": "2024-11-13T02:34:28Z",
    "labels": [
      "stale"
    ],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/447",
    "body": "- reads to mnius in chinese!\r\n- è¯­éŸ³-æ–‡æœ¬åŸºç¡€æ¨¡å‹\r\nè¯»ä½œï¼šè¯­éŸ³å‡æ–‡æœ¬åŸºç¡€æ¨¡å‹ã€‚ã€‚ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/447/comments",
    "author": "jacksonjack001",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-29T01:37:07Z",
        "body": "you can remove the '-',  because in training data, '-' read as minus in most cases"
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-10-29T02:38:10Z",
        "body": "This issue is stale because it has been open for 30 days with no activity."
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-11-13T02:34:28Z",
        "body": "This issue was closed because it has been inactive for 14 days since being marked as stale."
      }
    ]
  },
  {
    "number": 446,
    "title": "Is the flow model trained with half-precision works well?",
    "created_at": "2024-09-27T11:13:28Z",
    "closed_at": "2024-10-10T01:19:55Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/446",
    "body": "In the pretained opensource stack, the llm support half inference but not flow model.  If I train the flow with deepspeed and get a half-precision float model, will it works well?  will it get good speech quality?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/446/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-29T01:36:09Z",
        "body": "not amp trained, we will update cosyvoice-300m and coysvoice-300m-25hz with amp training later"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-10-10T01:19:55Z",
        "body": "okï¼Œ thank you for the help"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-10-10T01:26:32Z",
        "body": "> okï¼Œ thank you for the help\r\n by the way,  what I mean is to train the base model from scratch. not to fine tune on the released pretraines.\r\n\r\n"
      }
    ]
  },
  {
    "number": 444,
    "title": "[Fix] remove the speaker embedding in the llm inputs during instruct fine-tuning",
    "created_at": "2024-09-27T06:42:48Z",
    "closed_at": "2024-11-16T15:11:10Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/444",
    "body": "1. é—®é¢˜ï¼šåœ¨è®­ç»ƒé˜¶æ®µï¼ŒLLMè¾“å…¥åºåˆ—ä¸­æœ‰speaker embeddingã€‚åœ¨æŒ‡ä»¤å¾®è°ƒæ¨¡å‹æ¨ç†æ—¶LLMè¾“å…¥åºåˆ—æ²¡æœ‰speaker embeddingã€‚å› æ­¤å¯¹äºæŒ‡ä»¤å¾®è°ƒæ¨¡å‹è€Œè¨€ï¼Œè®­ç»ƒå’Œæ¨ç†å­˜åœ¨mismatchï¼Œæ•ˆæœä¸ç†æƒ³ã€‚\r\n2. è§£å†³æ–¹æ¡ˆï¼šLLMå¢åŠ instruct_finetuningçš„å‚æ•°ï¼Œç¼ºçœå€¼ä¸ºFalseã€‚å½“è¯¥å‚æ•°ä¸ºTrueæ—¶ï¼Œè®­ç»ƒé˜¶æ®µä¹Ÿä¼šå»æ‰LLMè¾“å…¥åºåˆ—ä¸­çš„speaker embeddingï¼Œä»è€Œä¿è¯æŒ‡ä»¤å¾®è°ƒæ¨¡å‹å¯ä»¥æ­£å¸¸è®­ç»ƒå’Œæ¨ç†ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/444/comments",
    "author": "Shengqiang-Li",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-16T05:39:25Z",
        "body": "åœ¨è®­ç»ƒinstructæ—¶ï¼Œllmä¿ç•™embeddingå…¶å®ä¹Ÿä¼šæœ‰æ•ˆæœï¼Œåªæ˜¯æˆ‘ä»¬ä¹‹å‰å¯¹æ¯”å®éªŒæœ€åå¼€æºçš„æ˜¯å»æ‰embeddingçš„ç‰ˆæœ¬ã€‚åœ¨instruct finetuneæ—¶å¸Œæœ›ç”¨æˆ·å¤šå¤šè‡ªå·±æ¢ç´¢ï¼Œæˆ‘ä»¬çš„ä¹Ÿä¸ä¸€å®šæ˜¯æœ€ä½³æ–¹æ¡ˆã€‚å› æ­¤è¿™ä¸ªPrä¼šä¿ç•™ï¼Œä½†æš‚æ—¶ä¸è€ƒè™‘åˆå¹¶"
      }
    ]
  },
  {
    "number": 443,
    "title": "Misreading words, missing sentences or repeating reading happens very often.",
    "created_at": "2024-09-27T05:00:39Z",
    "closed_at": "2024-11-13T02:34:30Z",
    "labels": [
      "stale"
    ],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/443",
    "body": "Misreading words, missing sentences or repeating reading happens very often.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/443/comments",
    "author": "jdola",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-29T02:04:09Z",
        "body": "please provide an exact example of the bug"
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-10-29T02:38:12Z",
        "body": "This issue is stale because it has been open for 30 days with no activity."
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-11-13T02:34:30Z",
        "body": "This issue was closed because it has been inactive for 14 days since being marked as stale."
      }
    ]
  },
  {
    "number": 441,
    "title": "æ¨¡å‹é‡Œé¢çš„llmæ˜¯å¦æ”¯æŒå•å­—æµå¼è¾“å…¥è¿›è¡Œç¼–ç ",
    "created_at": "2024-09-27T02:30:32Z",
    "closed_at": "2024-11-14T02:35:05Z",
    "labels": [
      "stale"
    ],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/441",
    "body": "ä½ å¥½å’¨è¯¢ä¸‹ï¼Œç›®å‰æ¨¡å‹é‡Œçš„llmæ¨¡å—æ˜¯ä¸€æ®µæ–‡æœ¬è¾“å…¥è¿›è¡Œç¼–ç ï¼Œç„¶åé€å…¥flowè¿›è¡ŒéŸ³é¢‘åˆæˆï¼Œæƒ³é—®ä¸‹æ˜¯å¦æ”¯æŒæµå¼å•å­—è¾“å…¥è¿›è¡Œç¼–ç ï¼Œç­‰å•å­—ç¼–ç çš„tokenæ•°æ»¡è¶³self.token_min_hop_lenï¼Œç„¶åé€å…¥flowè¿›è¡ŒéŸ³é¢‘åˆæˆ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/441/comments",
    "author": "wang-TJ-20",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-29T01:35:19Z",
        "body": "no, we only support sentence level stream input"
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-10-29T02:38:13Z",
        "body": "This issue is stale because it has been open for 30 days with no activity."
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-11-14T02:35:04Z",
        "body": "This issue was closed because it has been inactive for 14 days since being marked as stale."
      },
      {
        "user": "Hkaisense",
        "created_at": "2024-12-06T03:01:03Z",
        "body": "æˆ‘çœ‹é˜¿é‡Œäº‘çš„å®˜ç½‘åº”ç”¨æ˜¯æ”¯æŒå¤§æ¨¡å‹ç”Ÿæˆçš„å•å­—ç›´æ¥è¾“å…¥çš„å¼€æºç‰ˆæœ¬ä¸æ”¯æŒå—ï¼Ÿ"
      }
    ]
  },
  {
    "number": 439,
    "title": "Length limit of 25Hz s3tokenizer",
    "created_at": "2024-09-26T08:30:56Z",
    "closed_at": "2024-10-11T07:30:33Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/439",
    "body": "It seems now it downsamples mel 4x first then feeding into transformer, and transformer's pos emb limit is still 1500, which would be 60 seconds of audio.\r\n\r\nso max length of tokenizer becomes 60s. am i right?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/439/comments",
    "author": "sphmel",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-29T01:33:11Z",
        "body": "yes"
      }
    ]
  },
  {
    "number": 438,
    "title": "è¯­éŸ³å…‹éš†æ—¶ï¼Œ300M æˆ– 300HZ å¯¹ä¸¤ä¸ªå­—çš„æ–‡æœ¬ç”Ÿæˆç©ºè¯­éŸ³",
    "created_at": "2024-09-26T08:30:40Z",
    "closed_at": "2024-10-20T05:17:21Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/438",
    "body": "ç°è±¡ï¼šç”Ÿæˆçš„è¯­éŸ³æ˜¯ç©ºçš„ï¼Œæˆ–è€…è¯´æ²¡æœ‰èƒ½è¯†åˆ«çš„äººå£°ã€‚\r\nåŠŸèƒ½ï¼šè¯­éŸ³å…‹éš†\r\nè¾“å…¥æ–‡æœ¬ï¼šå¥½çš„ã€æ”¶åˆ°ã€æµ‹è¯•  ç­‰è¿™äº›ä¸¤ä¸ªå­—çš„çŸ­æ–‡æœ¬\r\nå¤ç°æ¦‚ç‡ï¼šç›®å‰çœ‹è·Ÿä¸Šä¼ çš„è¦æ¨¡ä»¿çš„éŸ³é¢‘æœ‰å…³ï¼Œå·®ä¸å¤šæœ‰50%çš„æ¦‚ç‡èƒ½å¤ç°",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/438/comments",
    "author": "m358807551",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-10-16T05:32:25Z",
        "body": "æŠŠå…·ä½“ä»£ç å’ŒpromptéŸ³é¢‘è´´ä¸Šæ¥"
      },
      {
        "user": "m358807551",
        "created_at": "2024-10-20T05:17:21Z",
        "body": "æœ€è¿‘æµ‹è¯•æ²¡æœ‰å¤ç°ï¼Œå…ˆ closeäº†ã€‚"
      }
    ]
  },
  {
    "number": 433,
    "title": "why the length of the final chunk changes even when using the same input (streaming mode)?",
    "created_at": "2024-09-25T09:35:43Z",
    "closed_at": "2024-11-15T02:42:47Z",
    "labels": [
      "stale"
    ],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/433",
    "body": "Hi, I repeated the streaming generation several times with the same input but I found that the length of the final yielded chunk changes every time. As you can see below, the  yield speech len of the final chunk across the three generated samples are different, i.e., 0.8475s, 2.3104s, and 2.5890s, respectively. Does anyone know why this happened? \r\n\r\n```shell\r\n\r\n100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:16<00:00, 16.68s/it]\r\n100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:16<00:00, 16.68s/it]\r\n\r\n2024-09-24 10:06:23,630 INFO synthesis text æˆ‘æ˜¯é€šä¹‰å®éªŒå®¤è¯­éŸ³å›¢é˜Ÿå…¨æ–°æ¨å‡ºçš„ç”Ÿæˆå¼è¯­éŸ³å¤§æ¨¡å‹,æä¾›èˆ’é€‚è‡ªç„¶çš„è¯­éŸ³åˆæˆèƒ½åŠ›ã€\r\n2024-09-24 10:06:23,630 INFO prompt speech len 3.0875\r\n2024-09-24 10:06:25,734 INFO yield speech len 1.7647 | cost 2.1032 | rtf 1.1918 | init_delay 2.1025\r\n2024-09-24 10:06:27,046 INFO yield speech len 1.9969 | cost 1.3117 | rtf 0.6568 | init_delay 2.1025\r\n2024-09-24 10:06:28,371 INFO yield speech len 1.9969 | cost 1.3250 | rtf 0.6635 | init_delay 2.1025\r\n2024-09-24 10:06:29,508 INFO yield speech len 1.9969 | cost 1.1365 | rtf 0.5692 | init_delay 2.1025\r\n2024-09-24 10:06:30,058 INFO yield speech len 0.8475 | cost 0.5502 | rtf 0.6492 | init_delay 6.4269\r\n\r\n100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:06<00:00,  6.51s/it]\r\n100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:06<00:00,  6.51s/it]\r\n\r\n2024-09-24 10:06:30,161 INFO synthesis text æˆ‘æ˜¯é€šä¹‰å®éªŒå®¤è¯­éŸ³å›¢é˜Ÿå…¨æ–°æ¨å‡ºçš„ç”Ÿæˆå¼è¯­éŸ³å¤§æ¨¡å‹,æä¾›èˆ’é€‚è‡ªç„¶çš„è¯­éŸ³åˆæˆèƒ½åŠ›ã€\r\n2024-09-24 10:06:30,161 INFO prompt speech len 3.0875\r\n2024-09-24 10:06:32,260 INFO yield speech len 1.7647 | cost 2.0989 | rtf 1.1894 | init_delay 2.0981\r\n2024-09-24 10:06:33,566 INFO yield speech len 1.9969 | cost 1.3063 | rtf 0.6542 | init_delay 2.0981\r\n2024-09-24 10:06:34,890 INFO yield speech len 1.9969 | cost 1.3240 | rtf 0.6630 | init_delay 2.0981\r\n2024-09-24 10:06:56,889 INFO yield speech len 2.3104 | cost 21.9980 | rtf 9.5214 | init_delay 26.7272\r\n\r\n100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:26<00:00, 26.81s/it]\r\n100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:26<00:00, 26.81s/it]\r\n\r\n2024-09-24 10:06:56,995 INFO synthesis text æˆ‘æ˜¯é€šä¹‰å®éªŒå®¤è¯­éŸ³å›¢é˜Ÿå…¨æ–°æ¨å‡ºçš„ç”Ÿæˆå¼è¯­éŸ³å¤§æ¨¡å‹,æä¾›èˆ’é€‚è‡ªç„¶çš„è¯­éŸ³åˆæˆèƒ½åŠ›ã€\r\n2024-09-24 10:06:56,995 INFO prompt speech len 3.0875\r\n2024-09-24 10:06:59,463 INFO yield speech len 1.7647 | cost 2.4683 | rtf 1.3987 | init_delay 2.4677\r\n2024-09-24 10:07:00,469 INFO yield speech len 1.9969 | cost 1.0056 | rtf 0.5036 | init_delay 2.4677\r\n2024-09-24 10:07:01,680 INFO yield speech len 1.9969 | cost 1.2103 | rtf 0.6061 | init_delay 2.4677\r\n2024-09-24 10:07:13,595 INFO yield speech len 2.5890 | cost 11.9148 | rtf 4.6020 | init_delay 16.5990\r\n```",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/433/comments",
    "author": "huskyachao",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-26T02:06:33Z",
        "body": "there is random function in llm sampling"
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-10-26T02:32:03Z",
        "body": "This issue is stale because it has been open for 30 days with no activity."
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-11-15T02:42:47Z",
        "body": "This issue was closed because it has been inactive for 14 days since being marked as stale."
      }
    ]
  },
  {
    "number": 429,
    "title": "vioce merge",
    "created_at": "2024-09-24T06:42:49Z",
    "closed_at": "2024-11-09T02:28:59Z",
    "labels": [
      "stale"
    ],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/429",
    "body": "There is a demonstration of the fusion of male and female timbres in the example. How do you achieve natural timbre fusion?\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/429/comments",
    "author": "CuiRobert",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-24T07:15:55Z",
        "body": "well we select these embedding fusion manually"
      },
      {
        "user": "CuiRobert",
        "created_at": "2024-09-24T07:26:03Z",
        "body": "> well we select these embedding fusion manually\r\n\r\nthx! Do you use zero-shot or sft for fusion?"
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-10-25T02:37:27Z",
        "body": "This issue is stale because it has been open for 30 days with no activity."
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-11-09T02:28:59Z",
        "body": "This issue was closed because it has been inactive for 14 days since being marked as stale."
      }
    ]
  },
  {
    "number": 423,
    "title": "fastapi: client.py  Always reporting errors  ValueError: buffer size must be a multiple of element size",
    "created_at": "2024-09-23T07:27:18Z",
    "closed_at": "2024-09-25T07:16:52Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/423",
    "body": "**Describe the bug**\r\nwhen i use fastapi run the client.py,  Always reporting errors\r\nTraceback (most recent call last):\r\n  File \"client.py\", line 98, in <module>\r\n    main()\r\n  File \"client.py\", line 59, in main\r\n    tts_speech = torch.from_numpy(np.array(np.frombuffer(tts_audio, dtype=np.int16))).unsqueeze(dim=0)\r\nValueError: buffer size must be a multiple of element size\r\n\r\nthe client.py code :\r\n\r\n    tts_audio = b''\r\n    for r in response.iter_content(chunk_size=16000):\r\n        tts_audio += r\r\n    tts_speech = torch.from_numpy(np.array(np.frombuffer(tts_audio, dtype=np.int16))).unsqueeze(dim=0)\r\n\r\n\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/423/comments",
    "author": "likuangyu01",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-23T15:18:46Z",
        "body": "how did you run the code, are you using readme example?"
      },
      {
        "user": "likuangyu01",
        "created_at": "2024-09-24T10:06:33Z",
        "body": "> how did you run the code, are you using readme example?\r\n\r\nå·²ç»è§£å†³äº†ï¼Œåœ¨client.pyä¸­åŠ äº†ä¸€ç‚¹åˆ¤æ–­çš„ä»£ç \r\n        tts_audio = b''\r\n        for r in response.iter_content(chunk_size=16000):\r\n            tts_audio += r\r\n\r\n        # æ£€æŸ¥å­—èŠ‚é•¿åº¦\r\n        if len(tts_audio) % 2 != 0:\r\n            tts_audio = tts_audio[:-1]  # å»æ‰æœ€åä¸€ä¸ªå­—èŠ‚"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-09-24T10:16:41Z",
        "body": "è¿”å›å¥‡æ•°ä¸ªå­—èŠ‚åº”è¯¥æ˜¯æœ‰bugï¼Œä½ æ˜¯å®˜æ–¹æ¨ç†ç¤ºä¾‹å—ï¼Ÿ"
      },
      {
        "user": "likuangyu01",
        "created_at": "2024-09-25T07:15:41Z",
        "body": "> è¿”å›å¥‡æ•°ä¸ªå­—èŠ‚åº”è¯¥æ˜¯æœ‰bugï¼Œä½ æ˜¯å®˜æ–¹æ¨ç†ç¤ºä¾‹å—ï¼Ÿ\r\n\r\næ˜¯çš„ï¼Œæˆ‘ç”¨çš„æ˜¯å®˜æ–¹çš„æ¨ç†ç¤ºä¾‹ï¼Œ bugåŸå› æˆ‘æ‰¾åˆ°äº†ï¼Œæ˜¯å› ä¸º æ²¡æœ‰é…ç½® export MODEL_DIR=/path/CosyVoice/pretrained_models/CosyVoice-300M-SFTï¼Œ å½“client.py å‘é€è¯·æ±‚åï¼Œserver.py è¿è¡Œmodel_output = cosyvoice.inference_sft(tts_text, spk_id)è¿™æ®µä»£ç æ—¶ï¼Œcosyvoiceæœªè¢«å®šä¹‰å¼•èµ·çš„bugï¼ŒåŸå› æ˜¯if __name__ == '__main__':\r\n    parser = argparse.ArgumentParser()\r\n    parser.add_argument('--port',\r\n                        type=int,\r\n                        default=50000)\r\n    parser.add_argument('--model_dir',\r\n                        type=str,\r\n                        default='iic/CosyVoice-300M',\r\n                        help='local path or modelscope repo id')\r\n    args = parser.parse_args()\r\n    cosyvoice = CosyVoice(args.model_dir)  , cosyvoice è¢«å®šä¹‰åœ¨if __name__ == '__main__':æ¡ä»¶ä¹‹ä¸‹ï¼Œå½“client.py å‘é€è¯·æ±‚è°ƒç”¨async def inference_sft(tts_text: str = Form(), spk_id: str = Form()): å‡½æ•°æ—¶ï¼Œå®ƒå¹¶ä¸èƒ½æ‰¾åˆ°cosyvoice å¯¹è±¡ï¼Œè§£å†³åŠæ³•å°±æ˜¯åœ¨ç›´æ¥åœ¨server.pyæ–‡ä»¶é‡Œå®šä¹‰ cosyvoice = CosyVoice(\"/root/CosyVoice/pretrained_models/CosyVoice-300M\") ä¸ºå…¨å±€å˜é‡å°±å¯ä»¥äº†\r\n"
      }
    ]
  },
  {
    "number": 409,
    "title": "About instant-feature-extraction training",
    "created_at": "2024-09-20T02:07:26Z",
    "closed_at": "2024-09-27T08:40:21Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/409",
    "body": "We are tring to make instant-feature-extraction training of flow model, because the feature extraction is so costly on large amount of samples.  we can make instant-feature-extraction and feature cache to replace the offline-feature extraction.   \r\nthe problem is about the pretrained S3  speech token extractor.  it is an ONNX model, we can write a dataloader function about S3 speech token extraction on CPU, but it is too slow. while using GPU onnx session  in multi-card distribution training, it will always report some kind of exceptions. When we use a global onnxruntime-gpu session in all dataloaders,  report like  \r\n `disk.__verify_params_across_processes(process_group, tensors, loger)   NCCL error in:  ../torch.cscr/distributed/c10d/NCCLUtils.hpp:275, invalid usage, This usually reflects invalid usage of NCCL library. Last error: Duplicate GPU dected: rank3 and rank0 both on CUDA device 34000`   \r\nwhen we create a independent onnxruntime-gpu sessiion in each dataloader instance,  it will report:   \r\n`E:onnxruntime:Default, cuda_call.cc:118  CudaCall] CUDA failure 3: initialization error; GPU=0; hostname=XXX; file=/onnxruntime_src/onnxruntime/core/providers/cuda/cuda_execution_provider.cc; line=422; expr=cudaSetDevice(GetDeviceId()) `   \r\nour code about speechtoken extraction is from the cosyvoice example tools code.    \r\nSo, is there any suggestion to make stable instant-feature-extraction traning on distributed training of cosyvoide flow?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/409/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-20T08:33:53Z",
        "body": "dataloader is multiprocessing, I think onnx do not support multi-process inference using one instance"
      }
    ]
  },
  {
    "number": 405,
    "title": "Checkpoints for LibriTTS experiments from paper?",
    "created_at": "2024-09-18T17:34:10Z",
    "closed_at": "2024-09-19T03:29:02Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/405",
    "body": "Hey there! Been testing this model out for a while now and have been loving the results.\r\n\r\nIs there a chance that you would be able to release checkpoints for the LibriTTS experiments performed in the paper?\r\n\r\nI've been looking to deploy the model on edge devices using English as its only language, but the RTF is unfortunately too high with the standard multi-lingual model (approx. 1.7-2.0). This is a shame since the quality of the model far outperforms anything else I've tested (FishSpeech, XTTSv2, OpenVoice, etc.)\r\n\r\nIt'd be really helpful for users if the checkpoints for the experiments (particularly Exp-3-LibriTTS from the paper) were released. It seems like the tiny model would be very performant while still having good enough accuracy, and it'd help the paper have even more reach and impact if users could access these results\r\n\r\nHope it'd be possible for you guys to release these, many thanks",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/405/comments",
    "author": "lcflint",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-19T01:48:49Z",
        "body": "we will release a 25hz model maybe in this month, the rtf should reduce by half. I think checkpoints form libritts is not suitable for deployment because its training data is far not enough."
      },
      {
        "user": "lcflint",
        "created_at": "2024-09-19T03:29:02Z",
        "body": "That sounds good, thanks for the heads up"
      }
    ]
  },
  {
    "number": 400,
    "title": "sft ä¸­æ–‡ç”· å£°éŸ³çªç„¶ä¼šå˜å°",
    "created_at": "2024-09-14T08:57:42Z",
    "closed_at": "2024-10-17T05:35:10Z",
    "labels": [
      "stale"
    ],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/400",
    "body": "ä½¿ç”¨sftç”Ÿæˆé•¿æ–‡æœ¬éŸ³é¢‘æ—¶ï¼Œæœ‰ä¸€æ®µéŸ³é¢‘ç”Ÿæˆçš„å£°éŸ³ä¼šå¾ˆå°ï¼Œè¯·é—®è¯¥å¦‚ä½•è§£å†³ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/400/comments",
    "author": "xipingL",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-14T16:38:31Z",
        "body": "you can try sox wav normalization, adjust the wav to a uniform energy"
      },
      {
        "user": "github-actions[bot]",
        "created_at": "2024-10-15T02:37:17Z",
        "body": "This issue is stale because it has been open for 30 days with no activity."
      }
    ]
  },
  {
    "number": 356,
    "title": "Implemented fast processing of extract_embedding",
    "created_at": "2024-09-05T11:34:51Z",
    "closed_at": "2024-09-18T08:16:46Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/356",
    "body": "because we run this model on the processor. We can run parallel processing of the dataset.\r\nIn my experiment, I accelerated the preprocessing of the dataset from 2 hours to 30 minutes.\r\n\r\nMoreover, we work with dicts, so it doesn't matter to us in what order the data is processed.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/356/comments",
    "author": "MiXaiLL76",
    "comments": [
      {
        "user": "MiXaiLL76",
        "created_at": "2024-09-05T11:42:54Z",
        "body": "```bash\r\nflake8 --max-line-length 150 --ignore B006,B008,B905,C408,E402,E741,W503,W504 --exclude ./third_party/,./runtime/python/grpc/cosyvoice_pb2*py\r\n./cosyvoice/utils/scheduler.py:92:75: E231 missing whitespace after ','\r\n./cosyvoice/utils/train_utils.py:133:9: F811 redefinition of unused 'scheduler' from line 127\r\n```\r\n\r\nI have a newer version of lintner, but I don't think that's a problem."
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-09-06T01:46:08Z",
        "body": "yes, use multi thread can increase the throughput, but I don't think using queue is a good idea. you can use threadpool.map, this can make the code more clear. for example \r\n\r\nã€ã€ã€\r\n    with Pool(processes=num_workers) as pool:\r\n        predictions = pool.map(single_job, tasks)\r\nã€ã€ã€"
      },
      {
        "user": "MiXaiLL76",
        "created_at": "2024-09-06T08:09:08Z",
        "body": "> yes, use multi thread can increase the throughput, but I don't think using queue is a good idea. you can use threadpool.map, this can make the code more clear. for example\r\n> \r\n> ã€ã€ã€ with Pool(processes=num_workers) as pool: predictions = pool.map(single_job, tasks) ã€ã€ã€\r\n\r\nThe implementation of concurrent.futures looks not bad, I thought that onnx can't work in this way."
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-09-06T08:31:21Z",
        "body": "éº»çƒ¦æŒ‰æ„è§ä¿®æ”¹ä¸€ä¸‹ï¼Œæ”¹ä¸ºäº†mergeåˆ°dev/lyuxiang.lxï¼Œæˆ‘è¿™è¾¹æµ‹è¿‡åå†ä¼šå’Œå‡ ä¸ªæ–°çš„ä¿®æ”¹ç»Ÿä¸€mergeåˆ°mainï¼Œè°¢è°¢ @MiXaiLL76 "
      }
    ]
  },
  {
    "number": 351,
    "title": "Make the FastAPI server available",
    "created_at": "2024-09-04T02:31:56Z",
    "closed_at": "2024-09-05T05:37:17Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/351",
    "body": "Correct the use of generator in response function",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/351/comments",
    "author": "onthia",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-05T05:37:18Z",
        "body": "close this pr as we have already change fastapi to stream response, will merge soon"
      }
    ]
  },
  {
    "number": 347,
    "title": "export onnx",
    "created_at": "2024-09-03T03:14:47Z",
    "closed_at": "2024-09-03T03:25:15Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/347",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/347/comments",
    "author": "hexisyztem",
    "comments": [
      {
        "user": "vonchenplus",
        "created_at": "2024-11-18T01:54:28Z",
        "body": "@hexisyztem  ä¸ºä»€ä¹ˆç§»é™¤äº†trtçš„å¯¼å‡ºæ–¹æ¡ˆï¼Ÿ"
      },
      {
        "user": "hexisyztem",
        "created_at": "2024-11-18T02:04:00Z",
        "body": "> @hexisyztem ä¸ºä»€ä¹ˆç§»é™¤äº†trtçš„å¯¼å‡ºæ–¹æ¡ˆï¼Ÿ\r\n\r\næœ‰è®¡ç®—ç²¾åº¦æŸå¤±ï¼Œä¸å¤ªèƒ½ä½œä¸ºé€šç”¨æ–¹æ¡ˆå¯¹å¤–å‘å¸ƒã€‚"
      }
    ]
  },
  {
    "number": 345,
    "title": "ä¿®æ­£äº†åœ¨cpuä¸‹è·‘çš„é”™è¯¯",
    "created_at": "2024-09-01T13:23:45Z",
    "closed_at": "2024-09-05T05:36:58Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/345",
    "body": "1ã€webui.py å¢åŠ äº†load_jitçš„é…ç½®\r\n2ã€model.pyå¢åŠ äº†cpuæ¨¡å¼ä¸‹é‡‡ç”¨floatçš„æ–¹å¼",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/345/comments",
    "author": "szsteven008",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-09-05T05:36:58Z",
        "body": "close this pr as we have already fixed in, will merge it soon"
      },
      {
        "user": "czydfj",
        "created_at": "2024-09-29T09:55:35Z",
        "body": "@aluminumbox \r\n\r\nHelloï¼I meet the following error when I run the [webui.py] of the latest branch:\r\nTraceback (most recent call last):\r\n  File \"/data/home/ghostchen/miniconda3/envs/cosyvoice/lib/python3.8/threading.py\", line 932, in _bootstrap_inner\r\n    self.run()\r\n  File \"/data/home/ghostchen/miniconda3/envs/cosyvoice/lib/python3.8/threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/data/home/ghostchen/CosyVoice/cosyvoice/cli/model.py\", line 84, in llm_job\r\n    for i in self.llm.inference(text=text.to(self.device),\r\n  File \"/data/home/ghostchen/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/torch/utils/_contextlib.py\", line 35, in generator_context\r\n    response = gen.send(None)\r\n  File \"/data/home/ghostchen/CosyVoice/cosyvoice/llm/llm.py\", line 172, in inference\r\n    text, text_len = self.encode(text, text_len)\r\n  File \"/data/home/ghostchen/CosyVoice/cosyvoice/llm/llm.py\", line 75, in encode\r\n    encoder_out, encoder_mask = self.text_encoder(text, text_lengths, decoding_chunk_size=1, num_decoding_left_chunks=-1)\r\n  File \"/data/home/ghostchen/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\nRuntimeError: The following operation failed in the TorchScript interpreter.\r\nTraceback of TorchScript, serialized code (most recent call last):\r\n  File \"code/__torch__/cosyvoice/transformer/encoder/___torch_mangle_5.py\", line 22, in forward\r\n    masks = torch.bitwise_not(torch.unsqueeze(mask, 1))\r\n    embed = self.embed\r\n    _0 = torch.add(torch.matmul(xs, CONSTANTS.c0), CONSTANTS.c1)\r\n                   ~~~~~~~~~~~~ <--- HERE\r\n    input = torch.layer_norm(_0, [1024], CONSTANTS.c2, CONSTANTS.c3)\r\n    pos_enc = embed.pos_enc\r\n\r\nTraceback of TorchScript, original code (most recent call last):\r\nRuntimeError: \"addmm_impl_cpu_\" not implemented for 'Half'"
      },
      {
        "user": "jacksonzjh",
        "created_at": "2024-10-14T06:21:33Z",
        "body": "Traceback (most recent call last):\r\n  File \"webui.py\", line 188, in <module>\r\n    cosyvoice = CosyVoice(args.model_dir, args.load_jit)\r\n  File \"/usr/bin/MetaMonAIoT/TTS/CosyVoice/cosyvoice/cli/cosyvoice.py\", line 45, in __init__\r\n    self.model.load_jit('{}/llm.text_encoder.fp16.zip'.format(model_dir),\r\nTypeError: load_jit() takes 3 positional arguments but 4 were given\r\n(cosyvoice) -bash-4.2# \r\n"
      }
    ]
  },
  {
    "number": 315,
    "title": "Duoren",
    "created_at": "2024-08-23T07:04:24Z",
    "closed_at": "2024-08-26T07:34:22Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/315",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/315/comments",
    "author": "AssassinQuin",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-08-26T07:34:22Z",
        "body": "this is a auto mix speaker script? This is not the main feature of this repo, more like a downstream task. We will close this PR. thank you for your interest"
      }
    ]
  },
  {
    "number": 314,
    "title": "è®­ç»ƒä¸€ç§æ–°çš„è¯­è¨€è¯¥æ€ä¹ˆè®¾ç½®å¦‚ä¸‹å†…å®¹ï¼Ÿ",
    "created_at": "2024-08-22T10:52:23Z",
    "closed_at": "2024-08-27T06:10:20Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/314",
    "body": "æ„Ÿè°¢å¤§ä½¬çš„å·¥ä½œï¼Œå¦‚æœæˆ‘è¦è®­ç»ƒæ³•è¯­ï¼Œä¸‹é¢çš„language éœ€è¦ä¿®æ”¹å—ï¼Ÿ æœŸå¾…å›å¤\r\nget_tokenizer: !name:whisper.tokenizer.get_tokenizer\r\n    multilingual: True\r\n    num_languages: 100\r\n    language: 'en'\r\n    task: 'transcribe'",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/314/comments",
    "author": "Wentao795",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-08-26T07:14:13Z",
        "body": "no, whisper has french language label, check whisper.tokenizer.get_tokenizer detail and add <|fr|>"
      }
    ]
  },
  {
    "number": 311,
    "title": "æŠ¥é”™ä¿¡æ¯ï¼špydoc.ErrorDuringImport: problem in cosyvoice.flow.flow_matching - ModuleNotFoundError: No module named 'matcha'",
    "created_at": "2024-08-22T08:19:42Z",
    "closed_at": "2024-08-23T03:03:49Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/311",
    "body": "ç³»ç»Ÿï¼šMacOS-12.6.2\r\nè¿è¡Œè¿‡ç¨‹ä¸­æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š\r\npydoc.ErrorDuringImport: problem in cosyvoice.flow.flow_matching - ModuleNotFoundError: No module named 'matcha'\r\n\r\næ˜¯PYTHONPATHç¯å¢ƒå˜é‡å¼•å…¥é”™è¯¯ä¹ˆï¼Ÿ\r\né€šè¿‡å‘½ä»¤echo $PYTHONPATHæŸ¥çœ‹ï¼Œthird_party/Matcha-TTSå·²åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯æŠ¥é”™ã€‚ã€‚ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/311/comments",
    "author": "yufengzhixing",
    "comments": [
      {
        "user": "LAM-0706",
        "created_at": "2024-08-22T20:12:38Z",
        "body": "åŒæ ·çš„é—®é¢˜ File \"/opt/miniconda3/envs/cosyvoice/lib/python3.8/pydoc.py\", line 358, in safeimport\r\n    raise ErrorDuringImport(path, sys.exc_info())\r\npydoc.ErrorDuringImport: problem in cosyvoice.flow.flow_matching - ModuleNotFoundError: No module named 'matcha'\r\n"
      },
      {
        "user": "yufengzhixing",
        "created_at": "2024-08-23T02:45:53Z",
        "body": "è‡ªé—®è‡ªç­”ä¸€æ³¢ï¼Œæˆ‘æ²¡æœ‰æŒ‰è¯´æ˜æ–‡æ¡£å®‰è£…ï¼Œpythonæ”¹æˆ3.9ç‰ˆæœ¬ï¼Œç„¶åç›´æ¥å®‰è£…matcha-ttsï¼Œå…¶ä»–ä¸æ–‡æ¡£ä¸€è‡´ï¼ŒæˆåŠŸäº†"
      },
      {
        "user": "NorthhhFishSoup",
        "created_at": "2024-09-03T12:35:24Z",
        "body": "ä½ æ˜¯ä¸æ˜¯æ²¡ä»gitä¸‹è½½ï¼Œä½ æ£€æŸ¥ä¸€ä¸‹third_partyä¸‹é¢çš„Matcha-TTSæ˜¯ä¸æ˜¯ç©ºçš„"
      }
    ]
  },
  {
    "number": 291,
    "title": "About â€œinstruct inferenceâ€",
    "created_at": "2024-08-15T09:27:06Z",
    "closed_at": "2024-08-26T09:52:08Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/291",
    "body": "I see that will del spk_embedding, spk_embedding may only use for \"flow_embedding\";then, when instruct inference, how to control Timbreï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/291/comments",
    "author": "sunnnnnnnny",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-08-16T02:01:09Z",
        "body": "you can try control timbre using prompt audio in instruct mode, but we cannot assure its quality"
      }
    ]
  },
  {
    "number": 288,
    "title": "<break time=\\\"1s\\\">",
    "created_at": "2024-08-15T02:30:37Z",
    "closed_at": "2024-08-16T02:37:06Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/288",
    "body": "Does the mark \"<break time=\\\"1s\\\">\" work?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/288/comments",
    "author": "dgg8411",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-08-16T02:37:06Z",
        "body": "no"
      }
    ]
  },
  {
    "number": 283,
    "title": "manï¼Œhow do i make it workï¼Ÿ",
    "created_at": "2024-08-14T03:28:51Z",
    "closed_at": "2024-08-14T05:55:42Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/283",
    "body": "(cosyvoice) gcf@gcf:/mnt/d/python/CosyVoice$ python3 webui.py --port 50000 --model_dir pretrained_models/CosyVoice-300M\r\n2024-08-14 11:26:02,976 - modelscope - INFO - PyTorch version 2.0.1+cu118 Found.\r\n2024-08-14 11:26:02,980 - modelscope - INFO - Loading ast index from /home/gcf/.cache/modelscope/ast_indexer\r\n2024-08-14 11:26:02,997 - modelscope - INFO - Loading done! Current index file version is 1.15.0, with md5 71036b8baf6ba232175cc7c60065032e and a total number of 980 components indexed\r\nfailed to import ttsfrd, use WeTextProcessing instead\r\n/home/gcf/anaconda3/envs/cosyvoice/lib/python3.8/site-packages/torch/_jit_internal.py:726: FutureWarning: ignore(True) has been deprecated. TorchScript will now drop the function call on compilation. Use torch.jit.unused now. {}\r\n  warnings.warn(\r\n/home/gcf/anaconda3/envs/cosyvoice/lib/python3.8/site-packages/diffusers/models/lora.py:393: FutureWarning: `LoRACompatibleLinear` is deprecated and will be removed in version 1.0.0. Use of `LoRACompatibleLinear` is deprecated. Please switch to PEFT backend by installing PEFT: `pip install peft`.\r\n  deprecate(\"LoRACompatibleLinear\", \"1.0.0\", deprecation_message)\r\n2024-08-14 11:26:07,496 INFO input frame rate=50\r\nTraceback (most recent call last):\r\n  File \"webui.py\", line 190, in <module>\r\n    cosyvoice = CosyVoice(args.model_dir)\r\n  File \"/mnt/d/python/CosyVoice/cosyvoice/cli/cosyvoice.py\", line 30, in __init__\r\n    self.frontend = CosyVoiceFrontEnd(configs['get_tokenizer'],\r\n  File \"/mnt/d/python/CosyVoice/cosyvoice/cli/frontend.py\", line 52, in __init__\r\n    self.campplus_session = onnxruntime.InferenceSession(campplus_model, sess_options=option, providers=[\"CPUExecutionProvider\"])\r\n  File \"/home/gcf/anaconda3/envs/cosyvoice/lib/python3.8/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 419, in __init__\r\n    self._create_inference_session(providers, provider_options, disabled_optimizers)\r\n  File \"/home/gcf/anaconda3/envs/cosyvoice/lib/python3.8/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 460, in _create_inference_session\r\n    sess = C.InferenceSession(session_options, self._model_path, True, self._read_config_from_model)\r\nonnxruntime.capi.onnxruntime_pybind11_state.InvalidProtobuf: [ONNXRuntimeError] : 7 : INVALID_PROTOBUF : Load model from pretrained_models/CosyVoice-300M/campplus.onnx failed:Protobuf parsing failed.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/283/comments",
    "author": "askie",
    "comments": [
      {
        "user": "zaiji100",
        "created_at": "2024-09-05T12:41:29Z",
        "body": "è¿™æ˜¯æ€ä¹ˆè§£å†³çš„å‘€ï¼ŸåŒæ ·çš„é—®é¢˜ï¼ŒæŒ‰ç…§ README ä¸€æ­¥ä¸€æ­¥æ¥çš„"
      },
      {
        "user": "blair319",
        "created_at": "2025-01-08T06:45:38Z",
        "body": "è¿™ä¸ªè§£å†³äº†ï¼Ÿæˆ‘ç°åœ¨ä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å·²ç»å®‰è£… git lfsäº†"
      }
    ]
  },
  {
    "number": 276,
    "title": "batch size for multi-lingual model",
    "created_at": "2024-08-12T03:54:31Z",
    "closed_at": "2024-08-13T06:20:23Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/276",
    "body": "hi, I want to train a 300M LLM following the config in the CosyVoice paper. I wonder the how to set \"max_frames_in_batch\" and \"accum_grad\" in the config.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/276/comments",
    "author": "zhangyike",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-08-12T16:09:31Z",
        "body": "set max_frames_in_batch according to your gpu memory, bigger max_frames_in_batch helps the training process stable"
      },
      {
        "user": "zhangyike",
        "created_at": "2024-08-13T04:01:16Z",
        "body": "> set max_frames_in_batch according to your gpu memory, bigger max_frames_in_batch helps the training process stable\r\n\r\nThanks. Do I need to set 'accum_grad' larger than 1? Or what is the preferred value for accum_grad when 64 V100 are used?"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-08-13T04:03:25Z",
        "body": "> > set max_frames_in_batch according to your gpu memory, bigger max_frames_in_batch helps the training process stable\r\n> \r\n> Thanks. Do I need to set 'accum_grad' larger than 1? Or what is the preferred value for accum_grad when 64 V100 are used?\r\n\r\nwell accum_grad larger also makes training more stable. but you have 64 v100, I think accum_grad is not so important"
      }
    ]
  },
  {
    "number": 272,
    "title": "å­—å¹•æ€ä¹ˆç”Ÿæˆï¼Ÿ",
    "created_at": "2024-08-09T12:44:44Z",
    "closed_at": "2024-08-10T01:01:11Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/272",
    "body": "è¯·é—®å¯ä»¥åŒæ—¶ç”Ÿæˆå­—å¹•å—ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/272/comments",
    "author": "Heey731",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-08-10T01:01:11Z",
        "body": "you can generate sentence level timestamp by calculating synthesis audio length"
      }
    ]
  },
  {
    "number": 259,
    "title": "è¯·é—®ä¸‹ä»–ä¸€æ¬¡æœ€å¤šå¯ä»¥è½¬æ¢å¤šå°‘å­—",
    "created_at": "2024-08-07T03:07:40Z",
    "closed_at": "2024-08-10T01:10:07Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/259",
    "body": "è¯·é—®ä¸‹ä»–ä¸€æ¬¡æœ€å¤šå¯ä»¥è½¬æ¢å¤šå°‘å­—",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/259/comments",
    "author": "anstonjie",
    "comments": [
      {
        "user": "anstonjie",
        "created_at": "2024-08-07T03:33:45Z",
        "body": "  File \"/home/CosyVoice/cosyvoice/transformer/encoder_layer.py\", line 93, in forward\r\n    x_att, new_att_cache = self.self_attn(x, x, x, mask, pos_emb=pos_emb, cache=att_cache)\r\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/opt/conda/envs/cosyvoice/lib/python3.11/site-packages/torch/nn/modules/module.py\", line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/CosyVoice/cosyvoice/transformer/attention.py\", line 323, in forward\r\n    scores = (matrix_ac + matrix_bd) / math.sqrt(\r\n              ~~~~~~~~~~^~~~~~~~~~~\r\nRuntimeError: The size of tensor a (5002) must match the size of tensor b (2) at non-singleton dimension 3\r\n\r\nå­—æ•°å¤šäº†è½¬æ¢æŠ¥è¿™ä¸ªé”™è¯¯"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-08-10T01:10:07Z",
        "body": "max embedding length is 5000, so approximately 100s max synthesis length"
      }
    ]
  },
  {
    "number": 254,
    "title": "è·¨è¯­ç§çš„åº”è¯¥æ€ä¹ˆä¼ å‚ï¼Œä¾‹å¦‚ç²¤è¯­",
    "created_at": "2024-08-06T10:51:48Z",
    "closed_at": "2024-08-10T01:12:01Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/254",
    "body": "éœ€è¦ä¼ å…¥ç²¤è¯­éŸ³é¢‘ä½œä¸ºæ ·ä¾‹å—ï¼Ÿ\r\ntextåº”è¯¥æ€ä¹ˆä¼ å…¥",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/254/comments",
    "author": "hjj-lmx",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-08-10T01:12:02Z",
        "body": "start it with <|yue|>"
      }
    ]
  },
  {
    "number": 252,
    "title": "tips to improve flow training",
    "created_at": "2024-08-06T04:56:04Z",
    "closed_at": "2024-08-10T01:15:25Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/252",
    "body": "Hi, \r\n\r\nI am training flow from the scratch using higher number of mel bins, \r\nit works, but the sound quality is not as good as the pretrained model, any tips to train flow model for improved quality of sound?\r\nAlso, I found out that after a certain number of epochs, the loss explodes.\r\nThanks.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/252/comments",
    "author": "taalua",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-08-10T01:15:25Z",
        "body": "use more data, reduce lr if the loss explodes"
      }
    ]
  },
  {
    "number": 246,
    "title": "How to get the speaker embedding duration training of base model?",
    "created_at": "2024-08-05T02:55:45Z",
    "closed_at": "2024-08-12T01:27:37Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/246",
    "body": "Hi, I read in the paper that a x-vector encoder was pretrained to extract the speaker vector v.  \r\nthere are two parts where the vector is used:  the LLM model and the flow-matching model.  \r\nthen how did the speaker embedding generated for use in the two model training? \r\n maybe 1)  During training, I get the x-vector with the current target speech mel as input.    `v = x_vec(speech_target)`  \r\n maybe 2)  During training, I get the x-vector with a random speech sample from the same speaker of current target speech as input.   `v = x_vec(speech_x)   WHEN speaker_of(speech_x) == speaker_of(speech_target)`  \r\n maybe 3)  During preprocessing, I get the average of all speechs' x-vector embedding under the same speaker to get a  staticï¼Œ **fixed** speaker embeding  for **all samples of the same speaker**. and then that value will be used during training and inference to label the speaker:   `v = average( x_vec(all_speechs_of_current_speaker))`    \r\nwhich one is the truth?  ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/246/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-08-10T01:20:02Z",
        "body": "during training, we use xvec from the current speech, but actually you can also use random xvec for the spk, our code tried to do it by concate all utt embedding into spk embedding, but it takes too much disk space. Random xvec during training should improve zero shot inference performance"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-08-12T01:27:37Z",
        "body": "Thanks,  We had tried TorToiseTTS with speaker condition from the current speech, but the result is terrible, while the case to use random uttrance from the same speaker get accessable result. may be our dataset is too small,  we had less then 10k hours dataset."
      }
    ]
  },
  {
    "number": 232,
    "title": "æ±‚é—®ï¼šä¸çŸ¥èƒ½å¦æ§åˆ¶æš‚åœï¼Ÿ",
    "created_at": "2024-07-31T14:15:40Z",
    "closed_at": "2024-08-02T07:18:40Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/232",
    "body": "æ€ä¹ˆæ§åˆ¶æš‚åœå‘¢ï¼Ÿï¼ˆä¸æ˜¯ breathï¼‰\r\nä»¥åŠï¼Œèƒ½å¦æ§åˆ¶æš‚åœå¤§è‡´æ—¶é•¿ï¼Ÿ\r\næ–‡æ¡£é‡Œæ²¡æ‰¾åˆ°ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/232/comments",
    "author": "aetherwu",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-08-01T16:40:33Z",
        "body": "well the instruction mode is relatively limited, there is no such symbol like <pause> yet"
      }
    ]
  },
  {
    "number": 222,
    "title": "runtime/python/server.py è¿è¡Œåï¼Œè°ƒç”¨api/inference/zero-shotï¼ŒæŠ¥é”™",
    "created_at": "2024-07-29T09:09:44Z",
    "closed_at": "2024-07-29T09:45:50Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/222",
    "body": "ERROR:    Exception in ASGI application\r\nTraceback (most recent call last):\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 399, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py\", line 70, in __call__\r\n    return await self.app(scope, receive, send)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/fastapi/applications.py\", line 1054, in __call__\r\n    await super().__call__(scope, receive, send)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/applications.py\", line 123, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/middleware/errors.py\", line 186, in __call__\r\n    raise exc\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/middleware/errors.py\", line 164, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/middleware/cors.py\", line 85, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/middleware/exceptions.py\", line 65, in __call__\r\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/_exception_handler.py\", line 64, in wrapped_app\r\n    raise exc\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\r\n    await app(scope, receive, sender)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/routing.py\", line 756, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/routing.py\", line 776, in app\r\n    await route.handle(scope, receive, send)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/routing.py\", line 297, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/routing.py\", line 77, in app\r\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/_exception_handler.py\", line 64, in wrapped_app\r\n    raise exc\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\r\n    await app(scope, receive, sender)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/starlette/routing.py\", line 72, in app\r\n    response = await func(request)\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/fastapi/routing.py\", line 278, in app\r\n    raw_response = await run_endpoint_function(\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\r\n    return await dependant.call(**values)\r\n  File \"/usr/local/UD/CosyVoice/runtime/python/fastapi/server.py\", line 75, in zeroShot\r\n    output = app.cosyvoice.inference_zero_shot(tts, prompt, prompt_speech_16k)\r\n  File \"/usr/local/UD/CosyVoice/runtime/python/fastapi/../../../cosyvoice/cli/cosyvoice.py\", line 59, in inference_zero_shot\r\n    model_input = self.frontend.frontend_zero_shot(i, prompt_text, prompt_speech_16k)\r\n  File \"/usr/local/UD/CosyVoice/runtime/python/fastapi/../../../cosyvoice/cli/frontend.py\", line 142, in frontend_zero_shot\r\n    speech_token, speech_token_len = self._extract_speech_token(prompt_speech_16k)\r\n  File \"/usr/local/UD/CosyVoice/runtime/python/fastapi/../../../cosyvoice/cli/frontend.py\", line 79, in _extract_speech_token\r\n    speech_token = self.speech_tokenizer_session.run(None, {self.speech_tokenizer_session.get_inputs()[0].name: feat.detach().cpu().numpy(),\r\n  File \"/home/vipuser/anaconda3/envs/cosyvoice_test/lib/python3.8/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 220, in run\r\n    return self._sess.run(output_names, input_feed, run_options)\r\nonnxruntime.capi.onnxruntime_pybind11_state.Fail: [ONNXRuntimeError] : 1 : FAIL : Non-zero status code returned while running Add node. Name:'/Add_2' Status Message: /Add_2: right operand cannot broadcast on dim 0 LeftShape: {1,2891,1280}, RightShape: {1500,1280}",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/222/comments",
    "author": "hjj-lmx",
    "comments": [
      {
        "user": "987661913",
        "created_at": "2024-10-08T10:39:30Z",
        "body": "I also met you, how did you solve it?"
      },
      {
        "user": "zjxcc",
        "created_at": "2024-11-27T09:28:31Z",
        "body": "@hjj-lmx\r\nI also met you, how did you solve it?\r\n"
      }
    ]
  },
  {
    "number": 219,
    "title": "Why there are different configs between cosyvoice.yaml and cosyvoice.fromscratch.yaml",
    "created_at": "2024-07-29T02:41:33Z",
    "closed_at": "2024-07-30T03:17:00Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/219",
    "body": "I found in cosyvoice.yaml , the llm num_blocks is 14, while that config in cosyvoice.fromscratch.yaml Half reduced, it seems that it will get a smaller model from cosyvoice.fromscratch.yaml. Is that means the cosyvoice.fromscratch.yaml is used to train the smaller model while the cosyvoice.yaml is used to train the cosyvoide-base?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/219/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-29T23:58:14Z",
        "body": "cosyvoice.fromscratch.yaml is intended for train on libritts 960h, so it has smaller model size"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-07-30T01:31:31Z",
        "body": "> cosyvoice.fromscratch.yaml is intended for train on libritts 960h, so it has smaller model size\r\n\r\nThank you very much.  I see in the paper that Cosyvoice-tiny takes 12 layers, but in the `cosyvoice.fromscrath.yaml`, its `num_blocks` is only 7,  it is even smaller then in the paper."
      }
    ]
  },
  {
    "number": 208,
    "title": "ä½¿ç”¨spk_embedingè¿˜æ˜¯utt_embedding?",
    "created_at": "2024-07-25T08:20:49Z",
    "closed_at": "2024-07-25T08:59:03Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/208",
    "body": "åœ¨å¾®è°ƒæ—¶ï¼Œæä¾›äº†ä¸¤ç§æ–¹å¼ï¼Œspk_embeddingå’Œutt_embeddingï¼Œè¿™ä¸¤ç§embedingå¯¹æ¨¡å‹æ•ˆæœæœ‰å¤šå¤§å½±å“ï¼Ÿå»ºè®®ä½¿ç”¨å“ªä¸€ç§ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/208/comments",
    "author": "yzliu90",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-25T08:59:03Z",
        "body": "when sft, you are using the specific speaker, so use spk_embedding because you will use it in sft inference mode"
      }
    ]
  },
  {
    "number": 205,
    "title": "å¤§æ ‡é¢˜ä¹‹é—´ä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•å¢åŠ åœé¡¿ï¼Ÿ",
    "created_at": "2024-07-25T06:39:31Z",
    "closed_at": "2024-07-25T09:01:22Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/205",
    "body": "ä¸€ã€å›½å†…è¦é—»\r\nä»Šå¤©æ˜¯...\r\näºŒã€å›½é™…è¦é—»\r\nä»Šå¤©...\r\n\r\n\r\n\r\nå¯¹äºç¬¬äºŒä¸ªå¤§æ ‡é¢˜ä¸å‰æ–‡ä¹‹é—´åœé¡¿è¾ƒå°çš„é—®é¢˜ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥è§£å†³\r\næ¯”å¦‚ä½¿ç”¨æ­£åˆ™åŒ–çš„æ–¹æ³•ï¼Œå¼ºè¡Œåœ¨ç¬¬äºŒä¸ªæ ‡é¢˜å¼€å§‹å‰å¢åŠ åœé¡¿",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/205/comments",
    "author": "LayBrick",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-25T09:01:22Z",
        "body": "there is no way to fix it using model yet, you can try add 0.2s blank at each sentence start"
      }
    ]
  },
  {
    "number": 204,
    "title": "è¯·é—® extract_speech_token è¿™ä¸€æ­¥æ˜¯å¦å¯ä»¥åŠ é€Ÿå‘¢ï¼Ÿ",
    "created_at": "2024-07-24T09:48:10Z",
    "closed_at": "2024-07-24T09:57:10Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/204",
    "body": "æƒ³è¦å¾®è°ƒï¼Œä½†æ˜¯æŠ½ç‰¹å¾çš„é€Ÿåº¦æœ‰ç‚¹æ…¢ã€‚\r\nè¯·é—®æœ‰æ²¡æœ‰å»ºè®®çš„åŠ é€Ÿæ–¹æ³•å‘¢ï¼Ÿ\r\n\r\nç›®å‰å¥½åƒå†™æ­»äº† batch=1 æ¨æ–­ï¼Œè¿™å—å„¿æ˜¯å¦å»ºè®®ä¿®æ”¹å‘¢ï¼Ÿ\r\næˆ–è€…è½¬æˆ tensorrt ä¹‹ç±»çš„ï¼Œä¸çŸ¥é“æ˜¯å¦ä¼šæœ‰åŠ é€Ÿå‘¢",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/204/comments",
    "author": "TinaChen95",
    "comments": [
      {
        "user": "JunityZhan",
        "created_at": "2024-07-29T17:43:57Z",
        "body": "è¯·é—®ä½ è§£å†³äº†å—ï¼Ÿspeech tokenizerå¯ä»¥è°ƒbatchsizeæ›´å¤§å—ï¼Ÿ"
      },
      {
        "user": "csu-roycheng",
        "created_at": "2024-08-22T01:43:21Z",
        "body": "> è¯·é—®ä½ è§£å†³äº†å—ï¼Ÿspeech tokenizerå¯ä»¥è°ƒbatchsizeæ›´å¤§å—ï¼Ÿ\r\n\r\næœ‰å¯èƒ½æ˜¯ onnx æ²¡ç”¨ GPU æ¨ç†çš„é—®é¢˜"
      },
      {
        "user": "r666ay",
        "created_at": "2024-08-23T10:36:34Z",
        "body": "ç”¨gpuçš„è¯, 10hèƒ½æå–960hçš„speech tokens(ä»¥LibriTTSä¸ºä¾‹). ä½†æ˜¯onnxç›¸å½“åƒcpu, åœ¨12cpuä¸ŠåŒæ—¶è·‘2ä¸ªextractor speech tokençš„è„šæœ¬, cpuåˆ©ç”¨ç‡å°±100%. å»ºè®®ç”¨gpuå’Œæ›´å¤šçš„cpuæ¥å¤„ç†."
      },
      {
        "user": "pengzhendong",
        "created_at": "2024-09-10T11:26:12Z",
        "body": "> è¯·é—®ä½ è§£å†³äº†å—ï¼Ÿspeech tokenizerå¯ä»¥è°ƒbatchsizeæ›´å¤§å—ï¼Ÿ\r\n\r\n``` python\r\nimport onnx\r\nimport os\r\nimport struct\r\n\r\nfrom argparse import ArgumentParser\r\n\r\n\r\ndef rebatch(infile, outfile, batch_size):\r\n    model = onnx.load(infile)\r\n    graph = model.graph\r\n\r\n    # Change batch size in input, output and value_info\r\n    for tensor in list(graph.input) + list(graph.value_info) + list(graph.output):\r\n        tensor.type.tensor_type.shape.dim[0].dim_param = batch_size\r\n\r\n    # Set dynamic batch size in reshapes (-1)\r\n    for node in  graph.node:\r\n        if node.op_type != 'Reshape':\r\n            continue\r\n        for init in graph.initializer:\r\n            # node.input[1] is expected to be a reshape\r\n            if init.name != node.input[1]:\r\n                continue\r\n            # Shape is stored as a list of ints\r\n            if len(init.int64_data) > 0:\r\n                # This overwrites bias nodes' reshape shape but should be fine\r\n                init.int64_data[0] = -1\r\n            # Shape is stored as bytes\r\n            elif len(init.raw_data) > 0:\r\n                shape = bytearray(init.raw_data)\r\n                struct.pack_into('q', shape, 0, -1)\r\n                init.raw_data = bytes(shape)\r\n\r\n    onnx.save(model, outfile)\r\n\r\nif __name__ == '__main__':\r\n    parser = ArgumentParser('Replace batch size with \\'N\\'')\r\n    parser.add_argument('infile')\r\n    parser.add_argument('outfile')\r\n    args = parser.parse_args()\r\n\r\n    rebatch(args.infile, args.outfile, 'N')\r\n```"
      }
    ]
  },
  {
    "number": 197,
    "title": "increment training bug",
    "created_at": "2024-07-23T09:49:36Z",
    "closed_at": "2024-07-25T09:09:19Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/197",
    "body": "**Describe the bug**\r\nWhen I start training, it produce error like this\r\nâ€™â€˜â€™\r\nraise ImportError(\"There is no such entity as %s\" % callable_string)\r\n  ImportError: There is no such entity as matcha.utils.audio.mel_spectrogram\r\nâ€˜â€™â€˜\r\n\r\nIn fact, the error code originates from this line.\r\n\r\nâ€˜â€™â€˜\r\nwith open(args.config, 'r') as f:\r\n        configs = load_hyperpyyaml(f, overrides=override_dict)\r\nâ€™â€˜â€™â€˜\r\n\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/197/comments",
    "author": "QianguoS",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-23T14:52:24Z",
        "body": "check faq.md, export PYTHONPATH"
      }
    ]
  },
  {
    "number": 196,
    "title": "æ‰§è¡Œcosyvoice/bin/train.pyè¿›è¡ŒéŸ³è‰²è®­ç»ƒæŠ¥é”™",
    "created_at": "2024-07-23T09:02:01Z",
    "closed_at": "2024-07-25T09:09:30Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/196",
    "body": "**Describe the bug**\r\n\r\n```\r\n [WARNING]  Please specify the CUTLASS repo directory as environment variable $CUTLASS_PATH\r\n [WARNING]  sparse_attn requires a torch version >= 1.5 and < 2.0 but detected 2.0\r\n [WARNING]  using untested triton version (2.0.0), only 1.0.0 is known to be compatible\r\nTraceback (most recent call last):\r\n  File \"cosyvoice/bin/train.py\", line 29, in <module>\r\n    from cosyvoice.utils.executor import Executor\r\nModuleNotFoundError: No module named 'cosyvoice'\r\n```\r\n\r\n**To Reproduce**\r\n\r\ncosyvoice/bin/train.py æˆ‘å·²ç»æŠŠå‚æ•°å†™å¥½äº†\r\n\r\n```\r\ndef get_args():\r\n    model_path = '/CosyVoice/pretrained_models/CosyVoice-300M/'\r\n    config_path = '/pretrained_models/CosyVoice-300M/configuration.json'\r\n    train_data_path = '/CosyVoice/train_input/qrcode_wuwei1/'\r\n    #cv_data_path = '/CosyVoice/'\r\n    model_dir = '/CosyVoice/save_model_dir'\r\n```\r\n\r\nè¿è¡Œ\r\n```\r\npython cosyvoice/bin/train.py\r\n```\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: [e.g. iOS]\r\n - Browser [e.g. chrome, safari]\r\n - Version [e.g. 22]\r\n\r\n**Smartphone (please complete the following information):**\r\n - Device: [e.g. iPhone6]\r\n - OS: [e.g. iOS8.1]\r\n - Browser [e.g. stock browser, safari]\r\n - Version [e.g. 22]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/196/comments",
    "author": "cpken",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-23T14:52:44Z",
        "body": "run . ./path.sh"
      }
    ]
  },
  {
    "number": 195,
    "title": "TypeError: can't convert np.ndarray of type numpy.object_. The only supported types are: float64, float32, float16, complex64, complex128, int64, int32, int16, int8, uint8, and bool.",
    "created_at": "2024-07-23T08:02:44Z",
    "closed_at": "2024-07-23T13:10:34Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/195",
    "body": "When trying to run train:\r\n\r\n```bash\r\nOriginal Traceback (most recent call last):\r\n    File \"/home/raph/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/torch/utils/data/_utils/worker.py\", line 308, in _worker_loop\r\n      data = fetcher.fetch(index)\r\n    File \"/home/raph/miniconda3/envs/cosyvoice/lib/python3.8/site-packages/torch/utils/data/_utils/fetch.py\", line 41, in fetch\r\n      data = next(self.dataset_iter)\r\n    File \"/home/raph/repos/CosyVoice/cosyvoice/dataset/processor.py\", line 322, in padding\r\n      for sample in data:\r\n    File \"/home/raph/repos/CosyVoice/cosyvoice/dataset/processor.py\", line 283, in dynamic_batch\r\n      for sample in data:\r\n    File \"/home/raph/repos/CosyVoice/cosyvoice/dataset/processor.py\", line 237, in sort\r\n      for sample in data:\r\n    File \"/home/raph/repos/CosyVoice/cosyvoice/dataset/processor.py\", line 209, in shuffle\r\n      for sample in data:\r\n    File \"/home/raph/repos/CosyVoice/cosyvoice/dataset/processor.py\", line 172, in parse_embedding\r\n      sample['spk_embedding'] = torch.tensor(sample['spk_embedding'], dtype=torch.float32)\r\nTypeError: can't convert np.ndarray of type numpy.object_. The only supported types are: float64, float32, float16, complex64, complex128, int64, int32, int16, int8, uint8, and bool.\r\n```",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/195/comments",
    "author": "rlenain",
    "comments": [
      {
        "user": "inconnu1111",
        "created_at": "2024-07-29T08:40:24Z",
        "body": "ä½ æ€ä¹ˆè§£å†³çš„å•Š"
      },
      {
        "user": "Dinxin",
        "created_at": "2024-10-16T08:30:51Z",
        "body": "å¤§ä½¬æ˜¯å¦‚ä½•è§£å†³çš„å‘¢ï¼Ÿ\r\n"
      }
    ]
  },
  {
    "number": 194,
    "title": "Extract Continuous Features Before VQ",
    "created_at": "2024-07-23T07:54:07Z",
    "closed_at": "2024-07-25T09:09:38Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/194",
    "body": "We would like to request a new feature to extract and access the continuous features before the Vector Quantization (VQ) layer.\r\n\r\nCurrent needs:\r\n1. Access to continuous feature representations before VQ\r\n2. A simple method to extract these features\r\n3. Option to save these features for later use\r\n\r\nThis feature would be helpful for:\r\n- Analyzing intermediate model representations\r\n- Conducting more granular feature experiments\r\n- Comparing features before and after VQ\r\n\r\nPlease let us know if this feature is feasible and if you need any additional information.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/194/comments",
    "author": "liutaocode",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-23T14:54:15Z",
        "body": "you mean provide a onnx file which generates continuous feathre? I am sorry but this is not part of the opensource plan yet"
      }
    ]
  },
  {
    "number": 190,
    "title": "TypeError: padding() missing 1 required positional argument: 'use_spk_embedding'",
    "created_at": "2024-07-22T15:07:30Z",
    "closed_at": "2024-07-23T08:02:03Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/190",
    "body": "**Describe the bug**\r\nWhen running `bash run.sh` in the training recipe (under `examples/libritts/cosyvoice`), I get the following error: \r\n\r\n``` \r\nTypeError: padding() missing 1 required positional argument: 'use_spk_embedding'\r\n```\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/190/comments",
    "author": "rlenain",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-23T01:45:27Z",
        "body": "use latest yaml, it has use_spk_embedding in cosyvoice.yaml"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-09-05T02:30:32Z",
        "body": "> use latest yaml, it has use_spk_embedding in cosyvoice.yaml\r\n\r\nin the latest config, use_spk_embedding is false, is that means when training flow model from scratch,  we shell use the spk_embedding of current utterance instead of  a random one from the utter speaker?"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-09-05T02:32:51Z",
        "body": "no, set use_spk_embedding to false when train base model. set to true if you want to train a sft model for a specific speaker"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-09-05T02:34:45Z",
        "body": "> no, set use_spk_embedding to false when train base model. set to true if you want to train a sft model for a specific speaker\r\n\r\nYes, I means the base model of flow-matching.  which need the spk_embedding as condition."
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-09-05T02:35:49Z",
        "body": "there are too much samples, If I can use a random spk_embedding from the same speaker, the computation of preprocessing will save a lot."
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-09-05T02:38:25Z",
        "body": "> > no, set use_spk_embedding to false when train base model. set to true if you want to train a sft model for a specific speaker\r\n> \r\n> Yes, I means the base model of flow-matching. which need the spk_embedding as condition.\r\n\r\nno, when train base model, use utt_embedding which is extracted from current utterance. only when sft training, use spk_embedding"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-09-05T02:43:39Z",
        "body": "> > > no, set use_spk_embedding to false when train base model. set to true if you want to train a sft model for a specific speaker\r\n> > \r\n> > \r\n> > Yes, I means the base model of flow-matching. which need the spk_embedding as condition.\r\n> \r\n> no, when train base model, use utt_embedding which is extracted from current utterance. only when sft training, use spk_embedding\r\n\r\nget it, thanks a lot !"
      }
    ]
  },
  {
    "number": 187,
    "title": "Instructåˆæˆå’Œè·¨è¯­ç§åˆæˆçš„ä¸€äº›ç–‘é—®",
    "created_at": "2024-07-22T10:52:04Z",
    "closed_at": "2024-07-25T09:13:25Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/187",
    "body": "é¦–å…ˆæ„Ÿè°¢å¼€æºä½ ä»¬çš„å·¥ä½œï¼Œæˆ‘æœ‰ä»¥ä¸‹å‡ ä¸ªç–‘é—®ï¼š\r\n1ã€è§‚å¯Ÿåˆ°åœ¨è·¨è¯­ç§åˆæˆæ—¶ï¼Œåœ¨textå‰åŠ å…¥è¯­ç§æ ‡ç­¾ï¼Œå¦‚<|zh|>ï¼Œå¯ä»¥é€šè¿‡zero-shotçš„æ–¹å¼ï¼Œè¿›è¡Œè·¨è¯­ç§åˆæˆï¼Œå…¶å®è¿™å°±æ˜¯sftçš„åˆæˆæ–¹å¼å§ï¼Ÿ\r\n2ã€instructåˆæˆæ—¶ï¼Œllmçš„è¾“å…¥ä¸å†ä½¿ç”¨embeddingï¼Œæ˜¯æœ‰ä»€ä¹ˆç‰¹åˆ«è€ƒè™‘å—ï¼Ÿå¦‚æœç”¨äº†xvectorï¼Œèƒ½å¤Ÿå®ç°é£æ ¼è¿ç§»ï¼Ÿ\r\n3ã€å¾®è°ƒä¹‹åï¼Œè§‚å¯Ÿåˆ°zero_shotåˆæˆéŸ³æ¯”sftåˆæˆéŸ³ï¼ŒéŸ³é‡å°å¾ˆå¤šï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/187/comments",
    "author": "yzliu90",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-23T15:01:47Z",
        "body": "1. yes\r\n2. embedding will influence instruct in our experiment\r\n3. during sft, use spk embedding for the sft speaker. I have no clue for the volume issue either"
      },
      {
        "user": "yzliu90",
        "created_at": "2024-07-24T03:03:48Z",
        "body": "æ„Ÿè°¢å›å¤ï¼æœ‰å‡ ä¸ªé—®é¢˜è¯·åœ¨ç¡®è®¤ä¸€ä¸‹ã€‚\r\n1ã€ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨instructæ—¶ï¼Œå¦‚æœä½¿ç”¨embedingï¼Œä¼šå½±å“instructçš„æŒ‡å¯¼æ„ä¹‰ï¼Œå…¶å®æ˜¯embedingåŒæ—¶æºå¸¦äº†æƒ…æ„Ÿæˆ–é£æ ¼ä¿¡æ¯ï¼Œå½±å“äº†é£æ ¼è¿ç§»ï¼Ÿ\r\n2ã€å¦‚æœembedingæ¥å¶å®Œç¾ï¼Œä»…ä¿ç•™è¯´è¯äººä¿¡æ¯ï¼Œç†è®ºä¸Šå¯ä»¥é€šè¿‡ç±»ä¼¼äºè·¨è¯­ç§<|language|>ç±»ä¼¼çš„æ ‡ç­¾å®ç°é£æ ¼çš„è¿ç§»ï¼Ÿ\r\n3ã€åœ¨å¾®è°ƒæ—¶ï¼Œæä¾›äº†ä¸¤ç§æ–¹å¼ï¼Œspk_embeddingå’Œutt_embeddingï¼Œè¿™ä¸¤ç§embedingå¯¹æ¨¡å‹æ•ˆæœæœ‰å¤šå¤§å½±å“ï¼Ÿå»ºè®®ä½¿ç”¨å“ªä¸€ç§ï¼Ÿ\r\næ„Ÿè°¢å›å¤ï¼"
      }
    ]
  },
  {
    "number": 171,
    "title": "HTTPSæ— æ³•æ’­æ”¾ç”Ÿæˆçš„éŸ³é¢‘",
    "created_at": "2024-07-18T07:44:35Z",
    "closed_at": "2024-07-19T09:32:43Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/171",
    "body": "å¦‚æœæœåŠ¡é€šè¿‡nginxè§£ææˆhttpsçš„è¯ï¼Œç‚¹å‡»ç”Ÿæˆè§†é¢‘çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´éŸ³é¢‘æ–‡ä»¶æ— æ³•æ˜¾ç¤ºï¼Œæ— æ³•æ’­æ”¾ï¼Œè¯·é—®å¦‚ä½•è§£å†³httpsçš„é—®é¢˜ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/171/comments",
    "author": "linxianzhong0128",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-19T01:42:02Z",
        "body": "well this is related with nginx proxy, we have no experience in this"
      }
    ]
  },
  {
    "number": 170,
    "title": "Some Question about ffn timecost",
    "created_at": "2024-07-18T07:21:41Z",
    "closed_at": "2024-10-11T03:39:58Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/170",
    "body": "**Describe the bug**\r\n----\r\nI found that in the TransformerEncoder, the time consumption of the attention (attn) part is similar to that of the feed-forward network (ffn) part. However, in autoregressive models, the attn part needs to involve all time steps of the key and value in the calculations, whereas the ffn part only needs to focus on the current time step. Therefore, the time consumption of this part is relatively unusual; the time consumption of the ffn part should be significantly different from that of the attn part.\r\næˆ‘å‘ç° TransformerEncoder ä¸­ attn éƒ¨åˆ†è€—æ—¶è·Ÿ ffn éƒ¨åˆ†è€—æ—¶æ¥è¿‘ï¼Œä½†æ˜¯åœ¨è‡ªå›å½’ä¸­ï¼Œå› ä¸º attn éƒ¨åˆ†éœ€è¦å°† kv å…¨éƒ¨æ—¶é—´åºå‚ä¸è®¡ç®—ï¼Œä½†æ˜¯ ffn éƒ¨åˆ†åªéœ€è¦å…³æ³¨å½“å‰æ—¶é—´åºï¼Œå› æ­¤è¿™ä¸ªéƒ¨åˆ†çš„è€—æ—¶æ¯”è¾ƒå¼‚å¸¸ï¼Œffn çš„è€—æ—¶åº”å½“å’Œ attn éƒ¨åˆ†å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚\r\n\r\n**To Reproduce**\r\nAdd time logging and execute torch.cuda.synchronize() to ensure CUDA synchronization.\r\næ·»åŠ æ—¶é—´æ—¥å¿—ï¼Œå¹¶ä¸”æ‰§è¡Œ torch.cuda.synchronize() ç¡®ä¿cudaåŒæ­¥\r\n```python\r\nclass TransformerEncoderLayer(nn.Module):\r\n    \"\"\"Encoder layer module.\r\n    Args:\r\n        size (int): Input dimension.\r\n        self_attn (torch.nn.Module): Self-attention module instance.\r\n            `MultiHeadedAttention` or `RelPositionMultiHeadedAttention`\r\n            instance can be used as the argument.\r\n        feed_forward (torch.nn.Module): Feed-forward module instance.\r\n            `PositionwiseFeedForward`, instance can be used as the argument.\r\n        dropout_rate (float): Dropout rate.\r\n        normalize_before (bool):\r\n            True: use layer_norm before each sub-block.\r\n            False: to use layer_norm after each sub-block.\r\n    \"\"\"\r\n    def __init__(\r\n        self,\r\n        size: int,\r\n        self_attn: torch.nn.Module,\r\n        feed_forward: torch.nn.Module,\r\n        dropout_rate: float,\r\n        normalize_before: bool = True,\r\n    ):\r\n        \"\"\"Construct an EncoderLayer object.\"\"\"\r\n        super().__init__()\r\n        self.self_attn = self_attn\r\n        self.feed_forward = feed_forward\r\n        self.norm1 = nn.LayerNorm(size, eps=1e-5)\r\n        self.norm2 = nn.LayerNorm(size, eps=1e-5)\r\n        self.dropout = nn.Dropout(dropout_rate)\r\n        self.size = size\r\n        self.normalize_before = normalize_before\r\n\r\n    def forward(\r\n        self,\r\n        x: torch.Tensor,\r\n        mask: torch.Tensor,\r\n        pos_emb: torch.Tensor,\r\n        mask_pad: torch.Tensor = torch.ones((0, 0, 0), dtype=torch.bool),\r\n        att_cache: torch.Tensor = torch.zeros((0, 0, 0, 0)),\r\n        cnn_cache: torch.Tensor = torch.zeros((0, 0, 0, 0)),\r\n    ) -> Tuple[torch.Tensor, torch.Tensor, torch.Tensor, torch.Tensor]:\r\n        \"\"\"Compute encoded features.\r\n\r\n        Args:\r\n            x (torch.Tensor): (#batch, time, size)\r\n            mask (torch.Tensor): Mask tensor for the input (#batch, timeï¼Œtime),\r\n                (0, 0, 0) means fake mask.\r\n            pos_emb (torch.Tensor): just for interface compatibility\r\n                to ConformerEncoderLayer\r\n            mask_pad (torch.Tensor): does not used in transformer layer,\r\n                just for unified api with conformer.\r\n            att_cache (torch.Tensor): Cache tensor of the KEY & VALUE\r\n                (#batch=1, head, cache_t1, d_k * 2), head * d_k == size.\r\n            cnn_cache (torch.Tensor): Convolution cache in conformer layer\r\n                (#batch=1, size, cache_t2), not used here, it's for interface\r\n                compatibility to ConformerEncoderLayer.\r\n        Returns:\r\n            torch.Tensor: Output tensor (#batch, time, size).\r\n            torch.Tensor: Mask tensor (#batch, time, time).\r\n            torch.Tensor: att_cache tensor,\r\n                (#batch=1, head, cache_t1 + time, d_k * 2).\r\n            torch.Tensor: cnn_cahce tensor (#batch=1, size, cache_t2).\r\n        \"\"\"\r\n        torch.cuda.synchronize() # cuda tongbu\r\n        time1 = time.perf_counter()\r\n        residual = x\r\n        if self.normalize_before:\r\n            x = self.norm1(x)\r\n        x_att, new_att_cache = self.self_attn(x, x, x, mask, pos_emb=pos_emb, cache=att_cache)\r\n\r\n        x = residual + self.dropout(x_att)\r\n        if not self.normalize_before:\r\n            x = self.norm1(x)\r\n\r\n        residual = x\r\n        if self.normalize_before:\r\n            x = self.norm2(x)\r\n        torch.cuda.synchronize()\r\n        time2 = time.perf_counter()\r\n        x = residual + self.dropout(self.feed_forward(x))\r\n        if not self.normalize_before:\r\n            x = self.norm2(x)\r\n\r\n        torch.cuda.synchronize()\r\n        time3 = time.perf_counter() #benchmark\r\n\r\n        print(x.shape, att_cache.shape)\r\n        print(\"time cost: \", time2-time1, time3-time2)\r\n\r\n        fake_cnn_cache = torch.zeros((0, 0, 0), dtype=x.dtype, device=x.device)\r\n        return x, mask, new_att_cache, fake_cnn_cache\r\n```\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/170/comments",
    "author": "hexisyztem",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-19T01:41:33Z",
        "body": "during inference, there is att_cache, I believe the ffn layer will not recalculate the history part, you can check the detail in self.self_attn(x, x, x, mask, pos_emb=pos_emb, cache=att_cache)"
      }
    ]
  },
  {
    "number": 161,
    "title": "ttsfrd æ˜¯ä¸æ˜¯å¯ä»¥æä¾›py3.9ç­‰ç‰ˆæœ¬çš„wheel",
    "created_at": "2024-07-17T08:56:03Z",
    "closed_at": "2024-07-18T03:44:44Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/161",
    "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/161/comments",
    "author": "marching-on",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-17T09:09:55Z",
        "body": "no, there is no plan to update ttsfrd, dont wait for it"
      }
    ]
  },
  {
    "number": 155,
    "title": "I use 3070 8gb , the inference time suddenly increase when text is longer, not linear",
    "created_at": "2024-07-16T15:32:10Z",
    "closed_at": "2024-07-18T03:46:06Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/155",
    "body": "15å­— - 4s, 30å­—-8ç§’, 50å­—-40s\r\n50å­— suddenly increase to 40s.\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/155/comments",
    "author": "linyu0219",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-17T04:55:08Z",
        "body": "do not use long sentence, first in our training, we do not have so many long sentence, second it will increase training time as att_cache is longer"
      }
    ]
  },
  {
    "number": 151,
    "title": "inference_sft ä¸ inference_zero_shot",
    "created_at": "2024-07-16T08:38:18Z",
    "closed_at": "2024-07-18T03:47:20Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/151",
    "body": "è¯·é—®å¦‚ä½•ç†è§£è¿™ä¸¤ç§æ¨ç†æ–¹å¼çš„å·®å¼‚å‘¢ï¼Ÿ\r\n\r\nä¸ªäººç†è§£ï¼Œzeroshoté‡‡ç”¨ç»­å†™æ¨¡å¼ï¼Œè€Œsftåˆ™æ˜¯ç›´æ¥ä»0å¼€å§‹ç”Ÿæˆã€‚\r\n\r\nå°è¯•äº†ä¸€ä¸‹å¾®è°ƒæ¨¡å‹ï¼Œå¹¶ä¸”å¾®è°ƒåçš„æ¨¡å‹åœ¨zeroshotæ¨¡å¼ä¸‹æ•ˆæœä¼˜äºzeroshotï¼Œè¿™æ˜¯å¦ç¬¦åˆé¢„æœŸå‘¢ï¼Ÿ\r\nç†è®ºä¸Šï¼Œzeroshotæ¨¡å¼æä¾›æ›´å¤šä¸Šä¸‹æ–‡ï¼Œæ˜¯å¦æ€»æ˜¯è¿™ç§æ¨æ–­æ¨¡å¼æ•ˆæœä¼šæ›´å¥½ï¼Ÿ\r\n\r\nä»€ä¹ˆæƒ…å†µä¸‹ï¼Œåº”å½“ä½¿ç”¨zeroshotï¼Œä»€ä¹ˆæƒ…å†µåº”å½“ä½¿ç”¨sftæ¨¡å¼å‘¢ï¼Ÿ\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/151/comments",
    "author": "TinaChen95",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-17T04:58:42Z",
        "body": "zero shot mode also use the embedding from the prompt audio, but sft mode use global speaker embedding from many utterance"
      }
    ]
  },
  {
    "number": 143,
    "title": "where is the BPE tokenizer model used in CosyVoice",
    "created_at": "2024-07-15T12:36:17Z",
    "closed_at": "2024-07-17T03:48:09Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/143",
    "body": "I read from paper that CosyVocie use BEP to tokenize text inputs. it has a 51886 dict size, but I did not find where to get the BPE model, where can I get it ?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/143/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-16T01:48:40Z",
        "body": "see cosyvoice.yaml for tokenizer"
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-07-16T03:47:10Z",
        "body": "> see cosyvoice.yaml for tokenizer\r\n\r\nYes, I  had seen in cosyvoice.yaml that it use whisper installed tokenizer, but the whisper multilingual tokenzier contains only 50256 tokens in its .tiktoken file, while in CosyVoice yaml config,  the \"text_token_size\" is set as 51866,  there are more tokens in cosyvoice,  So I had thought that you have your self-version BPE."
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-07-17T03:48:09Z",
        "body": "Get it, the extra tokens are from whisper."
      }
    ]
  },
  {
    "number": 142,
    "title": "è®­ç»ƒflowæ¨¡å‹",
    "created_at": "2024-07-15T12:13:23Z",
    "closed_at": "2024-07-18T03:48:16Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/142",
    "body": "è¯·é—®ä»å¤´è®­ç»ƒflowæ¨¡å‹ï¼Œéœ€è¦å¤šå°‘æ•°æ®é‡å’Œstepã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/142/comments",
    "author": "WangGewu",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-16T01:48:14Z",
        "body": "our flow model is trained using the same data with llm, according to report it is 170k hour. you can try train from scratch on libritts, but if you want a well-trained flow model, we suggest the more data the better"
      }
    ]
  },
  {
    "number": 131,
    "title": "æ˜¯å¦å¯ä»¥å°†ä¸€äº›é…ç½®æš´éœ²å‡ºæ¥ï¼Ÿ",
    "created_at": "2024-07-14T09:02:12Z",
    "closed_at": "2024-07-15T10:14:38Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/131",
    "body": "æˆ‘åœ¨æœ¬åœ°éƒ¨ç½²äº†æˆ‘ä»¬çš„Cosy Voiceï¼Œä½“éªŒä¸‹æ¥éå¸¸æ£’ï¼Œæˆ‘å·²ç»æœ‰ä¸€äº›ä½¿ç”¨å®ƒçš„å°åˆ›æ„äº†ã€‚å†æ¬¡æ„Ÿè°¢é¡¹ç›®ç»„çš„è¾›è‹¦ä»˜å‡ºã€‚\r\n\r\næˆ‘çš„ç¯å¢ƒï¼š\r\næˆ‘ä½¿ç”¨çš„ä¸€ä¸ªæˆ‘çš„ä¸€ä¸ªæ—§ç”µè„‘ï¼ŒCPU i7 8æ ¸å¿ƒï¼Œä¸€ä¸ªAMDæ˜¾å¡ 2Gæ˜¾å­˜ï¼Œå†…å­˜16Gï¼Œæ“ä½œç³»ç»Ÿä¸ºCentos7ã€‚\r\n\r\n1ã€å…³äºCPUèµ„æºä½¿ç”¨ï¼šæˆ‘å‘ç°åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰æŠŠæˆ‘çš„CPUèµ„æºç»™å æ»¡ï¼Œè€Œä¸”æˆ‘ä¹Ÿæ²¡æœ‰å‘ç°é…ç½®è¿›ç¨‹æ•°é‡çš„åœ°æ–¹ï¼ˆå¯èƒ½æ˜¯æˆ‘æ²¡æ‰¾åˆ°ï¼‰ï¼Œæ˜¯å¦å¯ä»¥é»˜è®¤å°†è¾“å…¥çš„æ–‡æœ¬æŒ‰ç…§CPUçš„æ ¸å¿ƒæ•°ç„¶ååˆ‡åˆ†ï¼Œç„¶åè¿›è¡Œæ¨ç†ï¼ˆå½“æ—¶å¯èƒ½è¦ä¿æŒæœ€å°tokenæ•°é‡ï¼‰ã€‚æˆ‘ä¸ç¡®å®šè¿™æ ·æ˜¯å¦å¯ä»¥åŠ é€Ÿç”Ÿæˆã€‚\r\n2ã€å…³äºGPUèµ„æºï¼šæˆ‘æœ¬åœ°é»˜è®¤æœ‰ä¸€ä¸ªAMDçš„æ˜¾å¡ï¼Œä½†æ˜¯æˆ‘å‘ç°åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œé»˜è®¤å¹¶æ²¡æœ‰ä½¿ç”¨GPUï¼Œä¸ç¡®å®šæ˜¯å¦æˆ‘æ“ä½œçš„ä¸å¯¹ã€‚ä¸çŸ¥é“è¿™ä¸ªæ˜¯å¦å¯ä»¥é…ç½®\r\n3ã€å…³äºå¯åŠ¨webui.pyçš„demo é¡µé¢ï¼šæˆ‘æŒ‰ç…§README.mdçš„è¯´æ˜æ“ä½œä¹‹åï¼ˆè€Œä¸”README.mdä¸Šç¼ºå°‘å¯¹ç¡¬ä»¶èµ„æºçš„éœ€æ±‚ï¼Œå¯¼è‡´æˆ‘ç¬¬ä¸€æ¬¡éƒ¨ç½²çš„æ—¶å€™ï¼Œä½ä¼°äº†éœ€è¦çš„èµ„æºï¼Œè¿™ä¸ªæ˜¯å¦ä¹Ÿå¯ä»¥è¡¥å……ï¼Ÿï¼Ÿï¼‰ï¼Œå‘ç°å¯åŠ¨webui.py ä¼šç¼ºå°‘å¾ˆå¤šä¾èµ–ï¼Œæ˜¯å¦å¯ä»¥æ‰“ä¸€ä¸ªå…¨é‡çš„requirement.txt\r\n4ã€å…³äºæ¨¡å‹æ–‡ä»¶ï¼šæˆ‘ä»¬çš„æ¨¡å‹æ–‡ä»¶éƒ½æœ‰ç‚¹å¤§ï¼Œä¸çŸ¥é“åé¢æ˜¯å¦è¿›è¡Œå‹ç¼©ï¼Œé€šè¿‡git cloneä¸‹æ‹‰å‹ç¼©æ–‡ä»¶ç„¶åæœ¬åœ°è‡ªå·±è§£å‹å³å¯\r\n\r\nå†æ¬¡æ„Ÿè°¢é¡¹ç›®ç»„æ‰€æœ‰åŒå­¦çš„ä»˜å‡ºï¼Œå’Œå¼€æºç²¾ç¥ã€‚\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/131/comments",
    "author": "zhanbei1",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-15T10:08:44Z",
        "body": "we only provide the basic inference implementation. \r\n1. you need to use multiprocess in order to use multiple cpu, or python will continue to use only 1 gpu due to gil, unless your core library like numpy it already have multiple gpu support\r\n2. maybe your gpu is not supported, cuda toolkit is only supported on Nvidia\r\n3. the requirements.txt contains the full package needed to run the repo. we may add some hardware resource requirements later\r\n4. I don't think zip will reduce the file size significantly because it is already pt format. We want the resource listed on repo for a clearer view"
      },
      {
        "user": "zhanbei1",
        "created_at": "2024-07-15T10:14:38Z",
        "body": "> we only provide the basic inference implementation.\r\n> \r\n> 1. you need to use multiprocess in order to use multiple cpu, or python will continue to use only 1 gpu due to gil, unless your core library like numpy it already have multiple gpu support\r\n> 2. maybe your gpu is not supported, cuda toolkit is only supported on Nvidia\r\n> 3. the requirements.txt contains the full package needed to run the repo. we may add some hardware resource requirements later\r\n> 4. I don't think zip will reduce the file size significantly because it is already pt format. We want the resource listed on repo for a clearer view\r\n\r\nOK ï¼ŒLet me learn more about this project. The issue is closed"
      }
    ]
  },
  {
    "number": 130,
    "title": "Streaming support?",
    "created_at": "2024-07-14T01:36:16Z",
    "closed_at": "2024-07-15T15:35:56Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/130",
    "body": "**Is your feature request related to a problem? Please describe.**\r\nThe cosyvoice models are amazing but it would be great to have streaming support for real time generation.\r\n\r\n**Describe the solution you'd like**\r\nStreaming support for Cosyvoice models\r\n\r\n**Describe alternatives you've considered**\r\nI donâ€™t believe there is another alternative for real time generation with Cosyvoice models. \r\n\r\n**Additional context**\r\nI donâ€™t have any other context\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/130/comments",
    "author": "johnwick123f",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-15T10:02:12Z",
        "body": "not yet, we are working on fixing bug yet, also the released flow matching model is trained in non-causal way, we may do streaming support later"
      },
      {
        "user": "johnwick123f",
        "created_at": "2024-07-15T15:35:56Z",
        "body": "Alright thanks for answering, great project btw!"
      },
      {
        "user": "lucasjinreal",
        "created_at": "2024-08-30T14:27:38Z",
        "body": "Is the streaming can be supported now?"
      }
    ]
  },
  {
    "number": 129,
    "title": "Fix run.sh train",
    "created_at": "2024-07-13T22:23:52Z",
    "closed_at": "2024-07-15T02:06:32Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/129",
    "body": "run.sh when train llm, not generate data/train.data.list and data/dev.data.list successfully (My env is wsl2+ubuntu22.04).",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/129/comments",
    "author": "cacard",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-15T02:05:20Z",
        "body": "well, in this case, user should check why some data.list is not generated successfully, instead of hiding this problem. Sorry, but this PR is not suitable for merge. You can check why some data.list is not generated, whether it is reproducible."
      }
    ]
  },
  {
    "number": 126,
    "title": "ä½¿ç”¨ SFT æ—¶ï¼Œå£°éŸ³å¿½å¤§å¿½å°",
    "created_at": "2024-07-13T11:25:51Z",
    "closed_at": "2024-07-14T02:14:54Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/126",
    "body": "ä½¿ç”¨ sft ä½¿ç”¨åŠ è½½éŸ³é¢‘ï¼Œå£°éŸ³å¿½å¤§å¿½å°ï¼Œ\r\nä½¿ç”¨é›¶æ–‡æœ¬æ¨¡å‹ï¼Œä½¿ç”¨åŠ è½½éŸ³é¢‘ï¼Œç»“å°¾å¥åæ€»æœ‰ å® çš„å£°éŸ³",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/126/comments",
    "author": "AssassinQuin",
    "comments": [
      {
        "user": "traddo",
        "created_at": "2024-07-13T12:44:42Z",
        "body": "ä½ å¯ä»¥ç”¨è¿™æ®µä»£ç è¾¾åˆ°å‡è¡¡éŸ³é‡çš„ç›®çš„ï¼š\r\n\r\n```\r\n\r\nimport pyloudnorm as pyln\r\nimport soundfile as sf\r\n\r\ndef _norm_loudness(wav_path):\r\n    data, rate = sf.read(wav_path)\r\n    meter = pyln.Meter(rate) # create BS.1770 meter\r\n    loudness = meter.integrated_loudness(data) # measure loudness\r\n    normalized_audio = pyln.normalize.loudness(data, loudness, -12.0)\r\n    sf.write(wav_path, normalized_audio, 22050)\r\n    return wav_path\r\n\r\n```"
      },
      {
        "user": "AssassinQuin",
        "created_at": "2024-07-14T02:14:52Z",
        "body": "å¥½çš„ï¼Œå·²è§£å†³ï¼Œè°¢è°¢"
      },
      {
        "user": "xipingL",
        "created_at": "2024-09-13T01:55:23Z",
        "body": "æˆ‘ä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ ä¸­æ–‡ç”·  æœ‰è¿™ä¸ªé—®é¢˜ ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ä¹Ÿæ²¡è§£å†³ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å—ï¼Ÿ"
      }
    ]
  },
  {
    "number": 119,
    "title": "éå¸¸æ£’çš„é¡¹ç›®ï¼Œæƒ³é—®ä¸€ä¸‹éƒ½æ”¯æŒä»€ä¹ˆæƒ…ç»ªå’Œè¯­æ°”å‘€ï¼Ÿ",
    "created_at": "2024-07-12T09:34:00Z",
    "closed_at": "2024-09-20T12:29:18Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/119",
    "body": "èƒ½å¦åˆ—ä¸¾ä¸€ä¸‹æ”¯æŒçš„æƒ…ç»ªå’Œè¯­æ°”ï¼Œæ¯”å¦‚æˆ‘ä½¿ç”¨sadçš„æ—¶å€™å‡ºç°çš„ä¸æ˜¯æ‚²ä¼¤çš„è¯­æ°”ï¼Œè€Œæ˜¯è¯»å‡ºsadã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/119/comments",
    "author": "daoliangai",
    "comments": [
      {
        "user": "LeesimEverglow",
        "created_at": "2024-07-12T09:53:28Z",
        "body": "éœ€è¦ä½¿ç”¨è‡ªç„¶è¯­è¨€æ§åˆ¶æ¨¡å¼ï¼Œåœ¨instructè¾“å…¥æ¡†é‡Œè¾“å…¥emotion"
      },
      {
        "user": "LeesimEverglow",
        "created_at": "2024-07-12T09:58:32Z",
        "body": "å¦‚æœä½¿ç”¨æ¥å£æ¨¡å¼ï¼Œä¾èµ–æ¨¡å‹åº“CosyVoice-300M-Instruct \r\n\r\néœ€è¦ä½¿ç”¨\r\ndef inference_instruct(self, tts_text, spk_id, instruct_text)\r\n\r\nåœ¨instruct_text ä¼ å…¥æƒ…ç»ª "
      }
    ]
  },
  {
    "number": 117,
    "title": "bugåé¦ˆï¼Œ1.è¯­è¨€æ ‡ç­¾ä¸ç”Ÿæ•ˆ 2.è¾“å‡ºä¼šæˆªæ‰å¥å·åé¢çš„å†…å®¹",
    "created_at": "2024-07-12T08:25:29Z",
    "closed_at": "2024-07-15T11:13:35Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/117",
    "body": "æš‚æ—¶é‡åˆ°ä¸¤ä¸ªé—®é¢˜ï¼š\r\n1.zero-shotçš„æ—¶å€™ï¼Œå½“promtéŸ³é¢‘æ˜¯å£éŸ³æ¯”è¾ƒé‡çš„æ™®é€šè¯æ—¶ï¼Œè¾“å‡ºç›´æ¥å°±æ˜¯ç²¤è¯­äº†ã€‚å¼€å¤´æŒ‡å®šäº†<|zh|>ä¹Ÿæ²¡ç”¨ã€‚æˆ‘çš„promtè¯­éŸ³å°±æ˜¯å‘¨ç«‹é½è¯­éŸ³åŒ…\r\n2.è¾“å…¥æ–‡å­—åªTTSç”Ÿæˆåˆ°ç¬¬ä¸€ä¸ªå¥å·ä¹‹å‰çš„ã€‚åé¢ä¸ç»§ç»­ç”Ÿæˆäº†ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/117/comments",
    "author": "Simon-chai",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-12T09:08:03Z",
        "body": "1. this is not bug, the model have never seen such case when prompt audio is corner case\r\n2. you can split it into short sentence manually. systhesis speech separately if possible."
      },
      {
        "user": "Simon-chai",
        "created_at": "2024-07-15T11:05:58Z",
        "body": "> 1. this is not bug, the model have never seen such case when prompt audio is corner case\r\n\r\nBut the model actually know something. The accent of å‘¨ç«‹é½ sound like Cantonese indeed. But to my opinion,promt should play a role of tips,should not be so determinative,at least should not more determinative than input text. "
      },
      {
        "user": "Simon-chai",
        "created_at": "2024-07-15T11:13:35Z",
        "body": "> 2\\. you can split it into short sentence manually. systhesis speech separately if possible.\r\nAs long as I make my input only contain comma,everything is fine.But I think CosyVoice can do better. Maybe one day you can controll pause duration or emotion by punctuation,so this will be a problem in that day. Just a little advice. BTW,the CosyVoice surprive me in it's sound likeness!"
      }
    ]
  },
  {
    "number": 116,
    "title": "inference_zero_shotä¸æ”¯æŒè‹±æ–‡å—",
    "created_at": "2024-07-12T08:11:08Z",
    "closed_at": "2024-07-17T01:43:01Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/116",
    "body": "rt,è°ƒç”¨cosyvoice.inference_zero_shotæ¥å£ï¼Œæ–‡æœ¬ä¸ºè‹±æ–‡æ—¶æ— æ³•ç”Ÿæˆå—ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/116/comments",
    "author": "kli017",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-12T09:06:30Z",
        "body": "it can generate english, see readme"
      }
    ]
  },
  {
    "number": 109,
    "title": "ä¼šä¸Šä¼ flowè®­ç»ƒéƒ¨åˆ†ä»£ç å—ï¼Ÿ",
    "created_at": "2024-07-11T11:11:33Z",
    "closed_at": "2024-07-11T11:26:32Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/109",
    "body": "ä»“åº“é‡Œæ²¡æœ‰çœ‹åˆ°flowè®­ç»ƒçš„ä»£ç ï¼Œç°æœ‰çš„flowéƒ¨åˆ†è®­ç»ƒç›¸å…³ä»£ç é”™è¯¯å¾ˆå¤šï¼Œä¸€äº›åŸºæœ¬çš„è®­ç»ƒéƒ¨åˆ†éƒ½æ˜¯é”™è¯¯çš„ï¼Œè¯·é—®æœ‰è®¡åˆ’ä¸Šä¼ è®­ç»ƒflowéƒ¨åˆ†çš„ä»£ç å—",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/109/comments",
    "author": "hongwen-sun",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T11:26:32Z",
        "body": "its already in the repo, just change llm to flow in run.sh stage 5, it is already verified"
      },
      {
        "user": "hongwen-sun",
        "created_at": "2024-07-11T12:06:36Z",
        "body": "#79 é‚£è¿™ä¸ªåœ°æ–¹åç»­è¿˜ä¼šæ›´æ–°å—"
      }
    ]
  },
  {
    "number": 108,
    "title": "Is the FA tool used to refine ASR result opensourced?",
    "created_at": "2024-07-11T10:41:31Z",
    "closed_at": "2024-07-11T10:47:32Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/108",
    "body": "Hi, I read in the paper that when collecting the huge training data,  you are using a FA tool to refine speech ASR results, to drop bad samples. is this tool available?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/108/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T10:47:32Z",
        "body": "no, it is not part of the opensource"
      }
    ]
  },
  {
    "number": 107,
    "title": "è¯·é—®è®­ç»ƒéƒ¨åˆ†çš„ä»£ç è®¡åˆ’ä¸Šä¼ å—ï¼Ÿ",
    "created_at": "2024-07-11T10:22:15Z",
    "closed_at": "2024-07-11T10:47:55Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/107",
    "body": "ä»“åº“é‡Œæ²¡æœ‰çœ‹åˆ°è®­ç»ƒéƒ¨åˆ†çš„ä»£ç ï¼Œç°æœ‰çš„éƒ¨åˆ†è®­ç»ƒç›¸å…³ä»£ç é”™è¯¯å¾ˆå¤šï¼Œä¸€äº›åŸºæœ¬çš„è®­ç»ƒéƒ¨åˆ†éƒ½æ˜¯é”™è¯¯çš„ï¼Œè¯·é—®æœ‰è®¡åˆ’ä¸Šä¼ è®­ç»ƒéƒ¨åˆ†çš„ä»£ç å—",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/107/comments",
    "author": "hongwen-sun",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T10:47:55Z",
        "body": "see example/run.sh, it is already verified"
      }
    ]
  },
  {
    "number": 106,
    "title": "æ¥å£æœåŠ¡å…è®¸è·¨åŸŸè¯·æ±‚ï¼Œæ¥å…¥å…¶ä»–æœåŠ¡ï¼Œæ¯”å¦‚ollamaæˆ–è€…å…¶ä»–å¤§æ¨¡å‹æœåŠ¡",
    "created_at": "2024-07-11T10:12:01Z",
    "closed_at": "2024-07-12T02:03:45Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/106",
    "body": "æ¥å£æœåŠ¡å…è®¸è·¨åŸŸè¯·æ±‚ï¼Œæ¥å…¥å…¶ä»–æœåŠ¡ï¼Œæ¯”å¦‚ollamaæˆ–è€…å…¶ä»–å¤§æ¨¡å‹æœåŠ¡\r\n\r\nè·¨åŸŸèµ„æºå…±äº« (CORS) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒå…è®¸åœ¨ä¸åŒåŸŸä¸­çš„å®¢æˆ·ç«¯ Web åº”ç”¨ç¨‹åºä¸å…¶ä»–åŸŸä¸­çš„èµ„æºè¿›è¡Œäº¤äº’ã€‚  è¿™åœ¨ç°ä»£ Web å¼€å‘ä¸­éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå¤æ‚çš„åº”ç”¨ç¨‹åºç»å¸¸å¼•ç”¨å…¶å®¢æˆ·ç«¯ä»£ç ä¸­çš„ç¬¬ä¸‰æ–¹ API å’Œèµ„æºã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/106/comments",
    "author": "v3ucn",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T13:40:14Z",
        "body": "add me é“ç®± in Dingding group to discuss details"
      }
    ]
  },
  {
    "number": 104,
    "title": "What is the benefit to introduce the masked mel condition into the flow modeling?",
    "created_at": "2024-07-11T09:38:46Z",
    "closed_at": "2024-07-11T13:36:26Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/104",
    "body": "Hi,  I had read in the paper that there are four condition signals to train the flow module.  the speaker embddding, the S3 tokens,  the masked mel and the intermidieate state on the density path.  I do not understand what is the masked mel condition used to?  the flow model is not autoregressively to generate mels one by one, Why there need a masked mel condition as training input?  and what is the masked mel from during inference?  Thanks.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/104/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T10:49:46Z",
        "body": "mel is used during zero shot inference, prompt mel will be used as  mel condition"
      }
    ]
  },
  {
    "number": 102,
    "title": "How sft on a new voice with English?",
    "created_at": "2024-07-11T09:12:56Z",
    "closed_at": "2024-07-11T13:36:40Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/102",
    "body": "Hi, I want finetune the model with a English speaker's voice, and want make it work in other launguage as well.\r\n\r\nI tried zero shot, it's good, but cross langual is not good, is there any suggestions on how to comes up a new voice with my data? (so that I don't need prompt, and this model can produce extremly same voice like that spkear, for all launguages)",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/102/comments",
    "author": "MonolithFoundation",
    "comments": [
      {
        "user": "MonolithFoundation",
        "created_at": "2024-07-11T09:13:29Z",
        "body": "BTW, my voice just a bout 80 samples ( each of them are about 10-30seconds)."
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T10:50:48Z",
        "body": "prepare at least 1h for each speaker"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-07-11T11:18:15Z",
        "body": "oh didn't have that much data\n\n\n\n---- Replied Message ----\n| From | Xiang ***@***.***> |\n| Date | 07/11/2024 18:51 |\n| To | ***@***.***> |\n| Cc | ***@***.***>***@***.***> |\n| Subject | Re: [FunAudioLLM/CosyVoice] How sft on a new voice with English? (Issue #102) |\n\nprepare at least 1h for each speaker\n\nâ€”\nReply to this email directly, view it on GitHub, or unsubscribe.\nYou are receiving this because you authored the thread.Message ID: ***@***.***>"
      }
    ]
  },
  {
    "number": 99,
    "title": "Is the LID seen during the training of base model?",
    "created_at": "2024-07-11T07:32:05Z",
    "closed_at": "2024-07-11T10:51:58Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/99",
    "body": "Hi, I see in the paper, as to zero-shot in-context learning part.  a LID (language identity) is needed for cross lingual  generation. is the LID token seen during the training process of the LLM base model? what is the position  in training input sequence?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/99/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T10:51:58Z",
        "body": "lid is at sentence start during training"
      }
    ]
  },
  {
    "number": 98,
    "title": "ç°åœ¨ttsfrdçš„æœ€æ–°ç‰ˆæœ¬åªæ”¯æŒpython3.8å—ï¼Ÿ",
    "created_at": "2024-07-11T06:51:48Z",
    "closed_at": "2024-07-11T07:08:28Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/98",
    "body": "æˆ‘ä½¿ç”¨çš„æ˜¯python3.10ï¼Œä½†æ˜¯æœ€å¤šåªèƒ½å®‰è£…åˆ°0.2.1çš„ç‰ˆæœ¬çš„ttsfrdï¼Œæƒ³é—®ä¸€ä¸‹æœ€æ–°çš„ttsfrdæ˜¯ä»…æ”¯æŒpython3.8å—ï¼Ÿè¿˜æ˜¯åœ¨å“ªé‡Œå¯ä»¥ä¸‹è½½ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/98/comments",
    "author": "hwhyyds",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T07:08:28Z",
        "body": "yes, you can ignore ttsfrd and use wetextprocessing instead"
      }
    ]
  },
  {
    "number": 97,
    "title": "supervised fine-tuning Flow and HIFT",
    "created_at": "2024-07-11T06:38:47Z",
    "closed_at": "2024-07-11T13:36:55Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/97",
    "body": "It seems that supervised fine-tuning (SFT) for flow or HIFT modules uses ground-truth data. Specifically, speech tokens are derived from a speech tokenizer rather than from an SFTed LLM for flow SFT, and mel features are derived from real waveforms rather than from an SFTed flow for HIFT SFT. I wonder if only LLM SFT is necessary, or if flow/HIFT SFT with ground-truth data provides satisfactory results?\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/97/comments",
    "author": "zhangyike",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T07:09:09Z",
        "body": "we also support flow sft, but not hift sft, just change llm to flow in run.sh stage 5"
      },
      {
        "user": "zhangyike",
        "created_at": "2024-07-11T08:05:13Z",
        "body": "> we also support flow sft, but not hift sft, just change llm to flow in run.sh stage 5\r\n\r\nMy question is inputs for flow sft are speech tokens generated from speech tokenizer rather than from the SFTed llm outputs. \r\nFor example, given a training sample consisting of a wave and the corresponding text, speech_tokens can be obtained from the following ways:\r\nspeech_tokens1 = speech_tokenizer(wave)\r\nspeech_tokens2 = SFTed_LLM(text)\r\nThe released demo uses speech_tokens1 for flow SFT, but I think  using speech_tokens2 may be better."
      },
      {
        "user": "zhangyike",
        "created_at": "2024-07-11T08:11:55Z",
        "body": "The config in cosyvoice.yaml is proper to SFT?  max_frames_in_batch seems too small and max_epoch seem too large. Are these recommanded?  \r\nbatch: !name:cosyvoice.dataset.processor.batch\r\n    max_frames_in_batch: 2000\r\ntrain_conf:\r\n    max_epoch: 200\r\n`"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T11:29:44Z",
        "body": "> The config in cosyvoice.yaml is proper to SFT? max_frames_in_batch seems too small and max_epoch seem too large. Are these recommanded? batch: !name:cosyvoice.dataset.processor.batch max_frames_in_batch: 2000 train_conf: max_epoch: 200 `\r\n\r\ncheck cosyvoice.yaml change some hyperparameter according to annotation. you can increase max_frames if your cuda memory is enough"
      }
    ]
  },
  {
    "number": 96,
    "title": "Instructæ¨¡å‹éŸ³è‰²ä¸å›ºå®š",
    "created_at": "2024-07-11T03:59:46Z",
    "closed_at": "2024-07-11T06:21:03Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/96",
    "body": "ä½¿ç”¨Instructæ¨¡å‹ä½¿ç”¨åŒä¸€ä¸ªInstructæ–‡æœ¬å¯¹ä¸åŒæ–‡æœ¬è¿›è¡Œæ¨ç†æ—¶ï¼Œæœ‰æ—¶ä¼šæœ‰éŸ³è‰²å‘ç”Ÿæ˜æ˜¾å˜åŒ–çš„æƒ…å†µï¼Œè¯·é—®è¿™ä¸ªé—®é¢˜æœ‰è§£å†³åŠæ³•å—ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/96/comments",
    "author": "fengpings",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T06:21:00Z",
        "body": "no, this is the drawback of instruct model"
      },
      {
        "user": "yuyun2000",
        "created_at": "2024-07-12T10:03:52Z",
        "body": "æˆ‘è§‰å¾—ä½ å¯ä»¥å°è¯•ç”¨æŒ‡ä»¤æ¨¡å‹ç”Ÿæˆæƒ³è¦çš„å£°éŸ³åï¼Œç„¶åç”¨ä»–çš„å…‹éš†æ¨¡å‹æŒç»­ç”Ÿæˆè¿™ä¸ªå£°éŸ³ï¼Ÿ"
      }
    ]
  },
  {
    "number": 94,
    "title": "å¦‚ä½•è®­ç»ƒå®šåˆ¶çš„spk2info.ptï¼Ÿ",
    "created_at": "2024-07-11T03:05:13Z",
    "closed_at": "2024-07-11T11:06:41Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/94",
    "body": "å¦‚é¢˜\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/94/comments",
    "author": "traddo",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T06:19:18Z",
        "body": "train your own sft model, save spk embedding in spk2info.pt"
      },
      {
        "user": "traddo",
        "created_at": "2024-07-11T07:37:22Z",
        "body": "> train your own sft model, save spk embedding in spk2info.pt\r\n\r\nç›´æ¥ç”¨åŸå‚æ¨¡å‹æ˜¯å¦å¯ä»¥æå–speaker embedding?\r\n"
      },
      {
        "user": "zhangyike",
        "created_at": "2024-07-11T10:52:24Z",
        "body": "> train your own sft model, save spk embedding in spk2info.pt\r\n\r\nhow to get a single spk embedding from spk2embedding.pt when the spk has many utts?"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-11T11:06:41Z",
        "body": "> > train your own sft model, save spk embedding in spk2info.pt\r\n> \r\n> how to get a single spk embedding from spk2embedding.pt when the spk has many utts?\r\n\r\nsimple mean, check tools/prepare_embedding.py for detail"
      },
      {
        "user": "zhangyike",
        "created_at": "2024-07-11T11:22:09Z",
        "body": "> > > train your own sft model, save spk embedding in spk2info.pt\r\n> > \r\n> > \r\n> > how to get a single spk embedding from spk2embedding.pt when the spk has many utts?\r\n> \r\n> simple mean, check tools/prepare_embedding.py for detail\r\n\r\nI cannot find  tools/prepare_embedding.py. I guess the \"spk2embedding.pt\" should regenerated as a single vector for each spk by average embeddings of the same spk by modifying \"tool/extract_embeddings.py\""
      },
      {
        "user": "traddo",
        "created_at": "2024-07-11T11:26:34Z",
        "body": "> > > > train your own sft model, save spk embedding in spk2info.pt\r\n> > > \r\n> > > \r\n> > > how to get a single spk embedding from spk2embedding.pt when the spk has many utts?\r\n> > \r\n> > \r\n> > simple mean, check tools/prepare_embedding.py for detail\r\n> \r\n> I cannot find tools/prepare_embedding.py. I guess the \"spk2embedding.pt\" should regenerated as a single vector for each spk by average embeddings of the same spk by modifying \"tool/extract_embeddings.py\"\r\n\r\nlook examples/libritts/cosyvoice/run.sh, inference.py"
      }
    ]
  },
  {
    "number": 90,
    "title": "WeTextProcessing PyPI installation error on macOS",
    "created_at": "2024-07-10T12:39:07Z",
    "closed_at": "2024-07-10T14:38:31Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/90",
    "body": "**Describe the bug**\r\n```\r\nDownloading WeTextProcessing-1.0.3-py3-none-any.whl (2.0 MB)\r\n   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 2.0/2.0 MB 2.8 MB/s eta 0:00:00\r\nBuilding wheels for collected packages: pynini\r\n  Building wheel for pynini (setup.py) ... error\r\n  error: subprocess-exited-with-error\r\n  \r\n  Ã— python setup.py bdist_wheel did not run successfully.\r\n  â”‚ exit code: 1\r\n  â•°â”€> [55 lines of output]\r\n..........\r\n      extensions/_pywrapfst.cpp:1291:10: fatal error: 'fst/util.h' file not found\r\n      #include <fst/util.h>\r\n               ^~~~~~~~~~~~\r\n      1 error generated.\r\n      error: command '/usr/bin/gcc' failed with exit code 1\r\n      [end of output]\r\n  \r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for pynini\r\n  Running setup.py clean for pynini\r\nFailed to build pynini\r\nERROR: Could not build wheels for pynini, which is required to install pyproject.toml-based projects\r\n```\r\n\r\n**Desktop (please complete the following information):**\r\n - OS:  macOS Sonoma 14.5\r\n\r\n**Solution**\r\nUse `conda install -c conda-forge pynini==2.1.5` to install pynini first, then pip install WeTextProcessing==1.0.3",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/90/comments",
    "author": "XXXXRT666",
    "comments": [
      {
        "user": "conkeur",
        "created_at": "2024-08-13T15:42:40Z",
        "body": "> **Describe the bug**\r\n> \r\n> ```\r\n> Downloading WeTextProcessing-1.0.3-py3-none-any.whl (2.0 MB)\r\n>    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 2.0/2.0 MB 2.8 MB/s eta 0:00:00\r\n> Building wheels for collected packages: pynini\r\n>   Building wheel for pynini (setup.py) ... error\r\n>   error: subprocess-exited-with-error\r\n>   \r\n>   Ã— python setup.py bdist_wheel did not run successfully.\r\n>   â”‚ exit code: 1\r\n>   â•°â”€> [55 lines of output]\r\n> ..........\r\n>       extensions/_pywrapfst.cpp:1291:10: fatal error: 'fst/util.h' file not found\r\n>       #include <fst/util.h>\r\n>                ^~~~~~~~~~~~\r\n>       1 error generated.\r\n>       error: command '/usr/bin/gcc' failed with exit code 1\r\n>       [end of output]\r\n>   \r\n>   note: This error originates from a subprocess, and is likely not a problem with pip.\r\n>   ERROR: Failed building wheel for pynini\r\n>   Running setup.py clean for pynini\r\n> Failed to build pynini\r\n> ERROR: Could not build wheels for pynini, which is required to install pyproject.toml-based projects\r\n> ```\r\n> \r\n> **Desktop (please complete the following information):**\r\n> \r\n> * OS:  macOS Sonoma 14.5\r\n> \r\n> **Solution** Use `conda install -c conda-forge pynini==2.1.5` to install pynini first, then pip install WeTextProcessing==1.0.3\r\n\r\ndid not work for me \r\nconda list shows pynini installed ,but pip list doesn't.\r\nand pip install pynini shows\r\n  \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\HostX86\\x64\\cl.exe\" /c /nologo /O2 /W3 /GL /DNDEBUG /MD \"-IC:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\include\" \"-IC:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.11_3.11.2544.0_x64__qbz5n2kfra8p0\\Include\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\ATLMFC\\include\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.7.2\\include\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\cppwinrt\" /EHsc /Tpextensions/_pywrapfst.cpp /Fobuild\\temp.win-amd64-cpython-311\\Release\\extensions/_pywrapfst.obj -std=c++17 -Wno-register -Wno-deprecated-declarations -Wno-unused-function -Wno-unused-local-typedefs -funsigned-char\r\n      cl: å‘½ä»¤è¡Œ error D8021 :æ— æ•ˆçš„æ•°å€¼å‚æ•°â€œ/Wno-registerâ€\r\n      error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2019\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.29.30133\\\\bin\\\\HostX86\\\\x64\\\\cl.exe' failed with exit code 2\r\n      [end of output]\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for pynini\r\n  Running setup.py clean for pynini\r\nFailed to build pynini\r\nERROR: ERROR: Failed to build installable wheels for some pyproject.toml based projects (pynini)"
      },
      {
        "user": "nijanthan0",
        "created_at": "2025-02-11T02:42:07Z",
        "body": "Hi @conkeur , Did you solved this issue?"
      }
    ]
  },
  {
    "number": 88,
    "title": "Will FSQ and LFQ better when used in LLM based TTS?",
    "created_at": "2024-07-10T09:59:16Z",
    "closed_at": "2024-07-10T12:39:57Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/88",
    "body": "We are  following the TorToiseTTS like  LLM  projects.  Both TorToise and CosyVoice choosing the VQ as quantizer as I had read in papers,  while it is said that FSQ or LFQ makes less dead code.  Are there any proves that LFQ and FSQ do help LLM based tts training and inference?  Thanks for information about it, and we appreciate for more detailed explanation.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/88/comments",
    "author": "JohnHerry",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-10T11:28:56Z",
        "body": "@ZhihaoDU maybe can answer this question"
      },
      {
        "user": "ZhihaoDU",
        "created_at": "2024-07-10T11:41:09Z",
        "body": "According to my experiments, FSQ or LFQ indeed make less dead codes than the VQ, almost no dead codes. However, I haven't found an evidence that less dead code means better performance. Up to my knowledge, this is still an open question."
      },
      {
        "user": "JohnHerry",
        "created_at": "2024-07-10T12:39:57Z",
        "body": "> According to my experiments, FSQ or LFQ indeed make less dead codes than the VQ, almost no dead codes. However, I haven't found an evidence that less dead code means better performance. Up to my knowledge, this is still an open question.\r\n\r\nThank you very much.  \r\n"
      }
    ]
  },
  {
    "number": 84,
    "title": "å…³äºInstructionæ–¹é¢çš„é—®é¢˜",
    "created_at": "2024-07-10T07:06:05Z",
    "closed_at": "2024-07-10T15:13:50Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/84",
    "body": "ä»£ç ä¸­è¿™ä¸€éƒ¨åˆ†æœ‰ä¸€ä¸ªspk_idï¼Œè¯·é—®ç”¨äº†è¿™ä¸€ä¸ªæ˜¯ä¸æ˜¯è¯´è¯äººéŸ³è‰²ç›¸å½“äºè¢«å›ºå®šäº†ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/84/comments",
    "author": "wkingqq",
    "comments": [
      {
        "user": "hoyden",
        "created_at": "2024-07-10T09:56:50Z",
        "body": "Instruction modelé‡Œçš„spk_idåº”è¯¥æ²¡æœ‰å®é™…ç”Ÿæ•ˆï¼Œä¸»è¦è¿˜æ˜¯é instructionæ¥æ§åˆ¶"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-10T11:32:08Z",
        "body": "we will use spk id in instruct mode, but the instruct text can influence the spk identity, even change it"
      },
      {
        "user": "wkingqq",
        "created_at": "2024-07-11T02:30:41Z",
        "body": "> Instruction modelé‡Œçš„spk_idåº”è¯¥æ²¡æœ‰å®é™…ç”Ÿæ•ˆï¼Œä¸»è¦è¿˜æ˜¯é instructionæ¥æ§åˆ¶\r\n\r\næˆ‘æµ‹è¯•çš„æ—¶å€™å‘ç°spk_idç”¨è‹±æ–‡ç”·å¾ˆå®¹æ˜“å‡ºç°æ€§åˆ«æ··ä¹±çš„é—®é¢˜"
      }
    ]
  },
  {
    "number": 83,
    "title": "å…‹éš†çš„å£°éŸ³ç”µéŸ³å¾ˆä¸¥é‡æ€ä¹ˆä¼˜åŒ–ï¼Ÿ",
    "created_at": "2024-07-10T06:21:41Z",
    "closed_at": "2024-07-10T15:13:33Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/83",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/83/comments",
    "author": "hsdjkfnsfc",
    "comments": [
      {
        "user": "ScottishFold007",
        "created_at": "2024-07-10T06:30:02Z",
        "body": "å¾ˆå¯èƒ½æ˜¯ä½ ç»™çš„å‚è€ƒéŸ³é¢‘ä¸è¡Œ"
      }
    ]
  },
  {
    "number": 80,
    "title": "Insert pauses between sentences for a more natural flow",
    "created_at": "2024-07-10T04:14:02Z",
    "closed_at": "2024-07-15T02:07:47Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/80",
    "body": "Currently, after sentence segmentation, there is no pause between the voices of adjacent sentences, which sounds rather odd.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/80/comments",
    "author": "eshoyuan",
    "comments": [
      {
        "user": "ZhihaoDU",
        "created_at": "2024-07-10T12:29:09Z",
        "body": "Thanks for your contribution, I think 10000 samples is little longer, maybe 20~40ms is good enough. Could you kindly revise the PR to add 40 ms pause? "
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-10T14:53:40Z",
        "body": "please add é“ç®± in Dingding group to discuss details"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-15T02:07:48Z",
        "body": "we will add silence frame in model.py as the code is more concise in this way"
      }
    ]
  },
  {
    "number": 78,
    "title": "å¦‚æœç”¨WeTextProcessingçš„è¯ï¼Œåƒ [laughter] è¿™ç§ç‰¹æ®Šç¬¦å·è¿˜å¯ä»¥è¯†åˆ«å‡ºæ¥å—",
    "created_at": "2024-07-10T02:31:29Z",
    "closed_at": "2024-07-10T15:12:40Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/78",
    "body": "æƒ³é—®ä¸€ä¸‹ï¼šå¦‚æœç”¨WeTextProcessingçš„è¯ï¼Œåƒ [laughter] è¿™ç§ç‰¹æ®Šç¬¦å·è¿˜å¯ä»¥è¯†åˆ«å‡ºæ¥å—ï¼Ÿæ„Ÿè°¢ï¼",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/78/comments",
    "author": "KevinWang676",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-10T03:06:30Z",
        "body": "yes it will. you can try more example to see if there is any bug"
      },
      {
        "user": "KevinWang676",
        "created_at": "2024-07-10T03:16:56Z",
        "body": "@aluminumbox Thanks for your reply. I tried to include [laughter] in my texts, however, the model could not recognize this symbol [laughter] and could not generate laughs. Can you help us resolve this issue? Thanks!"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-10T03:35:02Z",
        "body": "> @aluminumbox Thanks for your reply. I tried to include [laughter] in my texts, however, the model could not recognize this symbol [laughter] and could not generate laughs. Can you help us resolve this issue? Thanks!\r\n\r\nprint normalized text in your code, check if [laughter] is kept. also remember use cosyvoice-300m-instruct model"
      },
      {
        "user": "KevinWang676",
        "created_at": "2024-07-10T07:14:47Z",
        "body": "@aluminumbox I see. So, only cosyvoice-300m-instruct supports fine-grained control like [laughter] and other models like cosyvoice-300m do not. Am I right? Thanks!"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-10T15:12:40Z",
        "body": "> @aluminumbox I see. So, only cosyvoice-300m-instruct supports fine-grained control like [laughter] and other models like cosyvoice-300m do not. Am I right? Thanks!\r\n\r\nyes, check readme to learn how to use the 3 models"
      }
    ]
  },
  {
    "number": 73,
    "title": "å¯¹æ•°å­—çš„æœ—è¯»æ•ˆæœä¸å¥½",
    "created_at": "2024-07-09T13:14:51Z",
    "closed_at": "2024-07-09T15:57:27Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/73",
    "body": "**Describe the bug**\r\nåŒ…å«è¾ƒå¤šæ•°å­—ï¼Œå¦‚12345678æˆ–è€…2022å¹´12æœˆ29æ—¥ï¼Œçš„å¥å­ï¼Œæœ—è¯»æ•ˆæœå·®ã€‚\r\n\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/73/comments",
    "author": "haochange",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T15:21:54Z",
        "body": "this is due to frontend process. we will use wetextprocessing to replace it, or you can convert it to character manually. these cases cannot be numerated, so we will not focus on fixing these bug"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T15:57:27Z",
        "body": "we have used wetextprocessing to replace ttsfrd, update the code and install requirements to see whether it fix the bug"
      }
    ]
  },
  {
    "number": 72,
    "title": "docker ç‰ˆæœ¬è¿è¡Œï¼Œä¸€ä¸ªæ¨¡å‹èƒ½æ”¯æŒ4ç§æ¨¡å¼ï¼Ÿ",
    "created_at": "2024-07-09T11:41:31Z",
    "closed_at": "2024-07-09T15:57:36Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/72",
    "body": "çœ‹è¿è¡Œåªæœ‰CosyVoice-300MåŸºç¡€æ¨¡å‹ï¼Œä¸‹é¢clientä½¿ç”¨èƒ½åˆ†åˆ«ä½¿ç”¨sft|zero_shot|cross_lingual|instruct 4ä¸­æ¨¡å‹ï¼Ÿæˆ‘çœ‹å‰é¢æ–‡æ¡£æœ‰å†™CosyVoice-300M-sftæ˜¯ttsï¼ŒCosyVoice-300Mç›´æ¥æ˜¯å…‹éš†ï¼ŒCosyVoice-300M-instruct æ˜¯åŠ å…¥è¯­æ€æ§åˆ¶\r\ndocker run -d --runtime=nvidia -p 50000:50000 cosyvoice:v1.0 /bin/bash -c \"cd /opt/CosyVoice/CosyVoice/runtime/python && python3 server.py --port 50000 --max_conc 4 --model_dir iic/CosyVoice-300M && sleep infinity\"\r\n\r\n\r\npython3 client.py --port 50000 --mode <sft|zero_shot|cross_lingual|instruct>",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/72/comments",
    "author": "lonngxiang",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T15:20:36Z",
        "body": "no, the mode should be compatible with loaded model. for sft, please use cosyvoice-300m-sft, for zeroshot and cross lingual, use cosyvoice-300m, for instruct, use cosyvoice-300m-instruct. the command is just an example. please see readme for details"
      }
    ]
  },
  {
    "number": 71,
    "title": "å¦‚å¾ˆæ”¹æˆ ipè¿è¡Œ",
    "created_at": "2024-07-09T08:36:35Z",
    "closed_at": "2024-07-10T15:11:07Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/71",
    "body": " python3 webui.py --port 50000 --model_dir pretrained_models/CosyVoice-300M   å¦‚ä½•ä¿®æ”¹å¯åŠ¨çš„host , é»˜è®¤æ˜¯æœ¬æœºè®¿é—®ï¼Œå¦‚å¾ˆæ”¹æˆIP è®¿é—®",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/71/comments",
    "author": "zkxmaster",
    "comments": [
      {
        "user": "cacard",
        "created_at": "2024-07-09T09:48:18Z",
        "body": "ä½ ä¸ºå•¥æ”¹IPï¼Ÿé»˜è®¤å°±èƒ½é€šè¿‡localhostæˆ–127.0.0.1æˆ–ä½ çš„IPè®¿é—®ã€‚"
      },
      {
        "user": "xxxzsgxxx",
        "created_at": "2024-07-09T10:24:21Z",
        "body": "> ä½ ä¸ºå•¥æ”¹IPï¼Ÿé»˜è®¤å°±èƒ½é€šè¿‡localhostæˆ–127.0.0.1æˆ–ä½ çš„IPè®¿é—®ã€‚\r\n\r\nlocalhostå’Œ127.0.0.1å¯ä»¥ï¼Œå¤–ç½‘IPåœ°å€æ˜¯ä¸è¡Œçš„ã€‚"
      },
      {
        "user": "lilongwei5054",
        "created_at": "2024-07-09T11:18:44Z",
        "body": "> ä½ ä¸ºå•¥æ”¹IPï¼Ÿé»˜è®¤å°±èƒ½é€šè¿‡localhostæˆ–127.0.0.1æˆ–ä½ çš„IPè®¿é—®ã€‚\r\n\r\nå› ä¸ºå¾ˆå¤šè°ƒè¯•å¤§æ¨¡å‹çš„è®¾å¤‡æ˜¯ä¸“ç”¨çš„è®¾å¤‡ï¼Œä¸€èˆ¬é…å¤‡é«˜æ€§èƒ½æ˜¾å¡ï¼Œæ”¾åœ¨æœºæˆ¿ï¼Œä¸æ˜¯è‡ªå·±çš„å·¥ä½œç”µè„‘ï¼Œè€Œæˆ‘ä»¬ä¸€èˆ¬æ˜¯é€šè¿‡xshellè¿œç¨‹è°ƒè¯•çš„ï¼Œå› æ­¤æ— æ³•é€šè¿‡localhostè®¿é—®ï¼Œæ‰€ä»¥å¸Œæœ›åœ¨è‡ªå·±çš„å·¥ä½œç”µè„‘ä¸Šèƒ½é€šè¿‡å±€åŸŸç½‘ç±»ä¼¼192.168.x.x æ¥è®¿é—®ã€‚"
      },
      {
        "user": "hongdangshao",
        "created_at": "2024-07-09T12:42:41Z",
        "body": "demo.launch(server_name=\"0.0.0.0\",...)"
      },
      {
        "user": "xxxzsgxxx",
        "created_at": "2024-07-09T16:27:23Z",
        "body": "> demo.launch(server_name=\"0.0.0.0\",...)\r\n\r\næˆ‘ä¹Ÿç¢°åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œdemo.launchæ·»åŠ å¯ä»¥å·¥ä½œã€‚\r\n\r\nå¯ä»¥patchä¸€ä¸‹ï¼š\r\n\r\n```\r\ncat host.patch\r\n169c169\r\n<     demo.launch(server_name=args.host,server_port=args.port)\r\n---\r\n>     demo.launch(server_port=args.port)\r\n180,185d179\r\n<     parser.add_argument('--host',\r\n<                     type=str,\r\n<                     default='0.0.0.0',\r\n<                     help='Specify the IP address to listen on. Default is 0.0.0.0.')\r\n<\r\n```"
      },
      {
        "user": "hongdangshao",
        "created_at": "2024-07-09T16:27:57Z",
        "body": "I have got it!Thanks's."
      },
      {
        "user": "shrekzhao",
        "created_at": "2025-01-18T00:21:57Z",
        "body": "not use"
      }
    ]
  },
  {
    "number": 70,
    "title": "Supervised speech tokenizer",
    "created_at": "2024-07-09T06:13:34Z",
    "closed_at": "2024-07-11T01:04:54Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/70",
    "body": "**Is your feature request related to a problem? Please describe.**\r\nThe paper includes methods about \"Supervised speech tokenizer\", but the repository does not contain the training and reconstruction test code for this part.\r\n\r\n**Describe the solution you'd like**\r\nDid you perhaps forget to open-source this part of the code? Will you open-source this implementation in the future?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/70/comments",
    "author": "LqNoob",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T06:21:00Z",
        "body": "we have no plan to opensource speech tokenizer, we only release its onnx file"
      },
      {
        "user": "LqNoob",
        "created_at": "2024-07-09T06:48:15Z",
        "body": "> we have no plan to opensource speech tokenizer, we only release its onnx file\r\n\r\nThis message is quite regrettable, but thank you for your quick reply!\r\n\r\nHowever, I have another question I would like to consult with you about. When you were conducting experiments with the speech tokenizer, how did you determine that \"using ASR as backbone and having the tokenizer provide only semantic information (without acoustic information)\" was feasible?\r\n\r\nThank youï¼"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T11:04:25Z",
        "body": "> > we have no plan to opensource speech tokenizer, we only release its onnx file\r\n> \r\n> This message is quite regrettable, but thank you for your quick reply!\r\n> \r\n> However, I have another question I would like to consult with you about. When you were conducting experiments with the speech tokenizer, how did you determine that \"using ASR as backbone and having the tokenizer provide only semantic information (without acoustic information)\" was feasible?\r\n> \r\n> Thank youï¼\r\n\r\nwe did some experiement and verified that such token can recover original mel info. @ZhihaoDU can tell you more details"
      },
      {
        "user": "LqNoob",
        "created_at": "2024-07-10T01:09:45Z",
        "body": "> > we have no plan to opensource speech tokenizer, we only release its onnx file\r\n> \r\n> This message is quite regrettable, but thank you for your quick reply!\r\n> \r\n> However, I have another question I would like to consult with you about. When you were conducting experiments with the speech tokenizer, how did you determine that \"using ASR as backbone and having the tokenizer provide only semantic information (without acoustic information)\" was feasible?\r\n> \r\n> Thank youï¼\r\n\r\n@ZhihaoDU Could you provide some detailed and specific information? I would be very grateful."
      },
      {
        "user": "ZhihaoDU",
        "created_at": "2024-07-10T12:14:28Z",
        "body": "> > > we have no plan to opensource speech tokenizer, we only release its onnx file\r\n> > \r\n> > \r\n> > This message is quite regrettable, but thank you for your quick reply!\r\n> > However, I have another question I would like to consult with you about. When you were conducting experiments with the speech tokenizer, how did you determine that \"using ASR as backbone and having the tokenizer provide only semantic information (without acoustic information)\" was feasible?\r\n> > Thank youï¼\r\n> \r\n> @ZhihaoDU Could you provide some detailed and specific information? I would be very grateful.\r\n\r\nThanks  for your attention. I believe, we have not claimed there is only semantic information (without any acoustic information) in the S3 tokens. In fact, decoupling semantic and acoustic information is still an open problem to my best knowledge. What we can do is modeling semantic information in the token as more as possible. That is also the motivation, we employ the ASR task to learn the tokenizer in a supervised manner. We think such training process can maintain more semantic information into the tokens than self-supervised or unsupervised methods, such as Encoder, SoundStream, HuBert, wave2bert and so on."
      },
      {
        "user": "LqNoob",
        "created_at": "2024-07-11T01:04:54Z",
        "body": "\r\n@ZhihaoDU \r\nThank you for your explanation of the motivation behind the speech tokenizer in the paper; it has been very helpful to me.\r\nI will close this issues."
      }
    ]
  },
  {
    "number": 67,
    "title": "æ¨¡å‹å¾®è°ƒï¼Œæ‰§è¡Œextract_speech_tokenå‡ºç°æŠ¥é”™",
    "created_at": "2024-07-09T03:34:58Z",
    "closed_at": "2024-07-09T04:00:32Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/67",
    "body": "è¿è¡Œtools/extract_speech_token.pyå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼š\r\n```shell\r\nTraceback (most recent call last):\r\n  File \"extract_speech_token.py\", line 64, in <module>\r\n    main(args)\r\n  File \"extract_speech_token.py\", line 54, in main\r\n    speech_token = ort_session.run(None, {ort_session.get_inputs()[0].name: feat.detach().cpu().numpy(),\r\n  File \"/usr/local/lib/python3.8/dist-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 220, in run\r\n    return self._sess.run(output_names, input_feed, run_options)\r\nonnxruntime.capi.onnxruntime_pybind11_state.InvalidArgument: [ONNXRuntimeError] : 2 : INVALID_ARGUMENT : Got invalid dimensions for input: feats for the following indices\r\n index: 0 Got: 2 Expected: 1\r\n Please fix either the inputs or the model.\r\n ```\r\n è¯·é—®è¿™ä¸ªæ˜¯æ¨¡å‹çš„é—®é¢˜è¿˜æ˜¯æ•°æ®çš„é—®é¢˜ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/67/comments",
    "author": "wjddd",
    "comments": [
      {
        "user": "wjddd",
        "created_at": "2024-07-09T04:00:32Z",
        "body": "å·²è§£å†³ï¼Œè®­ç»ƒéŸ³é¢‘è¦æ±‚ä¸ºå•å£°é“ã€‚"
      },
      {
        "user": "clearlove-civ6",
        "created_at": "2024-08-19T07:44:41Z",
        "body": "æ„Ÿè°¢"
      }
    ]
  },
  {
    "number": 63,
    "title": "å¾®è°ƒæ—¶ï¼Œè®­ç»ƒ loss ä¸æ–­é™ä½ï¼Œè¯„ä¼° loss ä¸æ–­å‡é«˜ï¼Ÿ",
    "created_at": "2024-07-09T02:03:22Z",
    "closed_at": "2024-07-09T14:04:17Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/63",
    "body": "æŒ‰ç…§ libritts è®­ç»ƒå‡ ä¸ªä¸­æ–‡è¯´è¯äººçš„æ¨¡å‹ï¼Œç»“æœå‘ç°è®­ç»ƒ loss ä¸æ–­é™ä½ï¼Œä½†æ˜¯è¯„ä¼° loss åœ¨ä¸æ–­å‡é«˜ï¼Œä½†æ˜¯æ¨ç†æ—¶åˆæˆçš„éŸ³é¢‘åˆéƒ½æ­£å¸¸ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ\r\nç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¾‹å­é‡Œå†™çš„æ˜¯å¾®è°ƒ 200 è½®ï¼Œé‚£å®é™…ä¸Š 10 å°æ—¶ä»¥å†…çš„æ•°æ®è§„æ¨¡ï¼Œå¤§æ¦‚éœ€è¦å¤šå°‘è½®ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/63/comments",
    "author": "zhusy09",
    "comments": [
      {
        "user": "ScottishFold007",
        "created_at": "2024-07-09T06:01:23Z",
        "body": "> æŒ‰ç…§ libritts è®­ç»ƒå‡ ä¸ªä¸­æ–‡è¯´è¯äººçš„æ¨¡å‹ï¼Œç»“æœå‘ç°è®­ç»ƒ loss ä¸æ–­é™ä½ï¼Œä½†æ˜¯è¯„ä¼° loss åœ¨ä¸æ–­å‡é«˜ï¼Œä½†æ˜¯æ¨ç†æ—¶åˆæˆçš„éŸ³é¢‘åˆéƒ½æ­£å¸¸ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¾‹å­é‡Œå†™çš„æ˜¯å¾®è°ƒ 200 è½®ï¼Œé‚£å®é™…ä¸Š 10 å°æ—¶ä»¥å†…çš„æ•°æ®è§„æ¨¡ï¼Œå¤§æ¦‚éœ€è¦å¤šå°‘è½®ï¼Ÿ\r\nå…¸å‹çš„è¿‡æ‹Ÿåˆç°è±¡ï¼Œæ•°æ®æå¤šäº›å§"
      },
      {
        "user": "jiangxiaobai222",
        "created_at": "2024-07-09T06:16:11Z",
        "body": "> æŒ‰ç…§ libritts è®­ç»ƒå‡ ä¸ªä¸­æ–‡è¯´è¯äººçš„æ¨¡å‹ï¼Œç»“æœå‘ç°è®­ç»ƒ loss ä¸æ–­é™ä½ï¼Œä½†æ˜¯è¯„ä¼° loss åœ¨ä¸æ–­å‡é«˜ï¼Œä½†æ˜¯æ¨ç†æ—¶åˆæˆçš„éŸ³é¢‘åˆéƒ½æ­£å¸¸ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¾‹å­é‡Œå†™çš„æ˜¯å¾®è°ƒ 200 è½®ï¼Œé‚£å®é™…ä¸Š 10 å°æ—¶ä»¥å†…çš„æ•°æ®è§„æ¨¡ï¼Œå¤§æ¦‚éœ€è¦å¤šå°‘è½®ï¼Ÿ\r\n\r\næ„Ÿè§‰æ˜¯è¿‡æ‹Ÿåˆäº†ï¼Œä¹Ÿè®¸è½®æ•°å°‘ä¸€äº›ä¼šå¥½ã€‚\r\n\r\nåŒæ—¶æ‚¨æåˆ°çš„â€œä¾‹å­é‡Œå†™çš„æ˜¯å¾®è°ƒ200è½®â€ï¼Œè¯·é—®è¿™ä¸ªä¾‹å­æŒ‡ä»€ä¹ˆï¼Œéº»çƒ¦äº†\r\næ˜¯æŒ‡configæ–‡ä»¶å—ï¼Ÿ\r\n```\r\n# train conf\r\ntrain_conf:\r\n    optim: adam\r\n    optim_conf:\r\n        lr: 0.001\r\n    scheduler: warmuplr\r\n    scheduler_conf:\r\n        warmup_steps: 2500\r\n    max_epoch: 200\r\n    grad_clip: 5\r\n    accum_grad: 2\r\n    log_interval: 100\r\n    save_per_step: -1\r\n```\r\n"
      },
      {
        "user": "zhusy09",
        "created_at": "2024-07-09T06:25:04Z",
        "body": "å¯¹ï¼Œå°±æ˜¯è¿™ä¸ªã€‚"
      },
      {
        "user": "zhusy09",
        "created_at": "2024-07-09T14:04:14Z",
        "body": "ç›®å‰å‚ç…§ fish speech é¡¹ç›®ï¼ŒæŠŠ å­¦ä¹ ç‡é™ä½äº†ï¼Œepoch ä¹Ÿé™ä½äº†ï¼Œæ€»ç®—æ­£å¸¸äº†ã€‚"
      },
      {
        "user": "AssassinQuin",
        "created_at": "2024-07-10T03:02:08Z",
        "body": "> ç›®å‰å‚ç…§ fish speech é¡¹ç›®ï¼ŒæŠŠ å­¦ä¹ ç‡é™ä½äº†ï¼Œepoch ä¹Ÿé™ä½äº†ï¼Œæ€»ç®—æ­£å¸¸äº†ã€‚\r\n\r\nè¯·é—®ä½ æ•°æ®è§„æ¨¡å¤šå¤§ï¼Ÿå‚æ•°æ€ä¹ˆè°ƒçš„å‘¢ï¼Ÿ"
      },
      {
        "user": "zhusy09",
        "created_at": "2024-07-10T14:13:47Z",
        "body": "å¤§æ¦‚åå‡ ä¸ªå°æ—¶ï¼Œäº”å…­ä¸ªäººã€‚å­¦ä¹ ç‡å°½é‡å°ç‚¹ï¼Œ1e-5å·¦å³ï¼Œepochå…ˆå¼„ä¸ª5ï¼Œå†æ…¢æ…¢å¢åŠ çœ‹çœ‹ã€‚"
      },
      {
        "user": "AssassinQuin",
        "created_at": "2024-07-10T23:39:55Z",
        "body": "å¥½çš„è°¢è°¢ğŸ™"
      },
      {
        "user": "sunnnnnnnny",
        "created_at": "2024-08-08T05:57:43Z",
        "body": "å¯¹äºå¾®è°ƒçš„æ•°æ®é‡è¦æ±‚æ˜¯å¤šå°‘å‘¢ï¼Ÿç”¨10å‡ åˆ†é’Ÿçš„æ•°æ®å»å¾®è°ƒï¼Œæ•ˆæœæ²¡ä»€ä¹ˆæå‡"
      }
    ]
  },
  {
    "number": 62,
    "title": "æ›´æ¢é»˜è®¤ttsfrdä¸ºWeTextProcessingï¼Œä¿®å¤åŠè§’å¥å·ç»“å°¾æˆ–è€…æ–‡æœ¬ä¸­æ²¡æœ‰æ ‡ç‚¹ä¼šå¯¼è‡´åˆæˆå¤±è´¥ï¼šRuntimeError: torch.cat(): expected a non-empty list of Tâ€¦",
    "created_at": "2024-07-09T00:18:22Z",
    "closed_at": "2024-07-09T15:26:14Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/62",
    "body": "â€¦ensors\r\n\r\ntext='å°æ˜å› ä¸ºæ„Ÿå†’,é¼»å­ä¸é€š,è®²è¯æ€»å¸¦ç€é½‰éŸ³.'\r\n  File \"/usr/local/data/CosyVoice/cosyvoice/cli/cosyvoice.py\", line 62, in inference_zero_shot\r\n    return {'tts_speech': torch.concat(tts_speeches, dim=1)}\r\nRuntimeError: torch.cat(): expected a non-empty list of Tensors\r\n\r\nåŸå› ä¸ºself.frontend.text_normalize(tts_text, split=True)è¿”å›ä¸ºç©º",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/62/comments",
    "author": "passerbya",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T07:13:38Z",
        "body": "nice job, we will try it later and merge it if possible"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T08:52:37Z",
        "body": "hello, please add me in Dingding group. My name is é“ç®±. or wechat name AluminumBox. Please add me to discuss further details."
      }
    ]
  },
  {
    "number": 60,
    "title": "Support MPS Backend",
    "created_at": "2024-07-08T15:53:19Z",
    "closed_at": "2024-07-10T14:48:51Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/60",
    "body": "Add MPS support; now you can use â€“device to select MPS, CUDA, or CPU.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/60/comments",
    "author": "XXXXRT666",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T00:19:45Z",
        "body": "can we detect mps in code rather than specify device argument, then we can change only one file model.py line 22."
      },
      {
        "user": "XXXXRT666",
        "created_at": "2024-07-09T01:07:06Z",
        "body": "Yes, I kept the default setting just because I haven't tested whether it's faster or not on a larger vram machine. On my M2 chip Mac I suppose it's may slower than CPU (No exact timing)"
      },
      {
        "user": "XXXXRT666",
        "created_at": "2024-07-09T01:08:18Z",
        "body": "I will test it later on a machine with larger vram"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T15:25:14Z",
        "body": "> Yes, I kept the default setting just because I haven't tested whether it's faster or not on a larger vram machine. On my M2 chip Mac I suppose it's may slower than CPU (No exact timing)\r\n\r\nhello, please add me in Dingding group. My name is é“ç®±.  Please add me to discuss further details."
      },
      {
        "user": "XXXXRT666",
        "created_at": "2024-07-09T16:58:20Z",
        "body": "> hello, please add me in Dingding group. My name is é“ç®±. Please add me to discuss further details.\r\n\r\nI have enter the DingTalk group, but I think private messaging is not allowed.\r\n\r\n> Yes, I kept the default setting just because I haven't tested whether it's faster or not on a larger vram machine. On my M2 chip Mac I suppose it's may slower than CPU (No exact timing)\r\n\r\nAnd for MPS inference, it takes 100s in average for default text in webUI, while it only takes 37s in average for CPU. Also MPS have unsolved memory leaks issue, the memory increases by 8 GB after inferencing a sentence. So I set it a second choice, the default device is CUDA for Nvidia GPU and CPU for others.\r\n\r\n\r\n"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-10T01:18:06Z",
        "body": "> > hello, please add me in Dingding group. My name is é“ç®±. Please add me to discuss further details.\r\n> \r\n> I have enter the DingTalk group, but I think private messaging is not allowed.\r\n> \r\n> > Yes, I kept the default setting just because I haven't tested whether it's faster or not on a larger vram machine. On my M2 chip Mac I suppose it's may slower than CPU (No exact timing)\r\n> \r\n> And for MPS inference, it takes 100s in average for default text in webUI, while it only takes 37s in average for CPU. Also MPS have unsolved memory leaks issue, the memory increases by 8 GB after inferencing a sentence. So I set it a second choice, the default device is CUDA for Nvidia GPU and CPU for others.\r\n\r\n@XXXXRT666 please add me now, I have removed the restriction."
      }
    ]
  },
  {
    "number": 57,
    "title": "Error happened during zero shot TTS for text that does not end with punctuation",
    "created_at": "2024-07-08T11:38:51Z",
    "closed_at": "2024-07-09T16:01:37Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/57",
    "body": "In Zero Shot modeï¼Œif the Prompt text or Target text does not end with punctuation (eg '.' or '?' or '!' ), the following error message will happenï¼š\r\n\r\nTraceback (most recent call last):\r\n  File \"./test.py\", line 22, in <module>\r\n    output = cosyvoice.inference_zero_shot(target_text, prompt_text, prompt_speech_16k)\r\n  File \"/root/autodl-tmp/CosyVoice/cosyvoice/cli/cosyvoice.py\", line 63, in inference_zero_shot\r\n    return {'tts_speech': torch.concat(tts_speeches, dim=1)}\r\nRuntimeError: torch.cat(): expected a non-empty list of Tensors.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/57/comments",
    "author": "LwLiu-2012",
    "comments": [
      {
        "user": "v3ucn",
        "created_at": "2024-07-08T12:27:55Z",
        "body": "æ¨ç†æ–‡æœ¬å’Œå‚è€ƒæ–‡æœ¬çš„ç»“å°¾å¿…é¡»ç”¨æ ‡ç‚¹ç¬¦å·ç»“å°¾ï¼Œå¦åˆ™å°±æŠ¥é”™"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T16:01:37Z",
        "body": "the code is now updated, it will add puncatation by default at sentence end."
      }
    ]
  },
  {
    "number": 52,
    "title": "Zero Shot Inference Error",
    "created_at": "2024-07-08T09:57:25Z",
    "closed_at": "2024-07-09T16:04:44Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/52",
    "body": "when do zero_shot_inference, i uploaded a chinese mp3, it throws:\r\nWhen I trim the audio length to shorter, the error is gone. \r\n2024-07-08 17:52:16,887 DEBUG Used_phis: defaultdict(<class 'set'>,\r\n            {State(pc_initial=0 nstack_initial=0): set(),\r\n             State(pc_initial=186 nstack_initial=0): set(),\r\n             State(pc_initial=190 nstack_initial=0): set()})\r\n2024-07-08 17:52:16,888 DEBUG defmap: {}\r\n2024-07-08 17:52:16,888 DEBUG phismap: defaultdict(<class 'set'>, {})\r\n2024-07-08 17:52:16,888 DEBUG changing phismap: defaultdict(<class 'set'>, {})\r\n2024-07-08 17:52:16,888 DEBUG keep phismap: {}\r\n2024-07-08 17:52:16,888 DEBUG new_out: defaultdict(<class 'dict'>, {})\r\n2024-07-08 17:52:16,888 DEBUG ----------------------DONE Prune PHIs-----------------------\r\n2024-07-08 17:52:16,888 DEBUG block_infos State(pc_initial=0 nstack_initial=0):\r\nAdaptBlockInfo(insts=((0, {}), (2, {}), (4, {'res': '$x4.0'}), (6, {'res': '$const6.1'}), (8, {'index': '$const6.1', 'target': '$x4.0', 'res': '$8binary_subscr.2'}), (10, {}), (12, {}), (14, {}), (16, {}), (18, {'res': '$x18.3'}), (20, {'res': '$const20.4'}), (22, {'index': '$const20.4', 'target': '$x18.3', 'res': '$22binary_subscr.5'}), (24, {}), (26, {}), (28, {}), (30, {}), (32, {'op': '+', 'lhs': '$8binary_subscr.2', 'rhs': '$22binary_subscr.5', 'res': '$binop_add32.6'}), (34, {}), (36, {'res': '$const36.7'}), (38, {'res': '$x38.8'}), (40, {'res': '$const40.9'}), (42, {'index': '$const40.9', 'target': '$x38.8', 'res': '$42binary_subscr.10'}), (44, {}), (46, {}), (48, {}), (50, {}), (52, {'op': '*', 'lhs': '$const36.7', 'rhs': '$42binary_subscr.10', 'res': '$binop_mul52.11'}), (54, {}), (56, {'op': '-', 'lhs': '$binop_add32.6', 'rhs': '$binop_mul52.11', 'res': '$binop_sub56.12'}), (58, {}), (60, {'value': '$binop_sub56.12'}), (62, {'res': '$x62.13'}), (64, {'res': '$const64.14'}), (66, {'index': '$const64.14', 'target': '$x62.13', 'res': '$66binary_subscr.15'}), (68, {}), (70, {}), (72, {}), (74, {}), (76, {'res': '$x76.16'}), (78, {'res': '$const78.17'}), (80, {'index': '$const78.17', 'target': '$x76.16', 'res': '$80binary_subscr.18'}), (82, {}), (84, {}), (86, {}), (88, {}), (90, {'op': '-', 'lhs': '$66binary_subscr.15', 'rhs': '$80binary_subscr.18', 'res': '$binop_sub90.19'}), (92, {}), (94, {'res': '$const94.20'}), (96, {'op': '/', 'lhs': '$binop_sub90.19', 'rhs': '$const94.20', 'res': '$binop_truediv96.21'}), (98, {}), (100, {'value': '$binop_truediv96.21'}), (102, {'idx': 0, 'res': '$102load_global.22'}), (104, {}), (106, {}), (108, {}), (110, {}), (112, {}), (114, {'item': '$102load_global.22', 'res': '$114load_attr.24'}), (116, {}), (118, {}), (120, {}), (122, {}), (124, {'res': '$b124.25'}), (126, {}), (128, {}), (130, {'func': '$114load_attr.24', 'args': ['$b124.25'], 'kw_names': None, 'res': '$130call.26'}), (132, {}), (134, {}), (136, {}), (138, {}), (140, {'idx': 0, 'res': '$140load_global.27'}), (142, {}), (144, {}), (146, {}), (148, {}), (150, {}), (152, {'item': '$140load_global.27', 'res': '$152load_attr.29'}), (154, {}), (156, {}), (158, {}), (160, {}), (162, {'res': '$a162.30'}), (164, {}), (166, {}), (168, {'func': '$152load_attr.29', 'args': ['$a162.30'], 'kw_names': None, 'res': '$168call.31'}), (170, {}), (172, {}), (174, {}), (176, {}), (178, {'lhs': '$130call.26', 'rhs': '$168call.31', 'res': '$178compare_op.32'}), (180, {}), (182, {}), (184, {'pred': '$178compare_op.32'})), outgoing_phis={}, blockstack=(), active_try_block=None, outgoing_edgepushed={186: (), 190: ()})\r\n2024-07-08 17:52:16,889 DEBUG block_infos State(pc_initial=186 nstack_initial=0):\r\nAdaptBlockInfo(insts=((186, {'res': '$const186.0'}), (188, {'retval': '$const186.0', 'castval': '$188return_value.1'})), outgoing_phis={}, blockstack=(), active_try_block=None, outgoing_edgepushed={})\r\n2024-07-08 17:52:16,889 DEBUG block_infos State(pc_initial=190 nstack_initial=0):\r\nAdaptBlockInfo(insts=((190, {'res': '$b190.0'}), (192, {'value': '$b190.0', 'res': '$192unary_negative.1'}), (194, {'res': '$a194.2'}), (196, {'op': '/', 'lhs': '$192unary_negative.1', 'rhs': '$a194.2', 'res': '$binop_truediv196.3'}), (198, {}), (200, {'retval': '$binop_truediv196.3', 'castval': '$200return_value.4'})), outgoing_phis={}, blockstack=(), active_try_block=None, outgoing_edgepushed={})\r\n2024-07-08 17:52:16,890 DEBUG label 0:\r\n    x = arg(0, name=x)                       ['x']\r\n    $const6.1 = const(int, 1)                ['$const6.1']\r\n    $8binary_subscr.2 = getitem(value=x, index=$const6.1, fn=<built-in function getitem>) ['$8binary_subscr.2', '$const6.1', 'x']\r\n    $const20.4 = const(int, -1)              ['$const20.4']\r\n    $22binary_subscr.5 = getitem(value=x, index=$const20.4, fn=<built-in function getitem>) ['$22binary_subscr.5', '$const20.4', 'x']\r\n    $binop_add32.6 = $8binary_subscr.2 + $22binary_subscr.5 ['$22binary_subscr.5', '$8binary_subscr.2', '$binop_add32.6']\r\n    $const36.7 = const(int, 2)               ['$const36.7']\r\n    $const40.9 = const(int, 0)               ['$const40.9']\r\n    $42binary_subscr.10 = getitem(value=x, index=$const40.9, fn=<built-in function getitem>) ['$42binary_subscr.10', '$const40.9', 'x']\r\n    $binop_mul52.11 = $const36.7 * $42binary_subscr.10 ['$42binary_subscr.10', '$binop_mul52.11', '$const36.7']\r\n    a = $binop_add32.6 - $binop_mul52.11     ['$binop_add32.6', '$binop_mul52.11', 'a']\r\n    $const64.14 = const(int, 1)              ['$const64.14']\r\n    $66binary_subscr.15 = getitem(value=x, index=$const64.14, fn=<built-in function getitem>) ['$66binary_subscr.15', '$const64.14', 'x']\r\n    $const78.17 = const(int, -1)             ['$const78.17']\r\n    $80binary_subscr.18 = getitem(value=x, index=$const78.17, fn=<built-in function getitem>) ['$80binary_subscr.18', '$const78.17', 'x']\r\n    $binop_sub90.19 = $66binary_subscr.15 - $80binary_subscr.18 ['$66binary_subscr.15', '$80binary_subscr.18', '$binop_sub90.19']\r\n    $const94.20 = const(int, 2)              ['$const94.20']\r\n    b = $binop_sub90.19 / $const94.20        ['$binop_sub90.19', '$const94.20', 'b']\r\n    $102load_global.22 = global(np: <module 'numpy' from 'C:\\\\Users\\\\sekkitshi\\\\AppData\\\\Local\\\\miniconda3\\\\envs\\\\cosyvoice\\\\Lib\\\\site-packages\\\\numpy\\\\__init__.py'>) ['$102load_global.22']\r\n    $114load_attr.24 = getattr(value=$102load_global.22, attr=abs) ['$102load_global.22', '$114load_attr.24']\r\n    $130call.26 = call $114load_attr.24(b, func=$114load_attr.24, args=[Var(b, pitch.py:429)], kws=(), vararg=None, varkwarg=None, target=None) ['$114load_attr.24', '$130call.26', 'b']\r\n    $140load_global.27 = global(np: <module 'numpy' from 'C:\\\\Users\\\\sekkitshi\\\\AppData\\\\Local\\\\miniconda3\\\\envs\\\\cosyvoice\\\\Lib\\\\site-packages\\\\numpy\\\\__init__.py'>) ['$140load_global.27']\r\n    $152load_attr.29 = getattr(value=$140load_global.27, attr=abs) ['$140load_global.27', '$152load_attr.29']\r\n    $168call.31 = call $152load_attr.29(a, func=$152load_attr.29, args=[Var(a, pitch.py:428)], kws=(), vararg=None, varkwarg=None, target=None) ['$152load_attr.29', '$168call.31', 'a']\r\n    $178compare_op.32 = $130call.26 >= $168call.31 ['$130call.26', '$168call.31', '$178compare_op.32']\r\n    bool184 = global(bool: <class 'bool'>)   ['bool184']\r\n    $184pred = call bool184($178compare_op.32, func=bool184, args=(Var($178compare_op.32, pitch.py:431),), kws=(), vararg=None, varkwarg=None, target=None) ['$178compare_op.32', '$184pred', 'bool184']\r\n    branch $184pred, 186, 190                ['$184pred']\r\nlabel 186:\r\n    $const186.0 = const(int, 0)              ['$const186.0']\r\n    $188return_value.1 = cast(value=$const186.0) ['$188return_value.1', '$const186.0']\r\n    return $188return_value.1                ['$188return_value.1']\r\nlabel 190:\r\n    $192unary_negative.1 = unary(fn=<built-in function neg>, value=b) ['$192unary_negative.1', 'b']\r\n    $binop_truediv196.3 = $192unary_negative.1 / a ['$192unary_negative.1', '$binop_truediv196.3', 'a']\r\n    $200return_value.4 = cast(value=$binop_truediv196.3) ['$200return_value.4', '$binop_truediv196.3']\r\n    return $200return_value.4                ['$200return_value.4']\r\n\r\n2024-07-08 17:52:17.2848084 [E:onnxruntime:, sequential_executor.cc:514 onnxruntime::ExecuteKernel] Non-zero status code returned while running Add node. Name:'/Add_2' Status Message: D:\\a\\_work\\1\\s\\onnxruntime\\core/providers/cpu/math/element_wise_ops.h:560 onnxruntime::BroadcastIterator::Append axis == 1 || axis == largest was false. Attempting to broadcast an axis by a dimension other than 1. 1500 by 1932\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\sekkitshi\\AppData\\Local\\miniconda3\\envs\\cosyvoice\\Lib\\site-packages\\gradio\\queueing.py\", line 521, in process_events\r\n    response = await route_utils.call_process_api(\r\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\sekkitshi\\AppData\\Local\\miniconda3\\envs\\cosyvoice\\Lib\\site-packages\\gradio\\route_utils.py\", line 276, in call_process_api\r\n    output = await app.get_blocks().process_api(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\sekkitshi\\AppData\\Local\\miniconda3\\envs\\cosyvoice\\Lib\\site-packages\\gradio\\blocks.py\", line 1945, in process_api\r\n    result = await self.call_function(\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\sekkitshi\\AppData\\Local\\miniconda3\\envs\\cosyvoice\\Lib\\site-packages\\gradio\\blocks.py\", line 1513, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\sekkitshi\\AppData\\Local\\miniconda3\\envs\\cosyvoice\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\r\n    return await get_async_backend().run_sync_in_worker_thread(\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\sekkitshi\\AppData\\Local\\miniconda3\\envs\\cosyvoice\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2177, in run_sync_in_worker_thread\r\n    return await future\r\n           ^^^^^^^^^^^^\r\n  File \"C:\\Users\\sekkitshi\\AppData\\Local\\miniconda3\\envs\\cosyvoice\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 859, in run\r\n    result = context.run(func, *args)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\sekkitshi\\AppData\\Local\\miniconda3\\envs\\cosyvoice\\Lib\\site-packages\\gradio\\utils.py\", line 831, in wrapper\r\n    response = f(*args, **kwargs)\r\n               ^^^^^^^^^^^^^^^^^^\r\n  File \"X:\\tmp\\CosyVoice_For_Windows-pack\\webui.py\", line 126, in generate_audio\r\n    output = cosyvoice.inference_zero_shot(tts_text, prompt_text, prompt_speech_16k)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"X:\\tmp\\CosyVoice_For_Windows-pack\\cosyvoice\\cli\\cosyvoice.py\", line 63, in inference_zero_shot\r\n    model_input = self.frontend.frontend_zero_shot(i, prompt_text, prompt_speech_16k)\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"X:\\tmp\\CosyVoice_For_Windows-pack\\cosyvoice\\cli\\frontend.py\", line 120, in frontend_zero_shot\r\n    speech_token, speech_token_len = self._extract_speech_token(prompt_speech_16k)\r\n                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"X:\\tmp\\CosyVoice_For_Windows-pack\\cosyvoice\\cli\\frontend.py\", line 66, in _extract_speech_token\r\n    speech_token = self.speech_tokenizer_session.run(None, {self.speech_tokenizer_session.get_inputs()[0].name: feat.detach().cpu().numpy(),\r\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\sekkitshi\\AppData\\Local\\miniconda3\\envs\\cosyvoice\\Lib\\site-packages\\onnxruntime\\capi\\onnxruntime_inference_collection.py\", line 220, in run    return self._sess.run(output_names, input_feed, run_options)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nonnxruntime.capi.onnxruntime_pybind11_state.RuntimeException: [ONNXRuntimeError] : 6 : RUNTIME_EXCEPTION : Non-zero status code returned while running Add node. Name:'/Add_2' Status Message: D:\\a\\_work\\1\\s\\onnxruntime\\core/providers/cpu/math/element_wise_ops.h:560 onnxruntime::BroadcastIterator::Append axis == 1 || axis == largest was false. Attempting to broadcast an axis by a dimension other than 1. 1500 by 1932",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/52/comments",
    "author": "sekkit",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T16:04:44Z",
        "body": "make sure prompt audio less than 30s"
      }
    ]
  },
  {
    "number": 49,
    "title": "Inference performance is relatively poor and speech synthesis is slow",
    "created_at": "2024-07-08T09:31:03Z",
    "closed_at": "2024-07-10T15:09:12Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/49",
    "body": "**Describe the bug**\r\n\r\nTest on a RTX 4090(24GB) server, found out it is very slow to inference.\r\n\r\nModel: CosyVoice-300M-SFT\r\nInput: è™½ç„¶æŠ€æœ¯è·¯çº¿å’Œã€ŠHerã€‹æœ‰æ‰€å·®åˆ«ï¼Œä½†ä»ç›´è§‚æ•ˆæœæ¥çœ‹ï¼Œä¹Ÿç®—å¾—ä¸Šæ˜¯ç»™ç½‘å‹ä»¬å¸¦æ¥äº†æ–°çš„ç©å…·ã€‚\r\nTake time: 5.51s\r\n\r\nIs it possible to make reasoning faster, please?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/49/comments",
    "author": "iflamed",
    "comments": [
      {
        "user": "xwang0415",
        "created_at": "2024-07-09T09:24:21Z",
        "body": "å¯ä»¥é€šè¿‡frontend.text_normalizeå¤„åšåˆæˆæ–‡æœ¬åˆ‡åˆ†ï¼Œå®ç°çŸ­å¥æµå¼æ¨ç†ï¼Œä¸è¿‡è¿˜æ˜¯è€—æ—¶è¾ƒé•¿ï¼Œä¸»è¦åœ¨llmå’Œflowï¼ŒæœŸå¾…ä¼˜åŒ–æ–¹æ¡ˆã€‚\r\n\r\nå¦å¤–å€Ÿæ¥¼å’¨è¯¢ä¸‹tinyæ¨¡å‹æ˜¯å¦å¼€æºè®¡åˆ’ï¼Ÿ"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T16:06:07Z",
        "body": "we are currently working on fixing bugs, we may try to increase inference speed later. we also used wetextprocessing to replace ttsfrd."
      },
      {
        "user": "hanswang73",
        "created_at": "2024-11-26T04:38:47Z",
        "body": "> we are currently working on fixing bugs, we may try to increase inference speed later. we also used wetextprocessing to replace ttsfrd.\r\n\r\næ¨ç†åŠ é€Ÿçš„æ–°ç‰ˆæœ¬ï¼Œä»Šå¹´å‡ºçš„æ¥å—ï¼Ÿ"
      }
    ]
  },
  {
    "number": 46,
    "title": "ä¸ºä½•è·¨è¯­ç§å¤åˆ¶ä¸éœ€è¦prompt text",
    "created_at": "2024-07-08T08:49:54Z",
    "closed_at": "2024-07-09T16:07:54Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/46",
    "body": "ä¸ºä½•è·¨è¯­ç§å¤åˆ¶ä¸éœ€è¦prompt text",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/46/comments",
    "author": "sekkit",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-08T08:53:40Z",
        "body": "check inference code for more details"
      }
    ]
  },
  {
    "number": 45,
    "title": "webduié‡Œï¼Œå¦‚æœè¾“å…¥æ–‡æœ¬é‡Œï¼Œæ²¡æœ‰ã€‚ç­‰ç»“æŸç¬¦å·ï¼Œä¼šæ— æ³•ç”ŸæˆéŸ³é¢‘ã€‚",
    "created_at": "2024-07-08T08:41:42Z",
    "closed_at": "2024-07-08T08:46:36Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/45",
    "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: [e.g. iOS]\r\n - Browser [e.g. chrome, safari]\r\n - Version [e.g. 22]\r\n\r\n**Smartphone (please complete the following information):**\r\n - Device: [e.g. iPhone6]\r\n - OS: [e.g. iOS8.1]\r\n - Browser [e.g. stock browser, safari]\r\n - Version [e.g. 22]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/45/comments",
    "author": "dogvane",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-08T08:46:36Z",
        "body": "this is frontend logic, please process it by yourself, or make sure add punctation at sentence end"
      }
    ]
  },
  {
    "number": 44,
    "title": "Any plans for SSML support?",
    "created_at": "2024-07-08T08:01:07Z",
    "closed_at": "2024-07-08T08:47:39Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/44",
    "body": null,
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/44/comments",
    "author": "wjddd",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-08T08:47:39Z",
        "body": "this is business logic, you can implement it by yourself, we do not have plans to suport it, but we may support more symbols like <laugnter> <angry> <sad>"
      }
    ]
  },
  {
    "number": 43,
    "title": "ttsfrdå®‰è£…èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œèƒ½ä¸èƒ½æ¢æˆWeTextProcessingï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„TNåº“ã€‚",
    "created_at": "2024-07-08T07:49:34Z",
    "closed_at": "2024-07-09T16:08:14Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/43",
    "body": "ttsfrdå®‰è£…èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œèƒ½ä¸èƒ½æ¢æˆWeTextProcessingï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„TNåº“ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/43/comments",
    "author": "lidingke",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-08T08:51:29Z",
        "body": "we will replace it later"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T16:08:14Z",
        "body": "update code, we have used wetextprocessing to replace ttsfrd"
      },
      {
        "user": "sirius-ai",
        "created_at": "2024-07-10T07:58:22Z",
        "body": "while use wetextprocessing instead none beforeï¼Œthe inference time cost more ~20%."
      }
    ]
  },
  {
    "number": 40,
    "title": "Missing information of **spk_id**",
    "created_at": "2024-07-08T06:45:50Z",
    "closed_at": "2024-07-08T08:14:14Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/40",
    "body": "Thanks for the great work of your team, \r\n\r\nI had a problem when using\r\n`output = cosyvoice.inference_instruct('åœ¨é¢å¯¹æŒ‘æˆ˜æ—¶ï¼Œä»–å±•ç°äº†éå‡¡çš„<strong>å‹‡æ°”</strong>ä¸<strong>æ™ºæ…§</strong>ã€‚', 'ä¸­æ–‡ç”·', 'Theo \\'Crimson\\', is a fiery, passionate rebel leader. Fights with fervor for justice, but struggles with impulsiveness.')\r\n`\r\nthere is a **spk_id** parameterï¼Œ In addition to the \"ä¸­æ–‡ç”·\" in the text, can you tell me other parameters that can be used?\r\nThank you for your helpğŸ˜Š",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/40/comments",
    "author": "TheCutestCat",
    "comments": [
      {
        "user": "Lixi20",
        "created_at": "2024-07-08T07:01:06Z",
        "body": "Literal['ä¸­æ–‡å¥³', 'ä¸­æ–‡ç”·', 'è‹±æ–‡å¥³', 'è‹±æ–‡ç”·', 'æ—¥è¯­ç”·', 'ç²¤è¯­å¥³', 'éŸ©è¯­å¥³'] Default: \"ä¸­æ–‡å¥³\""
      }
    ]
  },
  {
    "number": 39,
    "title": "è¯·é—®å¦‚ä½•å¾®è°ƒï¼Œè®­ç»ƒè‡ªå·±çš„è¯­éŸ³æ¨¡å‹",
    "created_at": "2024-07-08T03:32:43Z",
    "closed_at": "2024-07-09T16:09:05Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/39",
    "body": "oneshotçš„æ•ˆæœä¸ç¨³å®šï¼Œæˆ‘çœ‹projecté¡µé¢è¯´å¯ä»¥æ”¯æŒfinetuningï¼Œä½†æ˜¯åœ¨gitä¸Šæ²¡æœ‰çœ‹åˆ°æœ‰å…³finetuningå’Œä»‹ç»\r\n\r\næ˜¯å¦ä¼šæä¾›ç›¸å…³ä»£ç æˆ–è€…æ–‡æ¡£ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/39/comments",
    "author": "zergtant",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-08T05:32:14Z",
        "body": "see example/libritts/run.sh"
      },
      {
        "user": "zergtant",
        "created_at": "2024-07-09T00:37:53Z",
        "body": "å¥½çš„ï¼Œæˆ‘ç ”ç©¶ä¸‹ï¼Œè°¢è°¢"
      },
      {
        "user": "chenxu126",
        "created_at": "2024-07-12T05:42:58Z",
        "body": "è¿™ä¸ªrun.shæ˜¯åŸºç¡€è®­ç»ƒä¹ˆï¼Ÿ"
      }
    ]
  },
  {
    "number": 38,
    "title": "speaker",
    "created_at": "2024-07-08T03:18:26Z",
    "closed_at": "2024-07-10T15:08:20Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/38",
    "body": "å¯ä»¥è¯†åˆ«éŸ³é¢‘é‡Œé¢çš„speakerå—ã€‚æœ‰æ²¡æœ‰å€Ÿå£ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/38/comments",
    "author": "Lixi20",
    "comments": [
      {
        "user": "Lixi20",
        "created_at": "2024-07-08T03:18:41Z",
        "body": "> å¯ä»¥è¯†åˆ«éŸ³é¢‘é‡Œé¢çš„speakerå—ã€‚æœ‰æ²¡æœ‰æ¥å£ï¼Ÿ\r\n\r\n"
      },
      {
        "user": "ZhihaoDU",
        "created_at": "2024-07-10T12:31:56Z",
        "body": "æˆ‘æƒ³ä½ è¦æ‰¾çš„æ˜¯SenseVoiceæˆ–è€…3D-speakerã€‚CosyVoiceæ˜¯ç”Ÿæˆæ¨¡å‹ï¼Œä¸èƒ½è¯†åˆ«è¯´è¯äººã€‚"
      }
    ]
  },
  {
    "number": 37,
    "title": "å¦‚ä½•è®­ç»ƒä¸€ä¸ªæ–°çš„è¯­è¨€",
    "created_at": "2024-07-08T02:57:53Z",
    "closed_at": "2024-07-10T15:08:10Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/37",
    "body": "æˆ‘æƒ³åŸºäºè¿™ä¸ªæ¨¡å‹ç»“æ„è®­ç»ƒå…¶ä»–çš„è¯­è¨€ï¼Œæƒ³è¯·æ•™ä¸€ä¸‹ï¼š\r\n1. è®­ç»ƒçš„æ•°æ®æ ¼å¼è¦æ±‚æ˜¯æ€æ ·çš„ï¼Œæœ‰å‚è€ƒç¤ºä¾‹å—ï¼Ÿ\r\n2. é¢„è®­ç»ƒçš„ä»£ç å¯ä»¥åœ¨å“ªå‚è€ƒï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/37/comments",
    "author": "kwaihua",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-08T03:07:20Z",
        "body": "Check run.sh in examples/libritts, you can prepare your own data for sft or training from scratch. you can start with llm training."
      }
    ]
  },
  {
    "number": 36,
    "title": "Optimize model loading and reasoning",
    "created_at": "2024-07-08T02:17:41Z",
    "closed_at": "2024-07-09T15:51:57Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/36",
    "body": "Optimize model loading and reasoning",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/36/comments",
    "author": "v3ucn",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-08T03:05:51Z",
        "body": "Thank you for your suggestions, we will consider some of them, for example empty cache. but in inference, we specify the kwargs in llm/flow/hift because we want a more clear view of the inputs of each module. The code you provided is easier to read, but maybe harder to debug. We will update our code according to your suggestions, but not the whole PR. "
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-09T15:51:57Z",
        "body": "@v3ucn thank you for your PR. we ignored the refactor part because we want a more detailed view of how cosyvoice model works, we keep the torch.cuda.empty_cache code as it can release cuda memory release after every inference. Thank you for your effor."
      }
    ]
  },
  {
    "number": 35,
    "title": "ubuntuæ‰§è¡Œä»£ç å‡ºç°é—®é¢˜",
    "created_at": "2024-07-08T01:41:17Z",
    "closed_at": "2024-07-10T15:08:01Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/35",
    "body": "pydoc.ErrorDuringImport: problem in cosyvoice.flow.flow_matching - ModuleNotFoundError: No module named 'matcha.models'; 'matcha' is not a packageæŠ¥è¿™ä¸ªé”™è¯¯æ€ä¹ˆåŠ\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/35/comments",
    "author": "zhiwanxia",
    "comments": [
      {
        "user": "zhiwanxia",
        "created_at": "2024-07-08T01:42:12Z",
        "body": "pydoc.ErrorDuringImport: problem in cosyvoice.hifigan.generator - ModuleNotFoundError: No module named 'academicodec'è¿˜ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜\r\n"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-08T01:46:47Z",
        "body": "check faq.md, export pythonpath before run python"
      },
      {
        "user": "zhiwanxia",
        "created_at": "2024-07-08T01:54:02Z",
        "body": "> check faq.md, export pythonpath before run python\r\nexport pythonpathä¹‹åä¼šå‡ºç°è¿™ä¸ª\r\npydoc.ErrorDuringImport: problem in cosyvoice.hifigan.generator - ModuleNotFoundError: No module named 'academicodec'æ€ä¹ˆåŠï¼Ÿ\r\n"
      },
      {
        "user": "Hwangkop",
        "created_at": "2024-07-08T02:04:21Z",
        "body": "did you execute this command ?  ```git submodule update --init --recursive```"
      },
      {
        "user": "zhiwanxia",
        "created_at": "2024-07-08T02:11:08Z",
        "body": "> did you execute this command ? `git submodule update --init --recursive`\r\nyes,but still don't work"
      },
      {
        "user": "ldxbxl",
        "created_at": "2024-07-08T05:25:48Z",
        "body": "> > did you execute this command ? `git submodule update --init --recursive`\r\n> > yes,but still don't work\r\n\r\næˆ‘ä¹Ÿé‡åˆ°äº†ç›¸åŒçš„æŠ¥é”™ModuleNotFoundError: No module named 'academicodec'ï¼Œæˆ‘å·²å°†matcha-ttsçš„ä»£ç æ”¾åˆ°æ–‡ä»¶å¤¹ä¸‹é¢äº†ç„¶åå°±å‡ºç°äº†è¿™ä¸ªé”™è¯¯"
      },
      {
        "user": "yangcunning1",
        "created_at": "2024-07-08T09:48:36Z",
        "body": "> pydoc.ErrorDuringImport: problem in cosyvoice.flow.flow_matching - ModuleNotFoundError: No module named 'matcha.models'; 'matcha' is not a packageæŠ¥è¿™ä¸ªé”™è¯¯æ€ä¹ˆåŠ\r\n\r\næˆ‘æ˜¯è¿™ä¹ˆè§£å†³çš„ï¼Œä¸‹è½½Matcha-TTSï¼Œå¹¶æŠŠMatcha-TTSæ”¾åˆ°third_partyç›®å½•ä¸‹"
      },
      {
        "user": "ldxbxl",
        "created_at": "2024-07-08T14:29:23Z",
        "body": "> > pydoc.ErrorDuringImport: problem in cosyvoice.flow.flow_matching - ModuleNotFoundError: No module named 'matcha.models'; 'matcha' is not a packageæŠ¥è¿™ä¸ªé”™è¯¯æ€ä¹ˆåŠ\r\n> \r\n> æˆ‘æ˜¯è¿™ä¹ˆè§£å†³çš„ï¼Œä¸‹è½½Matcha-TTSï¼Œå¹¶æŠŠMatcha-TTSæ”¾åˆ°third_partyç›®å½•ä¸‹\r\n\r\nModuleNotFoundError: No module named 'academicodec'æˆ‘ä¸‹è½½å¹¶æ”¾åˆ°third_partyç›®å½•ä¸‹æ˜¯è¿™æ ·æŠ¥é”™çš„"
      },
      {
        "user": "ldxbxl",
        "created_at": "2024-07-08T14:42:08Z",
        "body": "> > pydoc.ErrorDuringImport: problem in cosyvoice.flow.flow_matching - ModuleNotFoundError: No module named 'matcha.models'; 'matcha' is not a packageæŠ¥è¿™ä¸ªé”™è¯¯æ€ä¹ˆåŠ\r\n> \r\n> æˆ‘æ˜¯è¿™ä¹ˆè§£å†³çš„ï¼Œä¸‹è½½Matcha-TTSï¼Œå¹¶æŠŠMatcha-TTSæ”¾åˆ°third_partyç›®å½•ä¸‹\r\n\r\nè¯·é—®æ”¾åˆ°third_partyç›®å½•ä¸‹è¿˜éœ€è¦åœ¨æŒ‰ç…§Matcha-TTSçš„readmeå®‰è£…Matcha-TTSçš„åŒ…å—ï¼Ÿè¿˜æœ‰æ˜¯ä¸æ˜¯éœ€è¦pythonç‰ˆæœ¬å¤§äºç­‰äº3.9\r\n"
      },
      {
        "user": "yangcunning1",
        "created_at": "2024-07-08T14:48:22Z",
        "body": "ç›´æ¥æ”¾å…¥å°±è¡Œï¼Œä¸éœ€è¦å®‰è£…ï¼ŒæŒ‰ç…§gitä¸Šçš„å®‰è£…æŒ‡å¯¼ï¼Œå®‰è£…çš„python3.8\r\n\r\n\r\n\r\n---åŸå§‹é‚®ä»¶---\r\nå‘ä»¶äºº: ***@***.***&gt;\r\nå‘é€æ—¶é—´: 2024å¹´7æœˆ8æ—¥(å‘¨ä¸€) æ™šä¸Š10:42\r\næ”¶ä»¶äºº: ***@***.***&gt;;\r\næŠ„é€: ***@***.******@***.***&gt;;\r\nä¸»é¢˜: Re: [FunAudioLLM/CosyVoice] ubuntuæ‰§è¡Œä»£ç å‡ºç°é—®é¢˜ (Issue #35)\r\n\r\n\r\n\r\n\r\n   \r\npydoc.ErrorDuringImport: problem in cosyvoice.flow.flow_matching - ModuleNotFoundError: No module named 'matcha.models'; 'matcha' is not a packageæŠ¥è¿™ä¸ªé”™è¯¯æ€ä¹ˆåŠ\r\n  \r\næˆ‘æ˜¯è¿™ä¹ˆè§£å†³çš„ï¼Œä¸‹è½½Matcha-TTSï¼Œå¹¶æŠŠMatcha-TTSæ”¾åˆ°third_partyç›®å½•ä¸‹\r\n  \r\nè¯·é—®æ”¾åˆ°third_partyç›®å½•ä¸‹è¿˜éœ€è¦åœ¨æŒ‰ç…§Matcha-TTSçš„readmeå®‰è£…Matcha-TTSçš„åŒ…å—ï¼Ÿè¿˜æœ‰æ˜¯ä¸æ˜¯éœ€è¦pythonç‰ˆæœ¬å¤§äºç­‰äº3.9\r\n \r\nâ€”\r\nReply to this email directly, view it on GitHub, or unsubscribe.\r\nYou are receiving this because you commented.Message ID: ***@***.***&gt;"
      },
      {
        "user": "13140438775",
        "created_at": "2024-08-07T10:59:43Z",
        "body": "> ç›´æ¥æ”¾å…¥å°±è¡Œï¼Œä¸éœ€è¦å®‰è£…ï¼ŒæŒ‰ç…§gitä¸Šçš„å®‰è£…æŒ‡å¯¼ï¼Œå®‰è£…çš„python3.8\r\n> [â€¦](#)\r\n> ---åŸå§‹é‚®ä»¶--- å‘ä»¶äºº: ***@***.***&gt; å‘é€æ—¶é—´: 2024å¹´7æœˆ8æ—¥(å‘¨ä¸€) æ™šä¸Š10:42 æ”¶ä»¶äºº: ***@***.***&gt;; æŠ„é€: ***@***.******@***.***&gt;; ä¸»é¢˜: Re: [FunAudioLLM/CosyVoice] ubuntuæ‰§è¡Œä»£ç å‡ºç°é—®é¢˜ (Issue #35) pydoc.ErrorDuringImport: problem in cosyvoice.flow.flow_matching - ModuleNotFoundError: No module named 'matcha.models'; 'matcha' is not a packageæŠ¥è¿™ä¸ªé”™è¯¯æ€ä¹ˆåŠ æˆ‘æ˜¯è¿™ä¹ˆè§£å†³çš„ï¼Œä¸‹è½½Matcha-TTSï¼Œå¹¶æŠŠMatcha-TTSæ”¾åˆ°third_partyç›®å½•ä¸‹ è¯·é—®æ”¾åˆ°third_partyç›®å½•ä¸‹è¿˜éœ€è¦åœ¨æŒ‰ç…§Matcha-TTSçš„readmeå®‰è£…Matcha-TTSçš„åŒ…å—ï¼Ÿè¿˜æœ‰æ˜¯ä¸æ˜¯éœ€è¦pythonç‰ˆæœ¬å¤§äºç­‰äº3.9 â€” Reply to this email directly, view it on GitHub, or unsubscribe. You are receiving this because you commented.Message ID: ***@***.***&gt;\r\n\r\nç”¨python3.10ä¸å¯ä»¥å—ï¼Ÿ"
      }
    ]
  },
  {
    "number": 33,
    "title": "FileNotFoundError: [Errno 2] No such file or directory: '***/CosyVoice-main/examples/libritts/cosyvoice/data/test-clean/parquet/utt2parquet_000000000.json'",
    "created_at": "2024-07-07T17:58:35Z",
    "closed_at": "2024-07-10T15:07:43Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/33",
    "body": "echo \"Run inference. Please make sure utt in tts_text is in prompt_data\"\r\næ€ä¹ˆå‡†å¤‡inferenceçš„æ–‡ä»¶å‘€ï¼Ÿ\r\nFileNotFoundError: [Errno 2] No such file or directory: '/***/CosyVoice-main/examples/libritts/cosyvoice/data/test-clean/parquet/utt2parquet_000000000.json'\r\nè¿™ä¸ªæ˜¯ä»€ä¹ˆé—®é¢˜\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/33/comments",
    "author": "zhaojingxin123",
    "comments": [
      {
        "user": "zhaojingxin123",
        "created_at": "2024-07-07T18:08:22Z",
        "body": "è¿™ä¸ªé—®é¢˜æ˜¯åœ¨stage 4 inferenceå‡ºç°çš„\r\n"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-08T01:46:22Z",
        "body": "really, have you executed stage 1-3? what do you have in data/test-clean/parquet directory?"
      },
      {
        "user": "huskyachao",
        "created_at": "2024-07-23T03:14:43Z",
        "body": "æ‚¨å¥½ï¼Œè¯·é—®ä½ è§£å†³äº†å—  æˆ‘ä¹Ÿé‡åˆ°äº†åŒæ ·çš„é—®é¢˜ "
      }
    ]
  },
  {
    "number": 30,
    "title": "ä¸­æ–‡ çœç•¥å· bug",
    "created_at": "2024-07-07T07:09:34Z",
    "closed_at": "2024-07-08T11:08:37Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/30",
    "body": "ä¾‹å­ï¼š\r\nâ€œå°‘çˆ·ä½ å¬è¯ï¼Œä½ ä¸èƒ½å‡ºå»ï¼Œè®©å°æ¥šå»ï¼Œè®©ä»–å»å§â€¦â€¦â€\r\n\r\næ­¤å¥å­ä¸­æ²¡æœ‰         pounc = ['ã€‚', 'ï¼Ÿ', 'ï¼', 'ï¼›', 'ï¼š', '.', '?', '!', ';'] æ ‡ç‚¹ç¬¦å·ï¼Œä¼šå¯¼è‡´æ²¡æœ‰å­—ç¬¦è¾“å‡ºï¼Œåˆæˆä¼šå¤±è´¥\r\n\r\ncodeï¼šcosyvoice/utils/frontend_utils.py\r\n    if lang == \"zh\":\r\n        pounc = ['ã€‚', 'ï¼Ÿ', 'ï¼', 'ï¼›', 'ï¼š', '.', '?', '!', ';']\r\n    else:\r\n        pounc = ['.', '?', '!', ';', ':']\r\n    if comma_split:\r\n        pounc.extend(['ï¼Œ', ','])\r\n    st = 0\r\n    utts = []\r\n    for i, c in enumerate(text):\r\n        if c in pounc:\r\n            if len(text[st: i]) > 0:\r\n                utts.append(text[st: i] + c)\r\n            if i + 1 < len(text) and text[i + 1] in ['\"', 'â€']:\r\n                tmp = utts.pop(-1)\r\n                utts.append(tmp + text[i + 1])\r\n                st = i + 2\r\n            else:\r\n                st = i + 1\r\n                \r\n             ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/30/comments",
    "author": "AssassinQuin",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-07T08:13:44Z",
        "body": "This is due to text frontend error. Please modify it by yourself because we cannot consider all such cases in the code."
      }
    ]
  },
  {
    "number": 29,
    "title": "docs: update README.md",
    "created_at": "2024-07-07T03:22:23Z",
    "closed_at": "2024-07-07T08:22:26Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/29",
    "body": "recommand -> recommend",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/29/comments",
    "author": "eltociear",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-07T08:22:07Z",
        "body": "Thank you very much for the PR. We have closed it due to merge conflict with current branch and we have solved it according to your suggestion. Hope you can try more with our repo and give more suggestions."
      }
    ]
  },
  {
    "number": 26,
    "title": "about pretrained_models directory",
    "created_at": "2024-07-06T14:37:45Z",
    "closed_at": "2024-07-07T08:22:37Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/pull/26",
    "body": "If the pre-trained model has already been downloaded to the pretrained_models directory, then the model should be loaded from the local directory instead of being re-downloaded when loading the model. If the model is downloaded again in the user's cache directory, it will cause unnecessary hard disk space waste.",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/26/comments",
    "author": "v3ucn",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-07T08:22:37Z",
        "body": "Thank you very much for the PR. We have closed it due to merge conflict with current branch and we have solved it according to your suggestion. Hope you can try more with our repo and give more suggestions."
      }
    ]
  },
  {
    "number": 25,
    "title": "èƒ½æä¾›ä¸€ä»½é˜¿é‡Œäº‘çš„é•œåƒå—ï¼Œç°åœ¨å¤ªéš¾ä¸‹è½½åŸå§‹é•œåƒäº†",
    "created_at": "2024-07-06T14:07:34Z",
    "closed_at": "2024-07-10T15:06:26Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/25",
    "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/25/comments",
    "author": "xs818818",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-07T01:23:26Z",
        "body": "æˆ‘ä»¬è¿™ä¸ªdockerfileæ˜¯ä»dockerhubåŸå§‹é•œåƒç¼–è¯‘è¿‡æ¥çš„ï¼Œæ˜¯ä¸ºäº†è®©ç”¨æˆ·èƒ½å¤Ÿè‡ªå·±å¢åŠ è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¯ä»¥è¯•è¯•å¼€ä¸ªvpnï¼Œå…ˆæŠŠåŸºç¡€é•œåƒä¸‹è½½å¥½"
      }
    ]
  },
  {
    "number": 24,
    "title": "æœ‰æ²¡æœ‰ä»€ä¹ˆæŠ€å·§å¯ä»¥ç”Ÿæˆä¸­è‹±æ–‡æ··è¯»ï¼Ÿ",
    "created_at": "2024-07-06T13:53:34Z",
    "closed_at": "2024-07-10T15:06:18Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/24",
    "body": "å•å•ä¸­æ–‡ï¼Œå’Œè‹±æ–‡éƒ½å¾ˆå¥½ã€‚ä¸è¿‡è¯•äº†ä¸€ä¸‹æ··è¯»ï¼Œæ„Ÿè§‰ä¸å¤ªå¥½ã€‚æœ‰ä»€ä¹ˆæŠ€å·§ä¹ˆï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/24/comments",
    "author": "fxsome",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-07T01:26:28Z",
        "body": "çœ‹çœ‹æ—¥å¿—é‡Œï¼Œæ˜¯ä¸æ˜¯å‰ç«¯å¯¹äºä¸­è‹±æ–‡æ··è¯»å¤„ç†çš„æœ‰é—®é¢˜ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥æ‰‹åŠ¨è°ƒæ•´ä¸€ä¸‹ä¸­è‹±æ–‡æ··åˆè¾“å…¥ï¼Œæ¯•ç«Ÿå‰ç«¯è§„åˆ™æ— æ³•ç©·ä¸¾"
      },
      {
        "user": "ben-8878",
        "created_at": "2024-07-12T09:02:21Z",
        "body": "1. ä¸­è‹±æ··åˆï¼ŒæŸä¸ªè‹±æ–‡å•è¯ä¼šè¯»é”™ï¼Œçœ‹tnå¤„ç†æ˜¯å¯¹çš„ã€‚\r\n2. ä¸­è‹±æ··åˆï¼Œè‹±æ–‡å•è¯å’Œè‹±æ–‡å•è¯é—´ä¼šæœ‰ç›¸å¯¹è¾ƒé•¿çš„åœé¡¿ï¼Œæ•´ä½“è§‰å¾—ä¼šæ¯”è¾ƒçªå…€ï¼Œæ¯”å¦‚æ¬¢è¿æ”¶çœ‹HI FOUR Tå‘å¸ƒä¼šï¼ŒFOURå’ŒTä¹‹é—´ä¼šåœé¡¿0.5s,å¯æ„Ÿè§‰è¡”æ¥ä¸è‡ªç„¶ã€‚\r\næœ‰ä»€ä¹ˆåº”å¯¹åŠæ³•å—"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-12T09:04:41Z",
        "body": "1.  try change FOUR to four or Four\r\n2.  no easy solution yet"
      },
      {
        "user": "ben-8878",
        "created_at": "2024-07-12T09:09:46Z",
        "body": "> 1. try change FOUR to four or Four\r\nå¥½å¤šäº†ï¼Œè°¢è°¢å“ˆå“ˆå“ˆå“ˆ\r\n> 2. no easy solution yet\r\n\r\n"
      }
    ]
  },
  {
    "number": 22,
    "title": "pydoc.ErrorDuringImport: problem in cosyvoice.hifigan.generator - ModuleNotFoundError: No module named 'academicodec'",
    "created_at": "2024-07-06T11:49:28Z",
    "closed_at": "2024-07-06T14:07:44Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/22",
    "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: [e.g. iOS]\r\n - Browser [e.g. chrome, safari]\r\n - Version [e.g. 22]\r\n\r\n**Smartphone (please complete the following information):**\r\n - Device: [e.g. iPhone6]\r\n - OS: [e.g. iOS8.1]\r\n - Browser [e.g. stock browser, safari]\r\n - Version [e.g. 22]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/22/comments",
    "author": "xs818818",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-06T12:28:41Z",
        "body": "check readme ,remember export pythonpath and git submodule download third_party modules"
      }
    ]
  },
  {
    "number": 21,
    "title": "ttsfrd apple metal cpu(arm64) support",
    "created_at": "2024-07-06T10:03:50Z",
    "closed_at": "2024-07-09T01:40:08Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/21",
    "body": "**Is your feature request related to a problem? Please describe.** \r\nWanna run cosyvoice on macbook metal cpu\r\n\r\n**Describe the solution you'd like** \r\nprovide `ttsfrd-0.3.6-cp38-cp38-linux_arm64.whl`\r\n\r\n**Describe alternatives you've considered**\r\n-\r\n\r\n**Additional context**\r\n-\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/21/comments",
    "author": "songlairui",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-06T12:29:11Z",
        "body": "we will add wetextprocessing to replace ttsfrd when ttsfrd is unavaliable"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-07T08:25:14Z",
        "body": "please update the repo, ttsfrd is now optional during inference"
      }
    ]
  },
  {
    "number": 19,
    "title": "å®‰è£…ç¯å¢ƒæ—¶ï¼Œæç¤ºpython 3.8ç‰ˆæœ¬å¤ªä½",
    "created_at": "2024-07-06T08:48:40Z",
    "closed_at": "2024-07-10T15:06:05Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/19",
    "body": "ERROR: Ignored the following versions that require a different python version: 3.2 Requires-Python >=3.9; 3.2.1 Requires-Python >=3.9; 3.2rc0 Requires-Python >=3.9; 3.3 Requires-Python >=3.10; 3.3rc0 Requires-Python >=3.10; 3.8.0 Requires-Python >=3.9; 3.8.0rc1 Requires-Python >=3.9; 3.8.1 Requires-Python >=3.9; 3.8.2 Requires-Python >=3.9; 3.8.3 Requires-Python >=3.9; 3.8.4 Requires-Python >=3.9; 3.9.0 Requires-Python >=3.9; 3.9.0rc2 Requires-Python >=3.9; 3.9.1 Requires-Python >=3.9\r\nERROR: Could not find a version that satisfies the requirement onnxruntime-gpu==1.16.0 (from versions: none)\r\nERROR: No matching distribution found for onnxruntime-gpu==1.16.0",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/19/comments",
    "author": "qiangduscu",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-06T12:31:01Z",
        "body": "Really? are you using linux or windows system?"
      },
      {
        "user": "threadflow",
        "created_at": "2024-07-07T04:09:17Z",
        "body": "Try to use conda create -n cosyvoice python=3.10, seems work."
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-07T05:52:06Z",
        "body": "I believe you are using MacOS. Please change onnxruntime-gpu==1.16 to onnxruntime in requirements.txt"
      }
    ]
  },
  {
    "number": 16,
    "title": "speech-to-speech voice cloning feature",
    "created_at": "2024-07-06T06:15:14Z",
    "closed_at": "2024-07-10T15:04:53Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/16",
    "body": "Does this project support speech-to-speech voice cloning like sovits-svc? If not, will you guys support this in the future?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/16/comments",
    "author": "NeoBerekov",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-06T12:33:45Z",
        "body": "Maybe you mean voice conversion? You can use our zero_shot tts to clone voices already."
      }
    ]
  },
  {
    "number": 15,
    "title": "æ”¯æŒæµå¼çš„TTSè¾“å‡ºå—",
    "created_at": "2024-07-06T04:31:44Z",
    "closed_at": "2024-07-10T15:04:34Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/15",
    "body": "å¾ˆæ£’çš„å·¥ä½œï¼Œæœ‰åƒfish-speeché‚£ç§æ”¯æŒæµå¼çš„ttsè¾“å‡ºå—ï¼ŒåŠ å¿«æ•°å­—äººè¯´è¯çš„ååº”æ—¶é—´ã€‚",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/15/comments",
    "author": "rximg",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-06T12:34:29Z",
        "body": "hmm we only provided basic train and inference, we may consider streaming output if we have extra hands"
      },
      {
        "user": "chenxu126",
        "created_at": "2024-07-12T04:35:11Z",
        "body": "å“ˆå“ˆï¼Œçœ‹å‡ºæ¥æ„æ€å°±æ˜¯ä¸å¯èƒ½"
      },
      {
        "user": "yuyun2000",
        "created_at": "2024-07-12T10:06:58Z",
        "body": "> å“ˆå“ˆï¼Œçœ‹å‡ºæ¥æ„æ€å°±æ˜¯ä¸å¯èƒ½\r\n\r\nä½ é‚£é‡Œçœ‹å‡ºæ¥ä¸å¯èƒ½äº†...äººå®¶éƒ½è¯´äº†äººæ‰‹ä¸å¤Ÿ"
      }
    ]
  },
  {
    "number": 12,
    "title": "english short words infer error",
    "created_at": "2024-07-05T10:21:13Z",
    "closed_at": "2024-07-09T02:09:49Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/12",
    "body": "run inference code as shown below: \r\n\r\n```\r\nref_path=\"female01.wav\"\r\ncosyvoice = CosyVoice(\"pretrained_models/CosyVoice-300M\")\r\n# zero_shot usage\r\nprompt_speech_16k = load_wav(ref_path, 16000)\r\noutput = cosyvoice.inference_cross_lingual(\r\n    \"hello world\",\r\n    prompt_speech_16k,\r\n)\r\n```\r\n\r\n\r\nencounter error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"my_local_infer.py\", line 18, in <module>\r\n    output = cosyvoice.inference_cross_lingual(\r\n  File \"/data/CosyVoice/cosyvoice/cli/cosyvoice.py\", line 75, in inference_cross_lingual\r\n    return {'tts_speech': torch.concat(tts_speeches, dim=1)}\r\nRuntimeError: torch.cat(): expected a non-empty list of Tensors\r\n```",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/12/comments",
    "author": "marson666",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-05T10:42:59Z",
        "body": "please add punctation at sentence end, for example 'hello world.'"
      }
    ]
  },
  {
    "number": 11,
    "title": "åç»­ä¼šæ”¯æŒWindowsä¹ˆï¼Ÿ",
    "created_at": "2024-07-05T10:10:38Z",
    "closed_at": "2024-07-07T08:58:53Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/11",
    "body": "ç›®å‰çœ‹åˆ°é™åˆ¶python3.8 linuxå¹³å°",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/11/comments",
    "author": "CyberWon",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-05T10:42:24Z",
        "body": "æœ‰dockeræ”¯æŒï¼Œwindowsé•œåƒéƒ¨ç½²å³å¯ï¼Œè¿™ä¸ªæ˜¯pythonçš„è¿è¡Œç¯å¢ƒ"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-07T08:26:31Z",
        "body": "check #31  for windows usage"
      },
      {
        "user": "CyberWon",
        "created_at": "2024-07-07T08:59:11Z",
        "body": "åˆ˜æ‚¦å¤§ä½¬å‡ºé©¬ï¼Œå“ˆå“ˆå“ˆã€‚"
      }
    ]
  },
  {
    "number": 10,
    "title": "æ˜¯å¦æ”¯æŒå…¶ä»–è¯­ç§çš„åˆæˆ",
    "created_at": "2024-07-05T09:10:44Z",
    "closed_at": "2024-07-10T15:03:52Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/10",
    "body": "ä»readmeä¸Šçœ‹è²Œä¼¼åªæ”¯æŒä¸­æ–‡å’Œè‹±æ–‡çš„ttsã€‚å…¶ä»–è¯­ç§çš„æ˜¯å¦æ”¯æŒå‘¢ï¼Ÿå¦‚æœæ”¯æŒçš„è¯ï¼Œè¦æ€æ ·è®¾ç½®æŒ‡å®šçš„è¯­ç§å‘¢ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/10/comments",
    "author": "ZeeChao",
    "comments": [
      {
        "user": "ZhihaoDU",
        "created_at": "2024-07-05T09:17:11Z",
        "body": "æ”¯æŒä¸­è‹±æ—¥ç²¤éŸ©äº”ä¸ªè¯­ç§ï¼Œå¯ä»¥åœ¨è¦åˆæˆæ–‡æœ¬å‰é¢åŠ ä¸ŠLanguage IDï¼Œæ¯”å¦‚\r\nä¸­æ–‡ï¼š<|zh|>\r\nè‹±æ–‡ï¼š<|en|>\r\næ—¥æ–‡ï¼š<|jp|>\r\nç²¤è¯­ï¼š<|yue|>\r\néŸ©è¯­ï¼š<|ko|>"
      },
      {
        "user": "abc8350712",
        "created_at": "2024-07-08T12:03:00Z",
        "body": "`cosyvoice = CosyVoice('pretrained_models/CosyVoice-300M')\r\n\r\nprompt_speech_16k = load_wav('dzq_ref.wav', 16000)\r\n\r\noutput = cosyvoice.inference_zero_shot('æ”¶åˆ°å¥½å‹ä»è¿œæ–¹å¯„æ¥çš„ç”Ÿæ—¥ç¤¼ç‰©ï¼Œé‚£ä»½æ„å¤–çš„æƒŠå–œä¸æ·±æ·±çš„ç¥ç¦è®©æˆ‘å¿ƒä¸­å……æ»¡äº†ç”œèœœçš„å¿«ä¹ï¼Œç¬‘å®¹å¦‚èŠ±å„¿èˆ¬ç»½æ”¾ã€‚', 'è¿™æ˜¯ä¸€æ®µå‚è€ƒéŸ³é¢‘ï¼Œè¯·å½•åˆ¶æˆ‘çš„å£°éŸ³', prompt_speech_16k)\r\n\r\ntorchaudio.save('zero_shot.wav', output['tts_speech'], 22050)`\r\n\r\n@ZhihaoDU è¯·é—®æˆ‘è¿™ä¸ªè¯¥æ€ä¹ˆæ”¹å‘¢ï¼Ÿæˆ‘æƒ³æŒ‡å®šä¸­æ–‡ï¼Œè€Œä¸æ˜¯ç²¤è¯­"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-10T15:03:52Z",
        "body": "> `cosyvoice = CosyVoice('pretrained_models/CosyVoice-300M')\r\n> \r\n> prompt_speech_16k = load_wav('dzq_ref.wav', 16000)\r\n> \r\n> output = cosyvoice.inference_zero_shot('æ”¶åˆ°å¥½å‹ä»è¿œæ–¹å¯„æ¥çš„ç”Ÿæ—¥ç¤¼ç‰©ï¼Œé‚£ä»½æ„å¤–çš„æƒŠå–œä¸æ·±æ·±çš„ç¥ç¦è®©æˆ‘å¿ƒä¸­å……æ»¡äº†ç”œèœœçš„å¿«ä¹ï¼Œç¬‘å®¹å¦‚èŠ±å„¿èˆ¬ç»½æ”¾ã€‚', 'è¿™æ˜¯ä¸€æ®µå‚è€ƒéŸ³é¢‘ï¼Œè¯·å½•åˆ¶æˆ‘çš„å£°éŸ³', prompt_speech_16k)\r\n> \r\n> torchaudio.save('zero_shot.wav', output['tts_speech'], 22050)`\r\n> \r\n> @ZhihaoDU è¯·é—®æˆ‘è¿™ä¸ªè¯¥æ€ä¹ˆæ”¹å‘¢ï¼Ÿæˆ‘æƒ³æŒ‡å®šä¸­æ–‡ï¼Œè€Œä¸æ˜¯ç²¤è¯­\r\n\r\nuse <|zh|> for chinese, see readme"
      }
    ]
  },
  {
    "number": 9,
    "title": "dockerç‰ˆæœ¬é•œåƒå¯ä»¥æä¾›å…¬å¼€ä¸‹è½½çš„åœ°å€å—",
    "created_at": "2024-07-05T09:00:29Z",
    "closed_at": "2024-07-10T15:03:05Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/9",
    "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/9/comments",
    "author": "lonngxiang",
    "comments": [
      {
        "user": "aluminumbox",
        "created_at": "2024-07-05T10:43:37Z",
        "body": "not yet, we only provide dockerfile and you can build it yourself, because you may want to add your own code in server.py"
      },
      {
        "user": "DoiiarX",
        "created_at": "2024-09-23T12:38:04Z",
        "body": "å¥½æƒ³åæ§½å•Šã€‚è¿™dockerfileä¹Ÿå¤ªç³Ÿç³•äº†ã€‚æŒ‰æ•™ç¨‹æ¥éƒ½èµ°ä¸é€šã€‚åªèƒ½èµ°æœ¬åœ°å®‰è£…çš„è·¯ã€‚"
      }
    ]
  },
  {
    "number": 8,
    "title": "ç”¨é¢„ç½®è¯­éŸ³ç”Ÿæˆï¼ˆsftï¼‰inferenceä¼šæ¼å¥",
    "created_at": "2024-07-05T08:39:25Z",
    "closed_at": "2024-07-10T15:02:55Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/8",
    "body": "ç”¨é¢„ç½®è¯­éŸ³ç”Ÿæˆï¼ˆsftï¼‰inferenceä¼šæ¼å¥ï¼ŒéŸ³è‰²ï¼šä¸­æ–‡å¥³\r\nè¾“å…¥ï¼š\r\né‚£æœ‰å“ªäº›ç¾å‰§æ˜¯ä¸å¤ªé€‚åˆå­¦è‹±è¯­çš„å‘¢ï¼Ÿæˆ‘æ¥ç»™å¤§å®¶ä¸¾å‡ ä¸ªä¾‹å­å§ã€‚ç¬¬ä¸€ä¸ªã€Šç ´äº§å§å¦¹ã€‹ï¼Œæˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ€»æœ‰äººæ¨èè¿™ä¸€éƒ¨ï¼Œæˆ‘å…ˆå£°æ˜ä¸€ä¸‹ï¼Œæˆ‘çœŸçš„å¾ˆå–œæ¬¢å¾ˆå–œæ¬¢ç ´äº§å§å¦¹ï¼Œå®ƒçœŸçš„å¾ˆä¸‹é¥­ã€‚æˆ‘å¤§å­¦æœ‰ä¸€æ®µæ—¶é—´å°±æ˜¯å¤©å¤©å»é£Ÿå ‚æ‰“åŒ…åƒçš„ï¼Œç„¶åå›åˆ°å®¿èˆï¼Œæˆ‘å°±è¾¹çœ‹è¾¹åƒï¼Œç”šè‡³å¬åˆ°å¥¹é‚£ä¸ªç‰‡å¤´æ›²ï¼Œæˆ‘å°±ä¼šå¾ˆæœ‰é£Ÿæ¬²ï¼Œä½†æ˜¯æˆ‘çœŸçš„çœŸçš„æ²¡æœ‰åŠæ³•ç”¨å®ƒæ¥å­¦è‹±è¯­ã€‚**ä¸€ä¸ªæ˜¯è¯­é€Ÿå¤ªå¿«äº†**ï¼›ç¬¬äºŒå…¨æ˜¯å¼€è½¦çš„å°è¯ï¼Œä½ è¯´æ˜¯ç”Ÿæ´»ä¸­ã€è€ƒè¯•è¯•ä¸­å“ªå„¿ä¼šç”¨åˆ°ï¼Ÿæ‰€ä»¥æˆ‘è§‰å¾—ç ´äº§å§å¦¹ä¸‹é¥­å¿…å¤‡ï¼Œå­¦è‹±è¯­è¿˜æ˜¯ç®—äº†ã€‚\r\n\r\nå…¶ä¸­,  \"ä¸€ä¸ªæ˜¯è¯­é€Ÿå¤ªå¿«äº†\"æ²¡æœ‰åˆæˆç›´æ¥è¢«è·³è¿‡äº†",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/8/comments",
    "author": "zzu-xcy",
    "comments": [
      {
        "user": "ZhihaoDU",
        "created_at": "2024-07-05T09:15:47Z",
        "body": "å»ºè®®å¯ä»¥å°è¯•é€‚å½“æ‹†å¥ä¹‹åå†åˆæˆï¼Œæ¯”å¦‚è¿™ä¸€æ®µè¯æ‹†æˆä¸¤æ®µåˆ†åˆ«åˆæˆè¯•è¯•çœ‹"
      },
      {
        "user": "Liujingxiu23",
        "created_at": "2024-07-05T10:32:52Z",
        "body": "@ZhihaoDU è¯·æ•™ä¸‹ SFT(æ¯”å¦‚ä½¿ç”¨5å°æ—¶å•å‘éŸ³äººæ•°æ®)ï¼Œä¼šå¯¼è‡´é²æ£’æ€§ä¸‹é™ï¼Œæ¯”å¦‚ é‡å¤ã€æ’å…¥ã€æ›¿æ¢é”™è¯¯çš„å¢å¤šå—ï¼Ÿå¦‚æœä¸ä¼šï¼Œæ˜¯é€šè¿‡ä½•ç§æ–¹å¼è¿›è¡ŒSFTçš„å‘¢ã€‚æ¯”å¦‚è®¾ç½®å­¦ä¹ ç‡ã€batchsizeæœ‰ä»€ä¹ˆæŠ€å·§å—"
      },
      {
        "user": "Pydataman",
        "created_at": "2024-07-07T01:08:41Z",
        "body": "mark"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-10T15:02:55Z",
        "body": "> @ZhihaoDU è¯·æ•™ä¸‹ SFT(æ¯”å¦‚ä½¿ç”¨5å°æ—¶å•å‘éŸ³äººæ•°æ®)ï¼Œä¼šå¯¼è‡´é²æ£’æ€§ä¸‹é™ï¼Œæ¯”å¦‚ é‡å¤ã€æ’å…¥ã€æ›¿æ¢é”™è¯¯çš„å¢å¤šå—ï¼Ÿå¦‚æœä¸ä¼šï¼Œæ˜¯é€šè¿‡ä½•ç§æ–¹å¼è¿›è¡ŒSFTçš„å‘¢ã€‚æ¯”å¦‚è®¾ç½®å­¦ä¹ ç‡ã€batchsizeæœ‰ä»€ä¹ˆæŠ€å·§å—\r\n\r\ncheck example/libritts for sft training example, it will futher improve model performance on specific speaker"
      }
    ]
  },
  {
    "number": 7,
    "title": "ImportError: cannot import name 'Annotated' from 'pydantic.typing'",
    "created_at": "2024-07-05T08:38:19Z",
    "closed_at": "2024-07-05T08:58:43Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/7",
    "body": "example.py is copied from official example. \r\n\r\n2024-07-05 16:29:50,876 - modelscope - INFO - PyTorch version 2.0.1+cu118 Found.\r\n2024-07-05 16:29:50,876 - modelscope - INFO - Loading ast index from /root/.cache/modelscope/ast_indexer\r\n2024-07-05 16:29:52,012 - modelscope - INFO - Loading done! Current index file version is 1.15.0, with md5 51af4c199ce0493bf05f6e6a4c460b07 and a total number of 980 components indexed\r\ntransformer is not installed, please install it if you want to use related modules\r\nTraceback (most recent call last):\r\n  File \"example.py\", line 1, in <module>\r\n    from cosyvoice.cli.cosyvoice import CosyVoice\r\n  File \"/mnt/bigclass/project/cosyvoice/CosyVoice/cosyvoice/cli/cosyvoice.py\", line 18, in <module>\r\n    from cosyvoice.cli.frontend import CosyVoiceFrontEnd\r\n  File \"/mnt/bigclass/project/cosyvoice/CosyVoice/cosyvoice/cli/frontend.py\", line 23, in <module>\r\n    import inflect\r\n  File \"/mnt/bigclass/anaconda3/envs/cosyvoice/lib/python3.8/site-packages/inflect/__init__.py\", line 77, in <module>\r\n    from pydantic.typing import Annotated\r\nImportError: cannot import name 'Annotated' from 'pydantic.typing' (/mnt/bigclass/anaconda3/envs/cosyvoice/lib/python3.8/site-packages/pydantic/typing.py)\r\n\r\nI update pydantic.typing from 2.7.0 to 2.8.3, still ...\r\nNeed I add transformers to requirements.txt?",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/7/comments",
    "author": "neuxys",
    "comments": [
      {
        "user": "DarkLand-Chen",
        "created_at": "2024-07-05T08:48:30Z",
        "body": "File \"/mnt/bigclass/anaconda3/envs/cosyvoice/lib/python3.8/site-packages/inflect/init.py\", line 77  ä¿®æ”¹  from pydantic.typing import Annotated  æ”¹æˆ from typing_extensions import Annotated"
      },
      {
        "user": "neuxys",
        "created_at": "2024-07-05T08:57:48Z",
        "body": "> File \"/mnt/bigclass/anaconda3/envs/cosyvoice/lib/python3.8/site-packages/inflect/init.py\", line 77 ä¿®æ”¹ from pydantic.typing import Annotated æ”¹æˆ from typing_extensions import Annotated\r\n\r\nYou are my idol, problem solved."
      }
    ]
  },
  {
    "number": 4,
    "title": "å“ˆå“ˆå“ˆçš„å£°éŸ³åˆæˆä¸å‡ºæ¥",
    "created_at": "2024-07-05T06:18:13Z",
    "closed_at": "2024-07-10T15:00:45Z",
    "labels": [],
    "url": "https://github.com/FunAudioLLM/CosyVoice/issues/4",
    "body": "ç•¥æ˜¾ç”Ÿç¡¬",
    "comments_url": "https://api.github.com/repos/FunAudioLLM/CosyVoice/issues/4/comments",
    "author": "MonolithFoundation",
    "comments": [
      {
        "user": "ZhihaoDU",
        "created_at": "2024-07-05T07:12:14Z",
        "body": "è¯•è¯•â€å“ˆå“ˆâ€œä¸¤ä¸ªå­—ï¼Œä»¥åŠå¤šä¸ªä¸åŒçš„seedçœ‹çœ‹ã€‚å¦å¤–ç¬‘å£°ç­‰å¯Œè¯­è¨€æ¨èä½¿ç”¨instructæ¨¡å‹"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-07-05T07:53:46Z",
        "body": "éƒ½ä¸è¡Œ æ•ˆæœå¾ˆå·®\n\n\n\n---- å›å¤çš„åŸé‚®ä»¶ ----\n| å‘ä»¶äºº | Zhihao ***@***.***> |\n| æ—¥æœŸ | 2024å¹´07æœˆ05æ—¥ 15:12 |\n| æ”¶ä»¶äºº | ***@***.***> |\n| æŠ„é€è‡³ | ***@***.***>***@***.***> |\n| ä¸»é¢˜ | Re: [FunAudioLLM/CosyVoice] å“ˆå“ˆå“ˆçš„å£°éŸ³åˆæˆä¸å‡ºæ¥ (Issue #4) |\n\nè¯•è¯•â€å“ˆå“ˆâ€œä¸¤ä¸ªå­—ï¼Œä»¥åŠå¤šä¸ªä¸åŒçš„seedçœ‹çœ‹ã€‚å¦å¤–ç¬‘å£°ç­‰å¯Œè¯­è¨€æ¨èä½¿ç”¨instructæ¨¡å‹\n\nâ€”\nReply to this email directly, view it on GitHub, or unsubscribe.\nYou are receiving this because you authored the thread.Message ID: ***@***.***>"
      },
      {
        "user": "ZhihaoDU",
        "created_at": "2024-07-05T08:07:34Z",
        "body": "æˆ‘ç®€å•è¯•äº†ä¸€ä¸‹ï¼Œé€‰é¢„ç½®éŸ³è‰²ç”Ÿæˆã€ä¸­æ–‡å¥³ï¼Œè¿™å¥è¯æ•ˆæœè¿˜æ˜¯å¯ä»¥å‘€\r\n\r\nå“ˆå“ˆï¼Œé‚£çœŸæ˜¯å¤ªå¥½äº†ï¼Œå¾ˆé«˜å…´èƒ½å¤Ÿå¸®åŠ©æ‚¨çš„å­©å­å­¦ä¹ è‹±è¯­ã€‚\r\n\r\nä½ å†è¯•è¯•ï¼Ÿ\r\n"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-07-05T09:14:09Z",
        "body": "è¿˜æ˜¯æ¯”è¾ƒç”Ÿç¡¬ã€‚\r\n\r\nåœ¨è¯­æ°”è¯è¿™å—ï¼Œç›¸è¾ƒäºChatTTSè¿˜æ˜¯å·®è›®å¤šã€‚ä½†æ˜¯éŸ³è‰²æ›´å¥½ä¸€ç‚¹ã€‚è¯·é—®æœ‰è®¡åˆ’æ”¹è¿›ä¸€ä¸‹å—ï¼Ÿ\r\n\r\nè¿™é‡Œè¯´çš„ç¬‘æŒ‡çš„æ˜¯ç¬‘å£°ï¼Œä¸æ˜¯å¿µå“ˆå“ˆä¸¤ä¸ªå­—ï¼Œè¿™æ ·å¬èµ·æ¥å°±éå¸¸ç”Ÿç¡¬ï¼Œä¸çŸ¥é“CosyVoiceæ˜¯å¦æœ‰è€ƒè™‘åŠ ä¸€äº›ç±»ä¼¼äºç¬‘ã€å—¯ã€ç­‰çš„ä¸€äº›è¯­æ°”å£°\r\n\r\nå¦‚æœæ˜¯Instructæ¨¡å‹çš„è¯ï¼Œæ˜¯å¦èƒ½æä¾›ä¸€ä¸ªå®Œæ•´çš„å¼ºè°ƒæ¨¡ç‰ˆå‘¢ï¼Ÿ ç”¨instruct å“ˆå“ˆå“ˆä¹Ÿæ˜¯å¿µå­—ã€‚\r\n\r\næ­¤å¤–ï¼ŒInstructæˆ‘è®¾ç½®ä¸­æ–‡ç”·ï¼Œå‡ºæ¥çš„äº‹å¥³éŸ³"
      },
      {
        "user": "ZhihaoDU",
        "created_at": "2024-07-05T09:33:22Z",
        "body": "ä½¿ç”¨instructæ¨¡å‹æ˜¯è¿™æ ·è®¾ç½®çš„ï¼Œ\r\nå•ä¸ªç¬‘å£°ï¼šé‚£ä½å–œå‰§æ¼”å‘˜çœŸæœ‰æ‰ï¼Œ[laughter]ä¸€å¼€å£å°±è®©å…¨åœºè§‚ä¼—çˆ†ç¬‘ã€‚\r\nç¬‘ç€è¯´ï¼šä»–æçš„ä¸€ä¸ªæ¶ä½œå‰§ï¼Œè®©å¤§å®¶\\<laughter\\>å¿ä¿Šä¸ç¦\\</laughter\\>ã€‚"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-07-05T10:14:26Z",
        "body": "æœ‰æ›´å…¨çš„è¿™ç§è¯­æ°”é…ç½®å—ï¼Œå¯ä»¥åˆ—åœ¨readmeé‡Œé¢ï¼Œä¸ç„¶å¤§å®¶éƒ½ä¸çŸ¥é“å¦‚ä½•ç”¨\n\n\n\n---- å›å¤çš„åŸé‚®ä»¶ ----\n| å‘ä»¶äºº | Zhihao ***@***.***> |\n| æ—¥æœŸ | 2024å¹´07æœˆ05æ—¥ 17:33 |\n| æ”¶ä»¶äºº | ***@***.***> |\n| æŠ„é€è‡³ | ***@***.***>***@***.***> |\n| ä¸»é¢˜ | Re: [FunAudioLLM/CosyVoice] å“ˆå“ˆå“ˆçš„å£°éŸ³åˆæˆä¸å‡ºæ¥ (Issue #4) |\n\nä½¿ç”¨instructæ¨¡å‹æ˜¯è¿™æ ·è®¾ç½®çš„ï¼Œ\nå•ä¸ªç¬‘å£°ï¼šé‚£ä½å–œå‰§æ¼”å‘˜çœŸæœ‰æ‰ï¼Œ[laughter]ä¸€å¼€å£å°±è®©å…¨åœºè§‚ä¼—çˆ†ç¬‘ã€‚\nç¬‘ç€è¯´ï¼šä»–æçš„ä¸€ä¸ªæ¶ä½œå‰§ï¼Œè®©å¤§å®¶å¿ä¿Šä¸ç¦ã€‚\n\nâ€”\nReply to this email directly, view it on GitHub, or unsubscribe.\nYou are receiving this because you authored the thread.Message ID: ***@***.***>"
      },
      {
        "user": "aluminumbox",
        "created_at": "2024-07-05T10:45:17Z",
        "body": "> æœ‰æ›´å…¨çš„è¿™ç§è¯­æ°”é…ç½®å—ï¼Œå¯ä»¥åˆ—åœ¨readmeé‡Œé¢ï¼Œä¸ç„¶å¤§å®¶éƒ½ä¸çŸ¥é“å¦‚ä½•ç”¨\r\n> [â€¦](#)\r\n> ---- å›å¤çš„åŸé‚®ä»¶ ---- | å‘ä»¶äºº | Zhihao ***@***.***> | | æ—¥æœŸ | 2024å¹´07æœˆ05æ—¥ 17:33 | | æ”¶ä»¶äºº | ***@***.***> | | æŠ„é€è‡³ | ***@***.***>***@***.***> | | ä¸»é¢˜ | Re: [FunAudioLLM/CosyVoice] å“ˆå“ˆå“ˆçš„å£°éŸ³åˆæˆä¸å‡ºæ¥ (Issue #4) | ä½¿ç”¨instructæ¨¡å‹æ˜¯è¿™æ ·è®¾ç½®çš„ï¼Œ å•ä¸ªç¬‘å£°ï¼šé‚£ä½å–œå‰§æ¼”å‘˜çœŸæœ‰æ‰ï¼Œ[laughter]ä¸€å¼€å£å°±è®©å…¨åœºè§‚ä¼—çˆ†ç¬‘ã€‚ ç¬‘ç€è¯´ï¼šä»–æçš„ä¸€ä¸ªæ¶ä½œå‰§ï¼Œè®©å¤§å®¶å¿ä¿Šä¸ç¦ã€‚ â€” Reply to this email directly, view it on GitHub, or unsubscribe. You are receiving this because you authored the thread.Message ID: ***@***.***>\r\n\r\nåç»­æˆ‘ä»¬å†readmeé‡Œä¼šåˆ—å‡ºæ¥"
      },
      {
        "user": "lukecq1231",
        "created_at": "2024-07-08T02:14:27Z",
        "body": "ç›®å‰æ”¯æŒå››ç§ç»†ç²’åº¦æ ‡ç­¾ï¼Œåˆ†åˆ«æ˜¯æ’å…¥ç¬‘å£°ã€æ¢æ°”ã€è¾¹ç¬‘è¾¹è¯´ã€é‡è¯»ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„ç¤ºä¾‹ï¼š\r\n1. Well thatâ€™s kind of scary [laughter].\r\n2. I donâ€™t think I over eat yeah [breath] and um I do exercise regularly.\r\n3. Well that pretty much covers \\<laughter>the subject\\</laughter> well thanks for calling me.\r\n4. The teamâ€™s \\<strong>unity\\</strong> and \\<strong>resilience\\</strong> helped them win the championship.\r\n\r\n"
      },
      {
        "user": "lukecq1231",
        "created_at": "2024-07-08T02:23:05Z",
        "body": "> è¿˜æ˜¯æ¯”è¾ƒç”Ÿç¡¬ã€‚\r\n> \r\n> åœ¨è¯­æ°”è¯è¿™å—ï¼Œç›¸è¾ƒäºChatTTSè¿˜æ˜¯å·®è›®å¤šã€‚ä½†æ˜¯éŸ³è‰²æ›´å¥½ä¸€ç‚¹ã€‚è¯·é—®æœ‰è®¡åˆ’æ”¹è¿›ä¸€ä¸‹å—ï¼Ÿ\r\n> \r\n> è¿™é‡Œè¯´çš„ç¬‘æŒ‡çš„æ˜¯ç¬‘å£°ï¼Œä¸æ˜¯å¿µå“ˆå“ˆä¸¤ä¸ªå­—ï¼Œè¿™æ ·å¬èµ·æ¥å°±éå¸¸ç”Ÿç¡¬ï¼Œä¸çŸ¥é“CosyVoiceæ˜¯å¦æœ‰è€ƒè™‘åŠ ä¸€äº›ç±»ä¼¼äºç¬‘ã€å—¯ã€ç­‰çš„ä¸€äº›è¯­æ°”å£°\r\n> \r\n> å¦‚æœæ˜¯Instructæ¨¡å‹çš„è¯ï¼Œæ˜¯å¦èƒ½æä¾›ä¸€ä¸ªå®Œæ•´çš„å¼ºè°ƒæ¨¡ç‰ˆå‘¢ï¼Ÿ ç”¨instruct å“ˆå“ˆå“ˆä¹Ÿæ˜¯å¿µå­—ã€‚\r\n> \r\n> æ­¤å¤–ï¼ŒInstructæˆ‘è®¾ç½®ä¸­æ–‡ç”·ï¼Œå‡ºæ¥çš„äº‹å¥³éŸ³\r\n\r\nå› ä¸ºInstructæ¨¡å‹çš„LMæ¨¡å‹æ²¡æœ‰ä½¿ç”¨Speaker Embeddingï¼Œæ‰€ä»¥æ²¡æ³•é€šè¿‡åªç»™Speaker Embeddingçš„æ–¹å¼ç¡®å®šç‰¹å®šçš„éŸ³è‰²ï¼Œä»è€Œä¼šå¯¼è‡´å°±ç®—ç»™å®šçš„æ˜¯ä¸­æ–‡ç”·çš„Speaker Embeddingï¼Œä¹Ÿä¼šæœ‰ä¸€å®šæ¦‚ç‡å‡ºæ¥å¥³çš„å£°éŸ³ã€‚ å¦‚æœæƒ³è¦Instructçš„æ¨¡å‹å‡ºæ¯”è¾ƒç¨³å®šçš„éŸ³è‰²ï¼Œå»ºè®®ç”¨ç»­å†™çš„æ–¹å¼æ¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯LMæ¨¡å‹ç»™audio promptå’Œå¯¹åº”çš„text promptï¼ŒåŒæ—¶flow matchingæ¨¡å‹ä¹Ÿç»™audio promptã€‚"
      },
      {
        "user": "MonolithFoundation",
        "created_at": "2024-07-11T08:32:21Z",
        "body": "é‚£è¿™ä¸ªå°±å¾ˆè›‹ç–¼å•Šï¼Œ\r\n\r\né¦–å…ˆåªæœ‰instructæ”¯æŒè¿™ç§éŸ³è°ƒï¼Œç„¶ååˆä¸èƒ½æŒ‡å®šéŸ³è‰²ã€‚\r\n\r\næˆ‘éœ€è¦sfté‚£ä¸ªç”·éŸ³ï¼Œå°±é‚£ä¸ªéŸ³è‰²è¿˜å¯ä»¥ï¼Œåº”è¯¥æ€ä¹ˆåšåˆ°"
      }
    ]
  }
]