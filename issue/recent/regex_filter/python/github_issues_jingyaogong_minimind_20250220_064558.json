[
  {
    "number": 192,
    "title": "å¤§ä½¬ä»¬æˆ‘è¿˜æƒ³å­¦ä¸€ä¸‹æ¨¡å‹éƒ¨ç½²ï¼Œå¯ä»¥ç®€å•è®²è§£ä¸€ä¸‹å—",
    "created_at": "2025-02-19T05:09:08Z",
    "closed_at": "2025-02-19T05:42:09Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/192",
    "body": "æˆ‘æƒ³çŸ¥é“ï¼Œæ¯”å¦‚è¯´è‡ªå·±è®­ç»ƒå¥½minimindä¹‹åæ€æ ·æŠŠæ¨¡å‹éƒ¨ç½²åœ¨ollamaä¸Šï¼Œå¯ä»¥è®¿é—®ollamaæœåŠ¡å™¨æ¥è¿›è¡Œå¯¹è¯å‘¢ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/192/comments",
    "author": "akie585858",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-19T05:42:09Z",
        "body": "ä½ å¥½ï¼Œ\nä¸æ”¯æŒllama.cpp\nä¸æ”¯æŒollama\n\nthanks"
      }
    ]
  },
  {
    "number": 183,
    "title": "è¯·é—®ä¸ºä»€ä¹ˆä¿å­˜loraæƒé‡å‰åéœ€è¦è°ƒæ•´æ¨¡å‹ä¸ºevalï¼Œä¿å­˜å®Œæˆä»¥åå†è¿”å›trainå‘¢ï¼Ÿ",
    "created_at": "2025-02-15T11:32:12Z",
    "closed_at": "2025-02-18T07:37:20Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/183",
    "body": null,
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/183/comments",
    "author": "dhr1997",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-15T11:41:11Z",
        "body": "loraè®­ç»ƒæ—¶å€™ç¡®å®ä¸éœ€è¦evalæ¨¡å¼ï¼Œåªæ˜¯é¡ºæ‰‹çš„äº‹~å’Œå‰é¢ç»Ÿä¸€"
      }
    ]
  },
  {
    "number": 176,
    "title": "sft_512è®­ç»ƒæŠ¥é”™",
    "created_at": "2025-02-13T09:48:20Z",
    "closed_at": "2025-02-13T13:01:24Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/176",
    "body": "è®­ç»ƒåˆ°ç¬¬ä¸‰è½®çš„æ—¶å€™æŠ¥é”™\npython train_full_sft.py --epochs 3 --batch_size 128 --data_path ./dataset/sft_512.jsonl\n\ntorch                 2.6.0+cu126\ntorchaudio            2.6.0+cu126\ntorchtext             0.18.0\ntorchvision           0.21.0+cu126\ntornado               6.4.2\ntqdm                  4.67.1\ntransformers          4.44.0\n\n```\nEpoch:[2/3](42300/53129) loss:1.552 lr:0.000022369865 epoch_Time:48.0min:\nEpoch:[2/3](42400/53129) loss:1.579 lr:0.000022322955 epoch_Time:47.0min:\nTraceback (most recent call last):\n  File \"D:\\ai\\projects\\minimind-v2\\train_full_sft.py\", line 195, in <module>\n    train_epoch(epoch, wandb)\n  File \"D:\\ai\\projects\\minimind-v2\\train_full_sft.py\", line 56, in train_epoch\n    scaler.scale(loss).backward()\n  File \"C:\\Users\\anaconda3\\envs\\llm\\Lib\\site-packages\\torch\\_tensor.py\", line 626, in backward\n    torch.autograd.backward(\n  File \"C:\\Users\\anaconda3\\envs\\llm\\Lib\\site-packages\\torch\\autograd\\__init__.py\", line 347, in backward\n    _engine_run_backward(\n  File \"C:\\Users\\anaconda3\\envs\\llm\\Lib\\site-packages\\torch\\autograd\\graph.py\", line 823, in _engine_run_backward\n    return Variable._execution_engine.run_backward(  # Calls into the C++ engine to run the backward pass\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: isDifferentiableType(grad.scalar_type()) INTERNAL ASSERT FAILED at \"C:\\\\actions-runner\\\\_work\\\\pytorch\\\\pytorch\\\\pytorch\\\\torch\\\\csrc\\\\autograd\\\\engine.cpp\":982, please report a bug to PyTorch.\n```",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/176/comments",
    "author": "beston123",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-13T13:01:24Z",
        "body": "errorä¸é¡¹ç›®æ— å…³\n\nå»ºè®®æŒ‰ç…§æç¤º â€œplease report a bug to PyTorchâ€ï¼Œthanks"
      }
    ]
  },
  {
    "number": 175,
    "title": "è½¬ggufæŠ¥é”™",
    "created_at": "2025-02-13T09:28:48Z",
    "closed_at": "2025-02-13T13:02:43Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/175",
    "body": "python convert_hf_to_gguf.py ~/MiniMind2 --outtype auto --outfile MiniMind2\nINFO:hf-to-gguf:Loading model: MiniMind2\nERROR:hf-to-gguf:Model MiniMindLM is not supported\n\nè¯·é—®å¦‚ä½•æ­£ç¡®è½¬",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/175/comments",
    "author": "fuhao009",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-13T09:39:51Z",
        "body": "æ¨¡å‹ç»“æ„ä¸å…¼å®¹ä¸æ”¯æŒllama.cpp"
      },
      {
        "user": "fuhao009",
        "created_at": "2025-02-13T09:48:48Z",
        "body": "ç›®å‰å¦‚æœç”Ÿäº§æƒ³ç”¨æ¨èå“ªç§æ–¹å¼ï¼Ÿ"
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-02-13T13:02:43Z",
        "body": "ç›®å‰åªå…¼å®¹åŸç”Ÿtransformersæ–¹å¼ï¼Œä¸å…¼å®¹ç¬¬ä¸‰æ–¹æ¨ç†æ¡†æ¶"
      }
    ]
  },
  {
    "number": 171,
    "title": "é¢„è®­ç»ƒæŠ¥é”™",
    "created_at": "2025-02-13T07:25:32Z",
    "closed_at": "2025-02-14T11:59:32Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/171",
    "body": "/pretrain/minimind# python 1-pretrain.py   \n\nLLMæ€»å‚æ•°é‡ï¼š26.878 ç™¾ä¸‡\n../aten/src/ATen/native/cuda/Indexing.cu:1292: indexSelectLargeIndex: block: [420,0,0], thread: [96,0,0] Assertion srcIndex < srcSelectDimSize failed.\n../aten/src/ATen/native/cuda/Indexing.cu:1292: indexSelectLargeIndex: block: [420,0,0], thread: [97,0,0] Assertion srcIndex < srcSelectDimSize failed.\n../aten/src/ATen/native/cuda/Indexing.cu:1292: indexSelectLargeIndex: block: [420,0,0], thread: [98,0,0] Assertion srcIndex < srcSelectDimSize failed.\n../aten/src/ATen/native/cuda/Indexing.cu:1292: indexSelectLargeIndex: block: [420,0,0], thread: [99,0,0] Assertion srcIndex < srcSelectDimSize failed.\n../aten/src/ATen/native/cuda/Indexing.cu:1292: indexSelectLargeIndex: block: [420,0,0], thread: [100,0,0] Assertion srcIndex < srcSelectDimSize failed.\n../aten/src/ATen/native/cuda/Indexing.cu:1292: indexSelectLargeIndex: block: [420,0,0], thread: [101,0,0] Assertion srcIndex < srcSelectDimSize failed.\n../aten/src/ATen/native/cuda/Indexing.cu:1292: indexSelectLargeIndex: block: [420,0,0], thread: [102,0,0] Assertion srcIndex < srcSelectDimSize failed.\n...\n  File \"/root/anaconda3/envs/yx_pretrain/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\n  File \"/root/anaconda3/envs/yx_pretrain/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\n  File \"/root/anaconda3/envs/yx_pretrain/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\n  File \"/root/anaconda3/envs/yx_pretrain/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\n  File \"/root/anaconda3/envs/yx_pretrain/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\n  File \"/root/anaconda3/envs/yx_pretrain/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\n  File \"/root/anaconda3/envs/yx_pretrain/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\n  File \"/root/anaconda3/envs/yx_pretrain/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\n  File \"/root/anaconda3/envs/yx_pretrain/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\n  File \"/root/anaconda3/envs/yx_pretrain/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\n    return forward_call(*args, **kwargs)\n  File \"/data1/yx/pretrain/minimind/model/model.py\", line 31, in forward\n    output = self._norm(x.float()).type_as(x)\n  File \"/data1/yx/pretrain/minimind/model/model.py\", line 28, in _norm\n    return x * torch.rsqrt(x.pow(2).mean(-1, keepdim=True) + self.eps)\nRuntimeError: CUDA error: device-side assert triggered\nCUDA kernel errors might be asynchronously reported at some other API call, so the stacktrace below might be incorrect.\nFor debugging consider passing CUDA_LAUNCH_BLOCKING=1.\nCompile with TORCH_USE_CUDA_DSA to enable device-side assertions.",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/171/comments",
    "author": "shun-qi",
    "comments": [
      {
        "user": "shun-qi",
        "created_at": "2025-02-13T07:26:29Z",
        "body": "ä½ å¥½ä½œè€…ï¼Œè¯·é—®è¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ"
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-02-13T07:33:07Z",
        "body": "ä½ æ‹‰å–ä¸€ä¸‹æœ€æ–°çš„ä»£ç \n\ngit clone\n\nor\n\ngit pull origin master"
      },
      {
        "user": "shun-qi",
        "created_at": "2025-02-13T08:37:18Z",
        "body": "æœ€æ–°çš„åˆ†è¯å™¨è®­ç»ƒåå‘ç°ï¼š\ndecoderå’ŒåŸå§‹æ–‡æœ¬æ˜¯å¦ä¸€è‡´ï¼š False"
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-02-13T09:01:03Z",
        "body": "line 142\nresponse = tokenizer.decode(input_ids, skip_special_tokens=False)\n\næ”¹æˆfalse\n\nç¨åæ›´æ–°è¿™ä¸ªé—®é¢˜"
      },
      {
        "user": "shun-qi",
        "created_at": "2025-02-13T11:41:06Z",
        "body": "é¢„è®­ç»ƒåæ¨ç†ä¹±ç äº†\n\nğŸ‘¶: æˆè¯­\nğŸ¤–ï¸: ï¼šä¸­å›½å¤å…¸ä¸»ä¹‰\næˆè¯­ï¼šæˆè¯­\næ„æ€ï¼šé€šè¿‡å¯¹å¤ä»£æ–‡ç‰©çš„æç»˜ï¼Œä¼ è¾¾äº†ä¸­å›½å¤ä»£æ–‡åŒ–çš„é­…åŠ›ã€‚è¿™ä¸ªæˆè¯­å‡ºè‡ªä¸­å›½å¤ä»£æ–‡å­¦ä¸­çš„ç»å…¸åå¥ï¼šâ€œå·…å³°ä¹‹å¤œï¼Œä¸ƒä¸ƒå››äº”å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­\nå…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­\nå…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­\nå…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­å…­ï¿½ï¿½ï¿½ï¿½åå…­ï¿½ï¿½ï¿½ï¿½åœ¨å¤ä»£æ–‡å­¦\nä¸­çš„æˆä¹‹ï¿½ã€åå…­ï¿½ï¿½\næˆæ–‡è¨€ï¼šåå…­ï¿½ï¿½ï¿½ã€ï¿½ï¿½ï¿½ä¹‹è®¡\næˆæˆä¹‹æ–‡ä¸­çš„å¾ï¿½ï¼šï¿½æˆæ–‡å†™æˆï¼Œç»Ÿä¹‹ä¸­è´¤ï¼Œå’Œä»¥å…¶ä¸‰è¯´ä¸‰å›½ã€ä¸‰ã€å…­ï¿½ï¿½åï¿½ï¿½ä¹‹åçš„å†ä»£ä»£ä»£ï¼Œæ˜¯ã€Šå¤ä»£æ–‡çš„åï¼Œï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½äº”ï¿½ï¿½ï¼šï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½\nï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¼Œï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½æ¥ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¼ŒçŸ¥è¨€ï¼šä¸­å›½ä¸‰ï¿½ï¿½\næˆè¯­ä¹‹åçš„ä¹‹å®â€œå¤ä»£ä»£ç§°ï¼šæˆã€‚\næˆï¼šä¸€ï¿½\næˆï¼šå½“å…ƒä¸­å›½ä¹‹ï¿½ï¿½ä»¥ï¿½ä¹‹ç§°é“é—»é“ï¼šâ€œäºŒï¿½ä»¥ï¿½åé“"
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-02-13T12:37:53Z",
        "body": "æ— æ›´å¤šä¿¡æ¯ï¼Œæ— æ³•åˆ¤æ–­\n\n---\n\næš‚å®šé¢„è®­ç»ƒæµç¨‹æ­£ç¡®ä¸”lossæ­£ç¡®æ”¶æ•›çš„å‰æä¸‹ï¼Œå½’å› äºtokenizerçš„é—®é¢˜\n\nå»ºè®®æ‹‰å–æœ€æ–°ä»£ç ï¼Œæ ¹æ®å·²æœ‰ä¿¡æ¯è§‚å¯Ÿå»ºè®®\n\nline 28æ¢æˆ\n\ndata_path = '../dataset/pretrain_hq.jsonl'ï¼Œé‡æ–°è®­ç»ƒåˆ†è¯å™¨å†é‡æ–°å°è¯•é¢„è®­ç»ƒ"
      }
    ]
  },
  {
    "number": 169,
    "title": "æˆ‘çœ‹gitå›¾ç‰‡ä»‹ç»ä¸­æœ‰ä»£ç ç¼–å†™ï¼Œä»£ç è®­ç»ƒæ•°æ®é›†ç”¨çš„å“ªä¸ªå‘¢",
    "created_at": "2025-02-13T04:17:52Z",
    "closed_at": "2025-02-13T13:03:11Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/169",
    "body": "æˆ‘çœ‹gitå›¾ç‰‡ä»‹ç»ä¸­æœ‰ä»£ç ç¼–å†™ï¼Œä»£ç è®­ç»ƒæ•°æ®é›†ç”¨çš„å“ªä¸ªå‘¢ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œæœ›æŒ‡ç‚¹ï¼Œè°¢è°¢",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/169/comments",
    "author": "lins0621",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-13T04:44:36Z",
        "body": "æ²¡æœ‰ä¸“é—¨å¯¹codeæ•°æ®é›†åšè®­ç»ƒï¼Œå…¨é¢†åŸŸéƒ½æ··åˆåœ¨sft_xxx.jsonlé‡Œé¢äº†"
      }
    ]
  },
  {
    "number": 168,
    "title": "é¢„è®­ç»ƒæ•°æ®é›†é¢„å¤„ç†æ–¹æ³•",
    "created_at": "2025-02-12T08:56:46Z",
    "closed_at": "2025-02-13T13:03:11Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/168",
    "body": "æ‚¨å¥½ï¼\n\néå¸¸æ„Ÿè°¢æ‚¨æ„å»ºäº†è¿™ä¸ªéå¸¸ç®€æ´æ–¹ä¾¿çš„å¤§æ¨¡å‹é¢„è®­ç»ƒä»£ç åº“ã€‚æƒ³è¯·é—®ä¸€ä¸‹æ‚¨æ˜¯å¦å¯ä»¥releaseä¸€ä¸‹ç”Ÿæˆpretrain_hq.jsonlçš„é¢„å¤„ç†è„šæœ¬ï¼Ÿç›®å‰æä¾›çš„å°è£…ç‰ˆæœ¬çš„æ•°æ®é›†éƒ½éå¸¸æ–¹ä¾¿ï¼Œä¸è¿‡å¸Œæœ›å¯ä»¥è‡ªå·±æ‹“å±•å¤„ç†ä¸€äº›é¢å¤–çš„æ•°æ®ã€‚",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/168/comments",
    "author": "SimingYan",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-12T12:42:10Z",
        "body": "æ„Ÿè°¢è®¤å¯\n\norigin_pretrain_hqä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯æ™®é€šçš„æŠŠsftæ•°æ®çš„\"q+a\"æ‹¼èµ·æ¥\n\nè¿™é‡Œè´´ä¸€ä¸‹æŠŠorigin_pretrain_hqè½¬æ¢æˆç°åœ¨çš„pretrain_hq.jsonlçš„è„šæœ¬å°±å¥½ã€‚\n\nåˆå¹¶åŸæœ‰çŸ­æ–‡æœ¬åˆ°å°½å¯èƒ½å¡«æ»¡`max_len`çš„æ›´ç´§å‡‘çš„æ–°æ•°æ®é›†ï¼Œé¿å…æ•°æ®é•¿åº¦çš„ç¨€ç–ï¼Œå¢åŠ è®­ç»ƒæ•ˆç‡ï¼š\n\n```python\nimport json\n\n\ndef merge_short_texts(input_path, output_path, max_len=512):\n    with open(input_path, 'r', encoding='utf-8') as infile:\n        texts = []\n        for line in infile:\n            data = json.loads(line.strip())\n            text = data.get(\"text\", \"\")\n            texts.append((data, len(text)))\n\n        texts.sort(key=lambda x: x[1])\n        current_group = []\n        current_len = 0\n        group_count = 0\n\n        with open(output_path, 'w', encoding='utf-8') as outfile:\n            for data, text_len in texts:\n                bounded_text_len = text_len + len(\"<s>\") + len(\"</s>\")\n                if current_len + bounded_text_len > max_len:\n                    merged_text = \" \".join([f\"<s>{d['text']}</s>\" for d in current_group])\n                    merged_data = {\n                        \"text\": merged_text,\n                    }\n                    json.dump(merged_data, outfile, ensure_ascii=False)\n                    outfile.write('\\n')\n                    group_count += 1\n                    current_group = [data]\n                    current_len = bounded_text_len\n                else:\n                    current_group.append(data)\n                    current_len += bounded_text_len\n\n            if current_group:\n                merged_text = \" \".join([f\"<s>{d['text']}</s>\" for d in current_group])\n                merged_data = {\n                    \"text\": merged_text,\n                }\n                json.dump(merged_data, outfile, ensure_ascii=False)\n                outfile.write('\\n')\n                group_count += 1\n\n        print(f\"Merged {group_count} items into the final file.\")\n\n\ninput_file = './dataset/origin_pretrain_hq.jsonl'\noutput_file = './dataset/pretrain_hq.jsonl'\n\nmerge_short_texts(input_file, output_file)\n\n```"
      }
    ]
  },
  {
    "number": 165,
    "title": "dpo.init_model è·¯å¾„é—®é¢˜",
    "created_at": "2025-02-12T06:34:39Z",
    "closed_at": "2025-02-12T13:35:47Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/165",
    "body": "train_dpo.pyä¸­ï¼ŒåŸå§‹ä»£ç æ˜¯å¯¹è’¸é¦æ¨¡å‹åœ¨åšrlhfï¼Œå¦‚æœå¯¹sftæ¨¡å‹åšdpoï¼Œéœ€è¦ä¿®æ”¹ckpçš„è·¯å¾„ï¼Ÿ\n`\ndef init_model(lm_config):\n    tokenizer = AutoTokenizer.from_pretrained('./model/minimind_tokenizer')\n    model = MiniMindLM(lm_config)\n    moe_path = '_moe' if lm_config.use_moe else ''\n    ckp = f'./out/full_dist_{lm_config.dim}{moe_path}.pth'\n\n`",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/165/comments",
    "author": "Ming-Zhou0201",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-12T06:57:29Z",
        "body": "æ˜¯çš„ä¿®æ”¹distä¸ºsftï¼Œè¿™ä¸ªå¿˜è®°ä¿®æ”¹äº†ï¼Œä»Šæ™šupdateä¸€ä¸‹ï¼Œthanks"
      }
    ]
  },
  {
    "number": 158,
    "title": "Is it possible to train for a code model?",
    "created_at": "2025-02-10T03:18:25Z",
    "closed_at": "2025-02-10T09:15:12Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/158",
    "body": "I am glad to do some support on code related traning data.",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/158/comments",
    "author": "FFengIll",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-10T09:15:12Z",
        "body": "This is more of a data collection task rather than the minimal implementation needed for the focus. There are already many code datasets available to enhance performance in the post-training phase.\n\nI am currently unable to cover every niche area due to limited time and energy. Feel free to reach out for any other questions, and thanks."
      }
    ]
  },
  {
    "number": 157,
    "title": "å‚æ•°é‡å¤§çš„æ¨¡å‹ä¼šçˆ†æ˜¾å­˜å—ï¼Ÿæœ‰å¿…è¦ç”¨megatronå—ï¼Ÿ",
    "created_at": "2025-02-09T13:33:57Z",
    "closed_at": "2025-02-10T09:00:29Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/157",
    "body": "æƒ³é—®ä¸‹ï¼Œè¿™ä¸ªé¡¹ç›®æ”¯æŒå¤§ç‚¹æ¨¡å‹çš„è®­ç»ƒå—ï¼Œæ¯”å¦‚7bæˆ–è€…åå‡ bï¼Œä¼šä¸ä¼šçˆ†æ˜¾å­˜ ï¼Ÿ ",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/157/comments",
    "author": "yankuo111",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-10T09:00:29Z",
        "body": "æ”¯æŒï¼›ä¼šçˆ†ï¼›æœ‰å¿…è¦ï¼›\n\nä½†æ˜¯è¶…è¿‡1Bçš„æ¨¡å‹å°±æ²¡æœ‰å¿…è¦å‚è€ƒè¿™ä¸ªé¡¹ç›®äº†ï¼Œè¿™ä¸ªé¡¹ç›®åªè´Ÿè´£å®ŒæˆLLMçš„æœ€å°å®ç°ï¼Œä¸åšAI Infraå’Œé«˜æ€§èƒ½è®­ç»ƒæ¡†æ¶æ‹“å±•ã€‚\n\nå…¶ä»–é—®é¢˜æ¬¢è¿ç»§ç»­äº¤æµï¼Œthanks"
      }
    ]
  },
  {
    "number": 156,
    "title": "å…³äºâ€œâ€æ›´é«˜æ•ˆçš„kvcacheâ€œâ€çš„ç–‘é—®",
    "created_at": "2025-02-08T15:15:34Z",
    "closed_at": "2025-02-10T08:43:52Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/156",
    "body": "æˆ‘çœ‹ä»£ç ä¸­å…¶å®åªä¿ç•™äº†xkå’Œxvã€‚ä½†æ˜¯æ¯æ¬¡åœ¨generateçš„æ—¶å€™ï¼Œåªä¼ é€’è¿›å»äº†æœ€åä¸€ä¸ªtokenã€‚æ˜¯ä¸æ˜¯å°‘äº†ç‚¹ä»€ä¹ˆï¼Œåœ¨æˆ‘çš„ç†è§£å½“ä¸­ï¼Œç¼“å­˜ä¸­åº”è¯¥æ˜¯å‰é¢æ‰€æœ‰tokençš„QKTå’ŒVã€‚ä½†æ˜¯é‡Œé¢åªä¿ç•™äº†xkå’Œxvã€‚æ¢å¥è¯è¯´ï¼Œæ˜¯ä¸æ˜¯å‰é¢tokençš„qæ²¡æœ‰å‚ä¸åˆ°æ³¨æ„åŠ›çš„è®¡ç®—é‡Œé¢ã€‚è¿™ä¸ªå‰é¢tokençš„qæ—¢æ²¡æœ‰ç¼“å­˜ï¼Œä¹Ÿæ²¡æœ‰æ·»åŠ åˆ°è¾“å…¥é‡Œé¢ã€‚\n\nè¿˜æœ‰å¦ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆæˆ‘å•æ­¥è°ƒå¼çš„æ—¶å€™ï¼Œgenerateè¿™ä¸ªæ–¹æ³•è¿›ä¸å»å‘¢ï¼Ÿæœ‰é‡åˆ°è¿‡ç±»ä¼¼çš„æƒ…å†µå—ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/156/comments",
    "author": "dhr1997",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-09T05:25:45Z",
        "body": "ç¼“å­˜ä¸­åº”è¯¥æ˜¯å‰é¢æ‰€æœ‰tokençš„QKTå’ŒV\nä¸æ˜¯çš„ï¼Œcacheä¸­ä¿å­˜kå’Œvå³å¯\n\næ¨ç†åˆ°ç¬¬nä¸ªåºåˆ—çš„æ—¶å€™\n\n- **Q (Query)**: å½¢çŠ¶ä¸º `(1, dim)`\n- **K (Key)**: å½¢çŠ¶ä¸º `(n, dim)`\n- **V (Value)**: å½¢çŠ¶ä¸º `(n, dim)`\n\n`Q` ä¼šä¸ `K^T` è¿›è¡Œç‚¹ç§¯æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ªå½¢çŠ¶ä¸º `attn=(1, n)` çš„çŸ©é˜µï¼ˆå¤æ‚åº¦o(n*dim)ï¼‰\n\næ¥ç€ï¼Œå½’ä¸€åŒ–åçš„attnåˆ†æ•°ä¸ `V=(n, dim)` ç›¸ä¹˜ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå½¢çŠ¶ä¸º `(1, dim)` çš„è¾“å‡ºå‘é‡ã€‚ï¼ˆå¤æ‚åº¦o(n*dim)ï¼‰\n\nå‰é¢çš„ `Q` æ˜¯ä¸ä¼šè¢«ç”¨åˆ°çš„ã€‚\n\n---\n\næ²¡æœ‰é‡åˆ°è¿‡ï¼Œä½ æ˜¯å¦åœ¨ä»€ä¹ˆå­çº¿ç¨‹ä¸­debugï¼Œæˆ–è€…æ‰¾é”™äº†å‡½æ•°å‘¢"
      },
      {
        "user": "David-19940718",
        "created_at": "2025-02-11T06:13:47Z",
        "body": "> æˆ‘çœ‹ä»£ç ä¸­å…¶å®åªä¿ç•™äº†xkå’Œxvã€‚ä½†æ˜¯æ¯æ¬¡åœ¨generateçš„æ—¶å€™ï¼Œåªä¼ é€’è¿›å»äº†æœ€åä¸€ä¸ªtokenã€‚æ˜¯ä¸æ˜¯å°‘äº†ç‚¹ä»€ä¹ˆï¼Œåœ¨æˆ‘çš„ç†è§£å½“ä¸­ï¼Œç¼“å­˜ä¸­åº”è¯¥æ˜¯å‰é¢æ‰€æœ‰tokençš„QKTå’ŒVã€‚ä½†æ˜¯é‡Œé¢åªä¿ç•™äº†xkå’Œxvã€‚æ¢å¥è¯è¯´ï¼Œæ˜¯ä¸æ˜¯å‰é¢tokençš„qæ²¡æœ‰å‚ä¸åˆ°æ³¨æ„åŠ›çš„è®¡ç®—é‡Œé¢ã€‚è¿™ä¸ªå‰é¢tokençš„qæ—¢æ²¡æœ‰ç¼“å­˜ï¼Œä¹Ÿæ²¡æœ‰æ·»åŠ åˆ°è¾“å…¥é‡Œé¢ã€‚\n> \n> è¿˜æœ‰å¦ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆæˆ‘å•æ­¥è°ƒå¼çš„æ—¶å€™ï¼Œgenerateè¿™ä¸ªæ–¹æ³•è¿›ä¸å»å‘¢ï¼Ÿæœ‰é‡åˆ°è¿‡ç±»ä¼¼çš„æƒ…å†µå—ï¼Ÿ\n\nä½ çŒœçŒœä¸ºä»€ä¹ˆå« `kvcache`? ğŸ˜„ "
      }
    ]
  },
  {
    "number": 141,
    "title": "dpoå¼ºåŒ–å­¦ä¹ æŠ¥é”™'generator' object has no attribute 'generate'",
    "created_at": "2025-02-06T08:08:48Z",
    "closed_at": "2025-02-10T08:40:33Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/141",
    "body": "å…·ä½“æŠ¥é”™å†…å®¹ï¼š\n```python\nTraceback (most recent call last):\n  File \"/root/train_about/llm_from_zero/my_minimind/5-dpo-train.py\", line 74, in <module>\n    dpo_trainer.train()\n  File \"/root/miniconda3/envs/vllm/lib/python3.12/site-packages/transformers/trainer.py\", line 2171, in train\n    return inner_training_loop(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/miniconda3/envs/vllm/lib/python3.12/site-packages/transformers/trainer.py\", line 2480, in _inner_training_loop\n    batch_samples, num_items_in_batch = self.get_batch_samples(epoch_iterator, num_batches)\n                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/miniconda3/envs/vllm/lib/python3.12/site-packages/trl/trainer/dpo_trainer.py\", line 1508, in get_batch_samples\n    policy_output = model.generate(\n                    ^^^^^^^^^^^^^^\nAttributeError: 'generator' object has no attribute 'generate'\n```\n\næŸ¥çœ‹æ¨¡å‹å®šä¹‰ä¸­ï¼Œgenerateæ–¹æ³•ï¼Œæ˜¯yieldå‡ºå»ç»“æœï¼ŒæŠŠyieldä¿®æ”¹æˆreturnåè¿˜æ˜¯ä¼šæœ‰è¿™ä¸ªé”™è¯¯ï¼ŒæŸ¥çœ‹huggingfaceä¸­å¼€æºçš„ä»£ç ï¼Œé‡Œé¢çš„modelå®šä¹‰ï¼Œgenerateæ–¹æ³•ä¸­ä¹Ÿæ˜¯yieldå‡ºå»ï¼Œåº”è¯¥ä¸æ˜¯è¿™ä¸ªé—®é¢˜çš„å¼‚å¸¸ã€‚\n\nç›®å‰æ˜¯ç”¨çš„åŒ…ç‰ˆæœ¬ï¼š\n```text\ntorch==2.4.0\ntransformers==4.48.2\ntrl=0.11.3\n\n```\n\næš‚æ—¶è¿˜æ²¡æ‰¾åˆ°å…·ä½“é—®é¢˜",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/141/comments",
    "author": "ykallan",
    "comments": [
      {
        "user": "ykallan",
        "created_at": "2025-02-06T08:13:46Z",
        "body": "ç°åœ¨å°è¯•ä¸€ä¸‹æ˜¯ç”¨huggingfaceå¼€æºçš„æ¨¡å‹æƒé‡æ¥è¿›è¡Œdpoï¼Œçœ‹çœ‹èƒ½å¦è·‘é€š"
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-02-06T08:22:03Z",
        "body": "transformers==4.44.0\n\né™ä¸€ä¸‹ç‰ˆæœ¬"
      },
      {
        "user": "ykallan",
        "created_at": "2025-02-06T08:37:43Z",
        "body": "> transformers==4.44.0\n> \n> é™ä¸€ä¸‹ç‰ˆæœ¬\n\né™ä½äº†ç‰ˆæœ¬åˆ°4.44.0ï¼Œä½†æ˜¯æˆ‘å‰é¢è®­ç»ƒçš„tokenizeræƒé‡å°±ä¸èƒ½åŠ è½½äº†ï¼Œè¿™ä¸ªå°±ä¸å¤ªç†è§£ï¼Œæˆ‘è¯•è¯•é‡æ–°è®­ç»ƒä¸€ä¸‹åˆ†è¯å™¨æƒé‡å†çœ‹çœ‹ï¼Œè°¢è°¢up"
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-02-06T08:57:44Z",
        "body": "æš‚æ—¶ä¸ç”¨é‡æ–°è®­ç»ƒï¼Œå¦åˆ™ä½ å‰é¢å‰åŠŸå°½å¼ƒäº†\n\nç°åœ¨çš„erroræ˜¯ä»€ä¹ˆå‘¢"
      },
      {
        "user": "ykallan",
        "created_at": "2025-02-06T09:03:17Z",
        "body": "```text\nTraceback (most recent call last):\n  File \"/root/train_about/llm_from_zero/my_minimind/5-dpo-train.py\", line 49, in <module>\n    model, tokenizer = init_model()\n                       ^^^^^^^^^^^^\n  File \"/root/train_about/llm_from_zero/my_minimind/5-dpo-train.py\", line 23, in init_model\n    tokenizer = AutoTokenizer.from_pretrained(my_tokenizer_pretrained)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/miniconda3/envs/vllm/lib/python3.12/site-packages/transformers/models/auto/tokenization_auto.py\", line 897, in from_pretrained\n    return tokenizer_class.from_pretrained(pretrained_model_name_or_path, *inputs, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/miniconda3/envs/vllm/lib/python3.12/site-packages/transformers/tokenization_utils_base.py\", line 2271, in from_pretrained\n    return cls._from_pretrained(\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/miniconda3/envs/vllm/lib/python3.12/site-packages/transformers/tokenization_utils_base.py\", line 2505, in _from_pretrained\n    tokenizer = cls(*init_inputs, **init_kwargs)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/miniconda3/envs/vllm/lib/python3.12/site-packages/transformers/tokenization_utils_fast.py\", line 115, in __init__\n    fast_tokenizer = TokenizerFast.from_file(fast_tokenizer_file)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nException: data did not match any variant of untagged enum ModelWrapper at line 31025 column 3\n```"
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-02-10T08:40:33Z",
        "body": "å°è¯•æ–°çš„pytorchåŸç”Ÿå¼ºåŒ–å­¦ä¹ ä»£ç ï¼Œä»“åº“å·²å¤§æ›´æ–°\n\nå…ˆå…³é—­äº†ï½"
      }
    ]
  },
  {
    "number": 133,
    "title": "è€ƒè™‘ä½¿ç”¨MLAå—",
    "created_at": "2025-02-01T19:01:50Z",
    "closed_at": "2025-02-10T09:11:31Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/133",
    "body": null,
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/133/comments",
    "author": "GlancerZ",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-10T09:11:31Z",
        "body": "æ— è®¡åˆ’ï¼Œé¡¹ç›®èšç„¦äºæœ€å°å®ç°ï¼Œæ— æ³•å…¼é¡¾å®ç°æ¯å¤©éƒ½åœ¨æ›´æ–°çš„ã€Œæ‰€æœ‰ã€LLMå˜åŒ–\n\nMLAå¤æ‚å®ç°æ¢å–çš„å¾®å¼±æ¨ç†é€Ÿåº¦æå‡åœ¨å°æ¨¡å‹ä¸­æ€§ä»·æ¯”å¤ªä½\n\nå½“å‡ºç°æ›´ã€Œç‚¸è£‚ã€æ›´æœ‰æ„ä¹‰çš„ç»“æ„æˆ–è€…æŠ€æœ¯`minimind`éƒ½ä¼šå°è¯•å¤ç°\n\nå…¶ä»–é—®é¢˜æ¬¢è¿ç»§ç»­äº¤æµï¼Œthanks"
      }
    ]
  },
  {
    "number": 131,
    "title": "è€ƒè™‘åŠ å…¥è’™ç‰¹å¡æ´›æœç´¢å—",
    "created_at": "2025-01-30T03:40:41Z",
    "closed_at": "2025-02-10T08:54:07Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/131",
    "body": null,
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/131/comments",
    "author": "Gera001",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-10T08:54:08Z",
        "body": "æ— ï½\n\néšç€DeepSeek-R1çš„çˆ†ç«\n\näº‹å®è¯æ˜ï¼Œç°å­˜çš„Reasoning-LLMå¹¶æ²¡æœ‰é‡‡ç”¨MCTS\n\nè¿™æ˜¯ä¸€ä¸ªåŸºäºé—­æºo1å‡ ä¹ã€Œé”™è¯¯ä¸”å¤æ‚ã€çš„çŒœæµ‹æ–¹å‘"
      }
    ]
  },
  {
    "number": 130,
    "title": "why use BOS and EOS token and not only the EOS?",
    "created_at": "2025-01-28T10:12:04Z",
    "closed_at": "2025-02-10T08:43:50Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/130",
    "body": "In the `model/dataset.py`\n\nline 29\n\n` text = f\"{self.tokenizer.bos_token}{str(sample['text'])}{self.tokenizer.eos_token}\"` \n\nyou prepend bos token and then append the eos token to the end of text and pad the tokens if shorter than the context length. Is there any reason for doing that? \n\nand why don't you just append the EOS token to the end of the text and fill it with the next sequence rather than padding it?",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/130/comments",
    "author": "CohleM",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-01-28T12:24:54Z",
        "body": "1. In pre-training, there are practices that use both [BOS] and [EOS] tokens to define text boundaries, as well as approaches that omit [BOS] and only use text + [EOS]. We chose the latter, as there is no strict rule. On the other hand, in the instruction fine-tuning template for chat, dialogue roles start with [BOS] + user/assistant/system. Therefore, we maintained the consistency of starting with [BOS] during pre-training.\n\n2. The padding after [EOS] is masked to avoid participating in loss calculation, preventing the model from learning invalid information. If unrelated segments are dynamically concatenated, it introduces complexity and may create false contextual associations.\n\n3. Independent sample processing (non-concatenation) aligns better with real-world inference scenarios (e.g., single-document generation), avoiding cross-text semantic contamination."
      },
      {
        "user": "CohleM",
        "created_at": "2025-01-28T12:35:50Z",
        "body": "Thank you for the response. My concern was with the addition of pad tokens, as it simply wastes the extra computation which could have been used if the sequences were simply concatenated. \n\n\nFor\n\n> 3. Independent sample processing (non-concatenation) aligns better with real-world inference scenarios (e.g., single-document generation), avoiding cross-text semantic contamination.\n\ndo you have any data that backs this claim? I'm currently exploring which process (concatenation or non-concatenation) better suites pre-training and would really appreciate your help.\n"
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-01-28T13:38:07Z",
        "body": "First, the consensus is that the computational waste caused by padding is unavoidable, with only the degree of severity varying.  \nIf it is [Document A content...<EOS>][Document B content...<EOS>][Document C content...<EOS>] âœ processed as a single sample during training.\n\nI believe that if the input sequence contains unrelated texts (e.g., news + code), the model will simultaneously learn false associations between them (e.g., \"stock rise\" followed by `print(\"Hello\")`), leading to confusion in distribution modeling. However, since EOS serves as a delimiter, it allows the model to infer explicit boundaries.\n\nGPT-3's *\"Language Models are Few-Shot Learners\"* mentions that using a reasonable context window and clear separators indeed helps the model better understand document boundaries and reduce perplexity. *\"Scaling Laws for Neural Language Models\"* points out that noise or irrelevant information within long contexts may increase perplexity, so it is more beneficial to avoid concatenating documents during training and keep each sample independent.\n\nAlthough EOS exists, it still inevitably slightly increases the model's perplexity (only a matter of degree compared to independent data). However, I have yet to find objective data supporting this view, as all papers only provide subjective evaluations.\n\nNevertheless, compared to the increase in training efficiency, the slight cost is, in my opinion, entirely acceptable."
      }
    ]
  },
  {
    "number": 128,
    "title": "æ‚¨å¥½ï¼Œæˆ‘æƒ³äº†è§£ä¸‹Seq-Monkeyé€šç”¨æ–‡æœ¬æ•°æ®é›†çš„æ„å»º",
    "created_at": "2025-01-27T19:03:38Z",
    "closed_at": "2025-02-10T08:49:42Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/128",
    "body": "Readmeä¸­æåˆ°Seq-Monkeyé€šç”¨æ–‡æœ¬æ•°æ®é›†æ˜¯ç”±å¤šç§å…¬å¼€æ¥æºçš„æ•°æ®ï¼ˆå¦‚ç½‘é¡µã€ç™¾ç§‘ã€åšå®¢ã€å¼€æºä»£ç ã€ä¹¦ç±ç­‰ï¼‰æ±‡æ€»æ¸…æ´—è€Œæˆã€‚æ•´ç†æˆç»Ÿä¸€çš„JSONLæ ¼å¼ï¼Œå¹¶ç»è¿‡äº†ä¸¥æ ¼çš„ç­›é€‰å’Œå»é‡ï¼Œç¡®ä¿æ•°æ®çš„å…¨é¢æ€§ã€è§„æ¨¡ã€å¯ä¿¡æ€§å’Œé«˜è´¨é‡ã€‚\né—®é¢˜ï¼šæˆ‘æƒ³å’¨è¯¢çš„æ˜¯è¿™é‡Œæ•°æ®çš„ç­›é€‰å’Œå»é‡ç”¨çš„æ˜¯ä»€ä¹ˆæ–¹å¼ï¼Ÿèƒ½ç»™ç¬”è®°å’Œä»£ç å­¦ä¹ ä¸€ä¸‹å—",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/128/comments",
    "author": "pengfan7758258",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-10T08:49:42Z",
        "body": "â€œå¹¶ç»è¿‡äº†ä¸¥æ ¼çš„ç­›é€‰å’Œå»é‡ï¼Œç¡®ä¿æ•°æ®çš„å…¨é¢æ€§ã€è§„æ¨¡ã€å¯ä¿¡æ€§å’Œé«˜è´¨é‡ã€‚â€\n\næ­¤è¯æ‘˜è‡ªseq-monkeyå®˜æ–¹è¯´æ˜ï¼Œä¸æ˜¯æˆ‘è¯´çš„ğŸ˜„\n\næ•°æ®ç­›é€‰ä¸æ˜¯æœ¬é¡¹ç›®çš„ä¸»è¦å†…å®¹ï¼ŒæŠ±æ­‰æ— æ³•ç»™å‡ºæ›´å¤šæ¡ˆä¾‹\n\nå¦‚æœ‰éœ€è¦å¯ä»¥åé¢ç»§ç»­è®¨è®ºï¼Œthanks\n"
      }
    ]
  },
  {
    "number": 127,
    "title": "mac book pro m1èƒ½ç”¨å—",
    "created_at": "2025-01-26T09:38:11Z",
    "closed_at": "2025-02-10T09:12:03Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/127",
    "body": "mac book pro m1èƒ½ç”¨å—",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/127/comments",
    "author": "skyrain888",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-01-27T16:00:08Z",
        "body": "å¯ä»¥å“¦ï¼Œè®­ç»ƒçš„è¯ä¼šæ¯”è¾ƒè€—æ—¶"
      }
    ]
  },
  {
    "number": 125,
    "title": "è€ƒè™‘åŠ ä¸€ä¸ªReasoningæ¨¡å‹ä¹ˆï¼Ÿ",
    "created_at": "2025-01-24T08:47:54Z",
    "closed_at": "2025-02-10T08:47:27Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/125",
    "body": "è’¸é¦ä¸€ä¸‹Deepseekçš„R1",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/125/comments",
    "author": "kexul",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-10T08:47:27Z",
        "body": "updated"
      }
    ]
  },
  {
    "number": 122,
    "title": "å¦‚ä½•è®­ç»ƒä¸€ä¸ªå‚ç›´é¢†åŸŸçš„æ¨¡å‹",
    "created_at": "2025-01-22T22:43:41Z",
    "closed_at": "2025-02-10T08:47:52Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/122",
    "body": "æ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ªæ•°æ®é›†ï¼Œä½¿ç”¨è‡ªç„¶è¯­è¨€æè¿°æ•°æ®ç»“æ„ï¼Œæ¨¡å‹çš„ä»»åŠ¡æ˜¯è¿˜åŸå‡ºæ•°æ®ç»“æ„ã€‚\næ˜¯å¦éœ€è¦ä»å¤´æ„å»ºtokenizerå’Œé¢„è®­ç»ƒæ•°æ®é›†å‘¢ï¼Œä»¥åŠtokenizerå’Œé¢„è®­ç»ƒæ•°æ®é›†æ˜¯å¦è¦å®Œå…¨åŸºäºæˆ‘çš„æ•°æ®é›†æ„å»ºå‘¢ï¼Œæœ›è§£æƒ‘ã€‚",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/122/comments",
    "author": "lyw02",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-01-23T01:59:34Z",
        "body": "`tokenizer` åœ¨ä»»æ„æ•°æ®é›†ä¸­éƒ½ä¸éœ€è¦é‡æ–°æ„å»º\n\n`minimind2` å°†ä¼šç»™å‡ºæ–°çš„æ•°æ®é›†æ ¼å¼ï¼Œå¯ä»¥ç”¨äºæ„å»ºè‡ªå·±çš„å‚ç›´ä»»åŠ¡\n\næœªæ¥å‡ å¤©å¾ˆå¿«å‘å¸ƒ"
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-02-10T08:47:52Z",
        "body": "updated\n\n> `tokenizer` åœ¨ä»»æ„æ•°æ®é›†ä¸­éƒ½ä¸éœ€è¦é‡æ–°æ„å»º\n> \n> `minimind2` å°†ä¼šç»™å‡ºæ–°çš„æ•°æ®é›†æ ¼å¼ï¼Œå¯ä»¥ç”¨äºæ„å»ºè‡ªå·±çš„å‚ç›´ä»»åŠ¡\n> \n> æœªæ¥å‡ å¤©å¾ˆå¿«å‘å¸ƒ\n\n"
      }
    ]
  },
  {
    "number": 120,
    "title": "Is it possible to update the model to DeepSeek-V3 architecture?",
    "created_at": "2025-01-21T04:48:28Z",
    "closed_at": "2025-02-10T08:46:58Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/120",
    "body": "Just wondering if it id possible to update the model to DeepSeek-V3 architecture?\n\nIt claimed to be more computational efficient.",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/120/comments",
    "author": "mw66",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-02-10T08:46:58Z",
        "body": "Sorry, I don't have a schedule. Minimind is a minimal implementation of streamlined LLM and cannot include 100% of the world's content"
      }
    ]
  },
  {
    "number": 119,
    "title": "è¿™ä¸ªåªèƒ½è®­ç»ƒä¸­æ–‡Modelå—ï¼Œè‹±æ–‡modelå¯ä»¥è®­ç»ƒå—ï¼Œæ±‚å¤§ä½¬è®²è§£",
    "created_at": "2025-01-20T14:47:25Z",
    "closed_at": "2025-02-10T08:43:49Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/119",
    "body": null,
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/119/comments",
    "author": "quiteqiang",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-01-23T01:58:05Z",
        "body": "å¯ä»¥çš„å“¦ï¼Œæœ‰å¯¹åº”çš„æ•°æ®é›†å³å¯\n`minimind2` æ”¯æŒè‹±æ–‡ï¼ˆä½†èƒ½åŠ›è¾ƒä¸­æ–‡å¾ˆå¼±ï¼‰ï¼Œä¼šåŒæ­¥ç»™å‡ºè‹±æ–‡ç‰ˆæœ¬æ•°æ®é›†\næœªæ¥å‡ å¤©å³å°†æ›´æ–°"
      }
    ]
  },
  {
    "number": 118,
    "title": "è®­ç»ƒæ—¶,è¾“å…¥çš„tokenä¼šè¡¥å…¨åˆ°æœ€å¤§é•¿åº¦.é‚£æ˜¯ä¸æ˜¯æ„å‘³ç€attentionè®¡ç®—æ—¶,æ˜¯æŒ‰ç…§æ»¡tokençš„æ—¶é—´å¤æ‚åº¦è®¡ç®—çš„",
    "created_at": "2025-01-20T08:55:04Z",
    "closed_at": "2025-02-10T08:43:49Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/118",
    "body": "æ¨ç†æ—¶,ä¸éœ€è¦è¡¥å…¨,æ‰€ä»¥è®¡ç®—æ—¶é—´ä¸è¾“å…¥tokené•¿åº¦æœ‰å…³?è€Œè®­ç»ƒæ—¶,åˆ™æ˜¯æ»¡tokençš„æ—¶é—´?æˆ‘ç†è§£çš„å¯¹å—",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/118/comments",
    "author": "lightning0016",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-01-20T09:23:58Z",
        "body": "â˜‘ï¸ æ¨ç†æ—¶ï¼Œä¸éœ€è¦è¡¥å…¨ï¼Œæ‰€ä»¥è®¡ç®—æ—¶é—´ä¸è¾“å…¥tokené•¿åº¦æœ‰å…³\nâ˜‘ï¸ è€Œè®­ç»ƒæ—¶ï¼Œåˆ™æ˜¯æ»¡tokençš„æ—¶é—´ã€‚\n\nä½†æ˜¯éœ€è¦è¡¥å……çš„å‡ ç‚¹ï¼š\n1ã€æœ‰kv_cacheçš„æƒ…å†µä¸‹ï¼Œæ¨ç†è€—æ—¶ã€Œå‡ ä¹ã€å’Œtokené•¿åº¦æ— å…³ï¼Œçº¿æ€§å¢é•¿ã€‚ï¼ˆä¹‹æ‰€ä»¥ç”¨ã€Œå‡ ä¹ã€ï¼Œæ˜¯å› ä¸ºéšç€é•¿åº¦å¢é•¿å†…å­˜è¯»å†™å¼€é”€ä¹Ÿè¦è€ƒè™‘ï¼‰\n2ã€è®­ç»ƒæ—¶ç¡®å®æ˜¯paddingæ»¡æœ€å¤§max-lené•¿åº¦çš„tokensè®¡ç®—ã€‚åªä¸è¿‡ç›¸è¾ƒäºæ¨ç†è¿˜å¤šå‡ºäº†ã€Œåå‘ä¼ æ’­ã€ã€ã€Œä¼˜åŒ–å™¨æ›´æ–°ã€ã€ã€Œlossè®¡ç®—ã€ç­‰æ—¶é—´ï¼Œç›¸åŒé•¿åº¦tokensçš„è®­ç»ƒæ˜¯æ¨ç†æ—¶é—´çš„nå€ã€‚"
      },
      {
        "user": "cqcracked",
        "created_at": "2025-01-23T02:21:48Z",
        "body": "æœ‰kv_cacheçš„æƒ…å†µä¸‹ï¼Œæ¨ç†è€—æ—¶ã€Œå‡ ä¹ã€å’Œtokené•¿åº¦æ— å…³?  1,2,3æ¨ç†å‡º4ä¹‹åï¼Œè¿™ä¸ª4ä¹Ÿè¦åŒ1ï¼Œ2ï¼Œ3åšè‡ªæ³¨æ„åŠ›ï¼Œç„¶å1ï¼Œ2ï¼Œ3ï¼Œ4æ¨ç†å‡º5.ä¾æ¬¡è¿™æ ·ï¼Œåšè‡ªæ³¨æ„åŠ›è¿˜æ˜¯å’Œtokené•¿åº¦æœ‰å…³ï¼Œæ‰€ä»¥æ¨ç†è€—æ—¶ä¹ŸåŒtokené•¿åº¦æœ‰å…³ï¼Ÿè°¢è°¢\n@jingyaogong "
      },
      {
        "user": "HEroKuma",
        "created_at": "2025-02-08T13:43:21Z",
        "body": "æˆ‘çš„ç†è§£æ˜¯æœ‰kv_cacheçš„è©±, å¯ä»¥æŠŠ123çš„æ¨ç†çµæœä¿ç•™ä¸ç”¨é‡æ–°è¨ˆç®—, åªè¦è¨ˆç®—æ–°çš„token(4çš„éƒ¨åˆ†)çš„KV, ç„¶å¾Œåˆä½µåˆ°123çš„KVä¸€èµ·è·ŸQå»è¨ˆç®—éŸ¿æ‡‰ç¨‹åº¦, é€™æ¨£å¯ä»¥å¤§å¹…æ¸›å°‘è¨ˆç®—é‡\né›–ç„¶è€—æ™‚é‚„æ˜¯å›éš¨è‘—tokené•·åº¦å¢åŠ , ä½†æ˜¯ä¸æœƒæ˜¯token^2çš„å¢é•·å¹…åº¦"
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-02-09T05:28:07Z",
        "body": "æ¨ç†åˆ°ç¬¬nä¸ªåºåˆ—çš„æ—¶å€™\n\n- **Q (Query)**: å½¢çŠ¶ä¸º `(1, dim)`\n- **K (Key)**: å½¢çŠ¶ä¸º `(n, dim)`\n- **V (Value)**: å½¢çŠ¶ä¸º `(n, dim)`\n\n`Q` ä¼šä¸ `K^T` è¿›è¡Œç‚¹ç§¯æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ªå½¢çŠ¶ä¸º `attn=(1, n)` çš„çŸ©é˜µï¼ˆå¤æ‚åº¦o(n*dim)ï¼‰\n\næ¥ç€ï¼Œå½’ä¸€åŒ–åçš„attnåˆ†æ•°ä¸ `V=(n, dim)` ç›¸ä¹˜ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå½¢çŠ¶ä¸º `(1, dim)` çš„è¾“å‡ºå‘é‡ã€‚ï¼ˆå¤æ‚åº¦o(n*dim)ï¼‰"
      }
    ]
  },
  {
    "number": 113,
    "title": "Githubpage.io âœ–ï¸âœ–ï¸",
    "created_at": "2025-01-12T08:39:06Z",
    "closed_at": "2025-02-10T08:43:47Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/113",
    "body": "GitHub Pages ä¸å†æ”¯æŒéƒ¨ç½²ï¼Œæ‚¨èƒ½å¦åœ¨å…¶ä»–ä¾›åº”å•†ä¸Šè¿›è¡Œéƒ¨ç½²ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/113/comments",
    "author": "Audran-wol",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2025-01-13T14:31:00Z",
        "body": "> GitHub Pages ä¸å†æ”¯æŒéƒ¨ç½²\r\n\r\nè¯·é—® â€œä¸å†æ”¯æŒéƒ¨ç½²â€ å…·ä½“æŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼ŸğŸ«¡"
      }
    ]
  },
  {
    "number": 108,
    "title": "æµ‹è¯•æ•°æ®çš„é—®é¢˜",
    "created_at": "2025-01-02T09:03:13Z",
    "closed_at": "2025-01-04T07:41:37Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/108",
    "body": "åœ¨æ‰§è¡Œ0-eval_pretrain.pyè¿›è¡Œæµ‹è¯•æ—¶ï¼Œå¦‚æœæ¨¡å‹åœ¨è®­ç»ƒçš„æ—¶å€™æ²¡æœ‰è§è¿‡æµ‹è¯•æ•°æ®ï¼Œä¸€äº›äº‹å®æ€§çš„é—®é¢˜ï¼ˆä¸–ç•Œä¸Šæœ€é«˜çš„å±±å³°æ˜¯ï¼‰ï¼Œæ¨¡å‹åº”è¯¥æ˜¯å›ç­”ä¸äº†çš„å§ï¼Ÿå¯¹äºä¸€äº›äº‹å®çš„ä¸œè¥¿ï¼Œæ¨¡å‹åªæ˜¯æŠŠå®ƒè®°ä½äº†ï¼Œæ²¡åŠæ³•æ¨ç†å¾—åˆ°ã€‚\r\nè°¢è°¢",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/108/comments",
    "author": "cqcracked",
    "comments": [
      {
        "user": "cqcracked",
        "created_at": "2025-01-04T07:41:53Z",
        "body": "."
      },
      {
        "user": "jingyaogong",
        "created_at": "2025-01-04T15:27:34Z",
        "body": "è¿™å’Œ\r\næ˜¯`eval_pretrain`æµ‹è¯•é¢„è®­ç»ƒæ¨¡å‹\r\næˆ–æ˜¯`eval_chat`æµ‹è¯•æŒ‡ä»¤å¾®è°ƒåçš„èŠå¤©æ¨¡å‹æ²¡æœ‰å¿…ç„¶å…³ç³»\r\n\r\n\"ä¸€äº›äº‹å®æ€§çš„é—®é¢˜ï¼ˆä¸–ç•Œä¸Šæœ€é«˜çš„å±±å³°æ˜¯ï¼‰ï¼Œæ¨¡å‹åªæ˜¯æŠŠå®ƒè®°ä½äº†ï¼Œæ²¡åŠæ³•æ¨ç†å¾—åˆ°\"\r\nä¸åªæ˜¯è®°ä½äº†ï¼Œæ¨¡å‹å¯ä»¥æ¨ç†å¾—åˆ°\r\nä¾‹å¦‚ï¼Œå¦‚æœæ¨¡å‹åœ¨è®­ç»ƒä¸­è§è¿‡â€œAæ¯”Bé«˜ï¼ŒBæ¯”Cé«˜â€ï¼Œå®ƒå¯èƒ½ä¼šæ¨æ–­å‡ºâ€œAæ¯”Cé«˜â€\r\næ¨¡å‹åŸºäºå¤§é‡çš„è®­ç»ƒæ•°æ®ç»Ÿè®¡å†…åœ¨æ¨¡å¼ç”Ÿæˆæ–‡æœ¬ï¼Œä¸åªæ˜¯å­˜å‚¨çŸ¥è¯†\r\nä½ å¦‚æœå‘ç°`0-eval_pretrain.py`æ•ˆæœå·®ï¼Œç›®å‰æ˜¯é¢„è®­ç»ƒæ•°æ®è´¨é‡å¤ªä½çš„åŸå› "
      }
    ]
  },
  {
    "number": 105,
    "title": "æƒ³é—®ä¸€ä¸‹ä½œè€…å¤§å¤§æ˜¯æ€ä¹ˆåšåˆ°æ¨¡å‹å¤§å°è¿™ä¹ˆå°çš„ï¼Œé€šè¿‡æ¨¡å‹å‹ç¼©æˆ–æ˜¯å‚æ•°å…±äº«å—ï¼Œè¿˜æ˜¯åªæ˜¯å‡å°‘äº†layerã€dimè¿™äº›å‚æ•°å‘¢ï¼Ÿ",
    "created_at": "2024-12-27T06:41:01Z",
    "closed_at": "2025-02-10T08:44:35Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/105",
    "body": "æœ€è¿‘æœ‰åœ¨çœ‹MobileLLMé‚£ç¯‡è®ºæ–‡ï¼Œä¸çŸ¥é“ä½œè€…æ˜¯ä¸æ˜¯ç”¨äº†è®ºæ–‡é‡Œé¢çš„æŠ€æœ¯å‘¢ï¼Ÿå¦‚embedding shareã€GQAç­‰å‘¢",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/105/comments",
    "author": "ChinanBoys",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-12-27T13:43:33Z",
        "body": "æ›´å°‘çš„layer+hidden dim/dimï¼Œè¿™äº›readmeæœ‰å†™ã€‚\r\n\r\nå¦å¤–GQAå’Œlinear shareå¤§çº¦ä¸€å¹´å‰å°±æ™®åŠäº†ï¼Œminimindé‡ŒåŒæ ·æ ‡é…ã€‚"
      }
    ]
  },
  {
    "number": 99,
    "title": "å¦‚æœè®­ç»ƒè¿‡ç¨‹ä¸­ä¸­æ–­äº†ï¼Œå¦‚ä½•ä»ä¸­æ–­çš„åœ°æ–¹å¼€å§‹è®­ç»ƒå‘¢",
    "created_at": "2024-12-19T06:51:06Z",
    "closed_at": "2024-12-25T11:25:11Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/99",
    "body": "è·‘çš„è¿‡ç¨‹ä¸­ï¼Œä¸­æ–­äº†ï¼Œå¯æ˜¯å†è¿è¡Œæºæ–‡ä»¶æ—¶ï¼Œä¼šä»å¤´ç»™ä½ è·‘ï¼Œä½œè€…å¤§å¤§å†™äº†è¿™ä¸€å—å—",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/99/comments",
    "author": "ChinanBoys",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-12-19T07:16:08Z",
        "body": "ä½ æŒ‡çš„æ˜¯ä»ä¸­æ–­çš„æ•°æ®å¼€å§‹è®­ç»ƒå—ï¼Ÿ\r\nå¯ä»¥åŠ è½½ä¸­æ–­ä¹‹å‰çš„æƒé‡ç»§ç»­è®­ç»ƒï¼Œä¿å­˜åˆ° `./out/**.pth` äº†\r\nå¯ä»¥åœ¨1-pretrain.pyçš„ç¬¬111è¡ŒåŠ è½½åˆ°\r\n\r\n```\r\n        model = Transformer(lm_config)\r\n        moe_path = '_moe' if lm_config.use_moe else ''\r\n        ckp = f'./out/pretrain_{lm_config.dim}{moe_path}.pth'\r\n        state_dict = torch.load(ckp, map_location=args.device)\r\n        unwanted_prefix = '_orig_mod.'\r\n        for k, v in list(state_dict.items()):\r\n            if k.startswith(unwanted_prefix):\r\n                state_dict[k[len(unwanted_prefix):]] = state_dict.pop(k)\r\n        model.load_state_dict(state_dict, strict=False)\r\n```\r\n"
      }
    ]
  },
  {
    "number": 96,
    "title": "åšå®Œé¢„è®­ç»ƒä¹‹åæµ‹è¯•é—®ç­”ä¼šå‡ºç°å¾ˆå¤šé‡å¤ï¼Œè°ƒé«˜tempertureä¼šå‡è½»ï¼Œæ˜¯å…±æ€§é—®é¢˜å—ï¼Ÿ",
    "created_at": "2024-12-12T13:01:09Z",
    "closed_at": "2024-12-25T11:25:11Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/96",
    "body": null,
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/96/comments",
    "author": "jy007",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-12-13T11:55:56Z",
        "body": "æ˜¯çš„ï¼Œé¢„è®­ç»ƒæ•°æ®è´¨é‡ä½ï¼Œæœ‰å¤§é‡é‡å¤å¥å­æˆ–è€…æ®µè½ï¼Œæˆ–è€…æ²¡ä»€ä¹ˆé€»è¾‘çš„ä¸Šä¸‹æ–‡ã€‚ç›¸æ¯”äºsftæ•°æ®ï¼Œè´¨é‡ä½çš„å¤šï¼Œè¿™å¾ˆå¤§ç¨‹åº¦æ˜¯æ•°æ®è´¨é‡é—®é¢˜ï¼Œä¹‹åå¯»æ±‚æ›´é«˜çš„é¢„è®­ç»ƒæ•°æ®æ¥è§£å†³ã€‚"
      }
    ]
  },
  {
    "number": 93,
    "title": "å’¨è¯¢å¦‚ä½•å¤„ç†è¶…é•¿çš„pretrainæ•°æ®é›†",
    "created_at": "2024-11-30T13:41:18Z",
    "closed_at": "2024-12-13T12:04:43Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/93",
    "body": "å½“æˆ‘pretrain ä½¿ç”¨ pd.read_json çš„æ—¶å€™\r\n\r\n```\r\n    model, tokenizer = init_model()\r\n    df = pd.****read_json****(args.data_path)\r\n    df = df.sample(frac=1.0)\r\n    train_ds = PretrainDataset(df, tokenizer, max_length=max_seq_len)\r\n    train_sampler = DistributedSampler(train_ds) if ddp else None\r\n    train_loader = DataLoader(\r\n        train_ds,\r\n        batch_size=args.batch_size,\r\n        pin_memory=True,\r\n        drop_last=False,\r\n        shuffle=False,\r\n        num_workers=args.num_workers,\r\n        sampler=train_sampler\r\n    )\r\n\r\n```\r\n\r\nä½¿ç”¨ minimind ç­›é€‰å‡ºæ¥çš„æ•°æ®ï¼Œï¼ˆtext length < 512ï¼‰çº¦4.4G ï¼Œ500ä¸‡è¡Œï¼Œ\r\nå½“è¯»å–(pd.read_json)çš„æ—¶å€™ï¼Œå†…å­˜å ç”¨å³°å€¼ä¼šåˆ°24Gå·¦å³ï¼Œ\r\næœ€ç»ˆè¯»å–å®Œçš„å†…å­˜å ç”¨å¤§çº¦åœ¨6Gå·¦å³ï¼Œ\r\nä½¿ç”¨pd.read_csvåº”è¯¥ä¹Ÿæ˜¯ç±»ä¼¼çš„å ç”¨ï¼Œä¸€å¤§éƒ¨åˆ†ç©ºé—´ä¼šè¢«é‡å¤ä½¿ç”¨è€Œæµªè´¹æ‰ï¼Œ\r\n\r\nè®­ç»ƒwenge-research/yayi2_pretrain_data ï¼ˆ500Gï¼Œç­›é€‰text length < 512ä¹‹åè¿˜å‰©25Gæ•°æ®ï¼‰æˆ–è€…æ›´å¤§ä¸€ç‚¹çš„SkyPileæ•°æ®é›†åˆ™ä¼šå¯¼è‡´å†…å­˜è¿‡å¤§æ— æ³•è®­ç»ƒ\r\n\r\næœ‰æ²¡æœ‰åŠæ³•å‰Šå‡è¿™ä¸€æ­¥çš„å†…å­˜å ç”¨ï¼Œä»¥åŠå‰Šå‡åé¢GPUçš„å†…å­˜å ç”¨ï¼Ÿ\r\næˆ–è€…è¯´ï¼Œåœ¨é’ˆå¯¹å¤§é¢„è¨€å¤„ç†è¶…å¤§æ•°æ®é›†çš„æ—¶å€™ï¼Œä¸€èˆ¬é‡‡å–æ€ä¹ˆæ ·çš„æ–¹æ¡ˆï¼Ÿ\r\nï¼ˆå¦‚æœæ˜¯æŒ‰ç…§æ•°æ®å¤§å°è¿›è¡Œåˆ†ç‰‡å¤„ç†ï¼Œé‚£ä¹ˆå¤„ç†å®Œæˆåçš„pthæ–‡ä»¶æœ€ç»ˆåº”è¯¥æ€æ ·åˆå¹¶åœ¨ä¸€èµ·ï¼Ÿï¼‰",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/93/comments",
    "author": "qiukeren",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-12-13T12:04:43Z",
        "body": "è¿™ä¸ªé—®é¢˜å°±æ˜¯ä¸€äº›åå·¥ç¨‹æ–¹é¢çš„ä¼˜åŒ–ï¼Œè¯»å–å¤§å‹æ•°æ®é›†æ˜¯è½¯ä»¶/æ•°æ®å¤„ç†è¡Œä¸šå†…ä»»æ„åœºæ™¯éƒ½ä¼šé‡åˆ°çš„ï¼Œè¿™å¹¶éLLMç‹¬å®¶ä¸“å±\r\n\r\nä¾‹å¦‚è¯»å–çš„æ—¶å€™å¯ä»¥ç”¨chunksizeåˆ†ç‰‡\r\n```\r\nchunksize = 10 ** 6  # æ¯æ¬¡è¯»å–100ä¸‡è¡Œ\r\nfor chunk in pd.read_json(args.data_path, lines=True, chunksize=chunksize):\r\n    # å¯¹æ¯ä¸ªå—è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚ç­›é€‰ã€é¢„å¤„ç†ç­‰\r\n    chunk = chunk[chunk['text'].str.len() < 512]\r\n    # å°†å¤„ç†åçš„æ•°æ®ä¿å­˜åˆ°ç£ç›˜æˆ–å†…å­˜ä¸­ï¼ˆè§†å…·ä½“æƒ…å†µè€Œå®šï¼‰\r\n```\r\n\r\ndaskå¹¶è¡Œå¤„ç†å’Œå»¶è¿Ÿè®¡ç®—ï¼ˆæ²¡è¯•è¿‡ï¼‰\r\n```\r\nimport dask.dataframe as dd\r\n\r\ndf = dd.read_json(args.data_path, lines=True)\r\n```\r\n\r\nåº”å¯¹è¶…å¤§è§„æ¨¡æ•°æ®é›†ï¼Œç”¨æ›´é«˜æ•ˆçš„æ•°æ®åŠ è½½å™¨ `IterableDataset` ï¼ˆè¿™é‡Œç”¨æ³•ä¸å±•å¼€ï¼‰\r\n\r\n....ç­‰ç­‰æ–¹æ¡ˆ\r\n\r\næ‰€ä»¥MiniMindç»™å‡ºçš„demoè¿˜å­˜åœ¨ç€æ— æ•°çš„æ–¹å‘å¯ä»¥æ·±å…¥ä¼˜åŒ–"
      }
    ]
  },
  {
    "number": 89,
    "title": "è¿™æ˜¯åˆ†è¯å™¨ä¸è¡Œå—ï¼Œæ˜¯ä¸æ˜¯å¾—å»æ¢åˆ«çš„",
    "created_at": "2024-11-09T08:57:33Z",
    "closed_at": "2024-11-11T10:45:17Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/89",
    "body": "ç”Ÿæˆçš„å›ç­”ï¼šè¿Ÿç–‘æƒ‹æ€”ï¿½ï¿½ä¸‹å»ï¼Ÿ/å®‰è¿Ÿç–‘æƒ‹ï¼Ÿï¼Ÿï¼Ÿ/å®‰è¿Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ/å®‰è¿Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ/å®‰è¿…é€Ÿèµ°è¿‡å»çœ¼å‰é¢å‰ä¸çŸ¥é“çœ¼å‰é¢å‰é¢å‰å°è¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸ŠåºŠä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šçš„ä¸€å¼ å£ä¸­é—´å›¾ä¹¦æ¶ç€ï¼Ÿâ€å®‰è¿…é€Ÿèµ°è¿‡èº«è¾¹ä¸Šçš„è„¸é¢Šä¸€åªæ˜¯ä¸€ä¸ªä¸ªèº«ä¸Šè¾¹ç”»ç€é£ŸæŒ‡å°¸ä½“å‹ç›†â€¦ï¼Ÿ/å®‰è¿…é€Ÿèµ°è¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šè¾¹ä¸Šæ¥¼å±‚æ¬¡å†åº¦ç˜¦ï¿½ï¿½ï¿½é“é“é“ä½“å†…é‡Œé¢éƒ¨è‡€éƒ¨éƒ¨éƒ¨è‡€éƒ¨è‡€éƒ¨éƒ¨è‡€éƒ¨éƒ¨éƒ¨éƒ¨ç¬é—´å›¾é“å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·ç§°å·å·ç§°å·ç§°å·ç§°å·\r\n\r\nè¿˜æœ‰è¿™ç§ä¸€ç›´é‡å¤æ˜¯æ€ä¹ˆå›äº‹ï¼Œå·²ç»loss1ä»¥ä¸‹äº†ï¼Œå¯è¿˜æ˜¯æ¬ æ‹Ÿåˆ",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/89/comments",
    "author": "Enter10000",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-11-10T06:06:30Z",
        "body": "æœ‰å‡ ä¸ªé—®é¢˜ï¼špromptæ˜¯ä»€ä¹ˆï¼Ÿè®­ç»ƒæ•°æ®æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆè®­ç»ƒå¾—æ¥çš„è¿™ä¸ªæ¨¡å‹ï¼Ÿç›´æ¥é¢„è®­ç»ƒï¼Ÿå°è¯´æ•°æ®å¾®è°ƒï¼ŸåŸºäºå“ªç§æ¨¡å‹å¾®è°ƒï¼Ÿå­¦ä¹ ç‡ï¼Œè½®æ¬¡ï¼Ÿloss 1ä»¥ä¸‹ä¸ºä»€ä¹ˆä¼šå¾—å‡ºâ€œæ¬ æ‹Ÿåˆâ€ç»“è®ºï¼Ÿæµ‹è¯•æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ\r\n\r\næ ¹æ®æé—®å’Œç°è±¡ï¼Œæ²¡æœ‰ä»»ä½•å®šé‡æ•°æ®æˆ‘ä¸å¾—è€ŒçŸ¥ï¼Œè¯·è¡¥é½ä»¥ä¸ŠåŸºæœ¬ä¿¡æ¯ã€‚\r\n\r\næ ¹æ®ç›®å‰å·²çŸ¥ä¿¡æ¯ï¼š\r\n1.é¦–å…ˆæ ‡é¢˜æ‰€è°“çš„ â€œåˆ†è¯å™¨ä¸è¡Œ...â€ å’Œè¿™æ¡issueå†…å®¹æ²¡æœ‰ä»»ä½•ä»»ä½•å…³ç³»\r\n2.çŒœæµ‹åœ¨ä½è´¨é‡è‡ªå®šä¹‰ï¼ˆå°è¯´ï¼Ÿï¼‰æ•°æ®é›†ä¸Šç”¨å’Œé¢„è®­ç»ƒç›¸åŒçš„å¤§å­¦ä¹ ç‡æŠŠæ¨¡å‹ï¼ˆæœ¬æ¥å…·å¤‡é€šç”¨èƒ½åŠ›çš„ï¼‰å‚æ•°å…¨æ´—æ²¡äº†ï¼Œå˜æˆè¿‡æ‹Ÿåˆä½è´¨æ•°æ®é›†çš„å®Œå®Œå…¨å…¨æ®‹ç–¾æ¨¡å‹ï¼ŒåŸºæœ¬å›å¤èƒ½åŠ›å…¨éƒ¨ä¸§å¤±ã€‚è¿™æ˜¯è¿‡æ‹Ÿåˆè€Œæ°æ°éæ¬ æ‹Ÿåˆ..."
      }
    ]
  },
  {
    "number": 87,
    "title": "æˆ‘æœ‰ä¸ªæ¯”è¾ƒç²—æµ…ç–‘é—®ï¼šPTã€SFTã€DPOè¿™äº›ä¸åŒçš„è®­ç»ƒæ–¹æ³•åœ¨æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Ÿ",
    "created_at": "2024-11-08T00:46:15Z",
    "closed_at": "2024-11-11T10:45:16Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/87",
    "body": "æˆ‘æœ‰ä¸ªæ¯”è¾ƒç²—æµ…ç–‘é—®ï¼šPTã€SFTã€DPOè¿™äº›ä¸åŒçš„è®­ç»ƒæ–¹æ³•åœ¨æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Ÿ\r\nå½“æˆ‘åœ¨é—®è¿™ä¸ªé—®é¢˜çš„æ—¶å€™å°±åœ¨æƒ³ï¼Œä»–ä»¬éƒ½åœ¨è®¡ç®—lossï¼Œä»¥ä¸€å®šçš„å­¦ä¹ ç‡å»æ¢¯åº¦ä¸‹é™ã€‚é‚£ä¹ˆä»–ä»¬åœ¨è¿™ä¸ªå±‚é¢ä¸Šæ˜¯ä¸æ˜¯ä¸€æ ·çš„ã€‚\r\nåªæ˜¯è®¾è®¡äº†ä¸åŒçš„losså‡½æ•°ï¼Œä¸åŒçš„å­¦ä¹ ç‡ä¼˜åŒ–å™¨ã€‚\r\n",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/87/comments",
    "author": "chuanzhubin",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-11-08T03:36:17Z",
        "body": "åŸºæœ¬ä¸Šæ˜¯çš„ï¼ŒåŒºåˆ«åªæœ‰æ•°æ®å’Œlossçš„ç›®æ ‡"
      }
    ]
  },
  {
    "number": 85,
    "title": "5-dpo_trainè¿è¡ŒæŠ¥é”™ï¼Œæ˜¯ç‰ˆæœ¬é—®é¢˜å—ï¼Ÿ",
    "created_at": "2024-11-07T17:06:54Z",
    "closed_at": "2024-11-07T23:56:25Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/85",
    "body": "D:\\Anaconda3\\envs\\minni\\python.exe D:/work/qyQwen/minimind-master/5-dpo_train.py\r\nTraceback (most recent call last):\r\n  File \"D:\\work\\qyQwen\\minimind-master\\5-dpo_train.py\", line 49, in <module>\r\n    dpo_trainer = DPOTrainer(\r\n  File \"D:\\Anaconda3\\envs\\minni\\lib\\site-packages\\**transformers\\utils\\deprecation.py**\", line 165, in wrapped_func\r\n    return func(*args, **kwargs)\r\n**TypeError: __init__() got an unexpected keyword argument 'beta'**\r\n\r\nProcess finished with exit code 1\r\ntransformer=4.46.0å’Œ4.44.0éƒ½è¯•è¿‡ï¼Œtrl=0.11.3",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/85/comments",
    "author": "srconly",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-11-07T23:56:25Z",
        "body": "ç‰ˆæœ¬é—®é¢˜ï¼Œä½ éœ€è¦ç¡®è®¤ `æ‰€è°“\"transformer=4.46.0å’Œ4.44.0éƒ½è¯•è¿‡ï¼Œtrl=0.11.3\"` æ˜¯å¦æ¥è‡ª `minni` ç¯å¢ƒï¼Ÿ\r\n\r\nå¬é›†å¤šäººæµ‹è¯•äº†æ‰€æœ‰ä¸åŒå¹³å°çš„æœºå™¨ï¼Œä¸å¯å¤ç°ï¼Œæš‚æ—¶close"
      },
      {
        "user": "srconly",
        "created_at": "2024-11-08T13:44:02Z",
        "body": "æ„Ÿè°¢æ„Ÿè°¢ï¼Œæˆ‘çš„trlç¡®å®ä¸æ¥è‡ªminniç¯å¢ƒï¼Œæˆ‘æœ¬åœ°cloneäº†æœ€æ–°çš„trlé¡¹ç›®ï¼Œå®ƒå’ŒmindåŒçº§ç›®å½•ï¼Œé€ æˆäº†è¿™ä¸ªé—®é¢˜ï¼Œå·²è§£å†³"
      }
    ]
  },
  {
    "number": 84,
    "title": "è¯·æ•™å¦‚ä½•ä¼˜åŒ–å†…å­˜ä½¿ç”¨",
    "created_at": "2024-11-06T15:31:23Z",
    "closed_at": "2024-11-07T23:57:31Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/84",
    "body": "é¦–å…ˆæ„Ÿè°¢å¤§ä½¬çš„åˆ†äº«ã€‚æˆ‘è¿™é‡Œæƒ³è¯·æ•™ä¸€ä¸‹åœ¨è®­ç»ƒè¿‡ç¨‹æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥æé«˜CPUå’Œæ˜¾å­˜çš„ä½¿ç”¨ç‡å—ï¼Ÿæˆ‘ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„NVIDIA V100ï¼Œåœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­GPUçš„ä½¿ç”¨ç‡åŸºæœ¬æ˜¯æ»¡çš„ï¼Œä½†æ˜¯å…¶ä»–çš„åˆ©ç”¨ç‡æŒºä½çš„",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/84/comments",
    "author": "ltc0",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-11-07T01:40:26Z",
        "body": "è°¢è°¢è®¤å¯å“ˆï¼  \r\n\r\nä¸çŸ¥é“â€œGPUçš„ä½¿ç”¨ç‡åŸºæœ¬æ˜¯æ»¡çš„â€æŒ‡çš„æ˜¯ä¸æ˜¯ `Pwr: Usage/Cap` å’Œ `Volatile GPU-Util` è¿™ä¸¤ä¸ªæŒ‡æ ‡ã€‚ç¬¬ä¸€ä¸ªè¡¨ç¤ºåŠŸç‡æ˜¯å¦æ‹‰æ»¡ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºæ˜¾å­˜çš„åˆ©ç”¨ç‡æ˜¯å¦å·²ç»é¥±å’Œã€‚\r\n\r\nå¦‚æœåªæ˜¯ç®€å•ä¸ºäº†æ‹‰æ»¡æ˜¾å­˜å’ŒCPUï¼Œå¯ä»¥å°è¯•å¢å¤§ `batch_size=16/32/64/128` å’Œ `num_workers=4/8/16/32`\r\nä¸è¿‡ï¼Œå¦‚æœGPUçš„åˆ©ç”¨ç‡å·²ç»æ¥è¿‘æ»¡è´Ÿè·ï¼Œå³ä½¿è¿™äº›è¶…å‚æˆå€å¢åŠ ï¼Œé€Ÿåº¦æå‡ä¹Ÿä¸ä¼šå¾ˆæ˜¾è‘—\r\n\r\nä¸¾ä¸ªä¸å®Œå…¨æ°å½“çš„ä¾‹å­ï¼šéº¦èŠ½ç³–ä½“ç§¯å°ï¼Œå ç”¨â€œå˜´å­˜â€ï¼ˆç›¸å½“äºæ˜¾å­˜ï¼‰ä¸å¤šï¼Œä½†åš¼èµ·æ¥åˆç¡¬åˆé»ç‰™ï¼ˆç›¸å½“äºGPUè®¡ç®—ï¼‰ï¼Œå³ä¾¿æ‰‹ä¸ŠåŒæ—¶é€’2å—3å—4å—éº¦èŠ½ç³–ï¼Œå¡æ»¡â€œå˜´å­˜â€ä¹Ÿä¸ä¼šæ˜æ˜¾åŠ å¿«åƒç³–çš„é€Ÿåº¦ï¼Œå› ä¸ºå˜´å·´å·²ç»100%åœ¨åŠªåŠ›å’€åš¼ï¼Œè¿™æ—¶æ‰‹ï¼ˆç±»æ¯”CPUï¼‰çš„é€’ç³–é€Ÿåº¦å°±å˜å¾—ä¸é‡è¦äº†ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ£‰èŠ±ç³–è™½ç„¶å ç”¨â€œå˜´å­˜â€è¾ƒå¤šï¼Œä½†å…¥å£å³åŒ–ï¼Œå¯¹å˜´çš„è´Ÿæ‹…ï¼ˆGPUè®¡ç®—ï¼‰å‡ ä¹æ²¡æœ‰ï¼Œæ­¤æ—¶æé«˜é€’ç³–é¢‘ç‡ä»¥æå‡é€Ÿåº¦å°±æ˜¾å¾—é‡è¦äº†ã€‚"
      },
      {
        "user": "ltc0",
        "created_at": "2024-11-07T01:40:57Z",
        "body": "è¿™æ˜¯æ¥è‡ªQQé‚®ç®±çš„å‡æœŸè‡ªåŠ¨å›å¤é‚®ä»¶ã€‚\r\nÂ \r\næ‚¨å¥½ï¼Œæˆ‘æœ€è¿‘æ­£åœ¨ä¼‘å‡ä¸­ï¼Œæ— æ³•äº²è‡ªå›å¤æ‚¨çš„é‚®ä»¶ã€‚æˆ‘å°†åœ¨å‡æœŸç»“æŸåï¼Œå°½å¿«ç»™æ‚¨å›å¤ã€‚"
      }
    ]
  },
  {
    "number": 82,
    "title": "è¯·æ•™Pretrianä¸­æ–­åç»§ç»­è®­ç»ƒçš„ç–‘é—®",
    "created_at": "2024-11-04T03:47:03Z",
    "closed_at": "2024-11-07T23:57:30Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/82",
    "body": "åœ¨æ‰§è¡ŒPretrain.pyæ—¶å¦‚æœæ²¡æœ‰è®­ç»ƒå®Œå°±ä¸­æ–­äº†\r\næƒ³è¦åœ¨ä¸­æ–­å‰çš„checkpointçš„åŸºç¡€ä¸Šç»§ç»­è®­ç»ƒï¼Œæœ¬é¡¹ç›®çš„ä»£ç è¯·é—®åº”è¯¥ä¿®æ”¹å“ªä¸ªéƒ¨åˆ†å‘€ã€‚\r\nè°¢è°¢å„ä½å¤§ä½¬",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/82/comments",
    "author": "VictorSun1996",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-11-04T04:49:52Z",
        "body": "å¯ä»¥çœ‹ä¸€ä¸‹ä½  `./out/pretrain_xx_xx.pth` çš„ä¿®æ”¹æ—¶é—´ï¼Œå°±æ˜¯ä½ ä¸­æ–­ä¹‹å‰è¢«ä¿å­˜çš„æœ€åä¸€æ¬¡checkpointæ—¶é—´\r\n\r\næ‰€ä»¥æŠŠ `1-pretrain.py` ç¬¬105è¡Œæ¢æˆ\r\n```\r\ndef init_model():\r\n    def count_parameters(model):\r\n        return sum(p.numel() for p in model.parameters() if p.requires_grad)\r\n\r\n    tokenizer = AutoTokenizer.from_pretrained('./model/minimind_tokenizer')\r\n\r\n    model = Transformer(lm_config).to(args.device)\r\n    moe_path = '_moe' if lm_config.use_moe else ''\r\n    ckp = f'./out/pretrain_{lm_config.dim}{moe_path}.pth'\r\n\r\n    state_dict = torch.load(ckp, map_location=args.device)\r\n\r\n    # å¤„ç†ä¸éœ€è¦çš„å‰ç¼€\r\n    unwanted_prefix = '_orig_mod.'\r\n    for k, v in list(state_dict.items()):\r\n        if k.startswith(unwanted_prefix):\r\n            state_dict[k[len(unwanted_prefix):]] = state_dict.pop(k)\r\n\r\n    for k, v in list(state_dict.items()):\r\n        if 'mask' in k:\r\n            del state_dict[k]\r\n\r\n    # åŠ è½½åˆ°æ¨¡å‹ä¸­\r\n    model.load_state_dict(state_dict, strict=False)\r\n    Logger(f'LLMæ€»å‚æ•°é‡ï¼š{count_parameters(model) / 1e6:.3f} ç™¾ä¸‡')\r\n    return model, tokenizer\r\n```\r\nåŠ è½½å®ƒå³å¯"
      },
      {
        "user": "VictorSun1996",
        "created_at": "2024-11-04T07:40:28Z",
        "body": "> å¯ä»¥çœ‹ä¸€ä¸‹ä½  `./out/pretrain_xx_xx.pth` çš„ä¿®æ”¹æ—¶é—´ï¼Œå°±æ˜¯ä½ ä¸­æ–­ä¹‹å‰è¢«ä¿å­˜çš„æœ€åä¸€æ¬¡checkpointæ—¶é—´\r\n> \r\n> æ‰€ä»¥æŠŠ `1-pretrain.py` ç¬¬105è¡Œæ¢æˆ\r\n> \r\n> ```\r\n> def init_model():\r\n>     def count_parameters(model):\r\n>         return sum(p.numel() for p in model.parameters() if p.requires_grad)\r\n> \r\n>     tokenizer = AutoTokenizer.from_pretrained('./model/minimind_tokenizer')\r\n> \r\n>     model = Transformer(lm_config).to(args.device)\r\n>     moe_path = '_moe' if lm_config.use_moe else ''\r\n>     ckp = f'./out/pretrain_{lm_config.dim}{moe_path}.pth'\r\n> \r\n>     state_dict = torch.load(ckp, map_location=args.device)\r\n> \r\n>     # å¤„ç†ä¸éœ€è¦çš„å‰ç¼€\r\n>     unwanted_prefix = '_orig_mod.'\r\n>     for k, v in list(state_dict.items()):\r\n>         if k.startswith(unwanted_prefix):\r\n>             state_dict[k[len(unwanted_prefix):]] = state_dict.pop(k)\r\n> \r\n>     for k, v in list(state_dict.items()):\r\n>         if 'mask' in k:\r\n>             del state_dict[k]\r\n> \r\n>     # åŠ è½½åˆ°æ¨¡å‹ä¸­\r\n>     model.load_state_dict(state_dict, strict=False)\r\n>     Logger(f'LLMæ€»å‚æ•°é‡ï¼š{count_parameters(model) / 1e6:.3f} ç™¾ä¸‡')\r\n>     return model, tokenizer\r\n> ```\r\n> \r\n> åŠ è½½å®ƒå³å¯\r\n\r\nè°¢è°¢ï¼Œæ˜ç™½äº†ã€‚"
      }
    ]
  },
  {
    "number": 81,
    "title": "Padding Maskéƒ¨åˆ†çš„ç–‘æƒ‘",
    "created_at": "2024-11-02T09:28:27Z",
    "closed_at": "2024-11-11T10:45:34Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/81",
    "body": "æ‚¨å¥½ï¼Œæ„Ÿè°¢æ‚¨çš„é¡¹ç›®ã€‚\r\næˆ‘åœ¨æ‚¨çš„é¡¹ç›®ä¸­å‘ç°æ¨¡å‹ä¸­çš„Attentionæ¨¡å—ä¸­çš„maskåªæ˜¯åŒ…å« attention maskï¼Œè€Œæ²¡æœ‰é€šè¿‡ä¼ å…¥paddingéƒ¨åˆ†çš„padding maskç»“åˆä½œä¸ºmaskã€‚æˆ‘å‘ç°æ‚¨åœ¨æ¨¡å‹è¾“å‡ºå®Œlogitsåè®¡ç®—lossæ—¶ï¼ˆä¾‹å¦‚pretrainä»£ç ä¸­è®¡ç®—entropy lossï¼‰ï¼Œé€šè¿‡padding maskå¯¹lossè®¡ç®—ç»“æœmaskæ‰äº†paddingéƒ¨åˆ†ã€‚æˆ‘æƒ³è¯·æ•™ä¸‹è¿™ä¸¤ç§padding maskçš„å®ç°æ–¹æ³•ä¸Šåœ¨æ•ˆæœä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ã€‚\r\nè°¢è°¢ï¼Œå¸Œæœ›æ‚¨èƒ½å›å¤æˆ‘çš„ç–‘æƒ‘ï¼",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/81/comments",
    "author": "skygreygrey",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-11-02T11:51:08Z",
        "body": "## 1ã€Attention Maskçš„ä½œç”¨\r\nå‡è®¾æ¨¡å‹éœ€è¦å­¦ä¹ ä¸€å¥è¯ï¼š\"æˆ‘æ¥è‡ªåœ°çƒ<ç»ˆæ­¢ç¬¦>\"\r\n\r\n\"æˆ‘æ¥è‡ªåœ°çƒ\" è¾“å…¥ä¸€æ¬¡ï¼Œæ¨¡å‹åªèƒ½å¤Ÿå­¦ä¹ ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯å­¦ä¼šé¢„æµ‹æœ€åçš„ \"<ç»ˆæ­¢ç¬¦>\"\r\nç„¶è€Œï¼Œè¿™æ ·å¤ªæ…¢äº†ï¼Œç°åœ¨å¸Œæœ›å®ƒåªéœ€è¦æ¥æ”¶1æ¬¡è¾“å…¥ï¼Œå°±èƒ½ç­‰ä»·äºå­¦5æ¬¡ã€‚\r\n\r\nè‡ªç„¶å¯ä»¥æƒ³åˆ°å°†è¾“å…¥çš„ â€œæˆ‘æ¥è‡ªåœ°çƒâ€ å±•å¼€æˆä¸€ä¸ªçŸ©é˜µï¼Œå°±å¯ä»¥æ„‰å¿«åœ°å¹¶è¡Œè®­ç»ƒäº†ï¼Œæ¯ä¸€è¡Œè¢«å­¦ä¹ çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯ï¼š\r\n\r\n```\r\n* å¸Œæœ›å®ƒçœ‹åˆ° â€œæˆ‘â€ èƒ½å­¦ä¼šé¢„æµ‹ â€œæ¥â€ \r\n* å¸Œæœ›å®ƒçœ‹åˆ° â€œæˆ‘æ¥â€ èƒ½å­¦ä¼šé¢„æµ‹ â€œè‡ªâ€\r\n* å¸Œæœ›å®ƒçœ‹åˆ° â€œæˆ‘æ¥è‡ªâ€ èƒ½å­¦ä¼šé¢„æµ‹â€œåœ°â€\r\n* .......\r\n```\r\n\r\nä½†æ˜¯å®Œå…¨å±•å¼€æˆçŸ©é˜µï¼š\r\n```\r\næˆ‘æ¥è‡ªåœ°çƒ\r\næˆ‘æ¥è‡ªåœ°çƒ\r\næˆ‘æ¥è‡ªåœ°çƒ\r\næˆ‘æ¥è‡ªåœ°çƒ\r\næˆ‘æ¥è‡ªåœ°çƒ\r\n```\r\nåœ¨ç¬¬ i è¡Œï¼Œæ— è®º i å–å‡ ï¼Œæ¨¡å‹éƒ½å¯ä»¥çœ‹åˆ°ä¸€æ•´è¡Œçš„å†…å®¹ï¼Œä¸‹ä¸€ä¸ªè¦é¢„æµ‹å•¥ï¼Œä¸‹ä¸‹ä¸€ä¸ªè¦é¢„æµ‹å•¥ï¼Œç­”æ¡ˆéƒ½ä¸€çœ¼çœ‹åˆ°äº†ï¼Œæ˜¾ç„¶ç­”æ¡ˆè¢«å¼€å·å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚\r\n\r\nå› æ­¤è¿™é‡Œéœ€è¦æŠŠæ¯ä¸€è¡Œä¸è¯¥çœ‹åˆ°çš„å†…å®¹ç»™åŠ ä¸ŠMaskçŸ©é˜µï¼Œä½¿ä¹‹å˜æˆè´Ÿæ— ç©·ï¼ˆç›¸å½“äºæ³¨æ„åŠ›åˆ†æ•°å˜æˆ0ï¼ŒæŠŠè¿™ä¸ªä½ç½®çš„tokenç»™è—èµ·æ¥å³å¯ï¼‰ï¼š\r\n```\r\næˆ‘è´Ÿè´Ÿè´Ÿè´Ÿ\r\næˆ‘æ¥è´Ÿè´Ÿè´Ÿ\r\næˆ‘æ¥è‡ªè´Ÿè´Ÿ\r\næˆ‘æ¥è‡ªåœ°è´Ÿ\r\næˆ‘æ¥è‡ªåœ°çƒ\r\n```\r\nè¿™æ ·çš„è¯ï¼Œæ¯è¡Œå„å¸å…¶èŒï¼Œé¢„æµ‹å®ƒè¯¥é¢„æµ‹çš„å€¼\r\n\r\n```\r\n* ç¬¬ä¸€è¡Œå­¦ä¹ â€œæ¥â€ (æ¨¡å‹åªå‚è€ƒ\"æˆ‘\")\r\n* ç¬¬äºŒè¡Œå­¦ä¹ â€œè‡ªâ€ (æ¨¡å‹åªå‚è€ƒ\"æˆ‘æ¥\")\r\n* ç¬¬ä¸‰è¡Œå­¦ä¹ â€œåœ°â€ (æ¨¡å‹åªå‚è€ƒ\"æˆ‘æ¥è‡ª\")\r\n* ç¬¬å››è¡Œå­¦ä¹ â€œçƒâ€ (æ¨¡å‹åªå‚è€ƒ\"æˆ‘æ¥è‡ªåœ°\")\r\n* ç¬¬äº”è¡Œå­¦ä¹ â€œ<ç»ˆæ­¢ç¬¦>â€ (æ¨¡å‹åªå‚è€ƒ\"æˆ‘æ¥è‡ªåœ°çƒ\")\r\n```\r\n\r\nå®Œå…¨åšåˆ°å„å¸å…¶èŒï¼Œäº’ä¸å¹²æ‰°ï¼Œè¿‡å»çš„tokenæ— æ³•çœ‹è§æœªæ¥çš„tokenã€‚\r\n\r\nè¿™é‡Œçš„Attention Maskè¾¾åˆ°**åªè¾“å…¥ä¸€æ¬¡ï¼Œå®é™…ä¸Šæ½œåœ¨åœ°å¹¶è¡Œè®­ç»ƒäº†Næ¬¡çš„ç›®çš„**\r\n\r\n## 2ã€logitçš„mask\r\n\r\nè¿™é‡Œæ²¡ä»€ä¹ˆç‰¹æ®Šçš„å«ä¹‰ï¼Œå¦‚æœè®¾å®šè®­ç»ƒé•¿åº¦ä¸º512ã€‚\r\n\r\nä½†æ˜¯ä¸€æ®µè¯åªæœ‰200ä¸ªæœ‰æ•ˆtokenéœ€è¦è¢«å­¦ä¹ ï¼Œé‚£ä¹ˆç›¸å½“äºéœ€è¦padding 312ä¸ªæ— å®é™…å«ä¹‰çš„tokenä½¿ä¹‹ç»Ÿä¸€é•¿åº¦æ–¹ä¾¿è¾“å…¥è®­ç»ƒã€‚\r\n\r\né‚£ä¹ˆæ¨¡å‹çš„æ¨ç†è¿‡ç¨‹å¹¶ä¸éœ€è¦å…³æ³¨è¿™312ä¸ªæ— æ„ä¹‰çš„tokenï¼Œæ‰€ä»¥ç›´æ¥åœ¨æœ€åè®¡ç®—lossæ—¶å»é™¤è¿™éƒ¨åˆ†çš„æŸå¤±å³å¯ã€‚\r\n\r\nè‡³äºAttentionä¸­æ— è®ºæ˜¯å¦è®¡ç®—è¿™312ä¸ªtokenéƒ½æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºè¾“å‡ºçš„lossåæ­£éƒ½ä¼šå±è”½æ‰è¿™éƒ¨åˆ†æŸå¤±ï¼Œæ‰€ä»¥Attentionæ¨¡å—åªéœ€è¦é¢æ— è¡¨æƒ…åœ°éº»æœ¨å·¥ä½œå³å¯ï¼Œå®ƒå¹¶ä¸éœ€è¦çŸ¥é“tokenæ•°é‡åˆ°åº•æ˜¯512è¿˜æ˜¯312è¿˜æ˜¯200ã€‚å› ä¸ºè¿™éƒ¨åˆ†å·¥ä½œç”±losså®Œæˆã€‚\r\n\r\nä¸¾ä¸ªä¸æ°å½“çš„ä¾‹å­ï¼Œ\r\n\r\né«˜è€ƒæ•°å­¦æ—¶ï¼Œç›‘è€ƒè€å¸ˆå¹¶ä¸ä¼šè¦æ±‚å­¦ç”Ÿæ ¼å¼åŒ–å¤§è„‘ä¸­çš„ **è¯­è‹±æ”¿å²åœ°ç”Ÿç‰©åŒ–** çŸ¥è¯†åªé›†ä¸­Attention MaskçŸ©é˜µè®¡ç®—æ•°å­¦é¢˜ã€‚\r\nå› ä¸ºæ— è®ºç»å†æ€æ ·æƒŠæ¶›éª‡æµªçš„å¤©æ–‡åœ°ç†æ–‡å­¦å†å²å¤´è„‘é£æš´ï¼Œè¿™å¼ è¯•å·é«˜è€ƒLossåªè®¡ç®—æ•°å­¦ç­”æ¡ˆ..."
      },
      {
        "user": "skygreygrey",
        "created_at": "2024-11-03T11:34:19Z",
        "body": "æ„Ÿè°¢æ‚¨çš„å›å¤ã€‚"
      },
      {
        "user": "cpp2016",
        "created_at": "2024-11-04T03:54:39Z",
        "body": "è‡³äºAttentionä¸­æ— è®ºæ˜¯å¦è®¡ç®—è¿™312ä¸ªtokenéƒ½æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºè¾“å‡ºçš„lossåæ­£éƒ½ä¼šå±è”½æ‰è¿™éƒ¨åˆ†æŸå¤±ï¼Œæ‰€ä»¥Attentionæ¨¡å—åªéœ€è¦é¢æ— è¡¨æƒ…åœ°éº»æœ¨å·¥ä½œå³å¯ï¼Œå®ƒå¹¶ä¸éœ€è¦çŸ¥é“tokenæ•°é‡åˆ°åº•æ˜¯512è¿˜æ˜¯312è¿˜æ˜¯200ã€‚å› ä¸ºè¿™éƒ¨åˆ†å·¥ä½œç”±losså®Œæˆã€‚\r\n\r\nè¿™å¥è¯ä¸­ï¼Œåè¾¹312ä¸ªtokenå¯èƒ½ä¼šå¯¹å‰è¾¹200ä¸ªtokenäº§ç”Ÿè´¡çŒ®å§ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸Šå±‚ï¼Œæ³¨æ„åŠ›ä¸­æ˜¯ä¸æ˜¯åº”è¯¥å±è”½æ‰"
      },
      {
        "user": "jingyaogong",
        "created_at": "2024-11-04T04:45:18Z",
        "body": "> è‡³äºAttentionä¸­æ— è®ºæ˜¯å¦è®¡ç®—è¿™312ä¸ªtokenéƒ½æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºè¾“å‡ºçš„lossåæ­£éƒ½ä¼šå±è”½æ‰è¿™éƒ¨åˆ†æŸå¤±ï¼Œæ‰€ä»¥Attentionæ¨¡å—åªéœ€è¦é¢æ— è¡¨æƒ…åœ°éº»æœ¨å·¥ä½œå³å¯ï¼Œå®ƒå¹¶ä¸éœ€è¦çŸ¥é“tokenæ•°é‡åˆ°åº•æ˜¯512è¿˜æ˜¯312è¿˜æ˜¯200ã€‚å› ä¸ºè¿™éƒ¨åˆ†å·¥ä½œç”±losså®Œæˆã€‚\r\n> \r\n> è¿™å¥è¯ä¸­ï¼Œåè¾¹312ä¸ªtokenå¯èƒ½ä¼šå¯¹å‰è¾¹200ä¸ªtokenäº§ç”Ÿè´¡çŒ®å§ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸Šå±‚ï¼Œæ³¨æ„åŠ›ä¸­æ˜¯ä¸æ˜¯åº”è¯¥å±è”½æ‰\r\n\r\nä¸ä¼šï¼ŒGPTå±äºCausal Modelï¼Œå‰Nä¸ªä½ç½®çš„Attentionè®¡ç®—ä¸ä¼šè€ƒè™‘N+1åŠä»¥åçš„æœªæ¥tokenï¼Œåªä¼šå…³æ³¨å½“å‰ä½ç½®ä¹‹å‰çš„tokenã€‚\r\n\r\nç›¸åï¼Œå¦‚æœ312ä¸ªç©ºtoken paddingåœ¨å‰é¢è€Œä¸æ˜¯åé¢ï¼Œä¼šå¯¹å‰©ä¸‹200ä¸ªåŸæœ‰tokenäº§ç”Ÿå½±å“ã€‚"
      }
    ]
  },
  {
    "number": 80,
    "title": "æ±‚åŠ©ï¼Œsftæ•°æ®å¤„ç†å®Œåæ˜¯ä¸ä¼šä½¿ç”¨åˆ†è¯å™¨è½¬ç çš„å—ï¼Ÿ",
    "created_at": "2024-10-31T08:59:22Z",
    "closed_at": "2024-11-07T23:57:30Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/80",
    "body": "æˆ‘è‡ªå·±åˆ¶ä½œäº†ä¸€ä»½æ•°æ®é›†ï¼Œä¸æ€ä¹ˆå¤§ï¼Œæˆ‘çš„ç›®çš„ä¸æ˜¯è®©å®ƒä¼šç­”é¢˜ï¼Œè€Œæ˜¯å¸Œæœ›èƒ½æ¨¡ä»¿æˆ‘ç»™çš„qå’Œaçš„é£æ ¼ï¼Œç”Ÿæˆç±»ä¼¼çš„ç­”æ¡ˆï¼Œå“ªæ€•ä¸é€šé¡ºéƒ½è¡Œã€‚æˆ‘æŒ‰ç…§å…¬å¼€sftæ•°æ®é›†çš„æ ¼å¼åˆ¶ä½œçš„ï¼Œæ•°æ®å¤„ç†ä¹Ÿæ­£å¸¸ï¼Œå¯æƒ³è¦è®­ç»ƒçš„æ—¶å€™æŒ‡å®šè¦pretrainæ–‡ä»¶ï¼Œæˆ‘ä¿®æ”¹æ–‡ä»¶ååï¼Œè¿è¡ŒåˆåŠ è½½ä¸å‡ºæ¥ï¼ŒæŠ¥é”™è¯†åˆ«é”™è¯¯ã€‚\r\nä»£ç æˆ‘æ˜¯ç”¨gitæœ¬åœ°éƒ¨ç½²çš„ï¼Œä¹Ÿé—®è¿‡gptè§£å†³äº†ä¸€äº›é—®é¢˜ï¼Œä½†ç°åœ¨å°±å¡åœ¨è¿™äº†ï¼Œæ˜¯å¿…é¡»è¦ç”¨pretrainæ•°æ®é›†å—\r\n",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/80/comments",
    "author": "Enter10000",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-10-31T09:02:37Z",
        "body": "@Enter10000 \r\nå…·ä½“é”™è¯¯æ˜¯ä»€ä¹ˆï¼Œè‚¯å®šæ˜¯ä¸è¦æ±‚ \"å¿…é¡»è¦ç”¨pretrainæ•°æ®é›†\"\r\nå¯èƒ½æ˜¯ä½ æ•°æ®é‡Œæœ‰ä¸€äº›è§£æé”™è¯¯çš„é—®é¢˜ï¼Œéœ€è¦çœ‹åˆ°å…·ä½“çš„ä¿¡æ¯å†ç¡®å®š"
      },
      {
        "user": "Enter10000",
        "created_at": "2024-11-01T08:00:38Z",
        "body": "å¥½åƒæ˜¯æˆ‘æƒ³é”™äº†ï¼Œæˆ‘æ˜¯æƒ³ç›´æ¥åªç”¨sftæ•°æ®è®­ç»ƒå¤§æ¨¡å‹ï¼Œä¸æ˜¯å¾®è°ƒçš„é‚£ç§ï¼Œæ‰€ä»¥ä¸€ç›´ä¸è¡Œã€‚"
      }
    ]
  },
  {
    "number": 79,
    "title": "æƒ³é—®ä¸‹pretrain_data(24-09-27åå¼ƒç”¨).bin éœ€è¦ä¸‹è½½å—ï¼Ÿ è°¢è°¢",
    "created_at": "2024-10-30T14:51:07Z",
    "closed_at": "2024-10-31T02:42:33Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/79",
    "body": null,
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/79/comments",
    "author": "chenzk1993",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-10-30T15:38:31Z",
        "body": "ä¸éœ€è¦ä¸‹è½½äº†å“¦"
      }
    ]
  },
  {
    "number": 72,
    "title": "sft_data.csvæ•°æ®ç”ŸæˆæŠ¥é”™",
    "created_at": "2024-10-23T03:15:30Z",
    "closed_at": "2024-10-28T09:21:44Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/72",
    "body": "å½“ data_process.py æ‰§è¡Œ sft_process(contain_history=True) æŠ¥é”™ã€‚\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/xxxx/Documents/AI/minimind/data_process.py\", line 147, in <module>\r\n    sft_process(contain_history=True)\r\n  File \"/Users/xxxx/Documents/AI/minimind/data_process.py\", line 101, in sft_process\r\n    process_and_write_data(data)\r\n  File \"/Users/xxxx/Documents/AI/minimind/data_process.py\", line 78, in process_and_write_data\r\n    df.to_csv(f'./dataset/{file_name}', mode='a', header=False, index=False, lineterminator='\\r\\n')\r\n  ......\r\n    libwriters.write_csv_rows(\r\n  File \"pandas/_libs/writers.pyx\", line 72, in pandas._libs.writers.write_csv_rows\r\n_csv.Error: need to escape, but no escapechar set\r\n\r\næ˜¯éœ€è¦å¤„ç† sft_data_zh.jsonl çš„æ•°æ®è¿˜æ˜¯ å¯¼å‡ºsft_data.csvçš„æ—¶å€™ï¼Œæ·»åŠ åˆ†å‰²ç¬¦ã€‚ å¦‚æœæ·»åŠ äº†ï¼Œå¯¹åé¢çš„è®­ç»ƒæ˜¯å¦æœ‰å½±å“ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/72/comments",
    "author": "liyu98",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-10-23T04:22:23Z",
        "body": "pandasç‰ˆæœ¬æ˜¯å¤šå°‘ï¼Œæˆ‘æ— æ³•å¤ç°è¿™ä¸ªé—®é¢˜"
      },
      {
        "user": "jingyaogong",
        "created_at": "2024-10-23T04:27:24Z",
        "body": "å¯ä»¥åŠ çš„ï¼Œå¼ºè¡Œè½¬ä¹‰å­—ç¬¦é¢‘ç‡å¾ˆä½ï¼Œåº”è¯¥åŸºæœ¬ä¸ä¼šå—å½±å“\r\n\r\nå¯ä»¥pullæœ€æ–°ä»£ç processä¸€ä¸‹\r\n\r\nè®­ç»ƒåcommentæ•ˆæœğŸ˜Š"
      }
    ]
  },
  {
    "number": 69,
    "title": "æ¨¡å‹çš„è¾“å…¥è¾“å‡ºé•¿åº¦",
    "created_at": "2024-10-17T07:09:06Z",
    "closed_at": "2024-10-18T06:16:05Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/69",
    "body": "1.è¿™ä¸ªæ¨¡å‹è®­ç»ƒå¥½åï¼Œä¸Šä¸‹æ–‡è¾“å…¥çš„é•¿åº¦æœ€é•¿èƒ½åˆ°å¤šå°‘ï¼Œæ˜¯ç”±max_seq_len: int = 512 æ¥æ§åˆ¶çš„å—ï¼Ÿ\r\n2.è¿™ä¸ªæ¨¡å‹è®­ç»ƒå¥½åï¼Œè¾“å‡ºçš„æœ€å¤§é•¿åº¦æ˜¯ç”±å“ªé‡Œæ§åˆ¶çš„å‘¢ï¼Ÿè°¢è°¢",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/69/comments",
    "author": "cqcracked",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-10-17T07:39:03Z",
        "body": "> 1.è¿™ä¸ªæ¨¡å‹è®­ç»ƒå¥½åï¼Œä¸Šä¸‹æ–‡è¾“å…¥çš„é•¿åº¦æœ€é•¿èƒ½åˆ°å¤šå°‘ï¼Œæ˜¯ç”±max_seq_len: int = 512 æ¥æ§åˆ¶çš„å—ï¼Ÿ\n> 2.è¿™ä¸ªæ¨¡å‹è®­ç»ƒå¥½åï¼Œè¾“å‡ºçš„æœ€å¤§é•¿åº¦æ˜¯ç”±å“ªé‡Œæ§åˆ¶çš„å‘¢ï¼Ÿè°¢è°¢\n\næ˜¯çš„ç”±å®ƒå†³å®š"
      },
      {
        "user": "cqcracked",
        "created_at": "2024-10-17T08:05:59Z",
        "body": "è°¢è°¢ï¼Œæˆ‘çœ‹äº†ä¸‹ä»£ç ï¼Œminimindæ¯”è¾ƒæ¸…æ¥šäº†ã€‚å…¶å®ƒå¤§æ¨¡å‹çš„è¾“å…¥è¾“å‡ºé•¿åº¦ä¹Ÿæ˜¯è¿™ä¹ˆç›´æ¥é™åˆ¶å—ï¼Ÿéº»çƒ¦è§£é‡Šä¸€ä¸‹å‘¢ï¼Ÿè¯è¯´ropeä¹Ÿæœ‰å¤–æ¨èƒ½åŠ›å‘¢\r\n\r\n\r\n\r\n\r\n------------------&nbsp;åŸå§‹é‚®ä»¶&nbsp;------------------\r\nå‘ä»¶äºº:                                                                                                                        \"jingyaogong/minimind\"                                                                                    ***@***.***&gt;;\r\nå‘é€æ—¶é—´:&nbsp;2024å¹´10æœˆ17æ—¥(æ˜ŸæœŸå››) ä¸‹åˆ3:39\r\n***@***.***&gt;;\r\n***@***.******@***.***&gt;;\r\nä¸»é¢˜:&nbsp;Re: [jingyaogong/minimind] æ¨¡å‹çš„è¾“å…¥è¾“å‡ºé•¿åº¦ (Issue #69)\r\n\r\n\r\n\r\n\r\n\r\n  \r\n1.è¿™ä¸ªæ¨¡å‹è®­ç»ƒå¥½åï¼Œä¸Šä¸‹æ–‡è¾“å…¥çš„é•¿åº¦æœ€é•¿èƒ½åˆ°å¤šå°‘ï¼Œæ˜¯ç”±max_seq_len: int = 512 æ¥æ§åˆ¶çš„å—ï¼Ÿ\r\n 2.è¿™ä¸ªæ¨¡å‹è®­ç»ƒå¥½åï¼Œè¾“å‡ºçš„æœ€å¤§é•¿åº¦æ˜¯ç”±å“ªé‡Œæ§åˆ¶çš„å‘¢ï¼Ÿè°¢è°¢\r\n  \r\næ˜¯çš„ç”±å®ƒå†³å®š\r\n \r\nâ€”\r\nReply to this email directly, view it on GitHub, or unsubscribe.\r\nYou are receiving this because you authored the thread.Message ID: ***@***.***&gt;"
      },
      {
        "user": "jingyaogong",
        "created_at": "2024-10-17T09:54:13Z",
        "body": "max_seq_lenåªèµ·åˆ°æˆªæ–­ä½œç”¨ï¼Œå…·ä½“ä»å“ªæˆª ï¼Œæ€ä¹ˆæˆªï¼Œæˆªå¤šå°‘å¹¶ä¸é‡è¦ï¼Œåªæ˜¯é•¿åº¦ä¸ºäº†æ¨¡å‹è´¨é‡æœåŠ¡è€Œå·²ã€‚è®¾ç½®åˆ°10000ä¸‡ä¹Ÿæ²¡ä»»ä½•å…³ç³»ï¼Œè¾“å…¥è¾“å‡ºè‡³å°‘'ä¸ä¼šæŠ¥é”™'ã€‚\n\né‚£ä¹ˆè¾“å…¥å¤ªé•¿å½±å“çš„æ˜¯ï¼šæ¨¡å‹è®­ç»ƒåªè§è¿‡çš„512ä»¥å†…ç¼–ç é•¿åº¦ï¼Œä»¥å¤–çš„æ–‡æœ¬åœ¨è®­ç»ƒä¹‹å¤–ï¼Œä»æ²¡è§è¿‡ï¼Œæ€§èƒ½ä¼šå¤§æ‰“æŠ˜æ‰£ç½¢äº†ã€‚ropeé æ’å€¼åšé•¿åº¦å¤–æ¨ï¼Œç¼“è§£è¿™ç§å½±å“è€Œå·²ã€‚\n\nã€Œå¤–ä¸å¤–æ¨ã€å½±å“çš„æ˜¯è´¨é‡\n\nå’Œä½ é—®é¢˜ã€Œæ€æ ·é™åˆ¶è¾“å…¥è¾“å‡ºé•¿åº¦ã€æœ¬èº«æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚"
      }
    ]
  },
  {
    "number": 67,
    "title": "768çˆ†æ˜¾å­˜",
    "created_at": "2024-10-15T08:13:56Z",
    "closed_at": "2024-10-18T06:16:20Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/67",
    "body": "ä½¿ç”¨ä¸¤ä¸ªA800ï¼ˆ80Gï¼‰è®­ç»ƒ768çš„æ¨¡å‹ï¼Œåœ¨åŠ è½½æ•°æ®çš„æ—¶å€™ï¼Œç»å¸¸å‡ºç°çˆ†æ˜¾å­˜çš„é—®é¢˜ï¼Œå¶å°”ä¸æŠ¥èƒ½æ­£å¸¸è®­ç»ƒèµ·æ¥ï¼Œåªå 30Gæ˜¾å­˜ï¼Œä¸çŸ¥é“è¿™ä¸ªé—®é¢˜æœ‰æ²¡æœ‰é‡åˆ°è¿‡ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/67/comments",
    "author": "yhl41001",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-10-15T09:43:53Z",
        "body": " æ²¡æœ‰é‡åˆ°è¿‡ï¼Œæœ‰æ²¡æœ‰æ›´å¤šå¯å‚è€ƒçš„æ—¥å¿—æˆ–å…¶ä»–ä¿¡æ¯ã€‚\r\n\r\nå¦å¤–æ¨¡å‹æ˜¯768*16\r\n\r\nè¿˜æ˜¯768*16*Nçš„MoE"
      },
      {
        "user": "yhl41001",
        "created_at": "2024-10-15T13:13:20Z",
        "body": "æ¨¡å‹æ˜¯768*16ï¼Œæˆ‘è§‚å¯Ÿåˆ°äº†æ˜¾å­˜å¢é•¿è¶…å‡ºæ˜¾å¡çš„æ˜¾å­˜äº†ã€‚"
      },
      {
        "user": "jingyaogong",
        "created_at": "2024-10-15T14:23:19Z",
        "body": "> æ¨¡å‹æ˜¯768*16ï¼Œæˆ‘è§‚å¯Ÿåˆ°äº†æ˜¾å­˜å¢é•¿è¶…å‡ºæ˜¾å¡çš„æ˜¾å­˜äº†ã€‚\r\n\r\n`max_seq_len` æœ‰æ²¡æœ‰æ”¹è¿‡\r\n\r\né™ä½ `batch_size` ç›´åˆ°å¯ä»¥è¿è¡Œ"
      },
      {
        "user": "yhl41001",
        "created_at": "2024-10-16T07:49:48Z",
        "body": "> > æ¨¡å‹æ˜¯768*16ï¼Œæˆ‘è§‚å¯Ÿåˆ°äº†æ˜¾å­˜å¢é•¿è¶…å‡ºæ˜¾å¡çš„æ˜¾å­˜äº†ã€‚\r\n> \r\n> `max_seq_len` æœ‰æ²¡æœ‰æ”¹è¿‡\r\n> \r\n> é™ä½ `batch_size` ç›´åˆ°å¯ä»¥è¿è¡Œ\r\n\r\nè¿™ä¸¤ä¸ªéƒ½æ²¡æ”¹è¿‡ï¼Œç°åœ¨æ¨¡å‹åœ¨è®­ç»ƒï¼Œç­‰è®­ç»ƒç©äº†æˆ‘æœ‰æ—¶é—´çœ‹ä¸€ä¸‹æ˜¯æ€ä¹ˆå›äº‹ï¼"
      }
    ]
  },
  {
    "number": 58,
    "title": "å°å“¥å“¥å†æŠŠé‡åŒ–åŠ å…¥è¿›å»ï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸå°±å®Œæ•´äº†",
    "created_at": "2024-10-03T03:42:23Z",
    "closed_at": "2024-10-05T01:47:18Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/58",
    "body": null,
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/58/comments",
    "author": "cqcracked",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-10-05T01:47:18Z",
        "body": "OKï¼Œæˆ‘å°è¯•ä¸€ä¸‹"
      }
    ]
  },
  {
    "number": 56,
    "title": "å¦‚ä½•å¾®è°ƒç”¨äºä¸‹æ¸¸ä»»åŠ¡ï¼Ÿ",
    "created_at": "2024-10-01T09:14:33Z",
    "closed_at": "2024-10-18T06:17:18Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/56",
    "body": null,
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/56/comments",
    "author": "h2h2h",
    "comments": [
      {
        "user": "h2h2h",
        "created_at": "2024-10-01T09:19:15Z",
        "body": "è®­ç»ƒé›†æ˜¯csvæ–‡ä»¶ï¼Œæœ‰history,qå’Œaä¸‰åˆ—ï¼Œå…¶ä¸­historyæ˜¯ç©ºåˆ—è¡¨ã€‚å°†å…¶è¾“å…¥4-lora_sft.pyä¸­ï¼Œå› ä¸ºè®­ç»ƒé›†æ¯”è¾ƒå°ï¼Œå°±æŠŠ--save_intervalç”±1000æ”¹æˆäº†100ï¼Œè®­ç»ƒå®Œæˆåå°†å¾—åˆ°çš„safetensorsæ”¾åˆ°2-eval.pyä¸­è¾“å‡ºç›´æ¥èƒ¡è¨€ä¹±è¯­äº†...æœ¬äººæ˜¯å°ç™½ï¼Œè¯šæ³åœ°è¯·æ•™è¯¥å¦‚ä½•å»å¾®è°ƒå‘¢ï¼Ÿé—®é¢˜å‡ºåœ¨äº†å“ªé‡Œï¼Ÿè°¢è°¢ğŸ™"
      },
      {
        "user": "jingyaogong",
        "created_at": "2024-10-01T15:50:55Z",
        "body": "æ— æ³•ä»ä»¥ä¸Šæè¿°è·å–ä»»ä½•å®šé‡ä¿¡æ¯ï¼Œä¾‹å¦‚\r\næ•°æ®é›†æ¡æ•°ï¼Ÿå­¦ä¹ ç‡ï¼Ÿä¸‹æ¸¸ä»»åŠ¡ç±»å‹ï¼Ÿâ€œèƒ¡è¨€ä¹±è¯­â€æŒ‡çš„æ˜¯ä»€ä¹ˆç¨‹åº¦ï¼ŸLoRAå¾®è°ƒå‰çš„åŸºåº§æ•ˆæœå¦‚ä½•ï¼Ÿç”¨full_sftæœ‰æ²¡æœ‰è¯•è¿‡ï¼Ÿ\r\n\r\nç­‰ç­‰\r\n\r\nå¸Œæœ›è¿›ä¸€æ­¥æä¾›åˆ†æé—®é¢˜ğŸ˜Š"
      },
      {
        "user": "h2h2h",
        "created_at": "2024-10-02T04:20:39Z",
        "body": "è°¢è°¢å›å¤ï¼æˆ‘çš„æè¿°ç¡®å®å¤ªä¸šä½™çš„ã€‚ã€‚ã€‚æ•°æ®é›†å¤§æ¦‚åªæœ‰1000æ¡å·¦å³ï¼Œå­¦ä¹ ç‡æ˜¯defaultçš„1e-4ï¼Œæƒ³å¾®è°ƒç”¨äºç‰¹å®šé¢†åŸŸçš„ä¸‰å…ƒç»„æŠ½å–ï¼Œmodelå’Œtokenizerçš„è·¯å¾„å¡«çš„æ˜¯ä½¿ç”¨huggingface-cliä¸‹è½½ä¸‹æ¥çš„minimind-v1-smallã€‚å†æ¬¡æŠ±æ­‰ï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å‘issuesï¼Œç¡®å®å¤ªä¸šä½™äº†ğŸ¤¦\r\n"
      },
      {
        "user": "jingyaogong",
        "created_at": "2024-10-02T06:27:10Z",
        "body": "> è°¢è°¢å›å¤ï¼æˆ‘çš„æè¿°ç¡®å®å¤ªä¸šä½™çš„ã€‚ã€‚ã€‚æ•°æ®é›†å¤§æ¦‚åªæœ‰1000æ¡å·¦å³ï¼Œå­¦ä¹ ç‡æ˜¯defaultçš„1e-4ï¼Œæƒ³å¾®è°ƒç”¨äºç‰¹å®šé¢†åŸŸçš„ä¸‰å…ƒç»„æŠ½å–ï¼Œmodelå’Œtokenizerçš„è·¯å¾„å¡«çš„æ˜¯ä½¿ç”¨huggingface-cliä¸‹è½½ä¸‹æ¥çš„minimind-v1-smallã€‚å†æ¬¡æŠ±æ­‰ï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å‘issuesï¼Œç¡®å®å¤ªä¸šä½™äº†ğŸ¤¦\r\n\r\næ²¡ä»»ä½•å…³ç³»ï¼Œfeel freeï¼Œæœ‰é—®é¢˜éšæ„äº¤æµå³å¯\r\n\r\nç°åœ¨çš„é—®ç­”æ˜¯ä»€ä¹ˆæ ·çš„æ•ˆæœï¼Œæœ‰æ²¡æœ‰æ ·ä¾‹\r\n\r\nå°è¯•ä¸€ä¸‹æŠŠå­¦ä¹ ç‡æ”¹æˆ1e-6åŠä»¥ä¸‹"
      }
    ]
  },
  {
    "number": 51,
    "title": "1-pretrainä¸­æ–°å¢çš„loss maskä¸ç°æœ‰F.cross_entropyå‚æ•°ä¸åŒ¹é…é—®é¢˜",
    "created_at": "2024-09-29T07:19:41Z",
    "closed_at": "2024-10-01T16:02:43Z",
    "labels": [
      "bug"
    ],
    "url": "https://github.com/jingyaogong/minimind/issues/51",
    "body": "1.å¦‚é¢˜ï¼Œä½œè€…æ–°åŠ çš„maskå¤„ç†ä¸è¶³ä¸€ä¸ªmax_lençš„æƒ…å†µä¸‹çš„lossè®¡ç®—é—®é¢˜ï¼Œä½†model.pyè®¡ç®—lossè¿˜æ˜¯reduceæ¨¡å¼ï¼Œè¿™ä¸ªlossè®¡ç®—å‡ºæ¥å·²ç»æ˜¯ä¸€ä¸ªæ ‡é‡äº†ï¼Œåç»­maskå°±æ— æ•ˆäº†ï¼Œ\r\n2.æ˜¯ä¸æ˜¯å¯ä»¥å°†F.cross_entropyå¢åŠ ä¸Šï¼ˆsize_average=False, reduce=Falseï¼‰è¿™ä¸¤å‚æ•°",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/51/comments",
    "author": "lesterlee89",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-09-29T08:59:04Z",
        "body": "æ˜¯çš„ï¼Œå®Œå…¨æ­£ç¡®ï¼Œä¸åŠ , reduction='none' çš„è¯å®ƒç›´æ¥è¿”å›ä¸€ä¸ªå¹³å‡æ ‡é‡æŸå¤±ï¼Œå·²æ›´æ–°bug\r\n\r\nè°¢è°¢ä½ çš„ç»†å¿ƒå‘ç°ï¼ï¼ï¼\r\n"
      }
    ]
  },
  {
    "number": 46,
    "title": "é‚®ä»¶å›å¤",
    "created_at": "2024-09-25T03:45:51Z",
    "closed_at": "2024-09-25T06:35:29Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/46",
    "body": "æ‚¨å¥½ï¼Œå°Šæ•¬çš„MiniMindæ‰€æœ‰è€…ï¼Œæˆ‘å·²ç»å‘æ‚¨çš„é‚®ç®±gongjy.cs@gmail.comå‘é€äº†å…³äºAccelerateçš„é‚®ä»¶ï¼Œéå¸¸æœŸå¾…æ‚¨çš„å›å¤ã€‚",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/46/comments",
    "author": "iomgaa-ycz",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-09-25T04:31:21Z",
        "body": "æŠ±æ­‰æˆ‘æŸ¥çœ‹äº†ä¸€ä¸‹ï¼Œ\r\n`453***883@qq.com` æ˜¯ä½ å—\r\nå¦‚æœä¸æ˜¯ï¼Œå¯èƒ½gmailä¸¢é‚®ä»¶äº†ï¼Œè²Œä¼¼æ²¡å‘ç°å…¶å®ƒé‚®ä»¶ï¼Œå¯ä»¥å‘åˆ°gongjy.cs@qq.comé‡æ–°è”ç³»æˆ‘\r\nå¦‚æœæ˜¯ï¼Œæˆ‘é©¬ä¸Šå›å¤"
      },
      {
        "user": "iomgaa-ycz",
        "created_at": "2024-09-25T06:19:10Z",
        "body": "453***883@qq.comå¹¶ä¸æ˜¯æˆ‘çš„é‚®ç®±ï¼Œæˆ‘æ˜¯ä¸€ä¸ªgmailé‚®ç®±ã€‚ç°å·²ç»é‡æ–°å‘[gongjy.cs@qq.com](mailto:gongjy.cs@qq.com)å‘é€äº†é‚®ä»¶ã€‚"
      }
    ]
  },
  {
    "number": 44,
    "title": "ä¿®å¤wandb bug & æ·»åŠ äº†argparse",
    "created_at": "2024-09-24T04:49:02Z",
    "closed_at": "2024-09-24T06:10:06Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/pull/44",
    "body": "1. ä¿®å¤äº†åœ¨torchrunå‘½ä»¤ä¸‹wandbä¼šæ‰§è¡Œä¸¤æ¬¡åˆå§‹åŒ–çš„bug\r\n2. æ·»åŠ äº†argparseï¼Œä»¥æ–¹ä¾¿åœ¨ç»ˆç«¯æ§åˆ¶è¶…å‚æ•°\r\n\r\næ¥ä¸‹æ¥æˆ‘å¸Œæœ›æ·»åŠ Acclerateï¼Œä»¥å®ç°æ¯”torchrunæ›´å¥½çš„å¤šgpuè®­ç»ƒï¼Œä½†æœ‰ä¸€ä¸ªç»†èŠ‚å¸Œæœ›ä¸æ‚¨ç¡®è®¤ï¼Œæˆ‘çš„å¾®ä¿¡å·ycz050516-110720",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/44/comments",
    "author": "iomgaa-ycz",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-09-24T06:15:31Z",
        "body": "> 1. ä¿®å¤äº†åœ¨torchrunå‘½ä»¤ä¸‹wandbä¼šæ‰§è¡Œä¸¤æ¬¡åˆå§‹åŒ–çš„bug\r\n> 2. æ·»åŠ äº†argparseï¼Œä»¥æ–¹ä¾¿åœ¨ç»ˆç«¯æ§åˆ¶è¶…å‚æ•°\r\n> \r\n> æ¥ä¸‹æ¥æˆ‘å¸Œæœ›æ·»åŠ Acclerateï¼Œä»¥å®ç°æ¯”torchrunæ›´å¥½çš„å¤šgpuè®­ç»ƒï¼Œä½†æœ‰ä¸€ä¸ªç»†èŠ‚å¸Œæœ›ä¸æ‚¨ç¡®è®¤ï¼Œæˆ‘çš„å¾®ä¿¡å·ycz050516-110720\r\n\r\ngongjy.cs@qq.com\r\n@iomgaa-ycz æŠ±æ­‰å¾®ä¿¡å·ç”¨äºå…¶å®ƒäº‹åŠ¡ï¼Œå·¥ä½œå’Œäº¤æµä¸ªäººåå‘ä½¿ç”¨é‚®ä»¶æ²Ÿé€šï¼Œæ¬¢è¿è®¨è®ºä»»ä½•äº‹å®œ"
      },
      {
        "user": "iomgaa-ycz",
        "created_at": "2024-09-25T02:22:05Z",
        "body": "æ‚¨å¥½ï¼Œè¯·é—®ã€‚å¯ä¸å¯ä»¥å›å¤ä¸€ä¸‹é‚®ä»¶ï¼Œä¸ç„¶æˆ‘æ²¡åŠæ³•å¼€å±•è¿›ä¸€æ­¥çš„å·¥ä½œã€‚éå¸¸æ„Ÿè°¢æ‚¨çš„å¸®åŠ©ï¼"
      },
      {
        "user": "jingyaogong",
        "created_at": "2024-09-25T04:57:51Z",
        "body": "> æ‚¨å¥½ï¼Œè¯·é—®ã€‚å¯ä¸å¯ä»¥å›å¤ä¸€ä¸‹é‚®ä»¶ï¼Œä¸ç„¶æˆ‘æ²¡åŠæ³•å¼€å±•è¿›ä¸€æ­¥çš„å·¥ä½œã€‚éå¸¸æ„Ÿè°¢æ‚¨çš„å¸®åŠ©ï¼\r\n\r\n@iomgaa-ycz æŠ±æ­‰æˆ‘æŸ¥çœ‹äº†ä¸€ä¸‹ï¼Œ\r\n`453***883@qq.com` æ˜¯ä½ å—\r\nå¦‚æœä¸æ˜¯ï¼Œå¯èƒ½gmailä¸¢é‚®ä»¶äº†ï¼Œè²Œä¼¼æ²¡å‘ç°å…¶å®ƒé‚®ä»¶ï¼Œå¯ä»¥å‘åˆ°gongjy.cs@qq.comé‡æ–°è”ç³»æˆ‘\r\nå¦‚æœæ˜¯ï¼Œå·²ç»å›å¤"
      }
    ]
  },
  {
    "number": 33,
    "title": "å¾®è°ƒéœ€è¦è‡³å°‘å¤šå°‘æ¡æ•°æ®ï¼Ÿ",
    "created_at": "2024-09-18T02:51:59Z",
    "closed_at": "2024-09-18T05:04:34Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/33",
    "body": "å¾®è°ƒéœ€è¦è‡³å°‘å¤šå°‘æ¡æ•°æ®ï¼Ÿ",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/33/comments",
    "author": "charmowen",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-09-18T05:00:00Z",
        "body": "çœ‹ç›®çš„ï¼Œå…¨å‚SFTä¸ç”¨æ¥å¢åŠ é¢†åŸŸçŸ¥è¯†ï¼Œè¿™éƒ¨åˆ†ç†åº”åœ¨PTé˜¶æ®µã€‚\r\n\r\nSFTåº”è¯¥æ˜¯é’ˆå¯¹æŸç§é—®æ³•æ€ä¹ˆå›ç­”ï¼Œæˆ–è€…ä¸‹æ¸¸ä»»åŠ¡ã€‚\r\n\r\nLora-FTæ˜¯ä¸€ç§å¤–æŒ‚ï¼Œå¯ä»¥ä¸æŸå¤±åŸæœ‰çš„å›ç­”èƒ½åŠ›ã€‚\r\n\r\nä½†å¦‚æœè¦å…¨é‡SFTçš„è¯ï¼Œéœ€è¦åˆ†é˜¶æ®µæ··åˆï¼Œæ¯”å¦‚ä¸€å¼€å§‹10%çš„é¢†åŸŸåŠ 90çš„é€šç”¨ï¼Œä¸€ç‚¹ç‚¹å¢åŠ åˆ°50%çš„é¢†åŸŸï¼ˆæ•°å­—æ˜¯çŒœçš„ï¼‰å¦åˆ™ä¸€å®šä¼šæŸå¤±åŸºå‡†èƒ½åŠ›ã€‚\r\n\r\næ­¤å¤–ï¼Œå¦‚æœæœ‰ç™¾ä¸‡æ•°æ®é‡çš„è¯ï¼Œä¸€ä¸ªepochè¶³å¤Ÿäº†ã€‚å¦‚æœåªæœ‰å‡ åƒä¸Šä¸‡çš„æ•°æ®é‡ï¼Œå¯ä»¥å°è¯•1~3ä¸ªepochï¼Œä¸è¦å¤ªå¤šï¼Œå®¹æ˜“è¿‡æ‹Ÿåˆã€‚"
      }
    ]
  },
  {
    "number": 32,
    "title": "å¤§ä½¬ï¼Œå‘ç°ä¸€ä¸ªå°é—®é¢˜ï¼Œ3-full_sft.pyä¸­ åŠ è½½é¢„è®­ç»ƒæƒé‡çš„ä»£ç è¢«æ³¨é‡Šæ‰äº†ï¼Œæ‰€ä»¥å¯èƒ½å¯¼è‡´æœ‰å…¶ä»–å¤§ä½¬å¾®è°ƒä¹‹åç»“æœä¹Ÿä¸å¤ªå¥½ã€‚",
    "created_at": "2024-09-17T15:25:57Z",
    "closed_at": "2024-09-18T05:04:19Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/issues/32",
    "body": "if model_from == 1:\r\n        model = Transformer(lm_config)\r\n        # åŠ è½½é¢„è®­ç»ƒæƒé‡çš„ä»£ç è¢«æ³¨é‡Šæ‰äº†\r\n        # ckp = f'./out/pretrain_{lm_config.dim}{moe_path}.pth'\r\n        # state_dict = torch.load(ckp, map_location=device)\r\n        # unwanted_prefix = '_orig_mod.'\r\n        # for k, v in list(state_dict.items()):\r\n        #     if k.startswith(unwanted_prefix):\r\n        #         state_dict[k[len(unwanted_prefix):]] = state_dict.pop(k)\r\n        # model.load_state_dict(state_dict, strict=False)\r\n    else:\r\n        model = AutoModel.from_pretrained('./minimind', trust_remote_code=True)",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/32/comments",
    "author": "sunxinti",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-09-18T05:03:20Z",
        "body": "è¿™ä¸ªæ˜¯æ€•å¾ˆå¤šäººæ²¡æœ‰å¯¹åº”çš„.pthæƒé‡æ–‡ä»¶å°±ç›´æ¥åšSFTï¼Œåº”è¯¥ä¸ä¼šæœ‰äººæŠŠè¿™é‡Œç»™æ¼æ‰å§ğŸ˜‚\r\n\r\nè¿˜æ˜¯è§£å¼€æ³¨é‡Šå§~"
      }
    ]
  },
  {
    "number": 29,
    "title": "Update my_openai_api.py å¿½ç•¥å®¢æˆ·ç«¯ä¼ æ¥çš„æœªçŸ¥å­—æ®µ",
    "created_at": "2024-09-15T07:40:23Z",
    "closed_at": "2024-09-15T09:34:57Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/pull/29",
    "body": "åƒdifyè¿™æ ·çš„å®¢æˆ·ç«¯ï¼Œä¼šä¼ å…¥ä¸€ä¸ªç”¨æˆ·åºåˆ—å·, éœ€è¦å…¼å®¹ä¸€ä¸‹,é¿å…æŠ¥é”™.\r\n```\r\nrequest.json={'model': 'minimind-small-T', 'stream': True, 'temperature': 0.7, 'messages': [{'role': 'user', 'content': '1'}], 'user': 'cdc1f28b-4bb3-4326-ac4b-1cf78e0a6a3b'}\r\n```",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/29/comments",
    "author": "chuanzhubin",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-09-15T09:35:14Z",
        "body": "Thank you, merged"
      }
    ]
  },
  {
    "number": 23,
    "title": "å…³äºPretrainDatasetè¯»å–è®­ç»ƒæ•°æ®çš„é—®é¢˜",
    "created_at": "2024-09-14T07:17:14Z",
    "closed_at": "2024-09-16T15:14:50Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/jingyaogong/minimind/issues/23",
    "body": "\r\n```python\r\nclass PretrainDataset(Dataset):\r\n    def __init__(self, data_path_lst, max_length=512, memmap=False):\r\n        super().__init__()\r\n        #\r\n        if memmap:\r\n            with open(data_path_lst[0], 'r') as f:\r\n                nbytes = f.seek(0, 2)\r\n                flen = f.tell() // np.dtype('uint16').itemsize\r\n            self.data = np.memmap(data_path_lst[0], dtype=np.dtype('uint16'), shape=(flen // max_length, max_length))\r\n        else:\r\n            data_lst = []\r\n            for data_path in data_path_lst:\r\n                with open(data_path, 'rb') as f:\r\n                    data = np.fromfile(f, dtype=np.uint16)\r\n                    data_lst.append(data)\r\n            data = np.concatenate(data_lst)\r\n            data = data[:max_length * int(len(data) / max_length)]\r\n            # np.random.shuffle(data)\r\n            self.data = data.reshape(-1, max_length)\r\n```\r\n \r\n\r\nä»ä»£ç é€»è¾‘ä¸Šçœ‹ï¼ŒPretrainDatasetè¯»å–binæ•°æ®çš„æ—¶å€™ï¼ŒæŒ‰ç…§512çš„é•¿åº¦ä½œä¸ºä¸€æ¡æ•°æ®äº†å¥½åƒã€‚\r\nä½†æ˜¯åœ¨æ•°æ®å­˜å‚¨çš„æ—¶å€™ï¼Œå„æ¡æ•°æ®å¹¶æ²¡æœ‰æ ¼å¼åŒ–æˆ512çš„ç¨‹åº¦å†å­˜å…¥binæ–‡ä»¶ä¸­ï¼Œå¦‚æœæŒ‰ç…§512é•¿åº¦è¯»å–å‡ºæ¥ï¼Œè®­ç»ƒæ•°æ®å¯èƒ½æ²¡æœ‰ä¸¥æ ¼æŒ‰ç…§è®­ç»ƒæ•°æ®é›†çš„æ¡ç›®è¿›è¡Œåˆ’åˆ†å§ã€‚\r\n",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/23/comments",
    "author": "jasonheyh",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-09-14T07:42:44Z",
        "body": "æ˜¯çš„æ²¡æœ‰æŒ‰ç…§é•¿åº¦åˆ’åˆ†ï¼š\r\n```\r\næ–‡æœ¬1</s>æ–‡æœ¬2</s>æ–‡æœ¬3</s>æ–‡æœ¬4</s>...\r\n```\r\n\r\nä¾‹å¦‚\r\n```\r\nåºŠå‰æ˜æœˆå…‰</s>ç–‘æ˜¯åœ°ä¸Šéœœ</s>ä¸¾å¤´æœ›æ˜æœˆ</s>ä½å¤´æ€æ•…ä¹¡</s>\r\n```\r\n\r\nè®­ç»ƒå¦‚æœ`context_length=10`\r\nç”¨è¿™10ä¸ªtokenï¼š\r\n```\r\nåºŠå‰æ˜æœˆå…‰</s>ç–‘æ˜¯åœ°ä¸Š\r\n```\r\n\r\næˆ–è€…æ˜¯è¿™10ä¸ªtokenï¼š\r\n```\r\nåœ°ä¸Šéœœ</s>ä¸¾å¤´æœ›æ˜æœˆ</s>\r\n```\r\n\r\nè™½ç„¶çœ‹èµ·æ¥ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¥å­ï¼Œä½†è¾“å…¥åšé¢„è®­ç»ƒéƒ½æ˜¯å¯ä»¥çš„ï¼Œä¼šæŸå¤±ä¸€äº›æ–‡æœ¬é¦–å°¾çš„ä¿¡æ¯ã€‚\r\nåœ¨è¿™äº›çª—å£å†…æ•æ‰å±€éƒ¨ä¸Šä¸‹æ–‡ä¸­çš„ä¾èµ–å…³ç³»ã€‚å³ä½¿çª—å£ä¹‹é—´æ²¡æœ‰é‡å ï¼Œæ¨¡å‹åœ¨å­¦æ–‡æœ¬ä¸­å±€éƒ¨çš„è¯­è¨€æ¨¡å¼ã€‚å› ä¸ºæœ‰ </s> åˆ†éš”ç¬¦ï¼Œå¯ä»¥æ˜ç¡®æ¯ä¸ªå¥å­æˆ–æ®µè½çš„è¾¹ç•Œã€‚è¯´ç™½äº†å°±æ˜¯ç›´æ¥ç»ƒä¹ æ¥é¾™ã€‚\r\n\r\nå½“ç„¶äº†ï¼Œè¿™é‡Œå¦‚æœä¸¥æ ¼ç¡®ä¿å¥å­ä¹‹é—´padding max_lengthçš„ç©ºç¼ºéƒ¨åˆ†ï¼Œç›¸å½“äºè¡¥ä¸Šå¥å¤´å¥å°¾çš„å†…å®¹ï¼Œæ•ˆæœä¼šæ›´å¥½ä¸€äº›ï¼Œä½†å¾ˆæœ‰é™ã€‚\r\n\r\nå¥å­å¦‚æœåªæœ‰100é•¿åº¦ï¼Œè¡¥é½412ä¸ªç©ºç™½tokenå‡‘åˆ°512ï¼Œç”šè‡³è¡¥924åˆ°1024ï¼Œæ–‡ä»¶å°±å†—ä½™å¾—æ¯”è¾ƒå¤§äº†ã€‚\r\n\r\nè¿™é‡Œå°±æ˜¯ä¸ºäº†èŠ‚çœç©ºé—´ç‰ºç‰²è½»å¾®çš„é¢„è®­ç»ƒæ•ˆæœäº†ã€‚"
      },
      {
        "user": "jasonheyh",
        "created_at": "2024-09-14T08:08:03Z",
        "body": "è°¢è°¢ï¼Œæ˜ç™½äº†ï¼Œè§£é‡Šçš„éå¸¸æ˜ç™½ã€‚"
      },
      {
        "user": "jingyaogong",
        "created_at": "2024-09-14T08:19:12Z",
        "body": "> è°¢è°¢ï¼Œæ˜ç™½äº†ï¼Œè§£é‡Šçš„éå¸¸æ˜ç™½ã€‚\r\n\r\nå¥½çš„ï¼ŒNo Thanks\r\n\r\næœ‰ä»€ä¹ˆé—®é¢˜éšæ—¶ç»§ç»­äº¤æµ~"
      }
    ]
  },
  {
    "number": 17,
    "title": "è™½ç„¶å¾ˆæœ‰æƒ³æ³•ï¼Œä½†æ˜¯è¿™ç§æ¨¡å‹åªèƒ½å½“æ•™å­¦ç”¨äº†ï¼Œå®é™…ç”Ÿäº§è°æ•¢ç”¨è¿™ä¸ªï¼Ÿ",
    "created_at": "2024-09-13T08:55:19Z",
    "closed_at": "2024-09-13T13:48:48Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/jingyaogong/minimind/issues/17",
    "body": null,
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/17/comments",
    "author": "GZ315200",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-09-13T09:12:55Z",
        "body": "å¯¹ï¼Œåªèƒ½æ˜¯ç”¨æ¥å­¦ä¹ ï¼Œå®ƒä¹Ÿä¸å¯èƒ½å‡ºç°åœ¨å®é™…ç”Ÿäº§é‡Œã€‚\r\næ— è®ºæ˜¯å‚æ•°ä½“é‡è¿˜æ˜¯è®­ç»ƒæ•°æ®é‡éƒ½å·®äº†ä¸Šåƒå€ã€‚\r\nåŸºæœ¬ä¸Šæ‰€æœ‰å°äº4Bçš„æ¨¡å‹è¿˜ä¸å…·å¤‡é€»è¾‘ï¼Œä¸è°ˆç”Ÿäº§åŠ›ã€‚"
      }
    ]
  },
  {
    "number": 3,
    "title": "è¿™é¡¹ç›®å¾ˆå¥½ï¼Œæ˜¯æˆ‘æ„Ÿå…´è¶£çš„",
    "created_at": "2024-09-07T04:36:58Z",
    "closed_at": "2024-09-12T06:03:49Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/jingyaogong/minimind/issues/3",
    "body": null,
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/3/comments",
    "author": "844704781",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-09-07T04:47:28Z",
        "body": "æ„Ÿè°¢æ”¯æŒ"
      }
    ]
  },
  {
    "number": 2,
    "title": "Update requirements.txt",
    "created_at": "2024-09-05T07:10:55Z",
    "closed_at": "2024-09-05T07:28:54Z",
    "labels": [],
    "url": "https://github.com/jingyaogong/minimind/pull/2",
    "body": "Fix conflict with flask and jinja",
    "comments_url": "https://api.github.com/repos/jingyaogong/minimind/issues/2/comments",
    "author": "MuWinds",
    "comments": [
      {
        "user": "jingyaogong",
        "created_at": "2024-09-05T07:30:03Z",
        "body": "Okay, thank you very much for your submission."
      }
    ]
  }
]