[
  {
    "number": 36560,
    "title": "Policy enforcer do not handle suppressed server resources",
    "created_at": "2025-01-17T11:33:40Z",
    "closed_at": "2025-01-20T11:01:05Z",
    "labels": [
      "area/authorization-services",
      "kind/bug",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "release/26.2.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/36560",
    "body": "### Before reporting an issue\n\n- [x] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nauthorization-services\n\n### Describe the bug\n\nIn some scenarios, a resource may have been removed of the KC server but still exists in the path cache of the policy enforcer. Consequently, the policy enforcer cannot obtain a permission token from the KC server for these deleted resources and throw a runtime error.\n\n### Version\n\n26.0.7\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nThe policy enforcer should evict/update resources from the cache.\n\n### Actual behavior\n\nPermission request for deleted resources throw a runtime error from the policy enforcer\n\n### How to Reproduce?\n\n1. Configure an service with authz + policy enforcer + cache enabled\n2. Ask for permission to access to a protected resource and obtain a permission ticket\n3. Remove the protected resource in server\n4. Ask again for permission to the service to access to the deleted protected resource => 500 error\n\n` Error creating permission ticket\n2025-01-16T10:43:57 \tat org.keycloak.authorization.client.util.Throwables.retryAndWrapExceptionIfNecessary(Throwables.java:91) ~[keycloak-authz-client-26.0.3.jar:26.0.3]\n2025-01-16T10:43:57 \tat org.keycloak.authorization.client.resource.PermissionResource.create(PermissionResource.java:121) ~[keycloak-authz-client-26.0.3.jar:26.0.3]\n2025-01-16T10:43:57 \tat org.keycloak.authorization.client.resource.PermissionResource.create(PermissionResource.java:96) ~[keycloak-authz-client-26.0.3.jar:26.0.3]\n2025-01-16T10:43:57 \tat org.keycloak.adapters.authorization.PolicyEnforcer.getPermissionTicket(PolicyEnforcer.java:564) ~[keycloak-policy-enforcer-26.0.3.jar:26.0.3]\n2025-01-16T10:43:57 \tat org.keycloak.adapters.authorization.PolicyEnforcer.challenge(PolicyEnforcer.java:337) ~[keycloak-policy-enforcer-26.0.3.jar:26.0.3]`\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/36560/comments",
    "author": "ebondu",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-01-17T15:58:47Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 36284,
    "title": "Fail to import realm during the startup with specific name file",
    "created_at": "2025-01-07T21:58:47Z",
    "closed_at": "2025-01-28T17:44:48Z",
    "labels": [
      "kind/bug",
      "area/import-export",
      "help wanted",
      "team/cloud-native",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.2.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/36284",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nimport-export\n\n### Describe the bug\n\nWhen importing the realm on startup using `--import-realm` I encounter that when the file name is `<string>-realm.json` the  Keycloak fail to start. Keycloak start when `<string>` is equal to realm name.\r\n\r\nExample: Let's import the realm with name `test-realm`.\r\n1. When the json file has name `test-realm.json` the Keycloak is failing to start\r\n2. When the json file has name `test-realm-realm.json` the Keycloak start\r\n3. When the json file has name `realm-test.json` the Keycloak start\r\n\r\nIn all 3 cases I see that the `test-realm` was imported but in case of 1st example I get error `ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Session not bound to a realm`\r\n\r\nThe exemple number 1 is working with Keycloak 25 or with disabled organization feature (`--features-disabled=organization`)\n\n### Version\n\n26.0\n\n### Regression\n\n- [X] The issue is a regression\n\n### Expected behavior\n\nStart the Keycloak without error\n\n### Actual behavior\n\nGetting the \r\n```\r\n2025-01-07 21:54:06,087 WARN  [io.agroal.pool] (main) Datasource '<default>': JDBC resources leaked: 1 ResultSet(s) and 0 Statement(s)\r\n2025-01-07 21:54:07,042 INFO  [org.keycloak.connections.infinispan.DefaultInfinispanConnectionProviderFactory] (main) Node name: node_548811, Site name: null\r\n2025-01-07 21:54:07,472 INFO  [org.keycloak.exportimport.dir.DirImportProvider] (main) Importing from directory /opt/keycloak/bin/../data/import\r\n2025-01-07 21:54:07,479 INFO  [org.keycloak.services] (main) KC-SERVICES0050: Initializing master realm\r\n2025-01-07 21:54:12,019 INFO  [org.keycloak.services] (main) KC-SERVICES0030: Full model import requested. Strategy: OVERWRITE_EXISTING\r\n2025-01-07 21:54:14,703 WARN  [org.keycloak.models.utils.RepresentationToModel] (main) Referenced client scope 'uma_protection' doesn't exist. Ignoring\r\n2025-01-07 21:54:14,802 WARN  [org.keycloak.models.utils.RepresentationToModel] (main) Referenced client scope 'uma_protection' doesn't exist. Ignoring\r\n2025-01-07 21:54:16,839 INFO  [org.keycloak.exportimport.util.ImportUtils] (main) Realm 'test-realm' imported\r\n2025-01-07 21:54:16,990 WARN  [io.agroal.pool] (main) Datasource '<default>': JDBC resources leaked: 1 ResultSet(s) and 0 Statement(s)\r\n2025-01-07 21:54:17,013 INFO  [com.arjuna.ats.jbossatx] (main) ARJUNA032014: Stopping transaction recovery manager\r\n2025-01-07 21:54:17,266 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to start server in (development) mode\r\n2025-01-07 21:54:17,267 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Session not bound to a realm\r\n2025-01-07 21:54:17,267 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) For more details run the same command passing the '--verbose' option. Also you can use '--help' to see the details about the usage of the particular command.\r\n```\n\n### How to Reproduce?\n\nUsing image but was able to reproduce with local executable as well\r\n\r\n\r\nFor reproducing use the file name `test-realm.json`, `test-realm-realm.json` and `realm-test.json`. First will fail to start.\r\n\r\nWhen running the following command don't forget change the entry point `path-to-ream-file`.\r\nRun `docker run -p 8080:8080 -v <path-to-ream-file>:/opt/keycloak/data/import -e KC_BOOTSTRAP_ADMIN_USERNAME=admin -e KC_BOOTSTRAP_ADMIN_PASSWORD=admin quay.io/keycloak/keycloak:26.0.7 start-dev --hostname-strict=false --import-realm`\r\n\r\nExample json realm file\r\n\r\n```\r\n{\r\n  \"realm\": \"test-realm\",\r\n  \"enabled\": true,\r\n  \"sslRequired\": \"none\",\r\n  \"roles\": {\r\n    \"realm\": [\r\n      {\r\n        \"name\": \"test-user-role\"\r\n      }\r\n    ],\r\n    \"client\": {\r\n      \"test-application-client\": [\r\n        {\r\n          \"id\": \"5b9947c6-eb74-4de6-8623-0285720993f3\",\r\n          \"name\": \"uma_protection\",\r\n          \"composite\": false,\r\n          \"clientRole\": true\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  \"users\": [\r\n    {\r\n      \"username\": \"test-normal-user\",\r\n      \"email\": \"test-normal-user@localhost\",\r\n      \"firstName\": \"test-normal-user\",\r\n      \"lastName\": \"test-normal-user\",\r\n      \"enabled\": true,\r\n      \"credentials\": [\r\n        {\r\n          \"type\": \"password\",\r\n          \"value\": \"test-normal-user\"\r\n        }\r\n      ],\r\n      \"clientRoles\": {\r\n        \"test-application-client\": [\r\n          \"uma_protection\"\r\n        ]\r\n      },\r\n      \"realmRoles\": [\r\n        \"test-user-role\",\r\n        \"uma_protection\"\r\n      ]\r\n    },\r\n    {\r\n      \"username\" : \"service-account-backend-service\",\r\n      \"enabled\" : true,\r\n      \"serviceAccountClientId\" : \"test-application-client\",\r\n      \"clientRoles\" : {\r\n        \"test-application-client\" : [ \"uma_protection\" ]\r\n      }\r\n    }\r\n  ],\r\n  \"clients\": [\r\n    {\r\n      \"clientId\": \"test-application-client\",\r\n      \"enabled\": true,\r\n      \"protocol\": \"openid-connect\",\r\n      \"standardFlowEnabled\": false,\r\n      \"implicitFlowEnabled\": false,\r\n      \"directAccessGrantsEnabled\": true,\r\n      \"clientAuthenticatorType\": \"client-secret\",\r\n      \"secret\": \"test-application-client-secret\",\r\n      \"protocolMappers\": [\r\n        {\r\n          \"id\": \"f17f8d5f-2327-4e0b-8001-48a7706be252\",\r\n          \"name\": \"realm roles\",\r\n          \"protocol\": \"openid-connect\",\r\n          \"protocolMapper\": \"oidc-usermodel-realm-role-mapper\",\r\n          \"consentRequired\": false,\r\n          \"config\": {\r\n            \"user.attribute\": \"foo\",\r\n            \"access.token.claim\": \"true\",\r\n            \"claim.name\": \"realm_access.roles\",\r\n            \"jsonType.label\": \"String\",\r\n            \"multivalued\": \"true\"\r\n          }\r\n        },\r\n        {\r\n          \"id\": \"0e0f1e8d-60f9-4435-b753-136d70e56af8\",\r\n          \"name\": \"username\",\r\n          \"protocol\": \"openid-connect\",\r\n          \"protocolMapper\": \"oidc-usermodel-property-mapper\",\r\n          \"consentRequired\": false,\r\n          \"config\": {\r\n            \"userinfo.token.claim\": \"true\",\r\n            \"user.attribute\": \"username\",\r\n            \"id.token.claim\": \"true\",\r\n            \"access.token.claim\": \"true\",\r\n            \"claim.name\": \"preferred_username\",\r\n            \"jsonType.label\": \"String\"\r\n          }\r\n        }\r\n      ],\r\n      \"defaultClientScopes\": [\r\n        \"web-origins\",\r\n        \"acr\",\r\n        \"roles\",\r\n        \"profile\",\r\n        \"uma_protection\",\r\n        \"email\"\r\n      ],\r\n      \"optionalClientScopes\": [\r\n        \"address\",\r\n        \"phone\",\r\n        \"offline_access\",\r\n        \"uma_protection\",\r\n        \"microprofile-jwt\"\r\n      ],\r\n      \"authorizationSettings\": {\r\n        \"scopes\": [\r\n          {\r\n            \"id\": \"uma_authorization\",\r\n            \"name\": \"uma_authorization\"\r\n          }\r\n        ],\r\n        \"resources\": [\r\n          {\r\n            \"name\": \"test-user-resource\",\r\n            \"uris\": [\r\n              \"/user/*\"\r\n            ]\r\n          }\r\n        ],\r\n        \"policies\": [\r\n          {\r\n            \"name\": \"test-user-policy\",\r\n            \"type\": \"role\",\r\n            \"config\": {\r\n              \"roles\": \"[{\\\"id\\\":\\\"test-user-role\\\",\\\"required\\\":true}]\"\r\n            }\r\n          },\r\n          {\r\n            \"name\": \"test-user-permission\",\r\n            \"type\": \"resource\",\r\n            \"config\": {\r\n              \"resources\": \"[\\\"test-user-resource\\\"]\",\r\n              \"applyPolicies\": \"[\\\"test-user-policy\\\"]\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/36284/comments",
    "author": "jedla97",
    "comments": [
      {
        "user": "shawkins",
        "created_at": "2025-01-08T14:02:28Z",
        "body": "This relates to #34793 - the import process is effectively based upon file name conventions.\r\n\r\n> When the json file has name test-realm.json the Keycloak is failing to start\r\n\r\nThe logic infers the realm name as \"test\" for performing secondary import tasks - which doesn't exist and causes the later failure. In this case that logic doesn't even need to run because nothing else was imported after the main file.\r\n\r\n> When the json file has name test-realm-realm.json the Keycloak start\r\n\r\nThis is the expected file name convention, so things work.\r\n\r\n> When the json file has name realm-test.json the Keycloak start\r\n\r\nThis will use the single file realm importer, instead of the directory one. It does not run any secondary import logic because everything is expected to be the single file.\r\n\r\n@pedroigor @vmuzikar - to resolve this and #34793 we can make the docs more explicit, and for the directory based import have the import check that the realm contained in the file matches the file name convention. Or do you want to try to be less reliant on file name conventions and just use the realm names from within the files?"
      },
      {
        "user": "vmuzikar",
        "created_at": "2025-01-08T15:08:52Z",
        "body": "This is counterintuitive but I think extending the docs works. The file naming logic/expectations make sense when put into context with export logic."
      },
      {
        "user": "jedla97",
        "created_at": "2025-01-08T18:20:51Z",
        "body": "Thanks for response and explanation.\r\n\r\nSo this is expected to not work just there is minimal/no docs about how the name of file should look.\r\n\r\nAlso to clarify the `test-realm.json` wasn't expecting work in previous Keycloak version. That this work with Keycloak 25 (and earlier) was a unexpected behavioral which was \"fixed\" in Keycloak 26."
      },
      {
        "user": "shawkins",
        "created_at": "2025-01-08T20:43:35Z",
        "body": "> Also to clarify the test-realm.json wasn't expecting work in previous Keycloak version. That this work with Keycloak 25 (and earlier) was a unexpected behavioral which was \"fixed\" in Keycloak 26.\r\n\r\nIt wasn't expected to work, but because you weren't importing users that would be dependent on the file name convention it would have seemed like it worked.\r\n\r\nUnless @pedroigor objects it sounds like we'll validate the file name convention and add more docs."
      },
      {
        "user": "mabartos",
        "created_at": "2025-01-14T11:27:04Z",
        "body": "@shawkins Could you please triage it and set the priority?"
      },
      {
        "user": "shawkins",
        "created_at": "2025-01-14T12:37:04Z",
        "body": "> @shawkins Could you please triage it and set the priority?\n\nWas hoping that @pedroigor or someone else from core would chime in here or on the proposed fix (or just merge it). In any case it looks like we own this now, so we can mark it as normal.\n\n~priority-normal"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-01-14T12:37:09Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 36012,
    "title": "Double submit on otp form causes error",
    "created_at": "2024-12-18T14:46:18Z",
    "closed_at": "2024-12-24T17:31:21Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/login/ui",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "release/26.1.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/36012",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nlogin/ui\n\n### Describe the bug\n\nThe OTP form does not have multiple 'submit form' protection (`onsubmit=\"login.disabled = true; return true;\"`), like the username form does.\r\n\r\n`themes\\src\\main\\resources\\theme\\keycloak.v2\\login\\login-username.ftl`\r\n`themes\\src\\main\\resources\\theme\\base\\login\\login-username.ftl`\r\n```\r\n<form id=\"kc-form-login\" onsubmit=\"login.disabled = true; return true;\" action=\"${url.loginAction}\"\r\n    method=\"post\">\r\n```\r\n\r\n`themes\\src\\main\\resources\\theme\\keycloak.v2\\login\\login-otp.ftl`\r\n`themes\\src\\main\\resources\\theme\\base\\login\\login-otp.ftl`\r\n```\r\n<form id=\"kc-otp-login-form\" class=\"${properties.kcFormClass!}\" action=\"${url.loginAction}\"\r\n    method=\"post\">\r\n```\r\n\r\nSubmitting the form a second time will cancel the first attempt. Keycloak does not like this, and throws a variety of errors.\n\n### Version\n\n26.0.7\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nLike the username form, it should not allow secondary submits.\n\n### Actual behavior\n\nThe form can be submitted multiple times, causing a variety of errors based on how far the initial request manages to get\r\n\r\n\"Action expired. Please continue with login now\"\r\n\"Your login attemp timed out. Login will start form the beginning\"\r\n\"Invalid authenticator code\"\r\n\r\nor you are already logged in.\r\n\n\n### How to Reproduce?\n\nSetup OTP on a user account.\r\n\r\n- On Chrome (Firefox seems to disallow multiple submit)\r\n- Open Developer Tools > Network tab > Set throttling to Fast 4G or Slow 4G. Leave open (enable throttling once you want to submit the OTP form)\r\n- Go to keycloak's account console (get a login form)\r\n- Click 'sign in' button\r\n- Enter username/password. Submit.\r\n- Enter otp code. \r\n- While in the otp input field, press ENTER multiple times.\r\n\r\n\r\n\r\n\n\n### Anything else?\n\nI pulled the source before submitting. The submit protection is not there in the `login-otp.ftl` files.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/36012/comments",
    "author": "wtell400",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-12-18T20:31:10Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 35904,
    "title": "Failing since may be reported incorrectly on health probe",
    "created_at": "2024-12-13T19:39:45Z",
    "closed_at": "2025-01-08T13:21:42Z",
    "labels": [
      "kind/bug",
      "area/dist/quarkus",
      "help wanted",
      "team/cloud-native",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.1.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/35904",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ndist/quarkus\n\n### Describe the bug\n\nThe health endpoint will show \"failing since\" however it will not reset on all sucessful tests - only when a connection is in use.\n\n### Version\n\n26.0\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nThe failing since should reset after any successful probe.\n\n### Actual behavior\n\nFailing since won't reset until there is at least 1 active connection.\n\n### How to Reproduce?\n\npodman run -d --name keycloak-postgres -e POSTGRES_PASSWORD=rhbk26 -e POSTGRES_USER=rhbk -e POSTGRES_DB=keycloak -p 32769:5432 postgres:13\r\n\r\n./bin/kc.sh start-dev --db-url=jdbc:postgresql://localhost:32769/keycloak --db-username=rhbk --db-password=rhbk26 --db=postgres --health-enabled=true --metrics-enabled=true\r\n\r\nStop the database and check the health (podman stop keycloak-postgres)\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/35904/comments",
    "author": "shawkins",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-12-13T19:40:10Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 35793,
    "title": "Update to KC 26.x from <26 fails if admin-cli client deleted",
    "created_at": "2024-12-11T07:56:00Z",
    "closed_at": "2024-12-11T10:36:02Z",
    "labels": [
      "kind/bug",
      "area/core",
      "help wanted",
      "team/core-shared",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.1.0",
      "release/26.0.9"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/35793",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ncore\n\n### Describe the bug\n\nWhen the admin-cli clients has been deleted in one realm, the upate from KC <26 to KC 26.x fails with the following error:\r\n\r\n```json\r\n{\"timestamp\":\"2024-12-11T07:29:23.579094554Z\",\"sequence\":9861,\"loggerClassName\":\"org.jboss.logging.Logger\",\"loggerName\":\"org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler\",\"level\":\"ERROR\",\"message\":\"ERROR: Cannot invoke \\\"org.keycloak.models.ClientModel.setFullScopeAllowed(boolean)\\\" because \\\"adminCliClient\\\" is null\",\"threadName\":\"main\",\"threadId\":1,\"mdc\":{},\"ndc\":\"\",\"hostName\":\"xxxx\",\"processName\":\"/usr/lib/jvm/java-21-openjdk-21.0.5.0.11-2.el9.x86_64/bin/java\",\"processId\":1}\r\n```\n\n### Version\n\n26.0.7\n\n### Regression\n\n- [X] The issue is a regression\n\n### Expected behavior\n\nThe update works even if the client does not exists.\n\n### Actual behavior\n\nKC startup fails with error message.\n\n### How to Reproduce?\n\nRun Keycloak in version <26. Delete the admin-cli client in one realm. Update to KC 26.x.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/35793/comments",
    "author": "sventorben",
    "comments": [
      {
        "user": "jonkoops",
        "created_at": "2024-12-11T10:34:59Z",
        "body": "Marking this as a backport for v26 since this applies to the migrations for that version."
      },
      {
        "user": "jonkoops",
        "created_at": "2024-12-11T10:38:42Z",
        "body": "Backport up under #35801"
      }
    ]
  },
  {
    "number": 35256,
    "title": "Typos in `.md` and `.adoc` files, detected using codespell and manual review",
    "created_at": "2024-11-22T23:19:03Z",
    "closed_at": "2024-11-25T07:21:27Z",
    "labels": [
      "kind/bug",
      "area/docs",
      "help wanted",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "release/26.1.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/35256",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ndocs\n\n### Describe the bug\n\nHaving noticed a bunch of typos in Keycloak docs, I ran codespell on .md and .adoc files to fix a bunch in one go.\r\n\r\nThis issue is for the PR. It'd be toil to make a separate issue and PR for each fix.\n\n### Version\n\nmain\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nNo typos\n\n### Actual behavior\n\nNo typos\n\n### How to Reproduce?\n\nRun codespell\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/35256/comments",
    "author": "corneliusroemer",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-11-24T15:42:09Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 35052,
    "title": "`organizationEnabled` and `verifiableCredentialsEnabled` attributes are present as attributes in an export",
    "created_at": "2024-11-18T14:19:49Z",
    "closed_at": "2024-11-29T14:57:34Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "team/core-iam",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.1.0",
      "release/26.0.8"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/35052",
    "body": null,
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/35052/comments",
    "author": "vramik",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-11-18T14:20:28Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 34981,
    "title": "Can't save an attribute with a long value for an organization",
    "created_at": "2024-11-15T10:56:43Z",
    "closed_at": "2025-02-17T00:06:01Z",
    "labels": [
      "kind/bug",
      "kind/enhancement",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot",
      "area/organizations"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/34981",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\nRelated to:  #9758, #32015\r\n\r\n### Area\r\n\r\nadmin/api\r\n\r\n### Describe the bug\r\n\r\nWhen I save an organization with an attribute with a long value: base64 image for an organization. I get the following error: Could not save the organization: unknown_error\r\n\r\nThere is the error from keycloak logs:\r\n\r\nCaused by: org.h2.jdbc.JdbcBatchUpdateException: Value too long for column \"VALUE CHARACTER VARYING(255)\": \"'+wSzIAAAABlBMVEX///+/v7+jQ3Y5AAAADklEQVQI12P4AIX8EAgALgAD/aNpbtEAAAAASUVORK5CYI... (1042)\"; SQL statement:\r\ninsert into GROUP_ATTRIBUTE (GROUP_ID,NAME,VALUE,ID) values (?,?,?,?) [22001-230]\r\n        at org.h2.jdbc.JdbcPreparedStatement.executeBatch(JdbcPreparedStatement.java:1277)\r\n\r\n### Version\r\n\r\n26.0.5\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nSave an attribute with a long value for an organization\r\n\r\n### Actual behavior\r\n\r\nThe error:  Could not save the organization: unknown_error\r\n\r\n### How to Reproduce?\r\n\r\n1.  create an organization \r\n2.  add an attribute with a long value more then 255 symbols for organization \r\n3.  save organization \r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/34981/comments",
    "author": "kzvankovich",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-11-18T12:34:58Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "martin-kanis",
        "created_at": "2024-11-18T12:36:46Z",
        "body": "@kzvankovich I marked it as an enhancement and also let the community vote how important it is. \r\nOut of curiosity what are you trying to store as an attribute?  "
      },
      {
        "user": "kzvankovich",
        "created_at": "2024-11-18T18:20:09Z",
        "body": "> @kzvankovich I marked it as an enhancement and also let the community vote how important it is. Out of curiosity what are you trying to store as an attribute?\r\n\r\nwe would like to store a base64 image as an attribute for an organization."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-02-17T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 34926,
    "title": "Missing key `emailVerifiedAlreadyMessage`",
    "created_at": "2024-11-13T13:38:46Z",
    "closed_at": "2025-02-18T00:06:02Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/login/ui",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/34926",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nlogin/ui\n\n### Describe the bug\n\nMissing in:\r\n\r\n- ps\r\n- fa\r\n- ru\r\n- fr\r\n\r\nand maybe more\n\n### Version\n\n<= 26.0.5\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nTo be translated.\n\n### Actual behavior\n\nMissing\n\n### How to Reproduce?\n\nJust try to verify your email a second time.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/34926/comments",
    "author": "DenuxPlays",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-11-19T12:13:49Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-02-18T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 34764,
    "title": "Do not remove users in LDAP when queries return an empty result",
    "created_at": "2024-11-07T20:14:40Z",
    "closed_at": "2025-02-07T13:42:46Z",
    "labels": [
      "kind/enhancement",
      "priority/important",
      "area/ldap",
      "help wanted",
      "team/core-iam",
      "release/26.2.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/34764",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nldap\n\n### Describe the bug\n\nWhen using LDAP, users are deleted from the local storage when the LDAP query returns an empty result set. \r\n\r\nFor some use cases, it might make sense to keep local users even though they do not have a corresponding LDAP entry or when the LDAP configuration changes often and requires administrators to constantly update the provider configuration.\r\n\r\nWe might consider introducing a setting to the LDAP provider configuration to disable the removal of users. This setting should be used with cautious and only if administrators are aware of having users in the local database have precedence over the current state in the LDAP server.\r\n\r\nPerhaps a valid use case is when migrating users from a legacy LDAP storage where you want the local storage as the single source of truth and up-to-date user storage. \n\n### Version\n\n26.0.0\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nPrioritize users from local storage over LDAP provider(s).\n\n### Actual behavior\n\nPrioritize users from LDAP provider(s) over local storage.\n\n### How to Reproduce?\n\nN/A\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/34764/comments",
    "author": "pedroigor",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-11-07T20:15:12Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 34750,
    "title": "calling openid-connect/auth with previous version valid cookies generate internal server error",
    "created_at": "2024-11-07T15:30:42Z",
    "closed_at": "2024-11-11T10:31:12Z",
    "labels": [
      "area/authorization-services",
      "kind/bug",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "release/26.1.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/34750",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\nauthorization-services\r\n\r\n### Describe the bug\r\n\r\nafter upgrading keycloak to version 25 from a previous version (upgraded from 11 to 16 then 25), the previously valid cookies sent by browser cause the following exception:\r\n\r\n```\r\n2024-11-07 14:07:01,521 ERROR [org.keycloak.services.error.KeycloakErrorHandler] (executor-thread-33) Uncaught server error: java.lang.NullPointerException: Cannot invoke \"org.keycloak.models.UserSessionModel.setLastSessionRefresh(int)\" because the return value of \"org.keycloak.services.managers.AuthenticationManager$AuthResult.getSession()\" is null\r\n        at org.keycloak.services.managers.AuthenticationManager.authenticateIdentityCookie(AuthenticationManager.java:867)\r\n        at org.keycloak.services.managers.UserSessionCrossDCManager.getUserSessionIfExistsRemotely(UserSessionCrossDCManager.java:74)\r\n        at org.keycloak.protocol.AuthorizationEndpointBase.createAuthenticationSession(AuthorizationEndpointBase.java:190)\r\n        at org.keycloak.protocol.oidc.endpoints.AuthorizationEndpoint.process(AuthorizationEndpoint.java:191)\r\n        at org.keycloak.protocol.oidc.endpoints.AuthorizationEndpoint.buildGet(AuthorizationEndpoint.java:113)\r\n        at org.keycloak.protocol.oidc.endpoints.AuthorizationEndpoint$quarkusrestinvoker$buildGet_4b690b27439f19dd29733dc5fd4004f24de0adb6.invoke(Unknown Source)\r\n        at org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\r\n        at io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\r\n        at org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:147)\r\n        at io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:582)\r\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n        at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n        at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.base/java.lang.Thread.run(Thread.java:1583)\r\n```\r\n\r\n### Version\r\n\r\n26.0.5\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nkeycloak should reject those cookies and inform the browser to initiate a new login process\r\n\r\n### Actual behavior\r\n\r\nkeycloak generate an internal server error\r\n\r\n### How to Reproduce?\r\n\r\n- setup a keycloak 11\r\n- authenticate to an application using a public oidc client with a browser\r\n- upgrade the keycloak instance to version 25 (realistically passing through version 16 because some db migrations seems directly incompatibles between version 11 and 25)\r\n- reusing the same cookies from the previous keycloak version, try to authenticate to the application\r\n- the authentication process fail because of this server error, so to create a new valid authentication session the user has to delete all the old cookies manually\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/34750/comments",
    "author": "randreoni",
    "comments": [
      {
        "user": "randreoni",
        "created_at": "2024-11-07T15:56:10Z",
        "body": "same behaviour with the latest keycloak version 26.0.5, updated the affected version "
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-11-08T17:09:43Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 34606,
    "title": "the endpoint create authentication/flows ignore the paramater authenticationExecutions",
    "created_at": "2024-11-04T09:05:12Z",
    "closed_at": "2025-02-17T00:06:03Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted",
      "team/core-clients",
      "team/core-shared",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/34606",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/api\n\n### Describe the bug\n\nA request to the API endpoint POST authentication/flows create the flow but doesn't create the authenticationExecutions if they are present into the json data as described into the api reference. \r\n\r\n``` bash\r\ncurl \\\r\n--header \"Content-Type: application/json\" \\\r\n--request POST \\\r\n--data '{\"alias\":\"my-custom-flow\",\"authenticationExecutions\":[{\"authenticator\":\"auth-cookie\",\"authenticatorFlow\":false,\"requirement\":\"REQUIRED\",\"priority\":0,\"autheticatorFlow\":false,\"userSetupAllowed\":false},{\"authenticator\":\"auth-spnego\",\"authenticatorFlow\":false,\"requirement\":\"REQUIRED\",\"priority\":1,\"autheticatorFlow\":false,\"userSetupAllowed\":false}],\"builtIn\":false,\"description\":\"A custom flow\",\"providerId\":\"basic-flow\",\"topLevel\":true}' \\\r\nlocalhost:8080/admin/realms/{realm}/authentication/flows\r\n```\n\n### Version\n\nversion 20.0.2 and 26.0.2\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nI expect that the endpoint create the flow, sub-flow and execution as described into the admin api rest reference.\n\n### Actual behavior\n\nThe endpoint create the toplevel flow but no sub-flow or execution.\n\n### How to Reproduce?\n\nMade a request to the endpoint api authentication/flows with data that contain authenticationExecutions, like: \r\n``` bash\r\ncurl \\\r\n--header \"Content-Type: application/json\" \\\r\n--header \"Authorization: Bearer {TOKEN}\"\r\n--request POST \\\r\n--data '{\"alias\":\"my-custom-flow\",\"authenticationExecutions\":[{\"authenticator\":\"auth-cookie\",\"authenticatorFlow\":false,\"requirement\":\"REQUIRED\",\"priority\":0,\"autheticatorFlow\":false,\"userSetupAllowed\":false},{\"authenticator\":\"auth-spnego\",\"authenticatorFlow\":false,\"requirement\":\"REQUIRED\",\"priority\":1,\"autheticatorFlow\":false,\"userSetupAllowed\":false}],\"builtIn\":false,\"description\":\"A custom flow\",\"providerId\":\"basic-flow\",\"topLevel\":true}' \\\r\nhost.docker.internal:8080/admin/realms/0d11d9e84d2ab563/authentication/flows\r\n```\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/34606/comments",
    "author": "zenondoh",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-11-18T07:54:14Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-02-17T00:06:02Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 34335,
    "title": "NPE in Organization(s)Resource when using Quarkus Rest Client",
    "created_at": "2024-10-25T08:35:32Z",
    "closed_at": "2024-11-01T18:37:53Z",
    "labels": [
      "kind/bug",
      "priority/important",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "area/organizations",
      "release/26.1.0",
      "release/26.0.6"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/34335",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/api\n\n### Describe the bug\n\nHi,\r\n\r\nUsing the quarkus-rest-client builder from a custom provider leads to an NPE :\r\n`var service = QuarkusRestClientBuilder.newBuilder().baseUri(URI.create(url)).build(MyService.class);`\r\n\r\nThe NPE is related to admin events in OrganizationResource and OrganizationsResources constructors and are easy to fix:\r\n\r\n```java\r\npublic OrganizationResource() {\r\n   // needed for registering to the JAX-RS stack\r\n   this(null, null, null);\r\n}\r\n\r\npublic OrganizationResource(KeycloakSession session, OrganizationModel organization, AdminEventBuilder adminEvent) {\r\n   this.session = session;\r\n   this.provider = session == null ? null : session.getProvider(OrganizationProvider.class);\r\n   this.organization = organization;\r\n   // prevent NPE on adminEvent\r\n   this.adminEvent = adminEvent == null ? null : adminEvent.resource(ResourceType.ORGANIZATION);\r\n}\r\n```\r\nand\r\n```java\r\npublic OrganizationsResource() {\r\n    // needed for registering to the JAX-RS stack\r\n    this(null, null, null);\r\n}\r\n\r\npublic OrganizationsResource(KeycloakSession session, AdminPermissionEvaluator auth, AdminEventBuilder adminEvent) {\r\n   this.session = session;\r\n   this.provider = session == null ? null : session.getProvider(OrganizationProvider.class);\r\n   this.auth = auth;\r\n   // prevent NPE on adminEvent\r\n   this.adminEvent = adminEvent == null ? null : adminEvent.resource(ResourceType.ORGANIZATION);\r\n}\r\n```\r\n\r\nHere are the dependencies declared in the custom provider (added in keycloak-quarkus-server / keycloak-quarkus-server-deployment):\r\n\r\n```\r\n<dependency>\r\n   <groupId>io.quarkus</groupId>\r\n   <artifactId>quarkus-rest-client</artifactId>\r\n   <scope>provided</scope>\r\n</dependency>\r\n<dependency>\r\n   <groupId>io.quarkus</groupId>\r\n   <artifactId>quarkus-rest-client-jackson</artifactId>\r\n   <scope>provided</scope>\r\n</dependency>\r\n```\r\n\r\nOrganization/Organizations classes are not used the provider and I don't know why the quarkus rest client instantiate this classes with the default constructor, so maybe there is a better solution to prevent the NPE.\r\n\r\nBest regards.\n\n### Version\n\n26\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nNo NPE when using quarkus-rest-client\n\n### Actual behavior\n\nNPE when using the quarkus rest builder\n\n### How to Reproduce?\n\nAdd quarkus-rest-client / quarkus-rest-client-jackson dependencies in a keycloak distribution and try to instantiate a service client with QuarkusRestClientBuilder.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/34335/comments",
    "author": "ebondu",
    "comments": [
      {
        "user": "martin-kanis",
        "created_at": "2024-10-30T12:52:38Z",
        "body": "@pedroigor Do you recall, why we need the following? \r\n```\r\n// needed for registering to the JAX-RS stack\r\nthis(null, null, null);\r\n```\r\nWe don't have that in the other resources. \r\n"
      }
    ]
  },
  {
    "number": 34310,
    "title": "26.0.2 26.0.1 26.0.0 regression in overriding redirectToAdmin=false with custom theme",
    "created_at": "2024-10-24T14:38:27Z",
    "closed_at": "2025-02-05T00:06:01Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "team/ui",
      "area/welcome/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/34310",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nwelcome/ui\n\n### Describe the bug\n\ncustom theme `import` or `parent` does not work as expected\n\n### Version\n\n26.0.2\n\n### Regression\n\n- [X] The issue is a regression\n\n### Expected behavior\n\nKeycloak starts with custom theme fix-welcome that inherits from theme keycloak that has redirectToAdmin=false which restores welcome page.\r\n\r\nworks with 24.x.x-25.x.x\n\n### Actual behavior\n\nWARN  [org.keycloak.theme.DefaultThemeManager] (executor-thread-4) Not found theme 'common/keycloak.v2.v2.v2' referenced as import of theme 'fix-welcome'. Unable to load WELCOME theme 'fix-welcome' due to this.\r\nERROR [org.keycloak.theme.DefaultThemeManager] (executor-thread-4) Failed to find WELCOME theme fix-welcome, using built-in themes\r\nWARN  [org.keycloak.theme.DefaultThemeManager] (executor-thread-1) Not found theme 'common/keycloak.v2.v2.v2' referenced as import of theme 'fix-welcome'. Unable to load WELCOME theme 'fix-welcome' due to this.\r\nERROR [org.keycloak.theme.DefaultThemeManager] (executor-thread-1) Failed to find WELCOME theme fix-welcome, using built-in themes\r\n\r\nexits with non-zero exit code\n\n### How to Reproduce?\n\n```\r\n/opt/keycloak/themes/fix-welcome\r\n├── theme.properties\r\n└── welcome\r\n    └── theme.properties\r\n```\r\n\r\n```ini\r\n#./theme.properties\r\nparent=keycloak\r\nimport=common/keycloak\r\n```\r\n\r\n```ini\r\n#./welcome/theme.properties\r\nparent=keycloak\r\nimport=common/keycloak\r\nredirectToAdmin=false\r\n```\r\ntried also import=keycloak.v2 and import=base same issue\r\n\r\nI execute it in customized kerberos-enabled docker image\r\n\r\n```Dockerfile\r\nFROM registry.access.redhat.com/ubi9:latest as stage\r\nRUN mkdir -p /mnt/rootfs                                                                         && \\\r\n    dnf install --installroot /mnt/rootfs krb5-workstation krb5-libs curl sed grep coreutils vim iputils --releasever 9 --nodocs -y  && \\\r\n    dnf --installroot /mnt/rootfs clean all                                                      && \\\r\n    rpm --root /mnt/rootfs -e --nodeps setup\r\n    \r\nFROM quay.io/keycloak/keycloak as builder\r\nENV KC_SPI_THEME_WELCOME_THEME=fix-welcome\r\nENV KEYCLOAK_WELCOME_THEME=fix-welcome\r\nENV KC_DB=mariadb\r\nENV KC_FEATURES=kerberos\r\nENV KC_HEALTH_ENABLED=false \r\nENV KC_METRICS_ENABLED=false\r\nENV QUARKUS_TRANSACTION_MANAGER_ENABLE_RECOVERY=true\r\nWORKDIR /opt/keycloak\r\nCOPY --from=stage /fix-welcome /opt/keycloak/themes/fix-welcome\r\nRUN /opt/keycloak/bin/kc.sh build\r\n\r\nFROM quay.io/keycloak/keycloak\r\nCOPY --from=stage /mnt/rootfs /\r\nCOPY --from=builder /opt/keycloak/ /opt/keycloak/\r\nENV KC_SPI_THEME_WELCOME_THEME=fix-welcome\r\nENV KEYCLOAK_WELCOME_THEME=fix-welcome\r\nENV QUARKUS_TRANSACTION_MANAGER_ENABLE_RECOVERY=true\r\nENTRYPOINT [\"/opt/keycloak/bin/kc.sh\"]\r\n```\n\n### Anything else?\n\nRedirection breaks our existing systems more specifically - interaction with reverse proxy.\r\nI know it was decided to enable it by default and \"drop\" welcome page feature.\r\nPlease fix theme overriding or add option to easily disable redirectToAdmin in welcom epage.\r\n\r\nThanks in advance!",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/34310/comments",
    "author": "mszmidt",
    "comments": [
      {
        "user": "edewit",
        "created_at": "2024-10-25T08:54:02Z",
        "body": "If you just want to set `redirectToAdmin` then you don't need `parent` or `import` as nothing will be shown anyway right? "
      },
      {
        "user": "mszmidt",
        "created_at": "2024-10-28T08:14:02Z",
        "body": "Thanks for quick reply!\r\n\r\n\r\n\r\n```\r\n#./theme.properties\r\n#EMPTY\r\n```\r\n\r\n```\r\n#./welcome/theme.properties\r\nredirectToAdmin=false\r\n```\r\n\r\nUnfortunately  also doesn't work and just exits in nothing in logs.\r\n\r\n> For all new realms, keycloak.v2 will be the default login theme. Also, any existing realm that never explicitly set a login theme will be switched to keycloak.v2\r\n\r\nCould you tell me what happens so that `Not found theme 'common/keycloak.v2.v2.v2' referenced as import of theme 'fix-welcome'` occurs? Are there any auto replaces appended on import=common/keycloak ? When i tried to do such replaces manually using sed it also made .v2 suffix tripled. \r\n\r\nMaybe this error happens to some regexp?\r\n\r\n\r\n"
      },
      {
        "user": "edewit",
        "created_at": "2024-10-28T09:22:36Z",
        "body": "you don't need the `theme.properties` in the root of your theme, right? Also I'm not sure what you want to achieve, the `redirectToAdmin` is true by default, but it will only redirect to the admin ui when there is an admin user, but from your docker file I don't the admin user environment variables. "
      },
      {
        "user": "mszmidt",
        "created_at": "2024-10-30T14:12:15Z",
        "body": "Thanks!\r\nIt worked partially.\r\n\r\n> you don't need parent or import as nothing will be shown anyway right?\r\n\r\nNot exactly nothing, tweaked that way welcome page in 24.x.x-25.x.x presents keycloak logo on dark background.\r\n\r\nRight now when i enter welcome page it redirects to admin console which is acceptable as the other redirect (realm -> admin -> realm) doesn't happen (because welcome page is activated).\r\n\r\n> but from your docker file I don't the admin user environment variables.\r\n\r\nI set admin vars on runtime. \r\n\r\ntd;lr\r\nBug is still there. \r\nIn our case creating theme without imports worked.\r\n"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-11-01T19:53:18Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "edewit",
        "created_at": "2024-11-06T14:26:43Z",
        "body": "I'm not sure what the bug is though"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-02-05T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 33987,
    "title": "keycloak.v2 registration: Password policy validation error \"errorList is null\"",
    "created_at": "2024-10-16T09:38:34Z",
    "closed_at": "2024-10-21T10:47:25Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "team/ui",
      "area/login/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.1.0",
      "release/26.0.4"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33987",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nlogin/ui\n\n### Describe the bug\n\nWhen any password policy has been set in the Admin Console, the validation of it in the new register.ftl of the keycloak.v2 theme is bugged.\r\nThe first time the password has been entered (not compliant with the password policy), the appropriate error messages get added unterneath the input field.\r\nIf the password now get's edited and is still not compliant, the same error messages stay under the input field and the browser console logs the following error: \"errorList is null\".\n\n### Version\n\n26.0.0\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nThe error messages should be updated. The now fixed rules should no longer be shown.\n\n### Actual behavior\n\nThe error messages didn't update, they are still the same from the first attempt.\n\n### How to Reproduce?\n\n- Use any realm with registration enabled\r\n- Go to Authentication -> Policies -> Password policy and enable some policies, like minimum length, uppercase chars, lowercase chars, etc. and click on Save\r\n- Go to the registration page of the realm\r\n- Type something in the password field, a single letter for example, and click somewhere else to remove the focus of the field\r\n  - Notice the error message under the password field\r\n- Edit the entered password, for example with an compliant password\r\n\r\nThe error messages are still visible and haven't\r\nWhen now opening the console of the browser, an error should be shown (\"errorList is null\")\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33987/comments",
    "author": "SebastEnn",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-17T18:06:52Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "ssilvert",
        "created_at": "2024-10-17T18:07:15Z",
        "body": "I'm not seeing the error in the console, but I do see the bug where the error message never goes away.  \r\n\r\nIt does not prevent the user from registering, "
      }
    ]
  },
  {
    "number": 33933,
    "title": "Recovery authentication codes are numbered inconsistently",
    "created_at": "2024-10-15T08:56:30Z",
    "closed_at": "2024-10-17T17:10:56Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/login/ui",
      "team/core-clients",
      "priority/normal",
      "release/26.1.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33933",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nlogin/ui\n\n### Describe the bug\n\nDuring setup of the recovery authentication codes, the list showing the codes is numbered starting from 1. When the user chooses to \"Download\" or \"Copy\" the codes, the resulting file/copy is indexed from 0 instead.\r\nDuring authentication, the requested code is counted from 1 again.\r\nThis will lead to confusion for users who chose to download/copy the codes.\n\n### Version\n\n26.0.0\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nThe recovery codes should be numbered in a consistent fashion.\n\n### Actual behavior\n\nThe displayed codes are numbered starting from 1, while the copied/downloaded codes are numbered from 0. During authentication, the codes are counted from 1.\n\n### How to Reproduce?\n\n- Activate the recovery authentication code preview feature\r\n- Configure recovery authorization codes for a realm\r\n- Log into the account console and navigate to Account Security > Signing In\r\n- Start the recovery authentication code setup\r\n- Compare the displayed list of codes with the one that can be copied and the one that can be downloaded\r\n- Try logging in a realm with recovery authentication codes. Compare the requested code index with the downloaded/copied list\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33933/comments",
    "author": "NoseSnatcher",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-15T13:29:16Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "mposolda",
        "created_at": "2024-10-15T13:30:09Z",
        "body": "This will be probably prioritzed once we move for the supported recovery codes ( #16740 ). Not 100% sure when it is. Until that, anyone is welcome to send the PR for fixing this."
      }
    ]
  },
  {
    "number": 33701,
    "title": "Translation error Dutch doTryAnotherWay",
    "created_at": "2024-10-08T17:03:12Z",
    "closed_at": "2025-01-08T00:06:01Z",
    "labels": [
      "kind/bug",
      "area/translations",
      "help wanted",
      "team/community",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33701",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ntranslations\n\n### Describe the bug\n\nWhen trying to enter an MFA, you have the option to go back and try another method.\r\n\r\nThis text is translated incorrectly in dutch: 'een ander manier' should be 'een andere manier'.\r\n\n\n### Version\n\n25.0.4\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nIn theme\\base\\login\\messages\\messages_nl.properties\r\n\r\ndoTryAnotherWay=Probeer op een ander*e* manier\r\n\n\n### Actual behavior\n\nIn theme\\base\\login\\messages\\messages_nl.properties\r\n\r\ndoTryAnotherWay=Probeer op een ander manier\n\n### How to Reproduce?\n\nTranslation error above file. \n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33701/comments",
    "author": "wtell400",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-09T15:37:01Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-01-08T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 33649,
    "title": "Validation of http truststore or keystore file masks if the file exists",
    "created_at": "2024-10-07T14:54:06Z",
    "closed_at": "2024-10-22T17:05:58Z",
    "labels": [
      "kind/bug",
      "area/dist/quarkus",
      "help wanted",
      "team/cloud-native",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.1.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33649",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ndist/quarkus\n\n### Describe the bug\n\nThe validation message for keystore / truststores is misleading when the file does not exist.\n\n### Version\n\nlatest\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nA message that the file can't be found.\n\n### Actual behavior\n\nYou see:\r\n\r\nUnable to determine 'https-trust-store-type' automatically. Adjust the file extension or specify the property.\r\n\r\nEven if you have the type option set.\n\n### How to Reproduce?\n\n./kc.sh start --https-key-store-file=not-there.ks --https-trust-store-file=also-not-there.ks --hostname-strict=false --https-key-store-type=JKS --https-trust-store-type=JKS\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33649/comments",
    "author": "shawkins",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-08T13:58:46Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "shawkins",
        "created_at": "2024-10-08T14:15:37Z",
        "body": "Turns out it's not masking the existence check, it was masking if the password was required. I've opened a pr to narrow how we're checking the config, so that more of the quarkus error handling can happen otherwise. Also aligns our utilities with the quarkus checks."
      }
    ]
  },
  {
    "number": 33599,
    "title": "Upgrade Selenium",
    "created_at": "2024-10-04T17:27:46Z",
    "closed_at": "2024-10-08T07:18:55Z",
    "labels": [
      "area/testsuite",
      "kind/bug",
      "help wanted",
      "team/continuous-testing",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.1.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33599",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ntestsuite\n\n### Describe the bug\n\nThe current version of Selenium does not the version of Chromedriver used in the test environment.\n\n### Version\n\nHEAD\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nNo Seleniumn errors in test logs\n\n### Actual behavior\n\nTest logs contain:\r\n\r\nWARNING: Unable to find an exact match for CDP version 129, returning the closest version; found: 125; Please update to a Selenium version that supports CDP version 129\n\n### How to Reproduce?\n\nmvn test -Dbrowser=chrome \n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33599/comments",
    "author": "douglaspalmer",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-04T17:28:12Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 33517,
    "title": "Issue when running tests from IDE on embedded undertow ( org.jboss.threads.EnhancedQueueExecutor$Builder.setKeepAliveTime(java.time.Duration) )",
    "created_at": "2024-10-03T11:07:09Z",
    "closed_at": "2024-10-03T16:44:43Z",
    "labels": [
      "area/testsuite",
      "kind/bug",
      "help wanted",
      "team/continuous-testing",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33517",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ntestsuite\n\n### Describe the bug\n\nWhen running the tests from the IDE with embedded undertow, it can be in some cases seen the error like this. For example `RPInitiatedLogoutTest.logoutWithExpiredSession` :\r\n\r\n```\r\n12:09:56,004 DEBUG [org.keycloak.testsuite.oauth.RPInitiatedLogoutTest] Set time offset, response {currentTime=1727960194, offset=9999}\r\n12:09:56,012 ERROR [org.keycloak.services.error.KeycloakErrorHandler] Uncaught server error\r\njava.lang.NoSuchMethodError: 'org.jboss.threads.EnhancedQueueExecutor$Builder org.jboss.threads.EnhancedQueueExecutor$Builder.setKeepAliveTime(java.time.Duration)'\r\n\tat org.infinispan.factories.threads.EnhancedQueueExecutorFactory.lambda$createExecutor$1(EnhancedQueueExecutorFactory.java:43)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.infinispan.factories.threads.EnhancedQueueExecutorFactory.createExecutor(EnhancedQueueExecutorFactory.java:36)\r\n\tat org.infinispan.executors.LazyInitializingBlockingTaskAwareExecutorService.initIfNeeded(LazyInitializingBlockingTaskAwareExecutorService.java:206)\r\n\tat org.infinispan.executors.LazyInitializingBlockingTaskAwareExecutorService.execute(LazyInitializingBlockingTaskAwareExecutorService.java:193)\r\n\tat java.base/java.util.concurrent.CompletableFuture.asyncSupplyStage(CompletableFuture.java:1782)\r\n\tat java.base/java.util.concurrent.CompletableFuture.supplyAsync(CompletableFuture.java:2005)\r\n\tat org.infinispan.util.concurrent.BlockingManagerImpl.supplyBlockingOperation(BlockingManagerImpl.java:163)\r\n\tat org.infinispan.util.concurrent.BlockingManagerImpl.supplyBlocking(BlockingManagerImpl.java:141)\r\n\tat org.infinispan.expiration.impl.ExpirationManagerImpl.entryExpiredInMemory(ExpirationManagerImpl.java:145)\r\n\tat org.infinispan.container.impl.AbstractInternalDataContainer.get(AbstractInternalDataContainer.java:94)\r\n\tat org.infinispan.container.impl.AbstractInternalDataContainer.get(AbstractInternalDataContainer.java:105)\r\n\tat org.infinispan.cache.impl.SimpleCacheImpl.get(SimpleCacheImpl.java:558)\r\n\tat org.infinispan.cache.impl.StatsCollectingCache.get(StatsCollectingCache.java:49)\r\n\tat org.infinispan.cache.impl.EncoderCache.get(EncoderCache.java:735)\r\n\tat org.keycloak.models.sessions.infinispan.changes.UserSessionPersistentChangelogBasedTransaction.get(UserSessionPersistentChangelogBasedTransaction.java:61)\r\n\tat org.keycloak.models.sessions.infinispan.PersistentUserSessionProvider.getUserSession(PersistentUserSessionProvider.java:286)\r\n\tat org.keycloak.models.sessions.infinispan.PersistentUserSessionProvider.getUserSession(PersistentUserSessionProvider.java:282)\r\n\tat org.keycloak.services.managers.AuthenticationManager.verifyIdentityToken(AuthenticationManager.java:1493)\r\n\tat org.keycloak.services.managers.AuthenticationManager.authenticateIdentityCookie(AuthenticationManager.java:862)\r\n\tat org.keycloak.protocol.oidc.endpoints.LogoutEndpoint.logout(LogoutEndpoint.java:259)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n```\r\n\r\nThe issue is because infinispan expects jboss-threads 3.6.1 (which Keycloak on Quarkus distribution has), but the testsuite uses jboss-threads 2.4.0\n\n### Version\n\nnightly (from 2024-10-03)\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nIt is possible to run any tests from IDE with Keycloak on embedded undertow and it works\n\n### Actual behavior\n\nSome tests are failing due the issue above.\n\n### How to Reproduce?\n\nRun `RPInitiatedLogoutTest.logoutWithExpiredSession` . It happens probably in the tests, which rely on infinispan expiring some outdated entities, which means the tests relying on `InfinispanTestTimeServiceRule` . But not sure exactly for all the tests when it happens...\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33517/comments",
    "author": "mposolda",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-03T11:07:41Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 33232,
    "title": "400 error logged as 500",
    "created_at": "2024-09-24T08:26:04Z",
    "closed_at": "2024-10-17T17:37:42Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/identity-brokering",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "release/26.1.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33232",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nidentity-brokering\n\n### Describe the bug\n\nWhen a request with missing `code`, `clientId`, or `tabId` is sent to `GET .../{provider_alias}/login`, Keycloak logs two error messages. Moreover, the second logged message suggests that a 500 internal server error has occurred, which isn't the case.\r\n```\r\nSep 19, 2024 1:40:53 PM org.keycloak.services.resources.IdentityBrokerService fireErrorEvent\r\nERROR: invalidRequestMessage\r\nSep 19, 2024 1:40:53 PM org.keycloak.services.resources.IdentityBrokerService fireErrorEvent\r\nERROR: unexpectedErrorHandlingRequestMessage: org.keycloak.services.ErrorPageException: HTTP 500 Internal Server Error\r\n```\n\n### Version\n\n25.0.2\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nOnly a 400 error should be logged.\n\n### Actual behavior\n\nTwo errors are logged, with one misleadingly indicating a 500 internal server error.\n\n### How to Reproduce?\n\nSend a request to `GET .../{provider_alias}/login` without `code`.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33232/comments",
    "author": "kszafran",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-01T14:30:53Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 33202,
    "title": "Fonts (.ttf) files are blocked by cors in `resources`/`common`",
    "created_at": "2024-09-23T14:15:19Z",
    "closed_at": "2025-01-24T00:06:01Z",
    "labels": [
      "kind/bug",
      "area/core",
      "help wanted",
      "team/core-clients",
      "team/core-shared",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33202",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ncore\n\n### Describe the bug\n\nWhen you try to load a .ttf file from resources in common you get blocked by cors.\r\nLoading .css files are fine but they cannot load custom fonts.\n\n### Version\n\n25.0.6\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nLet fonts through so they can be used in emails.\n\n### Actual behavior\n\nGet blocked by cors/no font loading possible through keycloak.\n\n### How to Reproduce?\n\n1. create a css file in common\r\n2. copy a font into common\r\n3. let the css file load the font\r\n4. add the css file to an email\r\n5. open the email inside a webbrowser\r\n6. see how the css file gets loaded and the font not (cors error in the console)\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33202/comments",
    "author": "DenuxPlays",
    "comments": [
      {
        "user": "DenuxPlays",
        "created_at": "2024-09-23T14:21:06Z",
        "body": "Note:\r\nThis also happens with the normal email type.\r\nIt is impossible to load fonts over keycloak afaik"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-03T07:28:35Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "ssilvert",
        "created_at": "2024-10-25T13:04:07Z",
        "body": "This only applies to email theme.  So it's not for the UI team."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-01-24T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 33125,
    "title": "Duplicate principals not allowed in keystore",
    "created_at": "2024-09-19T22:25:23Z",
    "closed_at": "2024-10-08T10:03:04Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "release/26.1.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33125",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nauthentication\n\n### Describe the bug\n\nWhen building out a keystore to be used for mTLS client certificate verification, the truststores use a hashmap Map<X500Principal, X509Certificate>. \r\n\r\nUnfortunately when adding certificates with duplicate principal names, the resulting truststore does not have all the desired certificates. This prohibits the use of CA's with periods of overlapping validity. \r\n\r\n\r\n\n\n### Version\n\n25.0.5\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nCertificates with duplicate principal names should be allowed.\n\n### Actual behavior\n\nWhen certificates with duplicate principal names are provided, only one of the certificates is used.\n\n### How to Reproduce?\n\nAdd two certificate roots with the same principal name to the trust store. Try to authenticate with certificates signed by each, only one of the certificates will be valid.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33125/comments",
    "author": "divinehawk",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-03T07:33:43Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 33113,
    "title": "Transient Users Can't Fetch Policy Roles",
    "created_at": "2024-09-19T17:18:16Z",
    "closed_at": "2024-12-31T00:06:01Z",
    "labels": [
      "area/authorization-services",
      "kind/bug",
      "kind/enhancement",
      "help wanted",
      "area/identity-brokering",
      "team/core-clients",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33113",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\nauthorization-services\r\n\r\n### Describe the bug\r\n\r\nI have a Keycloak realm with an OICD client that issues a token without roles included. I have another OIDC client which is a confidential client that does authorisation. I use \"Fetch Roles\" in the policy to get the roles instead of using the roles in the token. Authorisation works fine with a user from this realm.\r\n\r\nI add an identity provider with transient users enabled (Do not store users). I hardcode roles on all users from this identity provider. Now the roles of the users from this identity provider and my realm match, and I expect that authorization will be the same for both. However the transient user always fails to authorise. \r\n\r\nI thought that Fetch roles would resolve the roles from the user sessions, but maybe I am mistaken?\r\n\r\n### Version\r\n\r\n25.0.4\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nFetch roles for policies fetches roles for transient users from the session and authorisation is successful\r\n\r\n### Actual behavior\r\n\r\nAuthorisation always fails with a transient user\r\n\r\n### How to Reproduce?\r\n\r\n1. Create a realm with a client that creates tokens without roles included, non confidential webapp-client.\r\n2. Add a confidential client api-client.\r\n3. Add a client role \"TestRole\"\r\n4. In api-client add a resource \"TestResource\", scope \"edit\", policy \"TestPolicy\" with Fetch roles enabled and using TestRole. Add a permission \"TestPermission\" with the \"TestPolicy\" and \"edit\" scope.\r\n5.Add a second realm\r\n6. Create a user \"Test\" in this realm\r\n7. Create a client in this realm to use in the first realm. \r\n8. In the first realm add the second realm as an idp and set \"Do not store users\" true. \r\n9. Get a token from webapp-client using the \"Test\" user\r\n10. Try to authorise acess to TestResource with edit scope. \r\n\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33113/comments",
    "author": "Joeydelarago",
    "comments": [
      {
        "user": "pedroigor",
        "created_at": "2024-10-01T20:23:10Z",
        "body": "@Joeydelarago We don't have transient users integrated with authorization services yet. We should work on this before making the feature supported."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-01T20:23:47Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-12-31T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 33060,
    "title": "Tests are showing exception while trying to import admin user after organizations were enabled by default",
    "created_at": "2024-09-18T13:48:03Z",
    "closed_at": "2024-09-20T13:24:43Z",
    "labels": [
      "area/testsuite",
      "kind/bug",
      "help wanted",
      "team/core-iam",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33060",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ntestsuite\n\n### Describe the bug\n\nAfter organizations was made supported and enabled by default, tests are showing an exception that doesn't affect the tests results, but polutes the log and signals an issue with the session not having the right realm when importing users via `keycloak-add-user.json`:\r\n\r\n```\r\n2024-09-18 09:55:30,514 INFO  [org.keycloak.services] (main) KC-SERVICES0077: Created temporary admin user with username admin\r\n2024-09-18 09:55:30,548 INFO  [org.keycloak.services] (main) KC-SERVICES0006: Importing users from '/home/sguilhen/Workspace/workspace-keycloak/keycloak/testsuite/integration-arquillian/tests/base/target/containers/auth-server-quarkus/bin/../conf/keycloak-add-user.json'\r\n2024-09-18 09:55:30,811 ERROR [org.keycloak.services] (main) KC-SERVICES0011: Failed to add user 'admin' to realm 'master': java.lang.IllegalArgumentException: Session not bound to a realm\r\n\tat org.keycloak.models.cache.infinispan.organization.InfinispanOrganizationProvider.getRealm(InfinispanOrganizationProvider.java:324)\r\n\tat org.keycloak.models.cache.infinispan.organization.InfinispanOrganizationProvider.cacheKeyByMember(InfinispanOrganizationProvider.java:338)\r\n\tat org.keycloak.models.cache.infinispan.organization.InfinispanOrganizationProvider.getByMember(InfinispanOrganizationProvider.java:212)\r\n\tat org.keycloak.storage.UserStorageManager.isOrganizationDisabled(UserStorageManager.java:933)\r\n\tat org.keycloak.storage.UserStorageManager.importValidation(UserStorageManager.java:120)\r\n\tat org.keycloak.storage.UserStorageManager.getUserByUsername(UserStorageManager.java:406)\r\n\tat org.keycloak.models.cache.infinispan.UserCacheSession.getUserByUsername(UserCacheSession.java:274)\r\n\tat org.keycloak.services.resources.KeycloakApplication.lambda$importAddUser$1(KeycloakApplication.java:267)\r\n\tat org.keycloak.models.utils.KeycloakModelUtils.lambda$runJobInTransaction$1(KeycloakModelUtils.java:263)\r\n\tat org.keycloak.models.utils.KeycloakModelUtils.runJobInTransactionWithResult(KeycloakModelUtils.java:386)\r\n\tat org.keycloak.models.utils.KeycloakModelUtils.runJobInTransaction(KeycloakModelUtils.java:262)\r\n\tat org.keycloak.services.resources.KeycloakApplication.importAddUser(KeycloakApplication.java:258)\r\n\tat org.keycloak.services.resources.KeycloakApplication.bootstrap(KeycloakApplication.java:168)\r\n\tat org.keycloak.services.resources.KeycloakApplication$1.run(KeycloakApplication.java:103)\r\n\tat org.keycloak.models.utils.KeycloakModelUtils.lambda$runJobInTransaction$1(KeycloakModelUtils.java:263)\r\n\tat org.keycloak.models.utils.KeycloakModelUtils.runJobInTransactionWithResult(KeycloakModelUtils.java:386)\r\n\tat org.keycloak.models.utils.KeycloakModelUtils.runJobInTransaction(KeycloakModelUtils.java:262)\r\n\tat org.keycloak.services.resources.KeycloakApplication.startup(KeycloakApplication.java:95)\r\n```\n\n### Version\n\nmain\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nTests should run with no exceptions shown while importing the admin user\n\n### Actual behavior\n\nTests are displaying the exception from the description\n\n### How to Reproduce?\n\nRun any test from the CLI, like:\r\n\r\n`mvn -f testsuite/integration-arquillian/tests/base/pom.xml clean install -Pauth-server-quarkus -Dtest=OrganizationTest`\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33060/comments",
    "author": "sguilhen",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-09-18T13:48:31Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 33058,
    "title": "Clusterless feature is not tested in Model tests",
    "created_at": "2024-09-18T13:28:21Z",
    "closed_at": "2024-09-24T12:06:53Z",
    "labels": [
      "area/testsuite",
      "kind/bug",
      "area/infinispan",
      "help wanted",
      "team/sre",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/33058",
    "body": null,
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/33058/comments",
    "author": "mhajas",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-09-23T11:43:21Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 32995,
    "title": "LDAP user federation does not respect client scope custom mappers order",
    "created_at": "2024-09-16T16:41:01Z",
    "closed_at": "2025-02-11T00:06:01Z",
    "labels": [
      "kind/bug",
      "area/ldap",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/32995",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nldap\n\n### Describe the bug\n\nWe have defined custom client scope with custom mapper (written in js). This mapper is quite simple - just filtering-out the roles starting with specific prefix and put them into additional token claim (and everything works fine when we authenticate users defined directly in Keycloak).\r\n\r\nSo it looks like this:\r\n\r\n```\r\n\"roles\": [\r\n    \"suncorp_viewer\",\r\n    \"offline_access\",\r\n    \"suncorp_admin\"\r\n  ],\r\n```\r\n\r\nand mapper put those filtered roles into to another claim like:\r\n\r\n\r\n```\r\n\"suncorp_roles\": [\r\n    \"suncorp_viewer\",\r\n    \"suncorp_admin\"\r\n  ],\r\n```\r\n\r\nSo far - so good ;)\r\n\r\nRecently we had to add LDAP integration. The LDAP which we had to integrate with has a groups so to keep our internal roles up-to-date based on LDAP groups we assigned roles to groups in Keycloak.\r\n\r\nSo when our openid connection is used for LDAP user we receive the following token:\r\n\r\n```\r\n  \"roles\": [\r\n    \"offline_access\",\r\n    \"suncorp_admin\",\r\n    \"suncorp_viewer\",\r\n  ],\r\n  \"groups\": [\r\n    \"/ldap_grup_a\",\r\n    \"/ldap_group_b\"\r\n  ],\r\n```\r\n\r\nAnd here the problem begins. As we identified our custom client scope mappers are execute before keycloak itself process the token roles from the groups - so our token get the following token content for processing:\r\n\r\n```\r\n  \"roles\": [\r\n    \"offline_access\",\r\n    \"uma_authorization\",\r\n  ],\r\n  \"groups\": [\r\n    \"/ldap_grup_a\",\r\n    \"/ldap_group_b\"\r\n  ],\r\n```\r\n\r\nFrom our perspective the roles which are coming from groups should be already existing in the token before custom scope mappers are executed - so it seems like the bug (?). If you have any recommendations how to deal with the issues or maybe is there a way to get token with proper (all) roles first before custom mapper will be triggered - please let us know. Thanks\n\n### Version\n\n25.0.5\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nCustom mappers executed when LDAP users federation calculate groups and roles based on LDAP and Keycloak (mapping group to roles) settings\n\n### Actual behavior\n\nCustom mappers executed before realm roles based on group assignment are added to the token\n\n### How to Reproduce?\n\n- create custom mapper (which doing something with realm roles)\r\n- integrate with LDAP and LDAP groups + add some binding for realm roles based on the groups populated from LDAP\r\n- login to execute custom mappers - there realm roles assigned based on groups won't be available on the token (it looks like there are added later)\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/32995/comments",
    "author": "pnowy",
    "comments": [
      {
        "user": "sguilhen",
        "created_at": "2024-09-25T16:30:57Z",
        "body": "@mposolda while this is ldap-related, I'm not sure about the custom mapper execution order.  Would you have any input for this one or should I assign this to core-clients?"
      },
      {
        "user": "pedroigor",
        "created_at": "2024-10-04T12:01:14Z",
        "body": "Let's see what @mposolda has to say but IIRC the execution order is not guaranteed/configurable and non-deterministic.\r\n\r\n@pnowy Would be possible to have your provider in Java? If so, then you have access to APIs that will allow you to do wat you want in a more consistent way."
      },
      {
        "user": "pnowy",
        "created_at": "2024-10-11T15:51:00Z",
        "body": "@pedroigor - unfortunately not possible. Right now we handled the issue providing additional mappers which are doing the same stuff what our original mapper but based on groups and convert them into filtered roles (but this is ugly workaround and possible only because we have specific naming conventions).\r\n\r\n\r\n\r\n"
      },
      {
        "user": "pedroigor",
        "created_at": "2024-10-15T11:23:16Z",
        "body": "@pnowy I was about to ask something similar. From the JS mapper you have access to the `user`, `realm`, and other objects. Can't you change the logic of your mapper to get roles using those objects instead of relying on the claims being set by other mappers?"
      },
      {
        "user": "pnowy",
        "created_at": "2024-10-15T13:06:13Z",
        "body": "@pedroigor indeed - we are using the realm to handle the issue with that extra mappers (otherwise it won't be possible at all) but please take into account the starting point of this entire issue is that we have LDAP integration and LDAP groups mapped to keycloak groups where keycloak groups have assigned Keycloak roles.\r\n\r\nWe expected that in this setup our existing mappers will get during processing that final set of roles (including roles which are calculated based on assigned groups mapped with LDAP) but this is not happening. For me it doesn't work fully correct - I would expect that identity federation is transparent on the Keycloak API level - but is not from my perspective. Please fix me if I'm wrong - maybe this is just some design by default when roles are not assigned directly to the user but they are coming from the group in which user is. Thanks."
      },
      {
        "user": "mposolda",
        "created_at": "2024-10-16T13:29:06Z",
        "body": "@pnowy @pedroigor @sguilhen The interface `ProtocolMapper` has the method `getPriority()` . So the order is defined at the implementation level, but not configurable. I am personally seeing this as an enhancement/rfe to allow defined order of mappers rather than a bug. \r\n\r\nI think you can possibly achieve what you want by:\r\n\r\n- Implement the mapper in Java and inherit from some Keycloak default mapper and override just the method `getPriority()` to make sure that groups are processed before your JS mapper\r\n- Not use groups at all, but rather use LDAP role-mapper to map your LDAP groups to Keycloak roles, so they are directly available on user as roles, which means that you won't need to deal with groups.\r\n"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-16T17:57:31Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-02-11T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 32829,
    "title": "Login V2 theme: Pages specify fewer tabindex entries",
    "created_at": "2024-09-11T17:32:05Z",
    "closed_at": "2024-09-13T12:18:51Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/login/ui",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/32829",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\nlogin/ui\r\n\r\n### Describe the bug\r\n\r\nWhen looking in the base login.ftl, this specifies 8 tabindex attributes. When looking at the Login v2 login.ftl, it specifies only one random tabindex (6). \r\n\r\nThis is an accessibility issue. \r\n\r\n### Version\r\n\r\nmain\r\n\r\n### Regression\r\n\r\n- [X] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nTab key should cycle through the items in the order they are displayed in the browser.\r\n\r\n### Actual behavior\r\n\r\nFewer tabindex attributes are set up. This might lead to items appear in the wrong order when using \"tab\". \r\n\r\nIn this case, the \"forgot password\" link is not reachable in the natural order. On Chrome it is available only after iterating through all items in the form, the address bar, the bookmark item, and only then it is in focus. \r\n\r\n### How to Reproduce?\r\n\r\nReview the code\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/32829/comments",
    "author": "ahus1",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-09-12T09:19:15Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "ahus1",
        "created_at": "2024-09-12T13:41:58Z",
        "body": "Updated the expected behavior from \r\n\r\n> Tabindex should be assigned to all navigatable fields\r\n\r\nto be\r\n\r\n> Tab key should cycle through the items in the order they are displayed in the browser.\r\n\r\nas the bug issue should tell a (wrong) solution."
      }
    ]
  },
  {
    "number": 32788,
    "title": "Entering a duration updates value on typing the value",
    "created_at": "2024-09-10T20:42:29Z",
    "closed_at": "2025-01-23T00:06:05Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/32788",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nWhen enter a duration, the value is recalculated when I type\n\n### Version\n\nmain\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nWhen entering a duration in seconds, it should re-calculate the value to minutes only when I leave the field, even better only when I leave the complete control or safe the value.\n\n### Actual behavior\n\nWhen I have \"30 Seconds\" in a field, and I type another \"0\", it switches to \"5 Minutes\" immediately. This is unexpected as I was about to add to more values, or wanted to change the unit afterwards.\n\n### How to Reproduce?\n\n* Enter \"30 Seconds\"\r\n* Add another \"0\"\n\n### Anything else?\n\nAs this is unexpected to the user I consider it as a bug. ",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/32788/comments",
    "author": "ahus1",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-09-11T19:08:14Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "ssilvert",
        "created_at": "2024-09-11T19:11:44Z",
        "body": "I have verified this bug.  It only occurs if you happen to hit an exact value needed to move to the next unit.\r\n\r\nFor instance, if I type `300`, it will immediately change from seconds to minutes because 300 seconds is exactly 5 minutes.  \r\n\r\nBut if I type `301` the units will stay as seconds."
      },
      {
        "user": "edewit",
        "created_at": "2024-10-24T09:58:55Z",
        "body": "what we try to do is make it easier to add time, the only way to fix this would be to go back to a simple number field where you add the time as it is stored."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-01-23T00:06:04Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 32786,
    "title": "Organization Domain not marked as a required field in the Admin UI",
    "created_at": "2024-09-10T19:49:56Z",
    "closed_at": "2024-10-29T12:32:26Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.1.0",
      "release/26.0.6"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/32786",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nWhen creating a new organization using the Admin UI, the **Create organization** page shows only the **Name** as a required field, but if you only provide the name and hit **Save**, the UI shows this error: 'Could not save the organization: You must provide at least one domain`, indicating that the domain is required even though the field is marked as a required field in the UI.\n\n### Version\n\nmain\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nCreat organization screen should show the Domain field as required\n\n### Actual behavior\n\nDomain field is not marked as required, and yet any attempt to create an org without the domain results in an error message\n\n### How to Reproduce?\n\nEnabled orgs for the realm, go to Organization and try to create an org without a domain.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/32786/comments",
    "author": "sguilhen",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-09-10T20:06:45Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 32761,
    "title": "The endpoint /admin/realms/{{realm}}/groups/{{group-id}}/members potentially fetch all user in database",
    "created_at": "2024-09-10T09:21:37Z",
    "closed_at": "2024-09-24T07:51:36Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "priority/normal",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/32761",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\nadmin/api\r\n\r\n### Describe the bug\r\n\r\nThe endpoint /admin/realms/{{realm}}/groups/{{group-id}}/members accept three arguments, first, max and briefRepresentation. \r\nWhen using \"first\" to offset the users retrieved, Keycloak fetch all the \"first\" number of users instead of retrieving the \"max\" number of user at the \"first\" offset.\r\n\r\n Looking at the code the problem seems to be in `org.keycloak.storage.UserStorageManager#getGroupMembersStream(org.keycloak.models.RealmModel, org.keycloak.models.GroupModel, java.lang.Integer, java.lang.Integer) `where the overload `org.keycloak.storage.UserStorageManager#query(org.keycloak.storage.UserStorageManager.PaginatedQuery, org.keycloak.models.RealmModel, java.lang.Integer, java.lang.Integer)` is called instead of this one `org.keycloak.storage.UserStorageManager#query(org.keycloak.storage.UserStorageManager.PaginatedQuery, org.keycloak.storage.UserStorageManager.CountQuery, org.keycloak.models.RealmModel, java.lang.Integer, java.lang.Integer)`\r\n\r\nThis result in the first argument of the query method (the paginated query used to actually retrive the users) being used to count the number of users the provider can provide.\r\n\r\nOn a large database and an offset big enough this result in an OOM.\r\n\r\n### Version\r\n\r\n25.0.5\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nCalling /admin/realms/{{realm}}/groups/{{group-id}}/members with the first argument does not fetch \"first\" + 1 users in database but instead fetch \"max\" users at \"first\" offset\r\n\r\n### Actual behavior\r\n\r\nCalling /admin/realms/{{realm}}/groups/{{group-id}}/members does return the excepted result but internally fetch the all the \"first\" users, resulting in OOM with a large \"first\" offset \r\n\r\n### How to Reproduce?\r\n\r\nStart keycloak with a limited amount of memory and a realm with a large number of users. Make a call to /admin/realms/{{realm}}/groups/{{group-id}}/members with the first parameter being set to the number of users in database.\r\nIf the number of user is large enough keycloak will OOM, take a very long time.\r\nActivating hibernate SQL logging will show that keycloak retrieve  all users in database\r\n\r\n### Anything else?\r\n\r\norg.keycloak.storage.UserStorageManager#searchForUserStream calls the correct UserStorageManager#query, maybe getGroupMembersStream should do the same ?",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/32761/comments",
    "author": "newwdles",
    "comments": [
      {
        "user": "sguilhen",
        "created_at": "2024-09-17T13:19:49Z",
        "body": "I agree there's room to improve the efficiency of these methods - accepting the issue. Any contributions to fix these are very welcome!"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-09-17T13:20:10Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 32578,
    "title": "WebAuthn Flows Broken in login.v2",
    "created_at": "2024-09-02T12:52:13Z",
    "closed_at": "2024-09-10T08:17:12Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/login/ui",
      "team/core-clients",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.6"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/32578",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nlogin/ui\n\n### Describe the bug\n\nAs a follow-up to #32365, this issue also affects the login.v2 theme making it impossible to login using a security or registering a new one. The error in the js console is the same \r\n\r\n```\r\nTypeError: Failed to resolve module specifier \"rfc4648\". Relative references must start with either \"/\", \"./\", or \"../\".\r\n```\n\n### Version\n\n25.0.4\n\n### Regression\n\n- [X] The issue is a regression\n\n### Expected behavior\n\nLogin with a security key or registration of a new one is possible.\n\n### Actual behavior\n\nThe error mentioned above is thrown.\n\n### How to Reproduce?\n\nHave a keycloak instance with the login2 feature flag enabled.\r\nEnable it in a realm and create a webauthn enabled browser flow.\r\nTry to register a new key.\n\n### Anything else?\n\nIt used to work in 24.0.x",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/32578/comments",
    "author": "ThoreKr",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-09-02T14:32:37Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "jonkoops",
        "created_at": "2024-09-02T14:35:33Z",
        "body": "Fix for this is up under #32589"
      },
      {
        "user": "ahus1",
        "created_at": "2024-09-10T08:17:12Z",
        "body": "Closing as this has now been merged in the release 25 branch."
      }
    ]
  },
  {
    "number": 32279,
    "title": "User policy based fine-grained permission not evaluated correctly",
    "created_at": "2024-08-20T14:37:08Z",
    "closed_at": "2025-02-11T00:06:03Z",
    "labels": [
      "kind/bug",
      "area/admin/fine-grained-permissions",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/32279",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/fine-grained-permissions\n\n### Describe the bug\n\nWhen using User Policy to grant fine-grained permissions for a client (view, configure, manage) to a service account user they are not evaluated correctly. If the same permissions are granted using a Role Policy then they are correctly evaluated. \r\n\r\n\n\n### Version\n\n25.0.4\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nGet of `admin/realms/${REALM}/clients?clientId=myclient` endpoint should return list of all clients for which a user has `view.permission.client.<client_uuid>` permission assigned based on a User Policy. \n\n### Actual behavior\n\nGet of `admin/realms/${REALM}/clients?clientId=myclient` endpoint returns empty list for users that have been granted view permissions via a User Policy.\n\n### How to Reproduce?\n\n1. Create a confidential client `myclient` with a service account and activate fine-grained permissions.\r\n2. Add the `realm-management` role `query-clients` to the `service-account-myclient` user.\r\n3. Create User Policy in the `realm-management` client using `service-account-myclient` user.\r\n4. Add the user policy to the `view.permission.client.<client_uuid>` permission for `myclient`.\r\n5. Get `admin/realms/${REALM}/clients?clientId=myclient` endpoint returns an empty list.\n\n### Anything else?\n\nWorkaround\r\n------------\r\n1. Create a `myclient` client role `myrole`.\r\n2. Assign `myrole` to `service-account-myclient`.\r\n3. Create `realm-management` Role Policy based on `myrole`.\r\n4. Add Role policy to the `view.permission.client.<client_uuid>` permission for `myclient`. (Remove the user role or make the decision type affirmative).\r\n5. Get `admin/realms/${REALM}/clients?clientId=myclient` endpoint returns a list with  `myclient` representation.\r\n\r\nMisc\r\n-----\r\nThis issue was found when investigating potential workarounds for #20431 and is at least partially responsible for that issue. I currently work #20431 by using a Role Policy everywhere the documentation suggests using a User Policy.\r\n\r\nI tracked the issue to incorrect value being returned by `auth.clients().canView(c)` on line 147 of `org/keycloak/services/resources/admin/ClientsResource.java` when using User Policy compared to a Role Policy.\r\n",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/32279/comments",
    "author": "mklassen",
    "comments": [
      {
        "user": "pedroigor",
        "created_at": "2024-10-21T13:27:11Z",
        "body": "When using a service account, the user policy will fail to match users because the `id` of the `Identity` object is set to the `client id` of the client/service account.\r\n\r\nThe feature had regular/end users in mind."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-21T13:27:41Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-02-11T00:06:02Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 31574,
    "title": "Email not verified when clicking on email link.",
    "created_at": "2024-07-24T11:06:40Z",
    "closed_at": "2024-10-29T00:06:13Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/login/ui",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/31574",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\nlogin/ui\r\n\r\n### Describe the bug\r\n\r\nUsers email is not verified when clicking on the link in the email, only after getting a token the users email will be marked verified.\r\n\r\nI have registered a custom URI scheme in my android app, for deep linking.\r\nI set the redirect URI in Keycloak to reflect this custom scheme. (e.g. `example://some_callback`)\r\n\r\nBut when a user opens the email on their desktop, laptop or any other device which doesn't know how to handle this protocol, a HTML page is displayed showing a message like \"your email is now verified\" but the email will not be verified when checking the admin console.\r\nI think this is because a token needs to be requested before the email will actually be verified.\r\n\r\n### Version\r\n\r\n25.0.0\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nWhen clicking on the verify email link in the email the email should be verified, even when the protocol cannot be handled by the device the user is using.\r\n(as the code is bound to the users account, and cannot be used to verify another users account.)\r\n\r\n\r\n### Actual behavior\r\n\r\nWhen clicking on the verify email link in the email a HTML page is returned displaying a \"your email is now verified\" message.\r\nBut when checking the admin console, the email is not verified.\r\n\r\n### How to Reproduce?\r\n\r\n- Register a redirect_uri with a custom scheme, e.g. `example://some_callback`\r\n- Enable email verification\r\n- Create a new account using this redirect_uri\r\n- Open the link in the email on a device which doesn't know how to handle this protocol\r\n- Confirm that the email is not verified in the admin console.\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/31574/comments",
    "author": "sjoerd0301",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-30T10:02:04Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-29T00:06:11Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      },
      {
        "user": "harish-afero",
        "created_at": "2025-01-31T09:31:35Z",
        "body": "Is there a solution for this?\n"
      }
    ]
  },
  {
    "number": 31568,
    "title": "Incremental build of Quarkus dist doesn't use latest version",
    "created_at": "2024-07-24T09:57:26Z",
    "closed_at": "2025-01-01T00:06:03Z",
    "labels": [
      "kind/bug",
      "area/ci",
      "help wanted",
      "team/sre",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/31568",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nci\n\n### Describe the bug\n\nWhen building the Quarkus distribution, I found that incremental builds without `clean` didn't unpack the latest version of the artifacts. It took me some time to find this, so I'm creating this issue to fix it. \n\n### Version\n\nmain\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nIncremental builds should use the latest artifacts\n\n### Actual behavior\n\nBuild will reuse the already unpacked version.\n\n### How to Reproduce?\n\nChange file like `InfinispanSingleUseObjectProviderFatory`, and then rebuild using \r\n\r\n```\r\n./mvnw -Dmaven.build.cache.enabled=true install -DskipTests -am -pl quarkus/dist\r\n```\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/31568/comments",
    "author": "ahus1",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-02T11:40:08Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-01-01T00:06:02Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 31410,
    "title": "call to group-by-path does not return subGroupCount",
    "created_at": "2024-07-18T13:09:00Z",
    "closed_at": "2024-09-23T06:28:08Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/31410",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/api\n\n### Describe the bug\n\nWhen requesting a group by path, response should contain a \"subGroupCount\" property but is does not\r\n\r\nWHEN GET /admin/realms/{realm}/group-by-path/{path}\r\nTHEN response contains subGroupCount . example ;\r\n\r\n````\r\n{\r\n  \"id\": \"e1e5dffe-9d87-4bca-a796-8f0ebf64a14c\",\r\n  \"name\": \"everybody\",\r\n  \"path\": \"/everybody\",\r\n  \"subGroupCount\": 2,\r\n  \"subGroups\": [],\r\n  \"attributes\": {},\r\n  \"realmRoles\": [],\r\n  \"clientRoles\": {}\r\n}\r\n````\n\n### Version\n\n23.0.7 reproduiced with 25.0.2\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nGET /admin/realms/{realm}/group-by-path/{path}\r\nTHEN response contains subGroupCount . example ;\r\n\r\n````\r\n{\r\n  \"id\": \"e1e5dffe-9d87-4bca-a796-8f0ebf64a14c\",\r\n  \"name\": \"everybody\",\r\n  \"path\": \"/everybody\",\r\n  \"subGroupCount\": 2,\r\n  \"subGroups\": [],\r\n  \"attributes\": {},\r\n  \"realmRoles\": [],\r\n  \"clientRoles\": {}\r\n}\r\n````\n\n### Actual behavior\n\nsubGroupCount is missing from response : \r\n\r\n````\r\n{\r\n  \"id\": \"e1e5dffe-9d87-4bca-a796-8f0ebf64a14c\",\r\n  \"name\": \"everybody\",\r\n  \"path\": \"/everybody\",\r\n  \"subGroups\": [],\r\n  \"attributes\": {},\r\n  \"realmRoles\": [],\r\n  \"clientRoles\": {}\r\n}\r\n````\n\n### How to Reproduce?\n\nCreate a group with subgroups and request GET /admin/realms/{realm}/group-by-path/{path}\n\n### Anything else?\n\nWhen requesting by id or listing groups, subGroundCount is present\r\n\r\nGET /admin/realms/{realm}/groups/{id}\r\nGET /admin/realms/{realm}/groups",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/31410/comments",
    "author": "TiboGr",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-23T16:39:45Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "pedroigor",
        "created_at": "2024-07-23T16:40:40Z",
        "body": "Marking as priority/normal as we don't return the count at that endpoint. We can probably use the same logic as `org.keycloak.services.resources.admin.GroupResource#getGroup` to call `GroupUtils.populateSubGroupCount(group, rep)` when returning the representation."
      }
    ]
  },
  {
    "number": 31359,
    "title": "Offline sessions are not removed from admin console after sign out all active sessions",
    "created_at": "2024-07-17T06:26:16Z",
    "closed_at": "2024-11-29T15:35:17Z",
    "labels": [
      "kind/bug",
      "area/core",
      "help wanted",
      "team/core-iam",
      "team/core-shared",
      "priority/normal",
      "release/26.1.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/31359",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nWhen \"sign out all active sessions\" are pushed in admin console, offline tokens are invalidated, but offline sessions are still displayed in \"sessions\". They should be removed from \"sessions\", because offline tokens are invalid.\n\n### Version\n\n25.0.1\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nOffline sessions in admin console \"sessions\" are removed when \"sign out all active sessions\" are pushed, and offline tokens are also invalidated.\n\n### Actual behavior\n\nWhen \"sign out all active sessions\" are pushed in admin console, offline tokens are invalidated, but offline sessions are still displayed in \"sessions\".\n\n### How to Reproduce?\n\n- Take access token and refresh token(offline token) with \"offline_access\" scope\r\n- See \"sessions\" in admin console, and offline session is displayed\r\n- Push \"sign out all active sessions\"\r\n- Use offline token in token refresh flow. Response is \"400 Bad Request: \"{\"error\":\"invalid_grant\",\"error_description\":\"Stale token\"}\"{\"error\":\"invalid_grant\",\"error_description\":\"Stale token\"}\" and access token is not returned.\r\n- See \"sessions\" in admin console, and offline session is still displayed\r\n\r\n\r\n\r\n\r\n\r\n\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/31359/comments",
    "author": "yuichi-nakamura",
    "comments": [
      {
        "user": "ssilvert",
        "created_at": "2024-07-17T20:01:43Z",
        "body": "@yuichi-nakamura Does pressing the \"Refresh\" link update the UI properly?"
      },
      {
        "user": "yuichi-nakamura",
        "created_at": "2024-07-18T02:32:10Z",
        "body": "@ssilvert After pressing \"refresh\", offline sessions are still displayed."
      },
      {
        "user": "y-tabata",
        "created_at": "2024-07-19T01:16:52Z",
        "body": "The existing behavior is that when calling logout all, active sessions are deleted, and \"not before\" is set in the realm, causing offline sessions to become \"stale tokens\"."
      },
      {
        "user": "ahtisham4377",
        "created_at": "2024-10-16T13:47:54Z",
        "body": "@yuichi-nakamura \r\nTo remove offline sessions from the Keycloak admin console, first, check the session lifespan in the cache configuration file (e.g., cache-ispn.xml or a related file), adjust the lifespan as required, and then set the environment variable KEYCLOAK_SESSION_CLEANUP_INTERVAL. This interval determines how often session cleanup runs, removing only invalidated sessions during the process."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-21T13:02:02Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 30752,
    "title": "Can not import another template that is outside current directory",
    "created_at": "2024-06-25T13:57:47Z",
    "closed_at": "2024-10-16T00:06:01Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/login/ui",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/30752",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nimport-export\n\n### Describe the bug\n\nTemplate that is outside the current directory can not be resolved properly upon starting the keycloak in a docker.\r\n\r\nIf imported relatively for example: \r\n`<#import \"../test.ftl\" as test>`\r\n\r\n it says:\r\n\r\n`keycloak  | 2024-06-25 13:54:03,995 SEVERE [freemarker.runtime] (executor-thread-5) Error executing FreeMarker template: freemarker.core._MiscTemplateException: Template importing failed (for parameter value \"../test.ftl\"):\r\nkeycloak  | Template not found for name \"../test.ftl\".\r\nkeycloak  | Reason given: Backing out from the root directory is not allowed.\r\nkeycloak  | The name was interpreted by this TemplateLoader: org.keycloak.theme.freemarker.DefaultFreeMarkerProvider$ThemeTemplateLoader@55d06c6.\r\n`\r\n\r\nIf imported absolutely:\r\n`<#import \"/custom-themes/common/common-theme/test.ftl\" as test>`\r\n\r\nit says:\r\n\r\n`keycloak  | Caused by: freemarker.core._MiscTemplateException: Template importing failed (for parameter value \"/custom-themes/common/common-theme/test.ftl\"):\r\nkeycloak  | Template not found for name \"custom-themes/common/common-theme/test.ftl\".\r\nkeycloak  | The name was interpreted by this TemplateLoader: org.keycloak.theme.freemarker.DefaultFreeMarkerProvider$ThemeTemplateLoader@5fe8ef36.\r\nkeycloak  | \r\nkeycloak  | ----\r\nkeycloak  | FTL stack trace (\"~\" means nesting-related):\r\nkeycloak  |     - Failed at: #import \"/custom-themes/common/common...  [in template \"login.ftl\" at line 2, column 1]\r\nkeycloak  | ----\r\n`\n\n### Version\n\n24.0.2\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nThe templates are resolved fine and macros can be used.\n\n### Actual behavior\n\nImporting templates out of current directory results with error\n\n### How to Reproduce?\n\nImport a template outside of the current directory\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/30752/comments",
    "author": "dr0kz",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-17T13:55:33Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-16T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      },
      {
        "user": "troyere",
        "created_at": "2025-02-06T16:29:51Z",
        "body": "This subject should be reopened, we are forced to duplicate lots of codes and assets because of that"
      }
    ]
  },
  {
    "number": 30738,
    "title": "Keycloak with quarkus: Response has already been written",
    "created_at": "2024-06-25T10:27:18Z",
    "closed_at": "2024-10-16T00:06:03Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/login/ui",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/30738",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nlogin/ui\n\n### Describe the bug\n\nWe are using keycloak 25.0.0 with Keycloakify for our Custom theme, we have noticed that after a certain amount of time without restarted the server we are getting some error logs which result in some images not being shown\n\n### Version\n\n25.0.0\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nServe the images\n\n### Actual behavior\n\nNot serving the images\n\n### How to Reproduce?\n\nInstall keycloak 25.0.0, Having some static files on Keyclokify jar, after some time the images from login are not show with the stack trace provided\n\n### Anything else?\n\n`5T10:08:02.5842291Z 2024-06-25 10:08:02,583 ERROR [io.quarkus.vertx.http.runtime.QuarkusErrorHandler] (executor-thread-81) HTTP Request to /resources/rdu7x/login/keycloakify-starter/build/static/media/logo.463331ec2ea8841b7bb5.png failed, error id: b449f181-2994-4546-82bb-85278943171b-18: java.lang.IllegalStateException: Response has already been written 2024-06-25T10:08:02.5842460Z \tat io.vertx.core.http.impl.Http1xServerResponse.checkValid(Http1xServerResponse.java:716) 2024-06-25T10:08:02.5842501Z \tat io.vertx.core.http.impl.Http1xServerResponse.exceptionHandler(Http1xServerResponse.java:295) 2024-06-25T10:08:02.5842538Z \tat org.jboss.resteasy.reactive.server.vertx.ResteasyReactiveOutputStream.<init>(ResteasyReactiveOutputStream.java:46) 2024-06-25T10:08:02.5842576Z \tat org.jboss.resteasy.reactive.server.vertx.VertxResteasyReactiveRequestContext.createResponseOutputStream(VertxResteasyReactiveRequestContext.java:457) 2024-06-25T10:08:02.5842613Z \tat org.jboss.resteasy.reactive.server.core.ResteasyReactiveRequestContext.getOrCreateOutputStream(ResteasyReactiveRequestContext.java:999) 2024-06-25T10:08:02.5842665Z \tat io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyWriter.writeResponse(FullyFeaturedServerJacksonMessageBodyWriter.java:54) 2024-06-25T10:08:02.5842706Z \tat org.jboss.resteasy.reactive.server.core.ServerSerialisers.invokeWriter(ServerSerialisers.java:216) 2024-06-25T10:08:02.5842745Z \tat org.jboss.resteasy.reactive.server.core.serialization.DynamicEntityWriter.write(DynamicEntityWriter.java:106) 2024-06-25T10:08:02.5842785Z \tat org.jboss.resteasy.reactive.server.handlers.ResponseWriterHandler.handle(ResponseWriterHandler.java:32) 2024-06-25T10:08:02.5842825Z \tat io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:147) 2024-06-25T10:08:02.5842864Z \tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:147) 2024-06-25T10:08:02.5842899Z \tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:582) 2024-06-25T10:08:02.5842944Z \tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513) 2024-06-25T10:08:02.5842984Z \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538) 2024-06-25T10:08:02.5843020Z \tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29) 2024-06-25T10:08:02.5843059Z \tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29) 2024-06-25T10:08:02.5843100Z \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) 2024-06-25T10:08:02.5843136Z \tat java.base/java.lang.Thread.run(Thread.java:1583) 2024-06-25T10:08:02.5843170Z `",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/30738/comments",
    "author": "gilamarko",
    "comments": [
      {
        "user": "shawkins",
        "created_at": "2024-06-25T10:37:08Z",
        "body": "Similar to #27157 - no resolution was found there."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-17T14:03:33Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-16T00:06:02Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 30454,
    "title": "Server crash when using kc.sh with -Dkeycloak.profile=experimental",
    "created_at": "2024-06-14T16:44:52Z",
    "closed_at": "2024-09-16T07:37:21Z",
    "labels": [
      "kind/enhancement",
      "area/dist/quarkus",
      "help wanted",
      "team/cloud-native",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/30454",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\ndist/quarkus\r\n\r\n### Describe the bug\r\n\r\nWhile experimenting with the -Dkeycloak.profile=experimental feature in Keycloak 25, the server crashes upon startup.\r\n\r\n### Version\r\n\r\n25.0.0\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nThe Keycloak server should start successfully with the experimental profile enabled, or provide a warning that the parameter is not supported.\r\n\r\n### Actual behavior\r\n\r\nThe server crashes and fails to start when provided with the -Dkeycloak.profile=experimental argument.\r\n\r\n### How to Reproduce?\r\n\r\n1. Download Keycloak 25.\r\n2. Execute the following command.\r\n```\r\nbin/kc.sh -Dkeycloak.profile=experimental start-dev --http-port 8180 --https-port=8443\r\n```\r\n\r\n### Anything else?\r\n\r\n**Log error:**\r\n\r\n```\r\n2024-06-14 13:39:02,127 DEBUG [io.smallrye.config._private] (main) SRCFG01006: Loaded ConfigSource DefaultValuesConfigSource with ordinal -2147483648\r\n\r\nException in thread \"main\" java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at io.quarkus.bootstrap.runner.QuarkusEntryPoint.doRun(QuarkusEntryPoint.java:62)\r\n        at io.quarkus.bootstrap.runner.QuarkusEntryPoint.main(QuarkusEntryPoint.java:33)\r\nCaused by: java.lang.IllegalArgumentException: No enum constant org.keycloak.common.Profile.ProfileName.EXPERIMENTAL\r\n        at java.base/java.lang.Enum.valueOf(Enum.java:273)\r\n        at org.keycloak.common.Profile$ProfileName.valueOf(Profile.java:412)\r\n        at org.keycloak.common.profile.PropertiesProfileConfigResolver.getProfileName(PropertiesProfileConfigResolver.java:24)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        at java.base/java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:1002)\r\n        at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)\r\n        at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n        at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)\r\n        at org.keycloak.common.Profile.configure(Profile.java:228)\r\n        at org.keycloak.quarkus.runtime.Environment.getCurrentOrCreateFeatureProfile(Environment.java:256)\r\n        at org.keycloak.quarkus.runtime.configuration.mappers.PropertyMappers$MappersConfig.lambda$sanitizeDisabledMappers$1(PropertyMappers.java:261)\r\n        at org.keycloak.quarkus.runtime.configuration.DisabledMappersInterceptor.runWithDisabled(DisabledMappersInterceptor.java:86)\r\n        at org.keycloak.quarkus.runtime.configuration.mappers.PropertyMappers$MappersConfig.sanitizeDisabledMappers(PropertyMappers.java:255)\r\n        at org.keycloak.quarkus.runtime.configuration.mappers.PropertyMappers.sanitizeDisabledMappers(PropertyMappers.java:125)\r\n        at org.keycloak.quarkus.runtime.cli.Picocli.parseAndRun(Picocli.java:118)\r\n        at org.keycloak.quarkus.runtime.KeycloakMain.main(KeycloakMain.java:99)\r\n        ... 6 more\r\n```\r\n",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/30454/comments",
    "author": "abstractj",
    "comments": [
      {
        "user": "shawkins",
        "created_at": "2024-06-18T11:29:27Z",
        "body": "> The Keycloak server should start successfully with the experimental profile enabled, or provide a warning that the parameter is not supported.\r\n\r\nThe only supported values are DEFAULT, and PREVIEW. When you say warning - do you mean that the server should still start even if the profile value is invalid?"
      },
      {
        "user": "shawkins",
        "created_at": "2024-06-19T11:27:41Z",
        "body": "~prioirity-low"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-20T11:33:22Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "mabartos",
        "created_at": "2024-09-13T09:49:19Z",
        "body": "I think it's rather an enhancement to improve the error message than a bug. IMO, the server should not start when the wrong profile is set. \r\n\r\n@abstractj Changed to enhancement, ok? "
      }
    ]
  },
  {
    "number": 30181,
    "title": "[DPoP] token_type on UserInfoEndpoint expects Bearer instead of DPoP",
    "created_at": "2024-06-05T19:42:06Z",
    "closed_at": "2024-07-29T14:30:55Z",
    "labels": [
      "area/oidc",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "status/auto-bump",
      "priority/normal",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/30181",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nauthorization-services\n\n### Describe the bug\n\nThe UserInfoToken responds with 401 if the UserInfoEndpoint is accessed with a DPoP Token if the Authorization HTTP-Header does not use the `Bearer` scheme.\r\n```\r\nPOST /userinfo\r\nAuthorization Bearer ...\r\n```\r\n\r\nbut according to RFC9449 section 7.1 the authentication scheme must be `DPoP`\r\n\r\n```\r\nPOST /userinfo\r\nAuthorization DPoP ...\r\n```\r\n\r\nfrom my personal point of view it does not hurt to support both usecases: \r\n1. auth-schema set to `Bearer`\r\n2. auth-schema set to `DPoP`\r\n\r\nIt is not defined like this but since the auth-scheme does actually have no impact on the evaluation results it shouldn't be a problem.\n\n### Version\n\n24.0.5\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nUserInfoEndpoint returns 200 if the authentication scheme is set to DPoP. \n\n### Actual behavior\n\nUserInfoEndpoint returns 401 if the authentication scheme is set to DPoP. \n\n### How to Reproduce?\n\nSet authentication-scheme to `DPoP` when trying to get the userInfoToken when the AccessToken was received as DPoP bound accessToken\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/30181/comments",
    "author": "Captain-P-Goldfish",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-06T13:29:45Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 30128,
    "title": "Partial Import does not work",
    "created_at": "2024-06-04T09:09:43Z",
    "closed_at": "2024-06-06T07:24:45Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/30128",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nAfter using \"Partial Export\" I cannot import the file using \"Partial Import\" (the \"Import\" button stays grayed out).\n\n### Version\n\n24.0.5\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nfile can be imported (by browse, d'n'd, paste)\n\n### Actual behavior\n\n\"Import\" button stays grayed out.\n\n### How to Reproduce?\n\n1. create new realm\r\n2. go to realm settings\r\n3. actions --> partial export: keep defaults, save file.\r\n4. actions --> partial import: browser for file\r\n\r\nobserve the import button stays grayed out.\n\n### Anything else?\n\ntested in Firefox 126 and Edge 125\r\n\r\ntested via container: `podman run -p 8080:8080 -e KEYCLOAK_ADMIN=admin -e KEYCLOAK_ADMIN_PASSWORD=admin quay.io/keycloak/keycloak:24.0.5 start-dev`, both 24.0.5 (shown) and nightly (not shown, I made sure to pull latest nightly).",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/30128/comments",
    "author": "ciis0",
    "comments": [
      {
        "user": "ssilvert",
        "created_at": "2024-06-05T19:21:58Z",
        "body": "The reason that the `Import` button is not active is because there is nothing to import.\r\n\r\nA partial import can import users, clients, identity providers, groups, and roles.  None of those exist in the partial export when you do an export on a new realm with all defaults.\r\n\r\nWe probably should have a message for this to make it more clear though."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-05T19:22:23Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "ciis0",
        "created_at": "2024-06-06T07:24:45Z",
        "body": "ah, ok, i was trying to import client scopes... :)"
      },
      {
        "user": "ciis0",
        "created_at": "2024-06-06T07:43:04Z",
        "body": "(I accidentally deleted the OpenID `profile` scope and wanted to restore it via that... ^^)"
      },
      {
        "user": "jaeaxt",
        "created_at": "2024-12-02T13:00:04Z",
        "body": "Hi, I'm trying to do a partial import for organization but it doesn't work. The import button is not active even when I copy and past the exported data. But If use the option import-realm at start with adding the organizations to my realm file it's work."
      }
    ]
  },
  {
    "number": 30068,
    "title": "Update RFC reference in subject: Likely typo RFC2553 -> RFC2253, Consider RFC4514",
    "created_at": "2024-06-03T01:44:04Z",
    "closed_at": "2024-06-03T11:45:28Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/core-clients",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/30068",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nThe baloon help of \"Alllow Regex Pattern Comparison\" in Credential tab in the client setting mentions \"The Subject DN can be in the RFC2553 or ...\".\r\n\r\nRFC2553 is likely a typo for RFC2253. Furthermore, RFC2253 is already obsolete, so the correct reference should be RFC4514.\n\n### Version\n\n24.0.3/upstream\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\n Says RFC4515\n\n### Actual behavior\n\nSays RFC2253\n\n### How to Reproduce?\n\n1. create a client with Client authentication=ON\r\n2. click Credentials tab\r\n3. change Client Authenticator to X509 Certificate\r\n4. click the \"?\" next to Allow regex pattern comparison.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/30068/comments",
    "author": "hokuda",
    "comments": [
      {
        "user": "ahus1",
        "created_at": "2024-06-03T06:58:13Z",
        "body": "Thank you for this issue and the PR. Assigning this to the core-clients team, as changing to a different RFC 4514 might involve more substantial changes as it might contain additional requirements / different behavior.\r\n\r\ncc: @mposolda \r\n  "
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-03T07:17:29Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 30047,
    "title": "UMA Permissions in admin console do not show scopes",
    "created_at": "2024-05-31T15:22:50Z",
    "closed_at": "2024-09-05T00:06:02Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/30047",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nA permission that has been created through the uma_policy API does not show scopes in UI.\r\n\r\nThis is very confusing because an UMA Permission CAN have scopes and they are also evaluated.\r\n\n\n### Version\n\n24.0.3\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nUI does show scopes for UMA Permissions.\n\n### Actual behavior\n\nUI does NOT show scopes for UMA Permissions\n\n### How to Reproduce?\n\nCreate a resource\r\nUse the uma API to create a permission with scopes on this resource.\r\nUse 'Evaluate' page to access the permission in the UI\n\n### Anything else?\n\nI am aware that UMA Permissions are hidden by default. However you can still access them through the \"Evaluate\" page. \r\n\r\nCode hint: 'PermissionDetails.tsx' should probably show scope form-group when 'permissionType' = \"scope' or 'uma'",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/30047/comments",
    "author": "copymark",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-06T17:46:33Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-09-05T00:06:01Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 29885,
    "title": "Unable to create an  LD-Credentials/VCDM provider for OID4VC",
    "created_at": "2024-05-27T12:26:40Z",
    "closed_at": "2024-05-27T14:42:10Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/oid4vc",
      "team/core-clients",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29885",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\noid4vc\r\n\r\n### Describe the bug\r\n\r\nError when importing a JSON-LD Credentials provider within an OID4VC Realm.\r\n\r\n\r\n### Version\r\n\r\nnot yet released\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nSuccessful import of the Verifiable Credentials Signing Service.\r\n\r\n### Actual behavior\r\n\r\n\r\n```\r\nERROR [org.keycloak.services.error.KeycloakErrorHandler] (executor-thread-1) Uncaught server error: java.lang.IllegalArgumentException: No such provider 'ldp_vc'\r\n\tat org.keycloak.models.utils.ComponentUtil.getComponentFactory(ComponentUtil.java:87)\r\n\tat org.keycloak.models.utils.ComponentUtil.getComponentFactory(ComponentUtil.java:57)\r\n```\r\n\r\n\r\n### How to Reproduce?\r\n\r\nIssue can be replicated by attempting to  to import a VerifiableCredentialSigningService with `\"providerId\": \"ldp_vc\"`\r\nCorresponding to LD-Credentials.\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29885/comments",
    "author": "BaptisteMcd",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-27T13:07:19Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 29868,
    "title": "Missing Text for x509",
    "created_at": "2024-05-27T07:40:46Z",
    "closed_at": "2024-05-31T08:18:56Z",
    "labels": [
      "kind/bug",
      "area/translations",
      "help wanted",
      "team/community",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29868",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ntranslations\n\n### Describe the bug\n\nTranslation for placeholder \"auth-x509-client-username-form-display-name\" is missing for English and German and possibly any other language \n\n### Version\n\n24.0.4\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nA Display Name like \"X509 Certificate\" or in GER \"X509 Authentifizierung\"\n\n### Actual behavior\n\nIt shows in \"Try another way\" \"auth-x509-client-username-form-display-name\" with Help Text \"auth-x509-client-username-form-help-text\"\r\n\n\n### How to Reproduce?\n\nAdd \"X509/Validate Username Form\" to Browser Form as Alternative. Start login to realm. Select \"Try another way\". \n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29868/comments",
    "author": "dahorn98",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-29T06:22:16Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 29866,
    "title": "Missing Cache-Control header when \"response_type\" parameter is missing in login request",
    "created_at": "2024-05-27T06:58:27Z",
    "closed_at": "2024-07-18T08:17:54Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "status/auto-bump",
      "priority/normal",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29866",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nauthorization-services\n\n### Describe the bug\n\nWhen a login request is made without `response_type` parameter, the `checker.checkResponseType()` function in `AuthorizationEndpoint.java` at line 158 returns a `redirectErrorToClient` with `QueryRedirectUriBuilder` as the response mode. \r\nIn this scenario, the \"invalid request\" error is redirected to client without including a \"Cache-Control\" header. Consequently, when using CloudFront with default cache settings, since the \"Cache-Control\" header is absent, the response is cached. Subsequent requests to the login endpoint then receive the same \"invalid request\" response. \r\nThis presents a problem because the login endpoint is dynamic content and needs to respond in real-time. Similar to token refresh or user info endpoints, it should include a `no-cache` annotation to prevent caching.\n\n### Version\n\n21.1\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nWhen a login request is made without `response_type` parameter,  `redirectErrorToClient` with `QueryRedirectUriBuilder` as the response mode should redirect \"invalid request\" error and a cache-control header with no-cache value should be added to response headers.\n\n### Actual behavior\n\nWhen a login request is made without `response_type` parameter,  `redirectErrorToClient` with `QueryRedirectUriBuilder` as the response mode redirect \"invalid request\" error to client and no cache-control header. so when using CloudFront with default cache settings, Subsequent requests to the login endpoint then receive the same \"invalid request\" response.\n\n### How to Reproduce?\n\nAdd caching policy to cloud front for keycloak server. (Default TTL: Set to your preferred value (e.g., 600 seconds).)\r\nmake a (code grant) login request with preferred client_id without response_type parameter. \r\nthen make login request with response_type parameter provided. \n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29866/comments",
    "author": "good-engineer",
    "comments": [
      {
        "user": "good-engineer",
        "created_at": "2024-05-27T08:32:24Z",
        "body": "I have checked the latest version of the source code, and it appears that the issue still persists. There is no \"no cache\" annotation or any logic related to the cache-control header when redirecting the error to the client."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-17T16:29:07Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 29808,
    "title": "LDAP User federation: LDAP: error code 49 - Invalid Credentials",
    "created_at": "2024-05-23T08:24:47Z",
    "closed_at": "2024-05-27T13:11:17Z",
    "labels": [
      "kind/bug",
      "area/ldap",
      "help wanted",
      "team/core-iam",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29808",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nldap\n\n### Describe the bug\n\nAny try to use user federation with ldap (either ActiveDirectory or other) fails while testing the bind creds with `2024-05-23 08:01:55,425 ERROR [org.keycloak.services] (executor-thread-52) KC-SERVICES0055: Error when authenticating to LDAP: [LDAP: error code 49 - Invalid Credentials]: javax.naming.AuthenticationException: [LDAP: error code 49 - Invalid Credentials]`.\r\n\r\nI have several other clients using same connection settings and they are working great.\r\n\r\nI wonder if its about the password is designed? The bind user has a `§` in its password (to be more detailed, the password has also an `&`.)\r\n\r\nCould be there an issue with the `§`?\r\n\r\n\n\n### Version\n\n20.0.5\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nworking LDAP connection\n\n### Actual behavior\n\nLDAP connection error\n\n### How to Reproduce?\n\nsee description\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29808/comments",
    "author": "Commifreak",
    "comments": [
      {
        "user": "michaelottofits",
        "created_at": "2024-05-23T12:39:58Z",
        "body": "Check User DN and Password for a Active Directory you must use DN Attribute as Username. "
      },
      {
        "user": "Commifreak",
        "created_at": "2024-05-23T13:12:49Z",
        "body": "I know and I use them like this."
      },
      {
        "user": "sguilhen",
        "created_at": "2024-05-23T18:40:29Z",
        "body": "I can confirm that the special character `§` is causing this issue when connecting to LDAP. It's actually a problem when we're resolving the password using the `VaultCharSecret` - converting the char[] to ByteBuffer and back to char[] is problematic because of the UTF_8 encoding used there. Switching to the String variant `VaultStringSecret` and calling `toCharArray` after it is resolved by the vault seems to fix the issue.\r\n\r\nI'll send a PR later to fix this."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-23T18:43:59Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 29805,
    "title": "Supported Credential Type is not evaluated when applying the Protocol Mapper in OID4VCI",
    "created_at": "2024-05-23T07:10:13Z",
    "closed_at": "2024-05-27T09:28:47Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/oid4vc",
      "team/core-clients",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29805",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\noid4vc\n\n### Describe the bug\n\nThe \"supportedCredentialTypes\" configuration of an OID4VCMapper should allow to control the application of a protocol-mapper to a concrete requested Credential inside of a client. However, the configuration is currently not evaluated and therefor all mappers of a client are applied for all credential types.\n\n### Version\n\nnot yet released\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nOnly Protocol Mappers that supported the requested credential type should be applied.\n\n### Actual behavior\n\nAll configured Protocol Mappers are applied.\n\n### How to Reproduce?\n\nConfigure an OID4VC client, with at least two protocol mappers. The mappers should be configured to support different credential types. Request one of the credentials and see that both mappers are applied to them.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29805/comments",
    "author": "wistefan",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-23T11:10:32Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 29629,
    "title": "Terms and conditions disappear when changing language",
    "created_at": "2024-05-16T19:57:54Z",
    "closed_at": "2024-05-27T13:05:36Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/login/ui",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29629",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nlogin/ui\n\n### Describe the bug\n\nOn the registration form (`register.ftl`), when changing the language after the form is loaded, the terms and conditions disappear. It shows up if you refresh and restart the login. \n\n### Version\n\n24.0.4\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nThe terms and conditions should be shown as before, with the corresponding locale.\n\n### Actual behavior\n\nThe terms and conditions disappear, as if they were not supposed to be displayed.\n\n### How to Reproduce?\n\nOn a login page, click on \"Register\". \r\nOn the registration form where terms and conditions should be displayed, select another language. \r\nThe terms and conditions disappear.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29629/comments",
    "author": "oculos",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-17T06:50:43Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "rmartinc",
        "created_at": "2024-05-27T07:37:12Z",
        "body": "I cannot reproduce this, in 24.0.4 changing between English and Spanish the terms and conditions remain in the page with no issues. What languages are you using?"
      },
      {
        "user": "oculos",
        "created_at": "2024-05-27T13:01:17Z",
        "body": "Hi,I couldn’t reproduce it on other environments as well. So maybe we can just close this. This might be something connected to my theme and/or environment. Sorry for the trouble. On 27 May 2024, at 09:37, Ricardo Martin ***@***.***> wrote:﻿\r\nI cannot reproduce this, in 24.0.4 changing between English and Spanish the terms and conditions remain in the page with no issues. What languages are you using?\r\n\r\n—Reply to this email directly, view it on GitHub, or unsubscribe.You are receiving this because you authored the thread.Message ID: ***@***.***>"
      },
      {
        "user": "rmartinc",
        "created_at": "2024-05-27T13:05:36Z",
        "body": "Okis, closing this as not a bug."
      }
    ]
  },
  {
    "number": 29615,
    "title": "Get effective roles for user needs more privileges than expected",
    "created_at": "2024-05-16T14:21:10Z",
    "closed_at": "2024-07-08T12:56:57Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "team/core-shared",
      "status/auto-bump",
      "priority/normal",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29615",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nWhen retrieving the effective roles via the `/ui-ext/effective-roles/users/{id}` endpoint, only roles the user / administrator is allowed to map are returned.\n\n### Version\n\nnightly\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nAll effective roles of the user are returned.\n\n### Actual behavior\n\nOnly roles the user / administrator is allowed to map are returned.\n\n### How to Reproduce?\n\nCall the endpoint `/ui-ext/effective-roles/users/{id}` with a user which only has the roles `view-users` and `view-realm`.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29615/comments",
    "author": "andreas-blaettlinger",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-03T18:31:32Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 29551,
    "title": "OAuth 2.0 Device Polling Interval - Setting in Realms settings/Token Plus-Minus to change value not working",
    "created_at": "2024-05-15T07:06:51Z",
    "closed_at": "2024-05-23T08:11:26Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29551",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nOAuth 2.0 Device Polling Interval - Setting in Realms settings/Token Plus-Minus to change value not working\r\n\r\n1. Realms Settings\r\n2. Token Tab\r\n3. OAuth 2.0 Device Polling Interval\r\n4. Use + / - to change the value \r\n5. Not working value did not change. Button for + / - didn't work\r\n\r\n\n\n### Version\n\n24.04\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\n+1 / -1 for the value in Text field\n\n### Actual behavior\n\n value in Text field not changed\n\n### How to Reproduce?\n\n1. Realms Settings\r\n2. Token Tab\r\n3. OAuth 2.0 Device Polling Interval\r\n4. Use + / - to change the value \r\n5. Not working value did not change. Button for + / - didn't work\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29551/comments",
    "author": "xerberde",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-15T18:54:34Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "ssilvert",
        "created_at": "2024-05-15T18:55:00Z",
        "body": "I have verified this bug.  A PR to fix it would be appreciated."
      },
      {
        "user": "ahanamallik1",
        "created_at": "2024-05-18T20:11:26Z",
        "body": "@ssilvert I have raised a #29624\r\nPlease have a look."
      }
    ]
  },
  {
    "number": 29451,
    "title": "CorsErrorResponseException prints wrong http code in the exception message",
    "created_at": "2024-05-10T16:29:30Z",
    "closed_at": "2024-05-17T14:26:00Z",
    "labels": [
      "kind/bug",
      "area/core",
      "help wanted",
      "team/core-shared",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29451",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\ncore\r\n\r\n### Describe the bug\r\n\r\nWhen a `CorsErrorResponseException` is thrown, the message in the exception and the stack trace is always `HTTP 500 Internal Server Error`, independently of the actual http error code passed to the `CorsErrorResponseException` constructor.\r\n\r\nWe use Datadog to monitor our Keycloak instance. The direct impact that we're having with this bug is that Datadog interprets any `CorsErrorResponseException` as an error and is causing false positives.\r\n\r\n### Version\r\n\r\n24.0.4\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nThe error message in the exception should not be misleading. It should either include the correct http code or a more informative message.\r\n\r\n### Actual behavior\r\n\r\nThe error message in the exception is always `HTTP 500 Internal Server Error`\r\n\r\n### How to Reproduce?\r\n\r\nIt can be reproduced with anything that throws a `CorsErrorResponseException`\r\n\r\nFor example, invoking the token endpoint with `grant_type=refresh_token` and passing an expired `refresh_token`\r\n\r\nThe log level must be debug to see the stack trace\r\n\r\n### Anything else?\r\n\r\nI believe that the solution may be to invoke the superclass with the status and maybe also with the errorDescription so that the message is more informative. For example:\r\n\r\n```\r\npublic CorsErrorResponseException(Cors cors, String error, String errorDescription, Response.Status status) {\r\n    super(errorDescription, status);\r\n    this.cors = cors;\r\n    this.error = error;\r\n    this.errorDescription = errorDescription;\r\n    this.status = status;\r\n}\r\n```\r\n\r\nThere are other classes that also extend `WebApplicationException` which may benefit from the same `super` calling.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29451/comments",
    "author": "spensk8",
    "comments": [
      {
        "user": "spensk8",
        "created_at": "2024-05-14T23:08:49Z",
        "body": "I've tested it now in the latest release (24.0.4) and the bug is still present.\r\nI changed the initial issue description with the latest version information"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-15T09:44:04Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 29419,
    "title": "Address warnings during startup of Docker container",
    "created_at": "2024-05-09T13:41:32Z",
    "closed_at": "2024-08-08T00:06:01Z",
    "labels": [
      "kind/bug",
      "area/dist/quarkus",
      "help wanted",
      "team/cloud-native",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29419",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ndist/quarkus\n\n### Describe the bug\n\nThere are a few warnings printed during initialization of `quay.io/keycloak/keycloak:24.0.4`. At least some appear to be simple to address. Could you have a look? Thanks.\r\n\r\n```\r\n2024-05-09 13:26:09 WARN [org.keycloak.quarkus.runtime.cli.Picocli] (main) The following build time non-cli options were found, but will be ignored during run time: kc.db\r\n...\r\n2024-05-09 13:26:10 WARN [org.jgroups.protocols.UDP] (keycloak-cache-init) JGRP000015: the send buffer of socket MulticastSocket was set to 1MB, but the OS only allocated 212.99KB\r\n2024-05-09 13:26:10 WARN [org.jgroups.protocols.UDP] (keycloak-cache-init) JGRP000015: the receive buffer of socket MulticastSocket was set to 20MB, but the OS only allocated 212.99KB\r\n2024-05-09 13:26:10 WARN [org.jgroups.protocols.UDP] (keycloak-cache-init) JGRP000015: the send buffer of socket MulticastSocket was set to 1MB, but the OS only allocated 212.99KB\r\n2024-05-09 13:26:10 WARN [org.jgroups.protocols.UDP] (keycloak-cache-init) JGRP000015: the receive buffer of socket MulticastSocket was set to 25MB, but the OS only allocated 212.99KB\r\n...\r\n2024-05-09 13:26:11 WARN [io.quarkus.agroal.runtime.DataSources] (JPA Startup Thread) Datasource <default> enables XA but transaction recovery is not enabled. Please enable transaction recovery by setting quarkus.transaction-manager.enable-recovery=true, otherwise data may be lost if the application is terminated abruptly\r\n...\r\n2024-05-09 13:26:12 WARN [org.infinispan.CONFIG] (keycloak-cache-init) ISPN000569: Unable to persist Infinispan internal caches as no global state enabled\r\n```\n\n### Version\n\n24.0.4\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nNo warnings.\n\n### Actual behavior\n\nWarnings.\n\n### How to Reproduce?\n\nBuild and run a Dockerfile derived from `quay.io/keycloak/keycloak:24.0.4`.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29419/comments",
    "author": "inad9300",
    "comments": [
      {
        "user": "shawkins",
        "created_at": "2024-05-09T13:49:23Z",
        "body": "This issue mostly overlaps with #27308\r\n\r\n> 2024-05-09 13:26:09 WARN [org.keycloak.quarkus.runtime.cli.Picocli] (main) The following build time non-cli options were found, but will be ignored during run time: kc.db\r\n\r\nWill covered by #28654\r\n\r\nThe only ones not covered are JGRP000015 - the warning seems valid given the defult configuration, but is probably something that most won't care about. cc @vmuzikar \r\n\r\n~priority-low\r\n"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-09T15:07:20Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-08-08T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 29381,
    "title": "Misleading error message for broken user federation",
    "created_at": "2024-05-08T10:15:55Z",
    "closed_at": "2024-08-12T00:06:01Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/identity-brokering",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29381",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nidentity-brokering\n\n### Describe the bug\n\nKeycloak can be used with a) Identity Providers and b) User Federation. Trying to log in to a realm with b or both, when the required service for b is offline, results in error. This is expected. But the error message is \"Unexpected error when handling authentication request to identity provider.\". This is misleading, as the problem is not in the (possibly also existing) identity provider, but in the user federation.\r\nJava: `UNEXPECTED_ERROR_HANDLING_REQUEST=\"unexpectedErrorHandlingRequestMessage\"`\r\nMessages: `unexpectedErrorHandlingRequestMessage=Unexpected error when handling authentication request to identity provider.`\r\nSo the problem is that this message is used for both problems with identity provider and user federation, but its text seems to handle only the identity provider case\n\n### Version\n\n24.0.4\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nEither 2 separate messages for these two cases, or a common message which names both reasons.\n\n### Actual behavior\n\nCommon message saying there is a problem with identity provider:\r\n`unexpectedErrorHandlingRequestMessage=Unexpected error when handling authentication request to identity provider.`\n\n### How to Reproduce?\n\nRegister a user federation, leave it offline, and try to log in using it\n\n### Anything else?\n\nSmall prio, but wanted to mention is it can be confusing",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29381/comments",
    "author": "bjoernhype",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-09T01:27:46Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "sguilhen",
        "created_at": "2024-05-09T01:27:57Z",
        "body": "I can see how it can be misleading, and I would even argue that the message should be simply \"Unexpected error handling authentication request\", with no mention to the provider. However, changing this is not that simple because we would need to change every message catalog to fix it in all supported languages. I'll still add this a low priority issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-08-12T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 29335,
    "title": "Keycloak UI freezes due to unpaginated loading of large number of dependent policies",
    "created_at": "2024-05-07T00:09:37Z",
    "closed_at": "2024-08-06T00:06:03Z",
    "labels": [
      "area/authorization-services",
      "kind/bug",
      "help wanted",
      "team/core-iam",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29335",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nauthorization-services\n\n### Describe the bug\n\nWe have encountered a significant issue with the Keycloak UI where it freezes upon attempting to access the list of policies. This behavior occurs because the UI attempts to load all dependent permissions without any limits. In our case, this involves loading more than 20,000 entries, which severely impacts performance and usability.\r\n\n\n### Version\n\n24.0.2\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nThe UI should handle large numbers of policies efficiently, possibly through pagination or limiting the max number of displayed permissions, to ensure that the system remains responsive and usable.\n\n### Actual behavior\n\nThe UI becomes unresponsive and freezes when trying to load a large list of dependent policies.\r\nAffected Version\n\n### How to Reproduce?\n\n1. Populate a client with thousands of permissions that depend on a single, general policy\r\n2. Navigate to the UI section where policies are listed.\r\n3. Attempt to access the list of policies for a resource server \n\n### Anything else?\n\nThis issue complicates manual adjustments and workarounds, particularly when applying configurations through scripts, due to the inability to efficiently manage roles and policies via the UI.\r\n\r\nThe problematic API endpoint is:\r\n`/authz/resource-server/policy/{id}/dependentPolicies`\r\n(where {id} is a placeholder for the actual policy ID, e.g., `c596d38c-5c78-4f16-84bf-9658c017fe5c`)\r\n\r\nThis endpoint is currently non-paginated and becomes a bottleneck when used in environments with a large number of dependent permissions. In my opinion, this endpoint shouldn't be exposed without any pagination parameters marked as required.\r\n\r\n### Suggested Fix\r\n\r\nImplement pagination or another form of efficient data loading for the endpoint mentioned above to improve the management of resources in environments with extensive policy lists.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29335/comments",
    "author": "tspiechaczek",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-07T13:08:55Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "sguilhen",
        "created_at": "2024-05-07T13:34:39Z",
        "body": "Verified - this endpoint (and probably other authz endpoints) needs to be enhanced to accept pagination params, and allow fetching authz resources in smaller batches. I'm adding the priority normal for now, but it can be revisited. If community wants to pick this up, the params can be added to the `PolicyResource` interface in the `keycloak-admin-client-javaee` module, and to `PolicyResourceService` , then forward those to the `JpaPolicyStore` where you can use then in the query."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-08-06T00:06:02Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 29213,
    "title": "Bad formatting of permissions error in admin console",
    "created_at": "2024-05-02T12:39:08Z",
    "closed_at": "2024-05-07T20:34:07Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29213",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nWhen the user is not permitted to perform an action that requires multiple permissions in the admin console, the error message is incorrectly formatted and the permissions required are concatenated without spaces.\r\n\r\nFor example:\r\n`Forbidden, permissions needed: view-realmview-users`\n\n### Version\n\nquay.io/keycloak/keycloak:latest\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nRequired permissions separated from each other (whitespace, list, etc)\n\n### Actual behavior\n\npermissions concatenated without whitespace\n\n### How to Reproduce?\n\n1. Create a realm\r\n2. Create a user in the realm with view-realm permissions (and not view-users)\r\n3. Log in as that user\r\n4. Go to Realm Roles\r\n5. Attempt to view the offline_access role\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29213/comments",
    "author": "Jamstah",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-02T12:54:42Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 29085,
    "title": "Docs: authorization_services/topics/policy-js-policy.adoc",
    "created_at": "2024-04-25T13:22:33Z",
    "closed_at": "2024-07-26T00:06:03Z",
    "labels": [
      "area/authorization-services",
      "kind/bug",
      "area/docs",
      "help wanted",
      "team/core-iam",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/29085",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ndocs\n\n### Describe the bug\n\n\r\n\r\nFile: authorization_services/topics/policy-js-policy.adoc\n\n### Version\n\n24.0.3\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nconst context = $evaluation.getContext(); is the document example which should work without error\r\n\n\n### Actual behavior\n\ncauses error Expected an operand but found const at const context = $evaluation.getContext();\r\nin org.openjdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException.\r\nUsing, var context = $evaluation.getContext(); resolves error\n\n### How to Reproduce?\n\nUsing the example javascript policy Is enough to reproduce the error below \r\n```\r\nExpected an operand but found const at const context = $evaluation.getContext();\r\nin org.openjdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException\r\n```\n\n### Anything else?\n\nHi, I had issue while using this example in my keycloak custom javascript policy. I am using 24.0.2 version. It worked after I change const to var. Keycloak uses the Nashorn JavaScript engine provided by the JDK for executing JavaScript code. The Nashorn engine, as included in OpenJDK 11, supports ECMAScript 5.1 by default, which does not include the const keyword as part of its standard\r\n[The const keyword is a feature of ECMAScript 6 (ES6), and while Nashorn has received some updates to support ES6 features, these may not be enabled by default or fully supported in the version of Nashorn included with OpenJDK 11]. This is why maybe replacing const with var, which is part of ECMAScript 5.1, resolves the issue.\r\nTo use ES6 features like const, you might need to enable ES6 mode in Nashorn. This can typically be done by passing the --language=es6 option to the Nashorn engine. However, this might not be directly applicable or available in the context of Keycloak’s script execution environment.\r\nReporting this issue to update the documentation to reflect the compatibility of JavaScript features with the version of Nashorn included in the JDK that Keycloak is using. Additionally, can help to provide guidance on how to enable ES6 features or work around this limitation.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/29085/comments",
    "author": "shalphaaslam",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-26T02:04:35Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "sguilhen",
        "created_at": "2024-04-26T02:04:41Z",
        "body": "I think it might be worth adding something to the docs regarding the compatibility of JS features according to the Nashorn version found in the JDK. Adding  `help-wanted` label as the team won't have bandwidth to jump into it, so any contributions from community are welcome!"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-26T00:06:02Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 28948,
    "title": "Auto-build shouldn't warn about unavailable runtime options",
    "created_at": "2024-04-21T15:20:27Z",
    "closed_at": "2024-05-02T14:34:09Z",
    "labels": [
      "kind/bug",
      "area/dist/quarkus",
      "help wanted",
      "team/cloud-native",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/28948",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\ndist/quarkus\r\n\r\n### Describe the bug\r\n\r\nWhen running Keycloak in auto-build mode, the Picoli class will show a warning when conditional runtime options are used.   \r\n\r\n\r\n\r\n\r\n\r\n### Version\r\n\r\nmain\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nNo warnings in auto-build around unavailable runtime options, as the user can't really change what they are doing here, as in auto-build both runtime and non-runtime options are passed to the CLI.\r\n\r\nWarnings should indicate something that the user should change (which they  can't in this case)\r\n\r\n### Actual behavior\r\n\r\n```\r\n (main) The following used run time options are UNAVAILABLE and will be ignored during build time:\r\n        - cache-remote-tls-enabled: Available only when remote host is set.\r\n```\r\n\r\n\r\n### How to Reproduce?\r\n\r\nNote that first #28950 needs to be merged, then the following will reproduce it. AFAIK this is the first time a runtime option is making something conditional.\r\n\r\n```\r\nbin/kc.sh start --cache-remote-host=localhost --cache-remote-tls-enabled=false\r\n```\r\n\r\n### Anything else?\r\n\r\nThis happens only when runtime options are the source of the conditional, as here with the `--cache-remote-host`. \r\n",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/28948/comments",
    "author": "ahus1",
    "comments": [
      {
        "user": "shawkins",
        "created_at": "2024-04-26T13:46:46Z",
        "body": "~priority-normal"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-26T13:46:51Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 28798,
    "title": "`passwordPoliciesHelp.notContainsUsername` missing in admin console",
    "created_at": "2024-04-16T10:20:34Z",
    "closed_at": "2024-04-20T10:18:51Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/28798",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\n`passwordPoliciesHelp.notContainsUsername` translation missing, related to #27643\n\n### Version\n\nmain\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nHelp text of `Not Contains Username` password policy is defined\n\n### Actual behavior\n\nHelp text of `Not Contains Username` password policy is not defined\n\n### How to Reproduce?\n\nGo to admin console, then Authentication -> Policies and add _Not Contains Username_ policy, click question mark.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/28798/comments",
    "author": "hmlnarik",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-16T10:20:39Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 28744,
    "title": "Invalid label `validatingX509Certs` in new SAML identity provider screen",
    "created_at": "2024-04-15T15:47:13Z",
    "closed_at": "2024-04-23T11:15:20Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/28744",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nNo localization text in creation of SAML identity provider (`validatingX509Certs`)\n\n### Version\n\nmain\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\ncorrect text\n\n### Actual behavior\n\ntranslation key shown instead\n\n### How to Reproduce?\n\ngo to creation of SAML identity provider\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/28744/comments",
    "author": "hmlnarik",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-15T15:47:18Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 28531,
    "title": "notBefore and setToNow untranslated",
    "created_at": "2024-04-08T19:39:54Z",
    "closed_at": "2024-04-24T18:19:07Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/28531",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\nadmin/ui\r\n\r\n### Describe the bug\r\n\r\nGo to Sessions --> Revocation\r\n\r\nYou will see the label `notBefore` and `setToNow` are untranslated.\r\n\r\n### Version\r\n\r\nnightly\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nsee above\r\n\r\n### Actual behavior\r\n\r\nsee above\r\n\r\n### How to Reproduce?\r\n\r\nsee above\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/28531/comments",
    "author": "ssilvert",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-08T19:40:09Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 28524,
    "title": "Issue encountered while importing JSON file for Realm Configuration in Keycloak",
    "created_at": "2024-04-08T16:44:00Z",
    "closed_at": "2024-12-19T00:06:03Z",
    "labels": [
      "kind/bug",
      "area/import-export",
      "help wanted",
      "team/core-clients",
      "team/core-shared",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/28524",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nimport-export\n\n### Describe the bug\n\nSubject: Issue Encountered While Importing JSON File for Realm Configuration in Keycloak\r\n\r\nDescription:\r\nI'm encountering an issue while attempting to export and import realm settings and authentication configuration in Keycloak. Below are the steps I've followed:\r\n\r\n1. Exported the realm to a JSON file using the command:\r\n`docker exec –it containerName /opt/keycloak/bin/kc.sh export --file /tmp/realm-export.json --users skip --realm realmName`\r\n\r\n2. Copied the exported JSON file to the local computer using the command:\r\n`docker cp containerName:/tmp/realm-export.json /tmp/realm-export.json`\r\n\r\n3. Generated a new database in the JSON file using a Python script.\r\n\r\n4. Attempted to import the realm settings and authentication configuration:\r\n   - Logged in to Keycloak as an admin.\r\n   - Created a new realm.\r\n   - Went to Realm settings -> Actions -> Uploaded mynewfile.json (JSON file with new database) -> Selected all resources -> Chose \"Overwrite\" if a resource already exists -> Clicked \"Import\".\r\n\r\nHowever, after importing, only users, groups, identity providers, and realm/client roles are present. There are no configuarations such as realm settings, authentification.  \r\nWhen trying to create a new realm using this JSON file, an error occurs: \"Could not create realm Conflict detected. See logs for details\".\r\n\r\nIn the Keycloak logs, the following error is reported:\r\n`Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"uk_orvsdmla56612eaefiq6wl5oi\"\r\n  Detail: Key (name)=(kerberos-free-realm) already exists\r\n`\r\nI have ensured to modify the entire database and realm-name, and even adjusted the unique constraint \"uk_orvsdmla56612eaefiq6wl5oi\" to avoid the aforementioned error.\r\n\r\nDespite these modifications, a new error arises: \r\n`\r\nERROR [org.keycloak.services.error.KeycloakErrorHandler] (executor-thread-499) Uncaught server error: java.lang.RuntimeException: Resource with id or name [Users] does not exist or is not owned by the resource server.\r\n`\r\n\r\nConclusion:\r\nThe objective is to clone any realm for multiple clients without needing to configure each one individually. Assistance in resolving this issue would be greatly appreciated.\n\n### Version\n\n24.0.2\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nThe expected outcome of the process is that the realm settings and authentication configurations exported from Keycloak using a JSON file should be successfully imported into a new realm. This includes all the configurations related to users, groups, identity providers, realm/client roles, and any custom database configurations. Upon import, the new realm should reflect the exact configuration as defined in the JSON file, allowing for easy replication of settings across different instances or clients.\n\n### Actual behavior\n\nDespite following the correct steps, the realm settings and authentication configurations are not being applied as expected. Only some components such as users, groups, identity providers, and realm/client roles are imported successfully. \n\n### How to Reproduce?\n\n1. Export Realm Configuration:\r\n   - Use Keycloak's export functionality or the provided Docker command to export the realm configuration to a JSON file.\r\n   `docker exec –it containerName /opt/keycloak/bin/kc.sh export --file /tmp/realm-export.json --users skip --realm realmName`\r\n2. Modify JSON File:\r\n   - Optionally, modify the JSON file to include changes or a new database configuration using a Python script as described.\r\n3. Import Realm Configuration:\r\n   - Log in to Keycloak as an admin.\r\n   - Navigate to the admin console and create a new realm.\r\n   - Go to Realm settings -> Actions -> Upload the modified JSON file.\r\n   - Select all resources and choose \"Overwrite\" if prompted.\r\n   - Click \"Import\" to import the realm configuration from the JSON file.\r\n4. Observe Errors:\r\n   - After the import process, observe the realm to ensure that all configurations, including users, groups, identity providers, and realm/client roles, are imported correctly.\r\n   - Attempt to create a new realm using the imported JSON file.\r\n   - Note any errors encountered during the import process, such as \"Conflict detected\" or errors related to missing resources like \"Users\".\r\n5. Review Logs:\r\n   - Check the Keycloak logs for any error messages or exceptions encountered during the import process.\r\n   - Look for specific error messages indicating issues with unique constraints or missing resources.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/28524/comments",
    "author": "Akhmarzhan",
    "comments": [
      {
        "user": "rs0h",
        "created_at": "2024-04-11T00:18:14Z",
        "body": "Same issue. v24.0.2. Tried with full export\\import using web GIU."
      },
      {
        "user": "simse07",
        "created_at": "2024-05-24T11:23:33Z",
        "body": "Same issue v24.0.4. Additionally, the user profile configuration is not imported too."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-09-19T17:24:41Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-12-19T00:06:02Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 28523,
    "title": "[LDAPStorageProvider] NPE if user is cached but has been deleted in ldap",
    "created_at": "2024-04-08T16:08:14Z",
    "closed_at": "2024-04-11T17:29:31Z",
    "labels": [
      "kind/bug",
      "area/ldap",
      "help wanted",
      "team/core-iam",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/28523",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nldap\n\n### Describe the bug\n\nIf a user tries to log in with an account that was previously cached by Keycloak, but has been deleted or recreated in the meantime, a `java.lang.NullPointerException` is logged and the user is getting an error message `Unexpected error when handling authentication request to identity provider.`\r\n\r\nError: `2024-04-08 15:27:43,364 WARN  [org.keycloak.services] (executor-thread-45) KC-SERVICES0013: Failed authentication: java.lang.NullPointerException: Cannot invoke \"org.keycloak.storage.ldap.idm.model.LDAPObject.getDn()\" because \"user\" is null`\r\n\r\n<details><summary>Full traceback</summary>\r\n\r\n```\r\n2024-04-08 15:27:43,364 WARN  [org.keycloak.services] (executor-thread-45) KC-SERVICES0013: Failed authentication: java.lang.NullPointerException: Cannot invoke \"org.keycloak.storage.ldap.idm.model.LDAPObject.getDn()\" because \"user\" is null\r\n\tat org.keycloak.storage.ldap.idm.store.ldap.LDAPIdentityStore.validatePassword(LDAPIdentityStore.java:358)\r\n\tat org.keycloak.storage.ldap.LDAPStorageProvider.validPassword(LDAPStorageProvider.java:779)\r\n\tat org.keycloak.storage.ldap.LDAPStorageProvider.isValid(LDAPStorageProvider.java:865)\r\n\tat org.keycloak.credential.UserCredentialManager.lambda$validate$11(UserCredentialManager.java:255)\r\n\tat java.base/java.util.Collection.removeIf(Collection.java:576)\r\n\tat org.keycloak.credential.UserCredentialManager.validate(UserCredentialManager.java:255)\r\n\tat org.keycloak.credential.UserCredentialManager.isValid(UserCredentialManager.java:71)\r\n\tat org.keycloak.models.SubjectCredentialManager.isValid(SubjectCredentialManager.java:45)\r\n\tat org.keycloak.authentication.authenticators.browser.AbstractUsernameFormAuthenticator.validatePassword(AbstractUsernameFormAuthenticator.java:230)\r\n\tat org.keycloak.authentication.authenticators.browser.AbstractUsernameFormAuthenticator.validateUserAndPassword(AbstractUsernameFormAuthenticator.java:151)\r\n\tat org.keycloak.authentication.authenticators.browser.UsernamePasswordForm.validateForm(UsernamePasswordForm.java:55)\r\n\tat org.keycloak.authentication.authenticators.browser.UsernamePasswordForm.action(UsernamePasswordForm.java:48)\r\n\tat org.keycloak.authentication.DefaultAuthenticationFlow.processAction(DefaultAuthenticationFlow.java:151)\r\n\tat org.keycloak.authentication.AuthenticationProcessor.authenticationAction(AuthenticationProcessor.java:987)\r\n\tat org.keycloak.services.resources.LoginActionsService.processFlow(LoginActionsService.java:364)\r\n\tat org.keycloak.services.resources.LoginActionsService.processAuthentication(LoginActionsService.java:335)\r\n\tat org.keycloak.services.resources.LoginActionsService.authenticate(LoginActionsService.java:327)\r\n\tat org.keycloak.services.resources.LoginActionsService.authenticateForm(LoginActionsService.java:392)\r\n\tat org.keycloak.services.resources.LoginActionsService$quarkusrestinvoker$authenticateForm_32b8e198ac3110abd1d5774e83a4cf87858129f4.invoke(Unknown Source)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\r\n\tat io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\r\n\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:147)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:582)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:840)\r\n```\r\n\r\n</details>\n\n### Version\n\n24.0.2\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\n- No NullPointerException in the logs\r\n- A clear warning is logged that describes that a cached user was not found in the storage provider, including its identifier.\r\n- The user trying to log in gets the usual `Invalid username or password.` message, instead of this error `Unexpected error when handling authentication request to identity provider.`\r\n- [Optional?] Proper cache invalidation if the user was not found, though I have no idea how complicated that might. This is useful if a user was deleted and recreated. In that case it will be found in the cache by the username but not in the ldap because its `entryUUID` changed\n\n### Actual behavior\n\nA  `java.lang.NullPointerException` is printed in the logs if a user tries to log in with an account that has been cached in Keycloak but deleted in LDAP. The user is shown an error message `Unexpected error when handling authentication request to identity provider.`\n\n### How to Reproduce?\n\n- Add an LDAP user federation provider\r\n- Make sure `Synchronization` is disabled in the provider settings\r\n- Make sure the `Cache` is enabled in the provider settings\r\n- Create an LDAP user\r\n- Log in to Keycloak with that user\r\n- Log out\r\n- Delete the user in LDAP\r\n- Log in to Keycloak with that user -> You should now see the `java.lang.NullPointerException` in the logs\r\n\r\n<details><summary>My LDAP provider settings if it helps:</summary>\r\n\r\n```\r\n{\r\n    \"id\": \"e8ebe00c-af2a-424c-8c21-3f4058cd830f\",\r\n    \"name\": \"ldap\",\r\n    \"providerId\": \"ldap\",\r\n    \"providerType\": \"org.keycloak.storage.UserStorageProvider\",\r\n    \"parentId\": \"f826d050-fc1a-4be1-ba6c-aab369c6ae45\",\r\n    \"config\": {\r\n        \"pagination\": [\r\n            \"true\"\r\n        ],\r\n        \"fullSyncPeriod\": [\r\n            \"-1\"\r\n        ],\r\n        \"startTls\": [\r\n            \"false\"\r\n        ],\r\n        \"connectionPooling\": [\r\n            \"false\"\r\n        ],\r\n        \"usersDn\": [\r\n            \"dc=school,dc=test\"\r\n        ],\r\n        \"cachePolicy\": [\r\n            \"MAX_LIFESPAN\"\r\n        ],\r\n        \"useKerberosForPasswordAuthentication\": [\r\n            \"false\"\r\n        ],\r\n        \"importEnabled\": [\r\n            \"false\"\r\n        ],\r\n        \"enabled\": [\r\n            \"true\"\r\n        ],\r\n        \"bindCredential\": [\r\n            \"**********\"\r\n        ],\r\n        \"bindDn\": [\r\n            \"uid=sys-idp-user,cn=users,dc=school,dc=test\"\r\n        ],\r\n        \"usernameLDAPAttribute\": [\r\n            \"uid\"\r\n        ],\r\n        \"changedSyncPeriod\": [\r\n            \"-1\"\r\n        ],\r\n        \"vendor\": [\r\n            \"other\"\r\n        ],\r\n        \"uuidLDAPAttribute\": [\r\n            \"entryUUID\"\r\n        ],\r\n        \"connectionUrl\": [\r\n            \"ldap://10.207.15.183:7389\"\r\n        ],\r\n        \"allowKerberosAuthentication\": [\r\n            \"false\"\r\n        ],\r\n        \"syncRegistrations\": [\r\n            \"false\"\r\n        ],\r\n        \"authType\": [\r\n            \"simple\"\r\n        ],\r\n        \"krbPrincipalAttribute\": [\r\n            \"krb5PrincipalName\"\r\n        ],\r\n        \"customUserSearchFilter\": [\r\n            \"(|(memberOf=cn=Domain Admins,cn=groups,dc=school,dc=test)(memberOf=cn=DC Backup Hosts,cn=groups,dc=school,dc=test))\"\r\n        ],\r\n        \"searchScope\": [\r\n            \"2\"\r\n        ],\r\n        \"useTruststoreSpi\": [\r\n            \"always\"\r\n        ],\r\n        \"usePasswordModifyExtendedOp\": [\r\n            \"false\"\r\n        ],\r\n        \"maxLifespan\": [\r\n            \"300000\"\r\n        ],\r\n        \"trustEmail\": [\r\n            \"false\"\r\n        ],\r\n        \"userObjectClasses\": [\r\n            \"person\"\r\n        ],\r\n        \"rdnLDAPAttribute\": [\r\n            \"uid\"\r\n        ],\r\n        \"editMode\": [\r\n            \"READ_ONLY\"\r\n        ],\r\n        \"validatePasswordPolicy\": [\r\n            \"false\"\r\n        ]\r\n    }\r\n}\r\n```\r\n\r\n</detail>\n\n### Anything else?\n\nThank you very much for logging into this.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/28523/comments",
    "author": "Juern-Univention",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-10T16:31:14Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "sguilhen",
        "created_at": "2024-04-10T21:00:35Z",
        "body": "Was able to reproduce and sent a PR with the fix. There were a few places where the user returned from LDAP is not checked for null value."
      }
    ]
  },
  {
    "number": 28486,
    "title": "Help text wrong in key provider",
    "created_at": "2024-04-06T19:17:49Z",
    "closed_at": "2024-04-08T12:22:43Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/28486",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nGo to realm settings --> Keys --> Edit provider\r\n\r\nHelp text for the name attribute says, `Name of the mapper`.  Should say, `Display name of provider when linked in admin console.`\n\n### Version\n\nmain\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nSee above\n\n### Actual behavior\n\nSee above\n\n### How to Reproduce?\n\nSee above\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/28486/comments",
    "author": "ssilvert",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-06T19:18:25Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "ssilvert",
        "created_at": "2024-06-20T18:47:58Z",
        "body": "@edewit This one was fixed by you, so reassigning for backport."
      }
    ]
  },
  {
    "number": 28416,
    "title": "Keycloak is not returning proper error message for PUT /users admin API",
    "created_at": "2024-04-03T18:07:20Z",
    "closed_at": "2024-04-20T10:17:55Z",
    "labels": [
      "kind/bug",
      "area/user-profile",
      "help wanted",
      "team/core-iam",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/28416",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\nuser-profile\r\n\r\n### Describe the bug\r\n\r\nTrigger  PUT /users admin API to change user's password\r\nPUT /admin/realms/{realm}/users/{id}\r\nSend password which is same as previous password. As per my password policy, this request will fail, because new password should not be same as past 3 passwords. \r\n\r\n\r\n### Version\r\n\r\n24.0.2\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nKeycloak should send exact error message as follows\r\n {\"error\":\"invalidPasswordHistoryMessage\",\r\n\"error_description\":\"Invalid password: must not be equal to any of last 3 passwords.\"}\r\n\r\n### Actual behavior\r\n\r\nKeycloak is responding 400 response code with very generic error message as follows\r\n{\"errorMessage\":\"Could not update user!\"}\r\n\r\n### How to Reproduce?\r\n\r\nTrigger  PUT /users admin API to change user's password\r\nPUT /admin/realms/{realm}/users/{id}\r\nSend password which is same as previous password. As per my password policy, this request will fail, because new password should not be same as past 3 passwords\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/28416/comments",
    "author": "Jayashree-Rajendran",
    "comments": [
      {
        "user": "sguilhen",
        "created_at": "2024-04-05T13:58:28Z",
        "body": "Yeah, the `updateUser` method in the `UserResource` endpoint should do something similar to what we find in `resetPassword` in the same enpoint when handling the `ModelException` that is thrown when the password policy is not met.\r\n\r\nI'll add this to the backlog, but a PR from community would be most welcome as we won't be able to prioritize this for the moment."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-05T13:59:00Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "etiksouma",
        "created_at": "2024-04-12T17:55:52Z",
        "body": "@sguilhen  I can work on this."
      },
      {
        "user": "sguilhen",
        "created_at": "2024-04-12T17:58:43Z",
        "body": "Excellent, @etiksouma , thank you. Let me know when the PR is up and I will prioritize reviewing it!"
      },
      {
        "user": "etiksouma",
        "created_at": "2024-04-12T20:29:57Z",
        "body": "@sguilhen done"
      }
    ]
  },
  {
    "number": 28409,
    "title": "Unclosed span bracket in register.ftl",
    "created_at": "2024-04-03T13:57:15Z",
    "closed_at": "2024-04-04T07:28:39Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "area/login/ui",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "release/25.0.0",
      "release/24.0.6"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/28409",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nlogin/ui\n\n### Describe the bug\n\nUnclosed span bracket in register.ftl\n\n### Version\n\n24.0.2-0\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nClosed span bracket\n\n### Actual behavior\n\nUnclosed span bracket\n\n### How to Reproduce?\n\nOpen register.ftl\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/28409/comments",
    "author": "Firelods",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-03T13:58:26Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "jonkoops",
        "created_at": "2024-04-04T07:39:20Z",
        "body": "@Firelods would you be interested in back-porting this to the 24 release? You can do so by cherry-picking the commit merged into `main` and opening a pull request targeting the `release/24.0` branch."
      }
    ]
  },
  {
    "number": 28277,
    "title": "Keycloak writes metadata attributes as User Attributes for federated storage",
    "created_at": "2024-03-28T14:12:14Z",
    "closed_at": "2024-11-12T20:07:47Z",
    "labels": [
      "kind/bug",
      "area/user-profile",
      "help wanted",
      "team/core-iam",
      "priority/low"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/28277",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nuser-profile\n\n### Describe the bug\n\nWhen using a federated storage provider, Keycloak writes metadata attributes like ENABLED and EMAIL_VERIFIED as user attributes instead. This causes issues because when updating a user, these attributes will be removed if they are not managed, and get reset to their default values.\n\n### Version\n\n24.0.1\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nThese \"metadata\" attributes would be saved correctly on users and their values would persist past the update that currently is breaking them.\n\n### Actual behavior\n\nThe attributes are removed from the user during the save process and get reset back to their default values.\n\n### How to Reproduce?\n\nSetup a federated storage provider in keycloak, and then update a user in the account console. \n\n### Anything else?\n\nThe method in question here is AbstractUserAdapterFederatedStorage#setEmailVerified, which just sets EMAIL_VERIFIED as an attribute. This behavior does not match the nonfederated storage behavior.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/28277/comments",
    "author": "btarhan",
    "comments": [
      {
        "user": "pedroigor",
        "created_at": "2024-10-16T00:13:37Z",
        "body": "@btarhan Are you updating the email attribute when at the account console?\r\n\r\nThe email verified attribute is set whenever you are updating the email via account console or when updating the profile during the login. In this case, a required action to verify email should run or the admin manually set as verified."
      },
      {
        "user": "btarhan",
        "created_at": "2024-10-17T19:03:09Z",
        "body": "@pedroigor At this point I don't remember the exact context around this, but it had to do with the UserProfile stuff. I believe when we were syncing data from User Service into Keycloak, if we hadn't marked these attributes as managed they all got reset. So what you would see is a user that existed in the system and had already verified their email would lose that email verification and be prompted to do it again."
      },
      {
        "user": "pedroigor",
        "created_at": "2024-10-17T19:36:52Z",
        "body": "I see. I can not reproduce without updating the email. That is why I'm asking. It would be good to know more details about the steps when updating the user."
      },
      {
        "user": "btarhan",
        "created_at": "2024-10-17T19:45:10Z",
        "body": "It is certainly not the case in a vanilla instance of keycloak, and probably a result of us using user federation with User Service. Keycloak may be picking up the sync as an email update, even though we don't really want it managing any of that. I.e. user logs in -> we sync their data, including email and emailVerified from User Service -> keycloak sees the email has \"changed\" (hasn't been changed but a value has been passed) -> updates emailVerified. \r\n\r\nAll this being said, this was happening two major versions of Keycloak ago, it is possible this has been inadvertently fixed in the interim."
      },
      {
        "user": "pedroigor",
        "created_at": "2024-10-17T19:47:21Z",
        "body": "I see. What I did here to reproduce the problem is to create a very basic user storage provider so I can list and authenticate users from it. Then I try to update the user via account console.\r\n\r\nIf I update the email, the email verification flag is disabled/removed. Otherwise, it works.\r\n\r\nHope it is enough and perhaps it is already fixed in upstream."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-11-12T20:07:49Z",
        "body": "Thanks for reporting this issue. However, after review this is not considered a valid issue, or has been recently resolved.\n\nAs the issue is not valid it will be automatically closed."
      }
    ]
  },
  {
    "number": 27984,
    "title": "Username LDAP attribute other than uid is difficult",
    "created_at": "2024-03-18T10:45:24Z",
    "closed_at": "2024-04-03T12:11:56Z",
    "labels": [
      "kind/bug",
      "area/ldap",
      "help wanted",
      "team/core-iam",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/27984",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\nldap\r\n\r\n### Describe the bug\r\n\r\nI am trying to  create a new User Federation LDAP provider, using firstname.lastname as the user login scheme. So, on my OpenLDAP server, I tried several usually empty LDAP fields where to enter firtsname.lastname for my test user, for example title, employeeNumber, and postOfficeBox. But none of these works as Username LDAP attribute in Keycloak and syncing users fails. The log shows:\r\n\r\nERROR [org.keycloak.storage.ldap.LDAPStorageProviderFactory] (executor-thread-95) Failed during import user from LDAP: org.keycloak.models.ModelException: User returned from LDAP has null username! Check configuration of your LDAP mappings.\r\n\r\n### Version\r\n\r\nlatest\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nKeycloak syncs users according to the newly set Username LDAP attribute\r\n\r\n### Actual behavior\r\n\r\nAn error message is shown which says that no user could be imported\r\n\r\n### How to Reproduce?\r\n\r\nOn the OpenLDAP server, set firstname.lastname as employeeNumber, title and postOfficeBox for some test user. Set one of these as User LDAP attribute in Keycloak and then sync all users.\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/27984/comments",
    "author": "Cistoge",
    "comments": [
      {
        "user": "sguilhen",
        "created_at": "2024-03-19T21:48:17Z",
        "body": "I've tried to reproduce the problem with OpenLDAP, and setting `cn` to the username attribute worked fine - users were updated and synch succeeded. I've tried even to use `uid` first, import the users, then switch it to `cn` and re-synch. All worked fine."
      },
      {
        "user": "Cistoge",
        "created_at": "2024-03-20T10:22:45Z",
        "body": "Hm, maybe I made mistake on monday and forgot to save my settings after changing from Username LDAP attribute uidNumber to cn, for now it works with cn also for me. But other fields like uidNumber or employeeNumber definitely do not work for me. "
      },
      {
        "user": "sguilhen",
        "created_at": "2024-03-27T12:53:45Z",
        "body": "In my setup, I was able to use other attributes as well, such as `employeeNumber`, and import worked fine. If one of the users doesn't have this attribute, it will skip the user during import - in the logs you can see the same message you've posted about the username being `null` (admin console says 1 user failed during synch). So whatever attribute is chosen as the username attribute, all entries in LDAP must have it set or Keycloak won't accept importing the user.\r\n\r\nOne thing I've noticed, though, is that while synch works and reports some users failed to be imported (those with `null` values retrieved from LDAP for the username), when searching for all users in the Users screen the whole thing fails if an user from LDAP has a `null` username, instead of skipping them. We might need to revisit the `searchForUserStream` in `LDAPStorageProvider` to keep the behavior consistent."
      },
      {
        "user": "Cistoge",
        "created_at": "2024-03-27T15:19:31Z",
        "body": "The OpenLDAP instance I am using for this is not for production use, but only for testing and currently has only one user.  This user has \"testuser\" as uid OpenLDAP attribute and \"test.user\" as postOfficeBox OpenLDAP attribute. In Keycloak, the user can be imported with uid as Username LDAP attribute, but not with postOfficeBox ..."
      },
      {
        "user": "sguilhen",
        "created_at": "2024-03-28T17:50:27Z",
        "body": "I think I see what's going on. When I create a LDAP federation from scratch, I can set anything to the Username LDAP attribute, and synch users works as expected.\r\n\r\nNow, if we go back to the already configured provider, and edit the Username LDAP attribute (for example, switch from `uid` to `postOfficeBox `), I start getting the same errors, even after removing all previously imported users. So here's what is happening:\r\n\r\n1. When we first create an LDAP storage provider, the configured Username LDAP attribute (let's say `uid`), is used to create a `username` mapper that fetches the same attribute from LDAP when loading users, and sets it as the username in Keycloak.\r\n2.  When we edit the Username LDAP attribute in the LDAP provider (let's say to `postOfficeBox`), the change **is not** propagated to the `username` mapper, which is still with the old `uid` value. Without any mappers configured to fetch the `postOfficeBox` attribute from LDAP, the value is read as `null` when importing, giving us the errors you've described.\r\n\r\nIf, after changing the Username LDAP attribute in the main LDAP config you also edit the `username` mapper to the same attribute, synchronizing users work again, and any previously imported user will be updated to the new username.\r\n\r\nIt would be good if the change was propagated to the correct mapper once the LDAP config changes, but for now this is a workaround you can use."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-28T19:34:19Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 27844,
    "title": "NPE when processing resource request while peer closed connection already",
    "created_at": "2024-03-13T07:41:10Z",
    "closed_at": "2024-06-20T00:06:08Z",
    "labels": [
      "kind/bug",
      "area/dist/quarkus",
      "help wanted",
      "team/cloud-native",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/27844",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\noidc\n\n### Describe the bug\n\nThe following stack trace shows up from time to time:\r\n\r\n```\r\n{\r\n  \"timestamp\": \"2024-03-11T15:05:38.607Z\",\r\n  \"sequence\": 9836,\r\n  \"loggerClassName\": \"org.jboss.logging.Logger\",\r\n  \"loggerName\": \"org.keycloak.services.error.KeycloakErrorHandler\",\r\n  \"level\": \"ERROR\",\r\n  \"message\": \"Uncaught server error\",\r\n  \"threadName\": \"executor-thread-10\",\r\n  \"threadId\": 108,\r\n  \"mdc\": {\r\n    \"trace_flags\": \"01\",\r\n    \"trace_id\": \"1de9e8993ffc1a4976093e84dca3e7e6\",\r\n    \"span_id\": \"89b58fbeca9e0a9b\"\r\n  },\r\n  \"ndc\": \"\",\r\n  \"hostName\": \"auth-keycloak-1\",\r\n  \"processName\": \"QuarkusEntryPoint\",\r\n  \"processId\": 1,\r\n  \"exception\": {\r\n    \"refId\": 1,\r\n    \"exceptionType\": \"java.lang.NullPointerException\",\r\n    \"message\": \"Cannot invoke \\\"io.vertx.core.net.SocketAddress.host()\\\" because the return value of \\\"io.vertx.core.http.HttpServerRequest.remoteAddress()\\\" is null\",\r\n    \"frames\": [\r\n      {\r\n        \"class\": \"org.keycloak.quarkus.runtime.integration.resteasy.QuarkusClientConnection\",\r\n        \"method\": \"getRemoteAddr\",\r\n        \"line\": 34\r\n      },\r\n      {\r\n        \"class\": \"org.keycloak.events.EventBuilder\",\r\n        \"method\": \"<init>\",\r\n        \"line\": 57\r\n      },\r\n      {\r\n        \"class\": \"org.keycloak.services.resources.RealmsResource\",\r\n        \"method\": \"getProtocol\",\r\n        \"line\": 113\r\n      },\r\n      {\r\n        \"class\": \"org.keycloak.services.resources.RealmsResource$quarkusrestinvoker$getProtocol_b2af2a2de155d6f3564a200a8d3634cdf6f57aa2\",\r\n        \"method\": \"invoke\"\r\n      },\r\n      {\r\n        \"class\": \"org.jboss.resteasy.reactive.server.handlers.InvocationHandler\",\r\n        \"method\": \"handle\",\r\n        \"line\": 29\r\n      },\r\n      {\r\n        \"class\": \"io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext\",\r\n        \"method\": \"invokeHandler\",\r\n        \"line\": 141\r\n      },\r\n      {\r\n        \"class\": \"org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext\",\r\n        \"method\": \"run\",\r\n        \"line\": 145\r\n      },\r\n      {\r\n        \"class\": \"io.quarkus.vertx.core.runtime.VertxCoreRecorder$14\",\r\n        \"method\": \"runWith\",\r\n        \"line\": 576\r\n      },\r\n      {\r\n        \"class\": \"org.jboss.threads.EnhancedQueueExecutor$Task\",\r\n        \"method\": \"run\",\r\n        \"line\": 2513\r\n      },\r\n      {\r\n        \"class\": \"org.jboss.threads.EnhancedQueueExecutor$ThreadBody\",\r\n        \"method\": \"run\",\r\n        \"line\": 1538\r\n      },\r\n      {\r\n        \"class\": \"org.jboss.threads.DelegatingRunnable\",\r\n        \"method\": \"run\",\r\n        \"line\": 29\r\n      },\r\n      {\r\n        \"class\": \"org.jboss.threads.ThreadLocalResettingRunnable\",\r\n        \"method\": \"run\",\r\n        \"line\": 29\r\n      },\r\n      {\r\n        \"class\": \"io.netty.util.concurrent.FastThreadLocalRunnable\",\r\n        \"method\": \"run\",\r\n        \"line\": 30\r\n      },\r\n      {\r\n        \"class\": \"java.lang.Thread\",\r\n        \"method\": \"run\",\r\n        \"line\": 840\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nThe current working assumption is that the peer closes the connection real quick again before the processing can finish.\n\n### Version\n\n24.0.1\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nThe request processing is aborted in a controlled manner but no NPE is thrown.\n\n### Actual behavior\n\nNPE is thrown and logged. No other side-affects have been observed so far.\n\n### How to Reproduce?\n\nCould not come up with an easy reproducer so far. But once we have more insight on our side, I will update the ticket with more information.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/27844/comments",
    "author": "mkrueger92",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2024-03-14T08:36:14Z",
        "body": "I am switching to cloud-native as this is not OIDC issue, but rather something related to server / networking / quarkus distribution."
      },
      {
        "user": "shawkins",
        "created_at": "2024-03-19T20:12:03Z",
        "body": "> The current working assumption is that the peer closes the connection real quick again before the processing can finish.\r\n\r\nI could not reproduce that behavior. No matter how early I try to kill the connection, the processing succeeds. The most that I could produce was logged on the server as:\r\n\r\n```\r\n2024-03-19 16:02:28,587 ERROR [org.keycloak.services.error.KeycloakErrorHandler] (executor-thread-15) Uncaught server error: java.io.IOException: java.nio.channels.ClosedChannelException\r\n```\r\n\r\n@mkrueger92 do you see ClosedChannelExceptions in your log?\r\n\r\nThe vertx docs do allow for the possibility that the remoteAddress will be null, but only gives the example of \"server bound on a domain socket\". @vietj @cescoffier are there other situations where the remoteAddress could be null?\r\n\r\n~priority-low"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-19T20:12:08Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "mkrueger92",
        "created_at": "2024-03-21T07:34:36Z",
        "body": "@shawkins No. I do not see them."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-20T00:06:07Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 27643,
    "title": "Password policy for not having username in the password",
    "created_at": "2024-03-07T04:07:34Z",
    "closed_at": "2024-03-28T07:29:04Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "release-notes",
      "team/core-clients",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/27643",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nauthentication\n\n### Describe the bug\n\nWe have applied password policy of ‘Not Username’. But that policy checks for username exactly same as password, however requirement is to not allow any part of username not present in the password\r\nFor example lets say username is 'root'. and password is 'root123',In this case keycloak should not allow the login.\n\n### Version\n\n22.0.3\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nlogin should not happen when the password contains prefix of username or part of username\n\n### Actual behavior\n\nlogin should not happen when the password contains prefix of username or part of username\n\n### How to Reproduce?\n\ncreate a username as  'root' and password as 'root123' and apply password policy not having username\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/27643/comments",
    "author": "sharanu116",
    "comments": [
      {
        "user": "gilvansfilho",
        "created_at": "2024-03-07T17:27:45Z",
        "body": "I checked the source code of main branch and the behavior remains in latest release so I did a PR do introduce a new policy which check if password contains username. "
      },
      {
        "user": "gilvansfilho",
        "created_at": "2024-03-21T13:11:25Z",
        "body": "There are a PR open to this..."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-27T13:13:06Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 27559,
    "title": "ContextNotActiveException when sending email for event USER_DISABLED_BY_PERMANENT_LOCKOUT",
    "created_at": "2024-03-05T14:32:36Z",
    "closed_at": "2024-06-06T00:06:20Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/27559",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nauthentication\n\n### Describe the bug\n\nThe user should receive an email when account is disabled due to max login failures. Instead an exception is thrown.\n\n### Version\n\n23.0.3, 24.0.1, latest, nightly\n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nAn e-mail is sent to inform the user that their account is permanently disabled.\n\n### Actual behavior\n\nNo e-mail is send and an exception is thrown:\r\n\r\n```\r\n2024-03-05 14:03:33 2024-03-05 13:03:33,474 WARN  [org.keycloak.services] (Brute Force Protector) KC-SERVICES0053: login failure for user 00fd0f55-e3b2-402f-b78a-f5e72e948b3e from ip 192.168.65.1\r\n2024-03-05 14:03:33 2024-03-05 13:03:33,495 ERROR [org.keycloak.services] (Brute Force Protector) KC-SERVICES0052: Failed processing type: jakarta.enterprise.context.ContextNotActiveException: RequestScoped context was not active when trying to obtain a bean instance for a client proxy of CLASS bean [class=io.quarkus.vertx.http.runtime.CurrentVertxRequest, id=d3fea7e849828428a20dd77c1de969b46fc0d001]\r\n2024-03-05 14:03:33     - you can activate the request context for a specific method using the @ActivateRequestContext interceptor binding\r\n2024-03-05 14:03:33     at io.quarkus.arc.impl.ClientProxies.getDelegate(ClientProxies.java:55)\r\n2024-03-05 14:03:33     at io.quarkus.vertx.http.runtime.CurrentVertxRequest_ClientProxy.arc$delegate(Unknown Source)\r\n2024-03-05 14:03:33     at io.quarkus.vertx.http.runtime.CurrentVertxRequest_ClientProxy.getCurrent(Unknown Source)\r\n2024-03-05 14:03:33     at org.keycloak.quarkus.runtime.integration.resteasy.ResteasyVertxProvider.getContextData(ResteasyVertxProvider.java:33)\r\n2024-03-05 14:03:33     at org.keycloak.common.util.Resteasy.getContextData(Resteasy.java:62)\r\n2024-03-05 14:03:33     at org.keycloak.services.DefaultKeycloakContext.getContextObject(DefaultKeycloakContext.java:102)\r\n2024-03-05 14:03:33     at org.keycloak.services.DefaultKeycloakContext.getHttpRequest(DefaultKeycloakContext.java:150)\r\n2024-03-05 14:03:33     at org.keycloak.events.email.EmailEventListenerProvider.sendEmail(EmailEventListenerProvider.java:74)\r\n2024-03-05 14:03:33     at java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n2024-03-05 14:03:33     at org.keycloak.events.EventListenerTransaction.commitImpl(EventListenerTransaction.java:62)\r\n2024-03-05 14:03:33     at org.keycloak.models.AbstractKeycloakTransaction.commit(AbstractKeycloakTransaction.java:48)\r\n2024-03-05 14:03:33     at org.keycloak.services.DefaultKeycloakTransactionManager.commit(DefaultKeycloakTransactionManager.java:146)\r\n2024-03-05 14:03:33     at org.keycloak.services.DefaultKeycloakSession.closeTransactionManager(DefaultKeycloakSession.java:407)\r\n2024-03-05 14:03:33     at org.keycloak.services.DefaultKeycloakSession.close(DefaultKeycloakSession.java:372)\r\n2024-03-05 14:03:33     at org.keycloak.services.managers.DefaultBruteForceProtector.run(DefaultBruteForceProtector.java:283)\r\n2024-03-05 14:03:33     at java.base/java.lang.Thread.run(Thread.java:840)\r\n2024-03-05 14:03:33 \r\n```\n\n### How to Reproduce?\n\n1. Start docker image keycloak:latest with env KC_SPI_EVENTS_LISTENER_EMAIL_INCLUDE_EVENTS=USER_DISABLED_BY_PERMANENT_LOCKOUT\r\n2. Login into admin console\r\n2. Configure mail server\r\n3. Add \"email\" to \"Event listeners\"\r\n4. Enable \"Brute force detection\" or set \"Brute Force Mode\" to \"Lockout permanently\"\r\n5. Set \"Max login failures\" to 1\r\n6. Set \"Permanent lockout\" to on (if shown)\r\n7. Create user with random password\r\n8. Login as user and type in a wrong password\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/27559/comments",
    "author": "StephanSchrader",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2024-03-06T15:42:55Z",
        "body": "Not 100% sure, but I think this might be a duplicate of #26327 .\r\n\r\nThe issue is caused by the fact that we try to obtain RestEasy context data outside of the transaction (As the transaction commit is already in progress according to stacktrace). Hopefully we can figure something to improve this (EG. make sure that email can be sent earlier than during transaction commit. Or start new transaction if not transaction (and KeycloakSession) is in progress).\r\n\r\nContribution is welcome as I am not sure when/if Keycloak team has time to look at this."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-06T15:43:07Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "StephanSchrader",
        "created_at": "2024-03-07T08:26:32Z",
        "body": "Thanks for looking into this. You're right this is duplicate of #26327 .\r\n\r\nThe event in my case is also triggered by the brute force detector. "
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-06T00:06:19Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 27558,
    "title": "Client registration policy \"Allowed Protocol Mapper Types\" prevents clients from self-updating via the client registration api",
    "created_at": "2024-03-05T14:25:03Z",
    "closed_at": "2024-03-13T13:00:36Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "team/core-shared",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/27558",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\nadmin/api\r\n\r\n### Describe the bug\r\n\r\n`Allowed Protocol Mapper Types` fails client self-update when the client tries to push an already assigned protocol mapper having a non whitelisted type.\r\n\r\n`Allowed Protocol Mapper Types` should be smarter and only deny *addition* of non whitelisted protocol mapper type. Already assigned protocol mappers should be allowed even if they are not part of the whitelist.\r\n\r\n### Version\r\n\r\n24.0.1\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nPerforming `PUT /realms/master/clients-registrations/default/foo` with the exact same representation retrieved from `GET /realms/master/clients-registrations/default/foo` should succeed.\r\n\r\n### Actual behavior\r\n\r\n`PUT /realms/master/clients-registrations/default/foo` fails with an http status 403 and response body `{\"error\":\"insufficient_scope\",\"error_description\":\"Policy 'Allowed Protocol Mapper Types' rejected request to client-registration service. Details: ProtocolMapper type not allowed\"}`.\r\n\r\nLooking at the Keycloak log, we can see that `Allowed Protocol Mapper Types` rejected protocol mapper `Client Host` because its type `oidc-usersessionmodel-note-mapper` is not whitelisted.\r\n\r\n### How to Reproduce?\r\n\r\n1. Create an OIDC client with `Client authentication` enabled, `Service account` enabled and client id `foo`\r\n1. Notice that the client `dedicated` scope has at least the following protocol mappers of type `oidc-usersessionmodel-note-mapper`: `Client IP Address`, `Client Host` and `Client ID`\r\n1. Generate a registration access token for this client\r\n1. Using the registration access token, update the client *without any modification* . Submit the response body of `GET /realms/master/clients-registrations/default/foo` to `PUT /realms/master/clients-registrations/default/foo`.\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/27558/comments",
    "author": "reda-alaoui",
    "comments": [
      {
        "user": "reda-alaoui",
        "created_at": "2024-03-05T21:46:50Z",
        "body": "I can reproduce the issue on 24.0.1 using the same steps."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-08T13:22:38Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 27530,
    "title": "Reset password email shows raw link instead of hypertextual text",
    "created_at": "2024-03-05T08:54:54Z",
    "closed_at": "2024-07-05T00:06:05Z",
    "labels": [
      "kind/bug",
      "area/translations",
      "help wanted",
      "team/community",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/27530",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\ntranslations\r\n\r\n### Describe the bug\r\n\r\nExcept for English, all the other languages show the raw link in the email of reset password.\r\n\r\nEnglish:\r\n```html\r\n<p><a href=\"{0}\">Link to reset credentials</a></p>\r\n```\r\n\r\nItalian (and all other languages):\r\n```html\r\n<p><a href=\"{0}\">{0}</a></p>\r\n```\r\n\r\n### Version\r\n\r\n24.0.1\r\n\r\n### Regression\r\n\r\n- [ ] The issue is a regression\r\n\r\n### Expected behavior\r\n\r\nTo have the same consistent translation for every language.\r\n\r\n### Actual behavior\r\n\r\nExcept for English, all the other languages show the raw link in the email of reset password that is not pretty for sure and not consistent with the English translation.\r\n\r\n### How to Reproduce?\r\n\r\n1. Open a login page\r\n2. Start the reset password flow\r\n3. Look at the email that arrives\r\n\r\n### Anything else?\r\n\r\nProbably being a simple translation for each language ChatGPT should be enough to translate every language.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/27530/comments",
    "author": "remarcoble",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-05T10:09:05Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-05T00:06:04Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 27444,
    "title": "type of clients.findRole() in @keycloak/keycloak-admin-client is wrong",
    "created_at": "2024-03-01T16:59:29Z",
    "closed_at": "2024-03-12T15:01:55Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "team/ui",
      "area/admin/client-js",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/25.0.0",
      "release/24.0.6",
      "release/22.0.12"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/27444",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/client-js\n\n### Describe the bug\n\nclients.findRole() in @keycloak/keycloak-admin-client returns null if the no role matching the parameters was found. The types however don't include null in the return value\n\n### Version\n\nIrrelevant \n\n### Regression\n\n- [ ] The issue is a regression\n\n### Expected behavior\n\nTypes should include null\n\n### Actual behavior\n\nTypes dont include null\n\n### How to Reproduce?\n\nTrivial\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/27444/comments",
    "author": "simhnna",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-11T11:19:25Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 26794,
    "title": " MULTIVALUED_LIST_TYPE not working for client mappers",
    "created_at": "2024-02-05T16:26:04Z",
    "closed_at": "2024-08-21T08:38:33Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "release/26.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/26794",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\nadmin/ui\r\n\r\n### Describe the bug\r\n\r\nI am developing a custom client mapper for a client. I wanted to use `MULTIVALUED_LIST_TYPE` for one of the mapper configuration options, however upon doing so I receive this exception when trying to save if the field is not empty:\r\n\r\n```\r\n2024-02-05 01:12:30,863 DEBUG [org.jboss.resteasy.reactive.server.handlers.RequestDeserializeHandler] (executor-thread-1) Error occurred during deserialization of input: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.lang.String` from Array value (token `JsonToken.START_ARRAY`)\r\n at [Source: (org.jboss.resteasy.reactive.server.vertx.VertxInputStream); line: 1, column: 327] (through reference chain: org.keycloak.representations.idm.ProtocolMapperRepresentation[\"config\"]->java.util.LinkedHashMap[\"testOption\"])\r\n        at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n        at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1752)\r\n        at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1526)\r\n        at com.fasterxml.jackson.databind.deser.std.StdDeserializer._deserializeFromArray(StdDeserializer.java:222)\r\n        at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:46)\r\n        at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:11)\r\n        at com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:623)\r\n        at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:449)\r\n        at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:32)\r\n        at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129)\r\n        at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:314)\r\n        at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:177)\r\n        at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n        at com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:2105)\r\n        at com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1481)\r\n        at io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyReader.doReadFrom(FullyFeaturedServerJacksonMessageBodyReader.java:98)\r\n        at io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyReader.readFrom(FullyFeaturedServerJacksonMessageBodyReader.java:48)\r\n        at io.quarkus.resteasy.reactive.jackson.runtime.serialisers.FullyFeaturedServerJacksonMessageBodyReader.readFrom(FullyFeaturedServerJacksonMessageBodyReader.java:87)\r\n        at org.jboss.resteasy.reactive.server.handlers.RequestDeserializeHandler.readFrom(RequestDeserializeHandler.java:126)\r\n        at org.jboss.resteasy.reactive.server.handlers.RequestDeserializeHandler.handle(RequestDeserializeHandler.java:84)\r\n        at io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:135)\r\n        at org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)\r\n        at io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\r\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n        at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n        at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.base/java.lang.Thread.run(Thread.java:840)`\r\n\r\n```\r\n\r\n### Version\r\n\r\n23.0.6\r\n\r\n### Expected behavior\r\n\r\nClient mapper saves configuration correctly, including the list of values for the MULTIVALUED_LIST_TYPE option.\r\n\r\n### Actual behavior\r\n\r\nThe UI and backend are unable to save the configuration.\r\n\r\n### How to Reproduce?\r\n\r\nCreate a client mapper with a configuration option using the `MULTIVALUED_LIST_TYPE`. Try to add and configure the client mapper in the UI. Enter any value for the option using the multi-valued type. Press Save, and you will see that an unknown error occurs with the above stacktrace.\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/26794/comments",
    "author": "LevN0",
    "comments": [
      {
        "user": "edewit",
        "created_at": "2024-02-15T08:04:33Z",
        "body": "list are sometimes stored as arrays sometimes as strings, seems in this case the UI is sending a array while the backend expects a string. We have to add the `stringify` attribute to the `<DynamicComponents`"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-08T08:30:20Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 26646,
    "title": "Fine Grain SAML Endpoint Configuration requires manage-realm permission",
    "created_at": "2024-01-31T14:00:11Z",
    "closed_at": "2024-06-12T00:06:06Z",
    "labels": [
      "kind/bug",
      "area/admin/fine-grained-permissions",
      "help wanted",
      "team/ui",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/26646",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/fine-grained-permissions\n\n### Describe the bug\n\nThe UI form for 'Fine Grain SAML Endpoint Configuration' requires the manage-realm role instead of the 'manage-clients' role.\r\n\r\nFor SAML clients, in FineGrainSamlEndpointConfig.tsx:\r\n  <FormAccess role=\"manage-realm\" isHorizontal>\r\n\r\nBut for OpenID connect clients, in FineGrainOpenIdConnect.tsx:\r\n    <FormAccess\r\n      role=\"manage-clients\"\r\n      fineGrainedAccess={hasConfigureAccess}\r\n      isHorizontal\r\n    >\n\n### Version\n\n23.0.5\n\n### Expected behavior\n\nI expect the **manage-clients** role to be the role that controls access to the client configuration.  Not manage-realm.\n\n### Actual behavior\n\nThe 'manage-realm' role is required to change these fields, which gives the admin user substantially more powers.\n\n### How to Reproduce?\n\nCreate a user with permission to manage clients, but not manage realms and create a SAML client.\r\nIt is not possible to edit the 'Fine Grain SAML Endpoint Configuration' - the options are greyed out.\n\n### Anything else?\n\nThere may be a good reason for the different realm, so it would be useful to know if that is the case.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/26646/comments",
    "author": "plovell",
    "comments": [
      {
        "user": "plovell",
        "created_at": "2024-01-31T14:07:41Z",
        "body": "The bug submission seems to have lost some of my edits to the description.\r\nFor SAML clients, in FineGrainSamlEndpointConfig.tsx:  **FormAccess role=\"manage-realm\" isHorizontal**\r\nBut for OpenID connect clients, in FineGrainOpenIdConnect.tsx: **FormAccess role=\"manage-clients\" fineGrainedAccess=hasConfigureAccess isHorizontal**"
      },
      {
        "user": "pedroigor",
        "created_at": "2024-03-04T15:35:50Z",
        "body": "It seems the role is indeed wrong when creating the UI component. It should be the same as when rendering OIDC clients."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-13T19:24:56Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-12T00:06:05Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 26129,
    "title": "Accessibility violations in <Select> elements",
    "created_at": "2024-01-11T15:35:58Z",
    "closed_at": "2024-06-07T00:06:10Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/26129",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nThere are a11y violations in some of our <Select> implementations that need to be fixed. \n\n### Version\n\n22.0.5\n\n### Expected behavior\n\naria-label attributes are added to <Select> elements.\n\n### Actual behavior\n\naria-label attributes are missing in the <Select> elements.\n\n### How to Reproduce?\n\nGoing through the app where <Select> elements are implemented and scanning for a11y violations.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/26129/comments",
    "author": "agagancarczyk",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-08T08:31:55Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-07T00:06:07Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 25926,
    "title": "This condition is always true, so that no role can be created as expect.",
    "created_at": "2024-01-05T03:19:57Z",
    "closed_at": "2024-10-16T00:06:04Z",
    "labels": [
      "area/testsuite",
      "kind/bug",
      "area/core",
      "help wanted",
      "team/core-iam",
      "team/core-shared",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/25926",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ntestsuite\n\n### Describe the bug\n\nIn a integration test, developer could create a user and assign a role to the user, for convinence, the method `assignRoleWithUser` is designed to create the specified role if it does not exist. However, after my review on its code, I found the condition used to check the existence of the role is always true, and on the next step, an not found exception will be raised from this exception because of the missing of the role.\n\n### Version\n\n23.0.3\n\n### Expected behavior\n\nCreate a role if it does not exist.\n\n### Actual behavior\n\nThis condition is always true, and the missing role is not created as expect.\n\n### How to Reproduce?\n\n```\r\n    fluentTestsHelper.createTestUser(username, password)\r\n        .assignRoleWithUser(username, \"user\");\r\n```\n\n### Anything else?\n\nConsidering use `try-catch` to check the existence of a role.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/25926/comments",
    "author": "miguoliang",
    "comments": [
      {
        "user": "sguilhen",
        "created_at": "2024-07-17T23:07:36Z",
        "body": "I think the condition will always be false because the `get(\"roleName\")` is resolved to a proxy even when the server-side endpoint thrown an exception. In this case, it would probably be better to change the condition to something like\r\n\r\n ```\r\n         if (keycloak.realms().realm(testRealm).roles().list().stream().noneMatch(rep -> rep.getName().equals(roleName))) {\r\n```\r\n\r\nI'll accept this one as a low priority bug - any PR from the community would be appreciated in case people are using this class in their environments to test the integration with Keycloak. Our own testsuite is not using it."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-17T23:07:57Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-10-16T00:06:03Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 25658,
    "title": "Search for all groups of a user doesn't show all groups",
    "created_at": "2023-12-18T07:08:13Z",
    "closed_at": "2024-05-29T00:06:02Z",
    "labels": [
      "kind/bug",
      "area/core",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/25658",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nA user is a member of a group in active directory.\r\nGo to User -> Groups \r\nthe list of all groups doesn't include the ad group\r\nBUT\r\nsearch for the group name\r\nthen it appears\n\n### Version\n\n21.1.1\n\n### Expected behavior\n\nthe ad groups directly appears when you enter the tab and search for all groups\n\n### Actual behavior\n\nthe search for groups result doesn't contain the ad group\n\n### How to Reproduce?\n\nmaybe just create a identity provider (AD), create a user, create a group, put user in group\r\nmake a sync, check the search result of the groups tab \n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/25658/comments",
    "author": "kitenco",
    "comments": [
      {
        "user": "ssilvert",
        "created_at": "2024-01-22T20:56:41Z",
        "body": "Moving to the core team as it sounds like the REST API is not returning what @kitenco expects."
      },
      {
        "user": "sguilhen",
        "created_at": "2024-02-22T14:20:43Z",
        "body": "@kitenco Would you be able to try this using the latest Keycloak version? I've tried to reproduce locally but the groups were correctly synched (provided the group mapper was configured, of course) along with the users and readily available in the Groups tab (both top level Groups menu item, and under User -> search for the user -> Groups)"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-02-28T14:56:52Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-29T00:06:01Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 25508,
    "title": "Docs: server_admin/topics/authentication/password-policies.adoc",
    "created_at": "2023-12-12T20:31:20Z",
    "closed_at": "2024-06-10T00:06:08Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "area/docs",
      "area/ldap",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/25508",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ndocs\n\n### Describe the bug\n\n\r\n\r\nFile: server_admin/topics/authentication/password-policies.adoc\n\n### Version\n\n23.0.1\n\n### Expected behavior\n\nPlease address the necessity of a password policy when a realm is configured with User Federation using LDAP. When LDAP is enabled password policies should not need to be applied, as this is inherited from LDAP.\n\n### Actual behavior\n\nDocs currently do not specify whether a password policy is required when using LDAP.\n\n### How to Reproduce?\n\nReview the password-policies document.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/25508/comments",
    "author": "reaperb0t",
    "comments": [
      {
        "user": "ahus1",
        "created_at": "2024-01-31T15:56:59Z",
        "body": "Thank you for raising this. I'm tagging this \"help wanted\" as we would be happy to receive a community contribution to the documentation to explain the when a password policy makes sense and when not."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-11T19:16:53Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-10T00:06:07Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 25331,
    "title": "Group policy and User policy can't be created without permission.  So don't allow selection.",
    "created_at": "2023-12-06T13:14:54Z",
    "closed_at": "2024-06-07T00:06:43Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/25331",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nWhen creating a client policy I am presented with a list of policy types I can create.  However, if I don't have `query-users` role, I will get an error when I select `User` as the policy type.  Also, if I don't have `query-groups` role I will get an error when I select `Group` as the policy type.\r\n\r\nTherefore, `User` and `Group` policy types should not be shown in the list if I don't have those respective roles.\n\n### Version\n\nmain\n\n### Expected behavior\n\nSee above\n\n### Actual behavior\n\nSee above\n\n### How to Reproduce?\n\nSee above\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/25331/comments",
    "author": "ssilvert",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-08T08:28:08Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-07T00:06:42Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 25191,
    "title": "[UMA] Access Token is invalid when retrieved via token exchange",
    "created_at": "2023-12-01T07:05:02Z",
    "closed_at": "2024-07-25T00:06:03Z",
    "labels": [
      "kind/bug",
      "area/token-exchange",
      "help wanted",
      "team/core-clients",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/25191",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\r\n\r\n### Area\r\n\r\ntoken-exchange\r\n\r\n### Describe the bug\r\n\r\nAccess token issued from a Token Exchange is not valid when you try to retrieve a UMA ticket.\r\n\r\nAn access token is exchanged targeting a public client from a confidential one. The access token seems valid and can be used to authenticate, but then when you use it for issue a UMA ticket, the same response is always returned.\r\n\r\n```json\r\n{\r\n    \"error\": \"invalid_grant\",\r\n    \"error_description\": \"Invalid bearer token\"\r\n}\r\n```\r\n\r\nThe log is not much motre verbose\r\n\r\n```\r\ndev-acme-keycloak-1               | 23:33:27 DEBUG [or.ke.se.ma.AuthenticationManager] (executor-thread-12) No user session\r\ndev-acme-keycloak-1               | 23:33:27 DEBUG [or.ke.se.ma.AuthenticationManager] (executor-thread-12) Client session for client 'biosdev-api' not present in user session '35dc8ba9-c7df-48e5-9dc6-e877ecaa8bee'\r\ndev-acme-keycloak-1               | 23:33:27 WARN  [or.ke.events] (executor-thread-12) type=PERMISSION_TOKEN_ERROR, realmId=b1a19f87-edd1-4930-a4a2-6974ee98b4b1, clientId=biosdev-api, userId=null, ipAddress=172.25.0.1, error=invalid_token, auth_method=oauth_credentials, grant_type=urn:ietf:params:oauth:grant-type:uma-ticket\r\n```\r\n\r\nI have double-checked that the host is the same as the issuer and the introspecter, and I have been running tests via Postman with no luck.\r\n\r\nThe issue seems similar to #9337\r\n\r\n### Version\r\n\r\n22.0\r\n\r\n### Expected behavior\r\n\r\na successful UMA permission ticket as with a token issued with another flow (authorization, password...) and the same client.\r\n\r\n### Actual behavior\r\n\r\nthe UMA ticket request is always returning 401 with the error \"Invalid bearer token\"\r\n\r\n### How to Reproduce?\r\n\r\n1. Create 2 clients (1 public, 1 confidential)\r\n2. Activate authorization on the confidential one\r\n3. Enable advanced permission for token exchange on the public one to allow the confidential client to target the public (client policy)\r\n4. Issue a token for a use with public client (e.g. authorization code flow)\r\n5. Exchange that token with the confidential client\r\n6. Use the issued token to issue a UMA ticket.\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/25191/comments",
    "author": "emmanuelmathot",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2024-04-11T19:51:30Z",
        "body": "Thanks for the report, but I am not sure about priority of this due the token-exchange is preview feature and UMA related issues also have low priority."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-11T19:51:48Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "shalphaaslam",
        "created_at": "2024-04-25T13:42:06Z",
        "body": "Hi, I had the same issue while trying to use keycloak authorization services. I use 24.0.2 version of Keycloak. the authorization request seeking access to any resource protected by a resource server causes error \r\n`WARN  [org.keycloak.events] (executor-thread-11) type=\"PERMISSION_TOKEN_ERROR\", realmId=\"3b897f33-1700-4ee8-9de8-2ae13f92d89c\", clientId=\"account\", userId=\"null\", ipAddress=\"172.26.0.1\", error=\"invalid_token\", auth_method=\"oauth_credentials\", grant_type=\"urn:ietf:params:oauth:grant-type:uma-ticket\"`\r\n\r\nI resolved it by using an authorization code flow token instead of a token fetched from the password grant type. Consider the authentication by standard flow for token exchange."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-25T00:06:02Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 25060,
    "title": "fix debug log string",
    "created_at": "2023-11-27T20:02:28Z",
    "closed_at": "2023-12-07T20:08:09Z",
    "labels": [
      "kind/bug",
      "area/core",
      "good first issue",
      "help wanted",
      "release/24.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/25060",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ncore\n\n### Describe the bug\n\nDebug log is not substituting the strings:\r\nCookieHelper.java line 99\r\nlogger.debugv(\"Could not find any cookies with name '{0}', trying '{1}'\", name, legacy);\r\n\r\nplease remove single quotes, I htink that's what blocking the string substitution for formatting;\r\nthis line is logging:\r\n[org.keycloak.services.util.CookieHelper] (executor-thread-18) Could not find any cookies with name {0}, trying {1}\n\n### Version\n\n21.1.1\n\n### Expected behavior\n\nsubstitute strings in log\n\n### Actual behavior\n\nsingle wrong debug log\n\n### How to Reproduce?\n\nI'm debugging a problem in my own session delete sequence, I don't actually know\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/25060/comments",
    "author": "dankots",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-11-29T14:05:54Z",
        "body": "@dankots Thanks, I am adding to backlog due the low priority. Feel free to send PR for this."
      },
      {
        "user": "Lorenzomicci",
        "created_at": "2023-12-02T20:44:08Z",
        "body": "Hello, i have replaced the old line with this : \r\n`logger.debugv(\"Could not find any cookies with name {0}, trying {1}\", name, legacy);`\r\nBut i don't know how to test the correct behaviour\r\nthank you!"
      }
    ]
  },
  {
    "number": 24966,
    "title": "Docs: securing_apps/topics/token-exchange/token-exchange.adoc",
    "created_at": "2023-11-23T11:08:48Z",
    "closed_at": "2023-11-23T11:48:01Z",
    "labels": [
      "kind/bug",
      "area/token-exchange",
      "area/docs",
      "help wanted"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/24966",
    "body": "### Before reporting an issue\n\n- [X] I have read and understood the above terms for submitting issues, and I understand that my issue may be closed without action if I do not follow them.\n\n### Area\n\ntoken-exchange\n\n### Describe the bug\n\nThe info notice under token exchange section header wrongly references the `admin-fine-grained-authz` preview feature as `admin_fine_grained_authz` (replacing dashes with underscores). This causes Keycloak to fail to start with an error message _Invalid value for option '--features'_.\r\n\r\nFile: securing_apps/topics/token-exchange/token-exchange.adoc\n\n### Version\n\n22.0.5\n\n### Expected behavior\n\nTo use more than the Internal Token to Internal Token Exchange flow, also enable the `admin-fine-grained-authz` feature. For details, see the Enabling and disabling features guide.\n\n### Actual behavior\n\nTo use more than the Internal Token to Internal Token Exchange flow, also enable the `admin_fine_grained_authz` feature. For details, see the Enabling and disabling features guide.\n\n### How to Reproduce?\n\nNo need to reproduce, just view the docs.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/24966/comments",
    "author": "ledsoft",
    "comments": [
      {
        "user": "rmartinc",
        "created_at": "2023-11-23T11:23:36Z",
        "body": "@ledsoft Please send a PR replacing underscores with hyphens, if I understand you correctly it's just this: `admin_fine_grained_authz` -> `admin-fine-grained-authz` in that file.\r\n\r\n"
      },
      {
        "user": "ledsoft",
        "created_at": "2023-11-23T11:25:15Z",
        "body": "Sure, I am working on it right now (preparing the PR in the required form)."
      },
      {
        "user": "rmartinc",
        "created_at": "2023-11-23T11:26:14Z",
        "body": "Thanks @ledsoft !"
      }
    ]
  },
  {
    "number": 21494,
    "title": "Remember the realm when re-authenticating to the administration console",
    "created_at": "2023-07-06T15:14:36Z",
    "closed_at": "2024-06-07T00:06:53Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/21494",
    "body": "### Description\r\n\r\nWhen managing a realm other than master, if the administrator logs out and logs in again the adminstration console will always select the `master` realm.\r\n\r\nDuring development, you are frequently changing realms and executing log-out to test changes. If the realm could be remembered the UX should improve a lot as it will save a few clicks. Sure, we can use separate tabs or browser windows, but managing multiple tabs and multiple windows is not always wanted.\r\n\r\nI'm not sure how much it will help with end-users but I think most of the time you want to manage the realm you previously selected, without being forced to select the realm manually.\r\n\r\n### Discussion\r\n\r\n_No response_\r\n\r\n### Motivation\r\n\r\nImprove UX when managing realms.\r\n\r\n### Details\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/21494/comments",
    "author": "pedroigor",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-08T08:26:25Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-07T00:06:52Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 21346,
    "title": "session.invalidate(InvalidationHandler.ObjectType.USER, user) do not propagate information to infinispan caches",
    "created_at": "2023-06-30T10:42:51Z",
    "closed_at": "2024-03-07T20:10:19Z",
    "labels": [
      "kind/bug",
      "area/storage",
      "help wanted",
      "team/core-iam"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/21346",
    "body": "### Before reporting an issue\n\n- [X] I have searched existing issues\n- [X] I have reproduced the issue with the latest release\n\n### Area\n\nstorage\n\n### Describe the bug\n\nI'm currently working on an issue with my Keycloak platform and could use some help. The platform is based on multiple Keycloak nodes with cross-site replication enabled. However, I'm experiencing a problem when it comes to replicating modifications across nodes using the Keycloak internal Infinispan.\r\n\r\nI've created a custom provider that modifies user data. At the end of the function, I call `session.invalidate(InvalidationHandler.ObjectType.USER, user)` to invalidate the user data in the caches. The issue is that these modifications aren't getting replicated in the caches. I can only see the changes on one node, not on the others.\r\n\r\nAfter some experimentation, I found that the following code block successfully propagates the modifications into the caches:\r\n\r\n```java \r\nUserCache userCache = session.getProvider(UserCache.class);\r\nif (userCache != null) {\r\n   userCache.evict(realm, user);\r\n}\r\n```\r\n\r\nHowever, I'm a bit concerned about using the `UserCache` class from the `keycloak-model-legacy` package. Shouldn't `session.invalidate()` be enough to handle this?\r\n\r\n\n\n### Version\n\n21.1.2\n\n### Expected behavior\n\n`session.invalidate(InvalidationHandler.ObjectType.USER, user)`  should invalidate user and propagate the information on all caches nodes.\n\n### Actual behavior\n\n`session.invalidate(InvalidationHandler.ObjectType.USER, user)` does not propagate the information on all caches nodes\n\n### How to Reproduce?\n\n1. Create a custom provider\r\n2. In the provider, use those lines : \r\n\r\n```java\r\nuser.setEnabled(false);\r\nsession.invalidate(InvalidationHandler.ObjectType.USER, user);\r\n```\r\n\r\n3. Execute the provider on a plateform with multiple caches nodes\r\n4. See that the user is disabled on one node, not on the others\n\n### Anything else?\n\nI have exposed this problem on slack and @ahus1 gave this response :\r\n> I agree with your thoughts. Please the culprit is possibly InfinispanUserCacheProviderFactory#invalidate which should handle this by sending an invalidation to the caches in all Keycloak instances.\r\nLooking at the code,  \"InvalidationHandler.ObjectType.USER\" is not used really anywhere, so it seems you are the first to use this one. For now, use the workaround you described above - at first sight, I assume this or similar code would need to be called there when using the session.invalidate()",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/21346/comments",
    "author": "bamandine",
    "comments": [
      {
        "user": "pedroigor",
        "created_at": "2024-03-07T20:10:11Z",
        "body": "It is not a bug because it is a non-supported usage of our SPIs."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-07T20:10:20Z",
        "body": "Thanks for reporting this issue. However, after review this is not considered a valid issue, or has been recently resolved.\n\nAs the issue is not valid it will be automatically closed."
      }
    ]
  },
  {
    "number": 21167,
    "title": "Add missing Polish translations",
    "created_at": "2023-06-23T09:25:41Z",
    "closed_at": "2023-07-04T13:21:14Z",
    "labels": [
      "kind/enhancement",
      "area/translations",
      "help wanted",
      "team/community"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/21167",
    "body": "### Description\n\nThere is one missing Polish translation that is highly visible (Login page): Sing In to your account. Below I suggest you equivalent in my native language.\r\n\r\n\"Sign in to your account\" => \"Zaloguj się na swoje konto\"\r\n\n\n### Discussion\n\n_No response_\n\n### Motivation\n\nNew translation in Polish\n\n### Details\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/21167/comments",
    "author": "Marcin164",
    "comments": [
      {
        "user": "jonkoops",
        "created_at": "2023-06-23T10:10:29Z",
        "body": "@Marcin164 feel free to submit a PR to fix this issue."
      }
    ]
  },
  {
    "number": 21000,
    "title": "admin-cli Capability config section has not responding to Save",
    "created_at": "2023-06-14T10:58:40Z",
    "closed_at": "2024-06-07T00:06:33Z",
    "labels": [
      "kind/bug",
      "area/admin/ui",
      "help wanted",
      "team/ui",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/21000",
    "body": "### Before reporting an issue\n\n- [X] I have searched existing issues\n- [X] I have reproduced the issue with the latest release\n\n### Area\n\nadmin/ui\n\n### Describe the bug\n\nhi ever body.\r\nat first thanks for your efforts.\r\ni found problem in admin ui. \r\nin the clients' page, when i try to change Capability config of admin-cli client, if i change Capabilities and save changes, i couldn't see any response or messages. \r\nfor successful saving, i should revert changes then save again. \r\n\r\n\n\n### Version\n\n21.1.1\n\n### Expected behavior\n\nsave Capability configs for admin-cli at the first try.\r\n\n\n### Actual behavior\n\nno responding and no messages will be shown at first try, until you revert chnages and save it again.\n\n### How to Reproduce?\n\njust run keyCloak in development mode.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/21000/comments",
    "author": "a-forghani-y79",
    "comments": [
      {
        "user": "ssilvert",
        "created_at": "2023-06-14T18:40:54Z",
        "body": "Thanks for reporting.  I have reproduced this.  Very strange.\r\n\r\nI only see this on the admin-cli client.  Others I have tried don't seem to have the same issue."
      },
      {
        "user": "edewit",
        "created_at": "2023-06-15T06:50:32Z",
        "body": "it's because there are validation errors the `Backchannel logout URL is not a valid URL`"
      },
      {
        "user": "rhinoman",
        "created_at": "2023-06-23T19:04:12Z",
        "body": "I was able to workaround this by clicking the 'revert' button followed by 'save' once.  I then could save my changes to admin-cli normally. "
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-08T08:25:12Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-07T00:06:32Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 20808,
    "title": "Single sign-on with CONFIDENTIAL client seems to have a client-id character limit",
    "created_at": "2023-06-06T09:53:16Z",
    "closed_at": "2024-06-12T00:06:08Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "area/adapter/jee",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/20808",
    "body": "### Before reporting an issue\n\n- [X] I have searched existing issues\n- [X] I have reproduced the issue with the latest release\n\n### Area\n\nauthentication\n\n### Describe the bug\n\nWe are seeing an issue when doing a user login using on a front-end application. This application uses a CONFIDENTIAL client in Keycloak with the following client-id: \"app-test-myapplicationname\".\r\n\r\nWhen doing a user login we get the following error:  \"ERROR [org.keycloak.adapters.OAuthRequestAuthenticator] (default task-1) failed to turn code into token: javax.net.ssl.SSLException: Connection reset\".\r\n\r\nIf we change the client-id to \"app-test-myapp\" and keep all other config the same, everything seems to work fine.\r\nThere seems to be some kind of character limit defined for these clients for single sign on.\r\n\r\nAlso, this issue only happens with CONFIDENTIAL clients, PUBLIC clients do not have this issue.\r\n\n\n### Version\n\n18.0.7\n\n### Expected behavior\n\nCODE_TO_TOKEN call should not fail based on client-id length.\n\n### Actual behavior\n\n10:22:56,993 ERROR [org.keycloak.adapters.OAuthRequestAuthenticator] (default task-1) failed to turn code into token: javax.net.ssl.SSLException: Connection reset\r\n\r\n    at sun.security.ssl.Alert.createSSLException(Alert.java:127)\r\n\r\n    at sun.security.ssl.TransportContext.fatal(TransportContext.java:324)\r\n\r\n    at sun.security.ssl.TransportContext.fatal(TransportContext.java:267)\r\n\r\n    at sun.security.ssl.TransportContext.fatal(TransportContext.java:262)\r\n\r\n    at sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1563)\r\n\r\n    at sun.security.ssl.SSLSocketImpl.access$400(SSLSocketImpl.java:73)\r\n\r\n    at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:973)\r\n\r\n    at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\r\n\r\n    at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)\r\n\r\n    at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:282)\r\n\r\n    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)\r\n\r\n    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)\r\n\r\n    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)\r\n\r\n    at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)\r\n\r\n    at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:165)\r\n\r\n    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)\r\n\r\n    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)\r\n\r\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)\r\n\r\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)\r\n\r\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n\r\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)\r\n\r\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n\r\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n\r\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)\r\n\r\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n\r\n    at org.keycloak.adapters.ServerRequest.invokeAccessCodeToToken(ServerRequest.java:110)\r\n\r\n    at org.keycloak.adapters.OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:335)\r\n\r\n    at org.keycloak.adapters.OAuthRequestAuthenticator.authenticate(OAuthRequestAuthenticator.java:280)\r\n\r\n    at org.keycloak.adapters.RequestAuthenticator.authenticate(RequestAuthenticator.java:138)\r\n\r\n    at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.attemptAuthentication(KeycloakAuthenticationProcessingFilter.java:154)\r\n\r\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)\r\n\r\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)\r\n\r\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:361)\r\n\r\n    at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96)\r\n\r\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:361)\r\n\r\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:118)\r\n\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\r\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:361)\r\n\r\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n\r\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\r\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:361)\r\n\r\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:117)\r\n\r\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)\r\n\r\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:361)\r\n\r\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)\r\n\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\r\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:361)\r\n\r\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\r\n\r\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\r\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:361)\r\n\r\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:225)\r\n\r\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:190)\r\n\r\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n\r\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n\r\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n\r\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n\r\n    at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\r\n\r\n    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n\r\n    at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\r\n\r\n    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n\r\n    at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n\r\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\r\n    at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\r\n\r\n    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)\r\n\r\n    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n\r\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\r\n    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n\r\n    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n\r\n    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\r\n\r\n    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\r\n\r\n    at io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\r\n\r\n    at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\r\n\r\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\r\n    at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n\r\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\r\n    at org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\r\n\r\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\r\n    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)\r\n\r\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)\r\n\r\n    at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)\r\n\r\n    at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)\r\n\r\n    at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\r\n\r\n    at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n\r\n    at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n\r\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1504)\r\n\r\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1504)\r\n\r\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1504)\r\n\r\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1504)\r\n\r\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1504)\r\n\r\n    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)\r\n\r\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)\r\n\r\n    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)\r\n\r\n    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:376)\r\n\r\n    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)\r\n\r\n    at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n\r\n    at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)\r\n\r\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n\r\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n\r\n    at java.lang.Thread.run(Thread.java:750)\r\n\r\n    Suppressed: java.net.SocketException: Connection reset by peer: socket write error\r\n\r\n        at java.net.SocketOutputStream.socketWrite0(Native Method)\r\n\r\n        at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:111)\r\n\r\n        at java.net.SocketOutputStream.write(SocketOutputStream.java:155)\r\n\r\n        at sun.security.ssl.SSLSocketOutputRecord.encodeAlert(SSLSocketOutputRecord.java:81)\r\n\r\n        at sun.security.ssl.TransportContext.fatal(TransportContext.java:355)\r\n\r\n        ... 98 more\r\n\r\nCaused by: java.net.SocketException: Connection reset\r\n\r\n    at java.net.SocketInputStream.read(SocketInputStream.java:210)\r\n\r\n    at java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\r\n    at sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:464)\r\n\r\n    at sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:68)\r\n\r\n    at sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1341)\r\n\r\n    at sun.security.ssl.SSLSocketImpl.access$300(SSLSocketImpl.java:73)\r\n\r\n    at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:957)\r\n\r\n    ... 93 more\n\n### How to Reproduce?\n\n1. Create a new client with a client id = app-test-myapplicationname\r\n    Set Access Type = confidential\r\n    Set Standard Flow Enabled = on\r\n    Configure redirect url\r\n2. Configure your application to use Keycloak single sign on with this client\r\n3. Try doing a user login on the application\r\n4. Change the client-id to app-test-myapp\r\n5. Try doing a user login on the application again\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/20808/comments",
    "author": "NielDB",
    "comments": [
      {
        "user": "rmartinc",
        "created_at": "2023-06-14T10:52:38Z",
        "body": "Hi @NielDB !\r\n\r\nI have tested this in my laptop and it's working for me. I can use \"app-test-myapplicationname\" clientId without any issue. I'm using last version. You are just pasting the adapter output, is there any error in the server? (Because it seems that it's the keycloak server the one closing the connection).\r\n\r\nSo I think there is something more here that we are missing. With this information we cannot do more in the issue. "
      },
      {
        "user": "mposolda",
        "created_at": "2023-06-27T12:24:53Z",
        "body": "Adding to Backlog as it's related to adapters and looks like corner case with some special configuration. Keycloak team likely won't have time to look at this in the near future."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-13T16:27:39Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-12T00:06:07Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 20649,
    "title": "\"Not username\" and \"Not email\" options when creating/changing a password, should ignore letter case when comparing password to email or to username",
    "created_at": "2023-05-30T11:12:58Z",
    "closed_at": "2024-08-01T00:06:06Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/20649",
    "body": "### Before reporting an issue\n\n- [X] I have searched existing issues\n- [X] I have reproduced the issue with the latest release\n\n### Area\n\naccount/api\n\n### Describe the bug\n\nWhen enabling the \"Not username\" and \"not email\" options for when users create/change their password, there ais a case in which certain passwords are allowed but shouldn't be.\r\nWhat happens is that email and username are always saved in lower case letters, even if they were inputted in upper case letters.\r\nAs a result, if I use a password with even one upper case, it will never match either email or username.\r\n\r\nExamples:\r\n1. Password and email both inputted as: A@b.c will be allowed, since password will be saved as \"A@b.c\" and email will be saved as \"a@b.c\"\r\n2. Password and username both inputted as Abcd1 will also be allowed, since password will be saved as \"Abcd1\" and username will be saved as \"abcd1\"\r\n\r\nIn my opinion, you should compare password to email and password to username, with ignore case. Meaning, the same text in 2 fields, with the only difference between them being a lower or upper case letter, should be considered as identical values.\r\n\n\n### Version\n\n21.1.1\n\n### Expected behavior\n\n\"ABC\" should be considered equal to \"abc\", when comparing password to email or username.\n\n### Actual behavior\n\nCurrently, \"Abc\" is not considered equal to \"abc\".\n\n### How to Reproduce?\n\nThere are many flows that can reproduce this issue: change/reset password to match the username, or create a user with email and password identical, except that the password has upper case letters.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/20649/comments",
    "author": "ygoldner1",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-07-18T12:28:15Z",
        "body": "I agree that it is valid issue, but not that big priority, so I am adding to Backlog. Anyone is welcome to send the PR with fixing this."
      },
      {
        "user": "pedro-hos",
        "created_at": "2023-07-24T13:31:55Z",
        "body": "I can take a look at this next week."
      },
      {
        "user": "pedro-hos",
        "created_at": "2023-09-06T21:15:55Z",
        "body": "@mposolda just an update, I have finished that fix also. Thank you"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-14T12:56:31Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "ygoldner1",
        "created_at": "2024-05-02T11:30:31Z",
        "body": "Hi,\r\nAny idea when this issue is going to be fixed?"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-08-01T00:06:05Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 19652,
    "title": "Members are inhereted from LDAP group with the same name",
    "created_at": "2023-04-11T21:38:37Z",
    "closed_at": "2024-11-01T18:49:57Z",
    "labels": [
      "kind/bug",
      "priority/important",
      "area/ldap",
      "help wanted",
      "team/core-iam",
      "release/26.1.0",
      "release/26.0.6"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/19652",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have searched existing issues\r\n- [X] I have reproduced the issue with the latest release\r\n\r\n### Area\r\n\r\nadmin/ui\r\n\r\n### Describe the bug\r\n\r\nI have such groups:\r\n* global_ldap\r\n    * office \r\n * global_local\r\n     * office  \r\n\r\nMembers, synced from LDAP, of the group `/global_ldap/office` also appear as members of the local Keycloak DB group `/global_local/office`\r\n\r\n### Version\r\n\r\n21.0.2\r\n\r\n### Expected behavior\r\n\r\nMembers of those two groups, with unique paths, but the same names. should be unique.\r\nE.g.:\r\nGroups:\r\n* \"global_ldap\"\r\n    * \"office\", Members: John, George\r\n * \"global_local\"\r\n     * \"office\", Members: < none >\r\n\r\n### Actual behavior\r\n\r\nGroups:\r\n* \"global_ldap\"\r\n    * \"office\", Members: John, George\r\n * \"global_local\"\r\n     * \"office\", Members: John, George\r\n\r\n### How to Reproduce?\r\n\r\n1. Create a mapper for LDAP group, import group - for example, `/global_ldap/office`\r\n2. Create new Keycloak local group in some different group path, that is also called `office` - for example `/global_local/office`\r\n3. Check members of the local group `/global_local/office`, normally there should be none, but you will see members of LDAP group `/global_ldap/office`\r\n\r\n### Anything else?\r\n\r\nIt only happens when LDAP group is involved, local (keycloak's) groups with the same names, but different paths, do not have this issue.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/19652/comments",
    "author": "jo-krk",
    "comments": [
      {
        "user": "ssilvert",
        "created_at": "2023-04-12T19:08:11Z",
        "body": "I don't think this is likely to be a UI issue.  Moving to core team."
      },
      {
        "user": "sguilhen",
        "created_at": "2023-06-07T15:06:25Z",
        "body": "Verified on Keycloak 21.1.1\r\n\r\nSteps:\r\n\r\n1. Run ldap server in testsuite/utils `mvn exec:java -Pldap`\r\n2. On Keycloak, create two groups - `groups-ldap` and `groups-local` that will be basically group paths\r\n3. Add an LDAP federation provider, following instructions in `docs/tests.md`. Any edit mode can be selected, I've used WRITABLE when testing\r\n4. Add a `group-ldap-mapper`, set Groups DN to `ou=RealmRoles,dc=keycloak,dc=org` and Groups Path to `/groups-ldap/`.\r\n5. Synch groups from LDAP. This will import groups `ldap-admin` and `ldap-user` to keycloak under the group `/groups-ldap`.\r\n6. In Groups, click on the local `groups-local` group, and add a subgroup called `ldap-user`.\r\n7. Check the members of this last created group: it includes the users fetched from LDAP for the `groups-ldap` group.\r\n"
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-06T21:44:30Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "MrdUkk",
        "created_at": "2024-10-01T10:29:23Z",
        "body": "I have this bug too in keycloak 23.0.3 version.\r\n1. created in keycloak this group hierarchy /root/something1\r\n2. enabled ldap sync and configured group ldap mapper to grab organization some group tree into  /root/something1/\r\n3. synced mapper in keycloak\r\n4. under keycloak appears 2 new group paths /root/something1/something1 and /root/something1/something2\r\n5. inspected membership of users from /root/something1 and keycloak says its identical to /root/something1/something1\r\nafter renaming in keycloak /root/something1 to /root/somethingX . users imported from ldap mapper correctly members of only /root/somethingX/something1 , not /root/somethingX/\r\n\r\nthis is nightmare because all of keycloak REST API accessing objects via its UUID (id) not by name. so name as other should be attribute and nothing more below that."
      }
    ]
  },
  {
    "number": 19586,
    "title": "@keycloak/keycloak-admin-client doesn't provide an ability to use optional client scope for access token",
    "created_at": "2023-04-07T10:27:17Z",
    "closed_at": "2023-12-27T15:16:37Z",
    "labels": [
      "kind/feature",
      "impact/low",
      "help wanted",
      "team/ui",
      "area/admin/client-js",
      "release/24.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/19586",
    "body": "### Description\r\n\r\nI have an optional client scope. I want access token to have this scope. I use the following approach to get token (I also have renewal logic there, but omitting it in the snippet):\r\n```js\r\nconst kcAdminClient = new KeycloakAdminClient({\r\n  baseUrl: config.leialogin.serverBaseUrl,\r\n  realmName: config.leialogin.realm,\r\n});\r\nawait kcAdminClient.auth(CREDENTIALS);\r\nconst accessToken = await kcAdminClient.getAccessToken();\r\n```\r\n\r\nThe point is there is no interface to require a scope for the token. \"/protocol/openid-connect/token\" Keycloak endpoint accepts a \"scope\" parameter, but I can't set it using this library.\r\n\r\nAs a temporary solution I have come up with the following hack:\r\n```js\r\nconst keycloakAdminClient = new KeycloakAdminClient({\r\n  baseUrl: YOUR_URL,\r\n  realmName: YOUR_REALM,\r\n  requestConfig: {\r\n    transformRequest: (data) => {\r\n      try {\r\n        const params = new URLSearchParams(data);\r\n\r\n        params.append(\"scope\", YOUR_SCOPE);\r\n\r\n        return params.toString();\r\n      } catch {\r\n        return data;\r\n      }\r\n    },\r\n  },\r\n});\r\n```\r\nBut obviously it's not the best solution, because currently it transforms all requests, which may cause unexpected issues.\r\n\r\n### Discussion\r\n\r\n_No response_\r\n\r\n### Motivation\r\n\r\nTo support Keycloak scopes feature in Admin Client interface.\r\n\r\n### Details\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/19586/comments",
    "author": "NikitaKemarskiyLeia",
    "comments": [
      {
        "user": "jonkoops",
        "created_at": "2023-04-07T11:03:57Z",
        "body": "I can see how this could be a useful feature, I've marked this as 'help wanted' so it can be picked up if deemed useful enough by the community."
      }
    ]
  },
  {
    "number": 17643,
    "title": "MFA is not working and i can't able to disable it",
    "created_at": "2023-03-14T08:39:39Z",
    "closed_at": "2024-04-17T14:04:05Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/17643",
    "body": "### Before reporting an issue\n\n- [X] I have searched existing issues\n- [X] I have reproduced the issue with the latest release\n\n### Area\n\naccount/api\n\n### Describe the bug\n\nI am not able to log in through the Microsoft Authenticator app I am not able to disable the MFA. I am typing the same otp but it taking me to the my page.\n\n### Version\n\n19 \n\n### Expected behavior\n\nI am not able to login since I have used MFA I am using Microsoft authenticator otp is coming and when i am trying otp it takes me to the same page \n\n### Actual behavior\n\nIt takes me through the same page \n\n### How to Reproduce?\n\nplaese check this\n\n### Anything else?\n\nNO please resolve this as soon as possible",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/17643/comments",
    "author": "ashisharya01",
    "comments": [
      {
        "user": "jsorah",
        "created_at": "2023-05-19T16:15:14Z",
        "body": "Hi there, we would need more detail here before we can triage - if you could provide reproduction steps that would be great, and it would be ideal if you could attempt to reproduce on the latest Keycloak version (21.1.1)."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-03T14:03:32Z",
        "body": "Thanks for reporting this issue, but there is insufficient information or lack of steps to reproduce.\n\nPlease provide additional details, otherwise this issue will be automatically closed within 14 days."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-04-17T14:04:03Z",
        "body": "Due to lack of updates in the last 14 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 17321,
    "title": "Can only generate RSA keystore?",
    "created_at": "2023-02-28T00:21:06Z",
    "closed_at": "2024-03-13T10:34:55Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/17321",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have searched existing issues\r\n- [X] I have reproduced the issue with the latest release\r\n\r\n### Area\r\n\r\nauthentication\r\n\r\n### Describe the bug\r\n\r\nI am trying to generate the keystore through the Admin Console. \r\nTo generate the keystore I first set the “Client Authenticator” to “Signed Jwt” located at a client’s “Credential” tab and choose a preferred algorithm such as ES256. Then the keystore can be generated over the “Keys” tab. \r\nHowever the generated keystore are always in RSA even after changing the algorithm.\r\n\r\n### Version\r\n\r\n20\r\n\r\n### Expected behavior\r\n\r\nGenerate keystore for the selected algorithm.\r\n\r\n### Actual behavior\r\n\r\nOnly generate RSA keystore.\r\n\r\n### How to Reproduce?\r\n\r\n1.\tGo to Client and click on the “Credential” tab\r\n2.\tSet the “Client Authenticator” to “Signed Jwt”\r\n3.\tSelect preferred algorithm beside RSA\r\n4.\tGo to Client and click on the “Keys” tab\r\n5.\tClick on “Generate new keys” to generate the keystore\r\n6.\tExtract the keys within the keystore and obtain its algorithm\r\n\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/17321/comments",
    "author": "MuhammadZakwan",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-03-01T20:53:14Z",
        "body": "This will be nice to fix, but Keycloak team likely don't have capacity for this in the near future. Community contribution is welcome.\r\n\r\nIMO at least we should hide option \"Generate keystore\" when the ESXXX algorithm is chosen as it is just confusing to have the ability to generate RSA keystore when the algorithm chosen is not RSA-compatible. So this may turn to be just UI (admin console) issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-13T10:34:14Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "mposolda",
        "created_at": "2024-03-13T10:34:55Z",
        "body": "I am closing as this should be already available since Keycloak 24 (see release notes for more details)."
      }
    ]
  },
  {
    "number": 17233,
    "title": "the InfoPage after an ExecuteActionsEmail is not localized based on the user's locale",
    "created_at": "2023-02-22T11:13:32Z",
    "closed_at": "2024-11-29T08:55:09Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "team/core-iam",
      "priority/low",
      "status/reopened",
      "release/26.1.0",
      "release/26.0.7",
      "release/24.0.10"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/17233",
    "body": "### Before reporting an issue\r\n\r\n- [X] I have searched existing issues\r\n- [X] I have reproduced the issue with the latest release\r\n\r\n### Area\r\n\r\ntoken-exchange\r\n\r\n### Describe the bug\r\n\r\nIn my case an execute-actions-email is sent to a user for them to update their password. After the user clicks on the link in the execute-action-email they will visit an infopage listing the actions to execute followed by the update-password-page. The infopage is translated according to the locale accepted by the browser-request but update-password-page is translated according to the locale set in the user's profile.\r\n\r\nIf these two locales are not equal the translation changes during the workflow.\r\n\r\n### Version\r\n\r\n20.0.5\r\n\r\n### Expected behavior\r\n\r\nThe first page should be translated by the user's locale aswell.\r\n\r\n### Actual behavior\r\n\r\nThe first page and the second page are translated differently if the browser-requested locale and the user-profile's locale are not equal. \r\n\r\n### How to Reproduce?\r\n\r\nprecondition:\r\n- a realm with a working smtp config and two supported languages (for example: german and english)\r\n- a browser without a cookie specifying a locale for keycloak that is set to one of the supported languages (for example: german)\r\n\r\n1. create a user with a specific locale (for example: english)\r\n2. trigger an execute-actions-email for the UPDATE_PASSWORD action\r\n3. the email is in english\r\n4. open the link send by mail in the browser\r\n5. the infopage will open in german, the language accepted by the browser\r\n6. the following update-password-page will open in englisch, the use-profile's locale\r\n\r\n\r\n\r\n### Anything else?\r\n\r\nI might have already identified the underlying issue: the authenticed user is not loaded into the loginformsprovider in ExecuteActionsActionTokenHandler::handleToken.\r\n\r\nI plan to provide a pull-request shortly.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/17233/comments",
    "author": "markus-csx",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-02-23T08:53:49Z",
        "body": "Duplicates #10981 \r\nAt least it seems to me that it duplicates it. Please reply to that issue for the further discussions/questions/suggestions."
      },
      {
        "user": "mposolda",
        "created_at": "2023-07-17T14:24:42Z",
        "body": "I figured it is not a duplicate of #10981. So re-opening it. Adding to Backlog for now."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-14T18:51:58Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-13T00:06:36Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      },
      {
        "user": "wojja",
        "created_at": "2024-10-23T08:26:59Z",
        "body": "The problem is still occurring for us with v25.0.5. Could this ticket be reopened?"
      },
      {
        "user": "jonkoops",
        "created_at": "2024-10-23T09:55:21Z",
        "body": "It is our policy to close issues if they have not gathered enough support and are not high impact to keep our backlog manageable. That said, we can consider re-opening this if someone is willing to contribute a fix for it."
      }
    ]
  },
  {
    "number": 17019,
    "title": "shutdown after NullPointerException",
    "created_at": "2023-02-13T03:56:49Z",
    "closed_at": "2024-03-20T22:04:03Z",
    "labels": [
      "area/authorization-services",
      "kind/bug",
      "help wanted",
      "team/core-iam",
      "status/auto-expire",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/17019",
    "body": "### Before reporting an issue\n\n- [X] I have searched existing issues\n- [X] I have reproduced the issue with the latest release\n\n### Area\n\nadapter/spring\n\n### Describe the bug\n\nserver stopped. I wasn't doing anything, and since I haven't told anyone of my instance, it wasn't cause by anyone else\n\n### Version\n\n20.0.3\n\n### Expected behavior\n\nsince I wasn't doing anything, I didn't expect any behavior\n\n### Actual behavior\n\nserver shut down\n\n### How to Reproduce?\n\nwait?\n\n### Anything else?\n\nthis log message was present multiple times\r\n\r\n```log\r\n2023-02-13 02:48:55,309 ERROR [org.keycloak.services.error.KeycloakErrorHandler] (executor-thread-14) Uncaught server error: java.lang.NullPointerException\r\n\tat org.keycloak.services.resources.admin.RealmAdminResource.toUsersMgmtRef(RealmAdminResource.java:521)\r\n\tat org.keycloak.services.resources.admin.RealmAdminResource.setUsersManagementPermissionsEnabled(RealmAdminResource.java:511)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:170)\r\n\tat org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:130)\r\n\tat org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:660)\r\n\tat org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:524)\r\n\tat org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$2(ResourceMethodInvoker.java:474)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\r\n\tat org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:476)\r\n\tat org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:434)\r\n\tat org.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:192)\r\n\tat org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:152)\r\n\tat org.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:183)\r\n\tat org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:141)\r\n\tat org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:32)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:492)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:261)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:161)\r\n\tat org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:164)\r\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:247)\r\n\tat io.quarkus.resteasy.runtime.standalone.RequestDispatcher.service(RequestDispatcher.java:73)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.dispatch(VertxRequestHandler.java:151)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.handle(VertxRequestHandler.java:82)\r\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.handle(VertxRequestHandler.java:42)\r\n\tat io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284)\r\n\tat io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:173)\r\n\tat io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:140)\r\n\tat io.quarkus.vertx.http.runtime.StaticResourcesRecorder$2.handle(StaticResourcesRecorder.java:84)\r\n\tat io.quarkus.vertx.http.runtime.StaticResourcesRecorder$2.handle(StaticResourcesRecorder.java:71)\r\n\tat io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284)\r\n\tat io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:173)\r\n\tat io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:140)\r\n\tat io.quarkus.vertx.http.runtime.VertxHttpRecorder$6.handle(VertxHttpRecorder.java:430)\r\n\tat io.quarkus.vertx.http.runtime.VertxHttpRecorder$6.handle(VertxHttpRecorder.java:408)\r\n\tat io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284)\r\n\tat io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:173)\r\n\tat io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:140)\r\n\tat org.keycloak.quarkus.runtime.integration.web.QuarkusRequestFilter.lambda$createBlockingHandler$0(QuarkusRequestFilter.java:82)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/17019/comments",
    "author": "nickveliki",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-04-05T09:26:36Z",
        "body": "I think that NPE and shutdown are unrelated issues:\r\n- For shutdown, you will likely need to figure more details. So far looks like something related to your platform. Until more details are available, Keycloak team is not able to do anything\r\n- NPE is something, which looks like Keycloak bug and is welcome to fix. Anyone is welcome to send PR.\r\n\r\nAdding to Backlog as not sure when/if KEycloak team has time to look at this in the near future."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-06T21:28:11Z",
        "body": "Thanks for reporting this issue, but there is insufficient information or lack of steps to reproduce.\n\nPlease provide additional details, otherwise this issue will be automatically closed within 14 days."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-20T22:04:01Z",
        "body": "Due to lack of updates in the last 14 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 16454,
    "title": "Expose ready variable in KeycloakAuthorizationInstance interface",
    "created_at": "2023-01-13T15:57:05Z",
    "closed_at": "2024-10-18T15:39:15Z",
    "labels": [
      "kind/bug",
      "area/adapter/javascript",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/reopened",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/16454",
    "body": "### Before reporting an issue\n\n- [X] I have searched existing issues\n- [X] I have reproduced the issue with the latest release\n\n### Area\n\nadapter/javascript\n\n### Describe the bug\n\n`KeycloakAuthorization` function returns a `KeycloakAuthorizationInstance` that we can later call providing a `KeycloakInstance`. When `KeycloakAuthorization` is called, background fetch happens. Then we can call `KeycloakAuthorizationInstance.entitlement(serverId, config)` to obtain all entitlements from the Keycloak server. But, we can only call `KeycloakAuthorizationInstance.entitlement(serverId, config)` when `KeycloakAuthorizationInstance` background fetch is completed. `KeycloakAuthorizationInstance` Interface does not provide a way to check if the background fetch is completed. However, as I saw in the implementation (keycloak-authz.js) a `ready` variable is set with the ongoing promise of the background fetch (IF PROMISES ARE SUPPORTED BY THE BROWSER).\n\n### Version\n\n15.1.1\n\n### Expected behavior\n\n`ready` should be exposed in the `KeycloakAuthorizationInstance`.\n\n### Actual behavior\n\n`ready` is not exposed in the `KeycloakAuthorizationInstance`.\n\n### How to Reproduce?\n\nIf `KeycloakAuthorization` behind-the-scenes fetch is completed after the `KeycloakAuthorizationInstance.entitlement(serverId, config)` fetch; the Client never receives the RPT token.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/16454/comments",
    "author": "vmichailidisdev",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-08T08:32:29Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-08-02T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      },
      {
        "user": "jonkoops",
        "created_at": "2024-10-18T15:39:15Z",
        "body": "This has been resolved under #34044. And will be backported in a patch release for version 26 (see #34097). With this change is is no longer necessary to use this property though (see PR)."
      }
    ]
  },
  {
    "number": 16379,
    "title": "Inconsistent handling of parenthesis in auth flow name",
    "created_at": "2023-01-11T04:01:02Z",
    "closed_at": "2023-10-20T08:00:48Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/16379",
    "body": "### Before reporting an issue\n\n- [X] I have searched existing issues\n- [X] I have reproduced the issue with the latest release\n\n### Area\n\nadmin/api\n\n### Describe the bug\n\nauth flow names may be renamed to include parenthesis.\r\n\r\nHowever, when creating a new flow, the API responds with 400 bad request if the flow name field has a parenthesis:\r\n\r\n`{\"error\":\"Character '(' not allowed.\"}`\r\n\r\n(side note; right paren is also forbidden, but only the first rejected character is returned in the JSON error message)\r\n\r\n\n\n### Version\n\n20.0.2\n\n### Expected behavior\n\nExpect that paranthesis are allowed during creation; or disallowed when renaming existing flow\n\n### Actual behavior\n\nParenthesis are allowed when renaming existing flow, but disallowed during creation\n\n### How to Reproduce?\n\nsee description above\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/16379/comments",
    "author": "jblachly",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-03-07T11:13:12Z",
        "body": "This might be a valid issue, but Keycloak team don't have time to look at this in the near future. This has very low priority and has simple workaround (avoid using parenthesis or any other strange characters in the names of various components).\r\n\r\nCommunity contribution is welcome to further investigate and eventually fix this."
      },
      {
        "user": "kaustubh-rh",
        "created_at": "2023-10-18T16:23:09Z",
        "body": "@mposolda , ack will raise a PR for the same"
      },
      {
        "user": "jonkoops",
        "created_at": "2023-10-20T10:41:24Z",
        "body": "@mposolda should this not get backported to a patch release as well?"
      }
    ]
  },
  {
    "number": 16278,
    "title": "Bug on isTokenExpired()",
    "created_at": "2023-01-05T14:03:29Z",
    "closed_at": "2024-10-18T15:36:19Z",
    "labels": [
      "kind/bug",
      "area/adapter/javascript",
      "help wanted",
      "team/core-clients",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/reopened",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/16278",
    "body": "### Before reporting an issue\n\n- [X] I have searched existing issues\n- [X] I have reproduced the issue with the latest release\n\n### Area\n\nadapter/javascript\n\n### Describe the bug\n\nThe isTokenExpired() is returning true after init after updateToken() called and token expired (renewed with updateToken()) \r\n\r\nI guess is on this line:\r\n\r\n```ts\r\nif (timeLocal) { // timeLocal is null when initializing after a updateToken() called after token expired\r\n  kc.timeSkew = Math.floor(timeLocal / 1000) - kc.tokenParsed.iat;\r\n}\r\n```\r\n\r\nUsing timeSkew: 0 on initOptions the problem doesn't occurs.\r\nPerhaps is missing the timeLocal (new Date().getTime()) on line 260\r\n```\r\nsetToken(initOptions.token, initOptions.refreshToken, initOptions.idToken); // line 260\r\n```\r\n\r\nThanks\n\n### Version\n\n20.0.2\n\n### Expected behavior\n\nreturn false on isTokenExpired()\n\n### Actual behavior\n\nreturn true on isTokenExpired()\n\n### How to Reproduce?\n\nOnly init the adapter after calling a updateToken() after the token expires\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/16278/comments",
    "author": "suchorski",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-08T11:35:23Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-08-02T00:06:25Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      },
      {
        "user": "jonkoops",
        "created_at": "2024-09-17T14:56:16Z",
        "body": "Re-opening this issue so that we don't lose track of it."
      },
      {
        "user": "jonkoops",
        "created_at": "2024-10-18T15:36:19Z",
        "body": "I am unable to reproduce this issue on the latest version of Keycloak. It seems that some changes have been made that possibly fixed this issue as a side effect. If someone is still able to reproduce this issue let me know and I will re-open."
      }
    ]
  },
  {
    "number": 16197,
    "title": "ResourcesResource.find() Java api does not match the REST signature nor response",
    "created_at": "2022-12-29T21:49:05Z",
    "closed_at": "2024-06-03T00:06:19Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/16197",
    "body": "### Before reporting an issue\n\n- [X] I have searched existing issues\n- [X] I have reproduced the issue with the latest release\n\n### Area\n\nadmin/api\n\n### Describe the bug\n\nList<ResourceRepresentation> org.keycloak.admin.client.resource.ResourcesResource.find() does not accept \"matchingUri\", \"exactName\" and \"deep\" parameters. \r\nAND returned ResourceRepresentation object does not contain resource ID value.\r\n\r\n    {\r\n        \"name\": \"API...\",\r\n        \"owner\": {\r\n            \"id\": \"xxx\",\r\n            \"name\": \"xxx\"\r\n        },\r\n        \"ownerManagedAccess\": false,\r\n        \"attributes\": {},\r\n        \"_id\": \"90735035-2525-4d11-b692-770b9c1e7b93\",\r\n        \"uris\": [\r\n            \"/api/rest/...,\r\n        ],\r\n        \"scopes\": [\r\n            {\r\n                \"id\": \"1da879e7-b77f-4a6b-ba56-30b7128a492d\",\r\n                \"name\": \"POST\"\r\n            }\r\n        ]\r\n    }\n\n### Version\n\n20.0.2\n\n### Expected behavior\n\nJava Rest API should match parameters and return values of REST api.\n\n### Actual behavior\n\nReturn value miss resource ID value and API does not accept \"matchingUri\", \"exactName\" and \"deep\" parameters.\n\n### How to Reproduce?\n\nCheck java api definition and return value.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/16197/comments",
    "author": "AndriusKarpavicius",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-04-04T09:51:02Z",
        "body": "Thanks for the report, but unfortunately due the amount of other reported issues and other priorities, Keycloak team does not have time to properly triage this bug. So preliminary added to Backlog for now.\r\nIt will be helpful if:\r\n- You can verify if still applicable in latest Keycloak released version. If not, then it is welcome to close this issue.\r\n- If you figure that this may not be a valid bug (for example just a mistake in configuration etc), it will be also welcome to close this issue\r\n- If still applicable in latest version, it will be welcome to add the comment as well, that this was still reproduced with latest Keycloak version as it is very valuable info. Anyone is welcome to comment with this or add other relevant comments to this issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-04T18:56:22Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-03T00:06:16Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 16138,
    "title": "Support for reCAPTCHA Enterprise at user registration",
    "created_at": "2022-12-21T08:36:14Z",
    "closed_at": "2024-03-04T11:28:07Z",
    "labels": [
      "kind/feature",
      "good first issue",
      "help wanted",
      "team/ui",
      "area/login/ui"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/16138",
    "body": "### Description\n\nThis feature would add support for reCAPTCHA Enterprise at user registration.\n\n### Discussion\n\n_No response_\n\n### Motivation\n\nCurrent implementation is using outdated reCAPTCHA which Google no longer supports.\n\n### Details\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/16138/comments",
    "author": "atifc",
    "comments": [
      {
        "user": "Roriz",
        "created_at": "2023-09-13T20:04:53Z",
        "body": "up"
      },
      {
        "user": "derlin",
        "created_at": "2023-10-20T08:19:54Z",
        "body": "Yes, please!"
      },
      {
        "user": "jonkoops",
        "created_at": "2023-10-20T10:39:07Z",
        "body": "When up-voting a topic please use a :+1: on the original post, and refrain from leaving comments that do not add value to the discussion itself."
      },
      {
        "user": "NafeezBaba",
        "created_at": "2023-10-23T02:16:57Z",
        "body": "Hi, I am new to contributing for open source. I would like to work on this issue, if no one is assigned for this. Can someone please assign this issue to me? Thanks"
      },
      {
        "user": "derlin",
        "created_at": "2023-10-23T06:09:14Z",
        "body": "Hello! I am currently working on it an have a very good starting point. I will submit a PR soon, and may need some guidance for polishing it."
      },
      {
        "user": "derlin",
        "created_at": "2023-10-23T08:19:04Z",
        "body": "@jonkoops can you assign it to me?"
      },
      {
        "user": "jonkoops",
        "created_at": "2023-10-23T09:25:46Z",
        "body": "Sure, I will assign this to you since you already have some work ready @derlin."
      }
    ]
  },
  {
    "number": 15844,
    "title": "Keycloak contains EOL Log4j version",
    "created_at": "2022-12-05T18:22:14Z",
    "closed_at": "2023-05-19T07:01:38Z",
    "labels": [
      "kind/bug",
      "impact/low",
      "area/dependencies",
      "help wanted"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/15844",
    "body": "### Area\n\ndependencies\n\n### Describe the bug\n\nKeycloak contains log4j 1.2.17 as reported by one of scan which is EOL. This needs an upgrade in the version in the upcoming releases. This dependency is present in the main pom.xml under keycloak/pom.xml.\n\n### Version\n\n19.0.3\n\n### Expected behavior\n\nLog4j version needs to be upgraded with the latest version.\n\n### Actual behavior\n\nNA\n\n### How to Reproduce?\n\nthe dependency is visible in main pom.xml.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/15844/comments",
    "author": "pravsjv",
    "comments": [
      {
        "user": "mvk37",
        "created_at": "2023-03-06T03:34:33Z",
        "body": "Logj4 1.2.17 is still present in Keycloak **21.0.1**. Scanner found it in org.jboss.logmanager.log4j-jboss-logmanager-1.3.0.Final.jar.\r\n\r\nCould you upgrade it to log4j2, please?\r\n"
      },
      {
        "user": "mabartos",
        "created_at": "2023-03-08T16:10:03Z",
        "body": "AFAIK, Log4j 1.2.17 dependency is used only as a test dependency and doesn't impact the functionality of Keycloak. Unfortunately, we don't have the capacity to take care of this, but PR with valid changes is more than welcome :)\r\n\r\n"
      },
      {
        "user": "ahus1",
        "created_at": "2023-05-17T17:55:39Z",
        "body": "I've created a PR #20423 that shows an idea, let's see if that is worth pursuing."
      }
    ]
  },
  {
    "number": 15368,
    "title": "searchByFirstName and searchByLastName are taking email as input which is wrong.",
    "created_at": "2022-11-07T09:11:49Z",
    "closed_at": "2024-06-06T00:06:05Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/15368",
    "body": "### Area\n\nadmin/api\n\n### Describe the bug\n\nsearchByFirstName and searchByLastName are taking email as input which is wrong.\n\n### Version\n\n20.0.0\n\n### Expected behavior\n\nsearchByFirstName and searchByLastName should take firstName and lastName respectively as input.\n\n### Actual behavior\n\nsearchByFirstName and searchByLastName are showing email as input which is misleading.\n\n### How to Reproduce?\n\nUse function searchByFirstName or searchByLastName.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/15368/comments",
    "author": "manojjgudi",
    "comments": [
      {
        "user": "sschu",
        "created_at": "2022-11-07T16:48:51Z",
        "body": "I found that in the admin client the variable name is wrong. I don't think this has consequences on the functionality."
      },
      {
        "user": "mposolda",
        "created_at": "2023-03-06T12:17:39Z",
        "body": "This might be a valid issue, but Keycloak team don't have time to look at this in the near future. Community contribution is welcome to further investigate and eventually fix this."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-07T20:34:59Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-06T00:06:04Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 15233,
    "title": "Admin client has NoHttpResponseException",
    "created_at": "2022-10-31T15:48:41Z",
    "closed_at": "2024-02-01T14:56:56Z",
    "labels": [
      "kind/bug",
      "area/core",
      "help wanted",
      "team/core-shared"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/15233",
    "body": "### Area\n\ncore\n\n### Describe the bug\n\nModule: keycloak-admin-client\r\nVersion: 16.1.0\r\n\r\nWe have an application protected by keycloak. The application is using admin-client to create & delete resources from keycloak. The application is using client-secret to connect to keycloak. \r\nOur keycloak server is deployed in GKE and using 16.1.0 as well.\r\nWhen there is a high volume of requests, sometimes keycloak will throw an exception when creating a resource:\r\n\r\n```\r\nERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [xxx] threw exception [Request processing failed; nested exception is javax.ws.rs.ProcessingException: RESTEASY004655: Unable to invoke request: org.apache.http.NoHttpResponseException: xxx.xxx.com:8443 failed to respond] with root cause\r\n```\r\n\r\nThe bug can't be reproduced stably, it only happens when the volume is large. Not sure if it's from resteasy side, or the keycloak server side.\n\n### Version\n\n16.1.0\n\n### Expected behavior\n\nEach request will be handled correctly, without throwing exception\n\n### Actual behavior\n\nException thrown:\r\n```\r\nERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [xxx] threw exception [Request processing failed; nested exception is javax.ws.rs.ProcessingException: RESTEASY004655: Unable to invoke request: org.apache.http.NoHttpResponseException: xxx.xxx.com:8443 failed to respond] with root cause\r\n```\n\n### How to Reproduce?\n\nWhen giving a large volume of request\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/15233/comments",
    "author": "BiatBang",
    "comments": [
      {
        "user": "zhaojiale1213",
        "created_at": "2023-02-23T05:31:31Z",
        "body": "你好，请问有解决办法吗，我也遇到这个问题了"
      },
      {
        "user": "BiatBang",
        "created_at": "2023-02-23T15:34:30Z",
        "body": "We could't resolve it so we are temporarily using AuthzClient for resource related handling.\r\nI heard in the latest version of admin client they upgraded resteasy version. It might be resolved. I'm not sure."
      },
      {
        "user": "zhaojiale1213",
        "created_at": "2023-02-24T06:21:28Z",
        "body": "Thank you for your answer"
      },
      {
        "user": "mposolda",
        "created_at": "2023-03-02T09:49:32Z",
        "body": "This might be a valid issue, but Keycloak team don't have time to look at this in the near future. Community contribution is welcome to further investigate and eventually fix this.\r\n\r\nAlso if you don't see this with latest version used in Keycloak 21, please comment here and/or eventually close this bug."
      },
      {
        "user": "caleb-adams",
        "created_at": "2023-10-26T06:44:07Z",
        "body": "Bump. Experiencing this on Keycloak 21.1.1."
      },
      {
        "user": "stianst",
        "created_at": "2024-02-01T14:56:56Z",
        "body": "Seems like the Keycloak server was not able to respond in a timely manner. There's no built-in retry mechanism in the admin client, so this is expected behaviour."
      }
    ]
  },
  {
    "number": 15020,
    "title": "NPE during legacy migration to 9.0.0",
    "created_at": "2022-10-19T13:18:19Z",
    "closed_at": "2024-02-01T14:57:37Z",
    "labels": [
      "kind/bug",
      "impact/low",
      "area/core",
      "help wanted",
      "team/core-shared"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/15020",
    "body": "### Describe the bug\r\n\r\nWhen try migrate version to 9.0.0 throws NPE if the keycloak administrator had removed client 'account'.\r\n\r\n### Version\r\n\r\n4.6.0\r\n\r\n### Expected behavior\r\n\r\nIgnore existence of this client and continue database migration.\r\n\r\n### Actual behavior\r\n\r\nStops migration with NPE and not rollback all database modification.\r\n\r\n```\r\n10:15:29,630 FATAL [org.keycloak.services] (ServerService Thread Pool -- 61) Error during startup: java.lang.NullPointerException\r\n        at org.keycloak.keycloak-server-spi-private@18.0.0//org.keycloak.migration.migrators.MigrateTo9_0_0.addAccountConsoleClient(MigrateTo9_0_0.java:95)\r\n        at org.keycloak.keycloak-server-spi-private@18.0.0//org.keycloak.migration.migrators.MigrateTo9_0_0.migrateRealmCommon(MigrateTo9_0_0.java:59)\r\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n```\r\n\r\n### How to Reproduce?\r\n\r\n#### Steps\r\n1- Create a environment with version before 9.0.0 (In my case 4.6.0)\r\n2- Create a new realm and remove 'account' client.\r\n3 - Upgrade Keycloak pointing to same database  (I'm tried upgrade to 18.0.0)\r\n\r\n#### compose.yaml example\r\n```\r\nversion: \"3\"\r\n\r\nservices:\r\n  postgres-keycloak:\r\n    container_name: postgres-keycloak\r\n    image: postgres:14\r\n    volumes:\r\n      - postgres-keycloak-data:/var/lib/postgresql/data\r\n    environment:\r\n      TZ: America/Fortaleza\r\n      POSTGRES_DB: keycloak\r\n      PGDATABASE: keycloak\r\n      POSTGRES_USER: test\r\n      PGUSER: test\r\n      POSTGRES_PASSWORD: test4120\r\n      PGPASSWORD: test4120\r\n\r\n  keycloak460:\r\n    container_name: keycloak460\r\n    image: jboss/keycloak:4.6.0.Final\r\n    ports:\r\n      - \"8085:8080\"\r\n    environment:\r\n      TZ: America/Fortaleza\r\n      DB_VENDOR: postgres\r\n      DB_ADDR: postgres-keycloak\r\n      DB_PORT: 5432\r\n      DB_DATABASE: keycloak\r\n      DB_USER: test\r\n      DB_PASSWORD: test4120\r\n      KEYCLOAK_USER: test\r\n      KEYCLOAK_PASSWORD: test4120\r\n      JGROUPS_DISCOVERY_PROTOCOL: dns.DNS_PING\r\n      JGROUPS_DISCOVERY_PROPERTIES: dns_query=localhost\r\n\r\n  # keycloak1800: \r\n  #   container_name: keycloak1800\r\n  #   image: quay.io/keycloak/keycloak:18.0.0-legacy\r\n  #   ports:\r\n  #     - \"8085:8080\"\r\n  #   environment:\r\n  #     TZ: America/Fortaleza\r\n  #     DB_VENDOR: postgres\r\n  #     DB_ADDR: postgres-keycloak\r\n  #     DB_PORT: 5432\r\n  #     DB_DATABASE: keycloak\r\n  #     DB_USER: test\r\n  #     DB_PASSWORD: test4120\r\n  #     KEYCLOAK_USER: test\r\n  #     KEYCLOAK_PASSWORD: test4120\r\n  #     JGROUPS_DISCOVERY_PROTOCOL: dns.DNS_PING\r\n  #     JGROUPS_DISCOVERY_PROPERTIES: dns_query=localhost\r\n\r\n  pgadmin-keycloak:\r\n    container_name: pgadmin-keycloak\r\n    image: dpage/pgadmin4:latest\r\n    environment:\r\n      TZ: America/Fortaleza\r\n      PGADMIN_DEFAULT_EMAIL: admin@example.com\r\n      PGADMIN_DEFAULT_PASSWORD: test4120\r\n    ports:\r\n      - 8089:80\r\n    depends_on:\r\n      - postgres-keycloak\r\n\r\nvolumes:\r\n  postgres-keycloak-data:\r\n```\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/15020/comments",
    "author": "h3nrique",
    "comments": [
      {
        "user": "stianst",
        "created_at": "2022-10-21T05:42:12Z",
        "body": "The account client is an internal client that you are not supposed to deleted, and it should not have been possible to delete it really, but we never got around to protecting that. I would suggest just recreating the client then you should be able to upgrade just fine."
      },
      {
        "user": "h3nrique",
        "created_at": "2022-10-21T19:44:09Z",
        "body": "So, the migration step should recreate the 'account' client as already do with 'account-console', right? I'll do the commit here."
      },
      {
        "user": "abstractj",
        "created_at": "2022-10-21T19:55:52Z",
        "body": "@h3nrique I'm slightly confused, which version of Keycloak are you running? The version mention 4.6.0, but at the same time the title says 9.0.0."
      },
      {
        "user": "h3nrique",
        "created_at": "2022-10-21T20:32:18Z",
        "body": "I'm running 4.6.0, but I trying migrate to 18.0.0.\r\n\r\nWhen I run keycloak 18.0.0 pointing to database with 4.6.0 structure, starts the migration steps and throws exception at MigrateTo9_0_0 class.\r\n\r\nAs the Stian comment, I understand that the 'account' client is required for migration, but the class MigrateTo9_0_0  does not check if exists before do the client change, however in this same class exists a validation for 'account-console' client before a similar change. In the case of 'account-console' client, exists a method that recriate it."
      },
      {
        "user": "stianst",
        "created_at": "2022-10-22T04:41:59Z",
        "body": " I'm not saying the client should be created by the migration. I'm saying you shouldn't have deleted it, so recreate it manually on your end before migrating and it should all work."
      },
      {
        "user": "h3nrique",
        "created_at": "2022-10-24T20:22:31Z",
        "body": "Hi Stian,\r\n\r\nWhen recreate the client manually the migration works only after remove some rows in COMPOSITE_ROLE and KEYCLOAK_ROLE tables. I identified when the error that originate this issue occurs, the rollback it's not fully made in this tables (I not checked others tables).\r\n\r\nThe interpretation that I made about your first message it's because already exists steps in migration to automatically recreate the 'account-console' client if not exists, so, I believe that the same is needed para o 'account'.\r\n\r\nThe idea is use the same recreation steps for 'account-console' and 'account', because both are core required for Keycloak, since it's not possible protect it for deletion."
      },
      {
        "user": "manssorameer",
        "created_at": "2024-08-22T10:57:12Z",
        "body": "Hi, I am currently facing this exact issue while trying to upgrade from  4.8.20 to 9.0.17.  should I create the account-console in the database and remove the tables you have mentioned ?"
      },
      {
        "user": "h3nrique",
        "created_at": "2024-08-22T13:17:16Z",
        "body": "Hello @manssorameer, You need to recreate a client directly on the database. In issue #14899, you will see other tables that need change."
      }
    ]
  },
  {
    "number": 15011,
    "title": "Exception: \"Invalid key locator for signature verification\" after SAML IdP logout redirect",
    "created_at": "2022-10-19T09:20:25Z",
    "closed_at": "2024-06-10T00:06:13Z",
    "labels": [
      "area/saml",
      "kind/bug",
      "help wanted",
      "team/rh-iam",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/15011",
    "body": "### Describe the bug\n\nWhen getting a logout redirect from a SAML IdP which has morge than one verification certificate configured, Keycloak shows an Error message to the user: invalidFederatedIdentityActionMessage.\nLogs:\n```\n2022-10-19 10:46:55,654 ERROR [org.keycloak.broker.saml.SAMLEndpoint] (default task-343) validation failed: org.keycloak.common.VerificationException: org.keycloak.common.VerificationException: Invalid key locator for signature verification\n        at org.keycloak.keycloak-services@18.0.2//org.keycloak.protocol.saml.SamlProtocolUtils.verifyRedirectSignature(SamlProtocolUtils.java:189)\n        at org.keycloak.keycloak-services@18.0.2//org.keycloak.protocol.saml.SamlProtocolUtils.verifyRedirectSignature(SamlProtocolUtils.java:147)\n        at org.keycloak.keycloak-services@18.0.2//org.keycloak.broker.saml.SAMLEndpoint$RedirectBinding.verifySignature(SAMLEndpoint.java:721)\n        at org.keycloak.keycloak-services@18.0.2//org.keycloak.broker.saml.SAMLEndpoint$Binding.handleSamlResponse(SAMLEndpoint.java:622)\n        at org.keycloak.keycloak-services@18.0.2//org.keycloak.broker.saml.SAMLEndpoint$Binding.execute(SAMLEndpoint.java:274)\n        at org.keycloak.keycloak-services@18.0.2//org.keycloak.broker.saml.SAMLEndpoint.redirectBinding(SAMLEndpoint.java:174)\n        at jdk.internal.reflect.GeneratedMethodAccessor916.invoke(Unknown Source)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:170)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:130)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:660)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:524)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$2(ResourceMethodInvoker.java:474)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:476)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:434)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:192)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:152)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:183)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:141)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:32)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:492)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:261)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:161)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:164)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:247)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:249)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:60)\n        at org.jboss.resteasy.resteasy-core@4.7.6.Final//org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)\n        at javax.servlet.api@2.0.0.Final//javax.servlet.http.HttpServlet.service(HttpServlet.java:590)\n        at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n        at io.undertow.servlet@2.2.17.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\n        ... [shortened]...\nCaused by: org.keycloak.common.VerificationException: Invalid key locator for signature verification\n        at org.keycloak.keycloak-services@18.0.2//org.keycloak.protocol.saml.SamlProtocolUtils.verifyRedirectSignature(SamlProtocolUtils.java:183)\n        ... 82 more\n```\n\n### Version\n\n18.0.2 Wildfly\n\n### Expected behavior\n\nLogout succeeds without error and redirects to application.\n\n### Actual behavior\n\nLogout shows Keycloak error page, no redirect to application appears.\n\n### How to Reproduce?\n\n1) Define a SAML-based identity provider which is using two or more signing certificates. Configure Keycloak having both certificates defined in the identity provider configuration.\n2) Define an OIDC client in Keycloak.\n3) Log in to this client using redirect to the SAML IdP.\n(or use the account console to shorten steps 2) and 3))\n4) Logout from the client using keycloak end session endpoint with correctly configured post logout uri\n5) Keycloak logs out and redirects to SAML IdPs SLO endpoint\n6) If SAML IdP redirects back to Keycloak, Keycloak fails to verify the signed SAML logout request, showing the error page an exception stack trace as described above.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/15011/comments",
    "author": "bonnm",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-11T15:12:38Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-10T00:06:12Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 14946,
    "title": "Unrecognized JSON field causes DCR to fail",
    "created_at": "2022-10-17T20:05:07Z",
    "closed_at": "2024-06-13T00:06:50Z",
    "labels": [
      "area/oidc",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/14946",
    "body": "### Describe the bug\n\nAccording to RFC 7591 OAuth 2.0 Dynamic Client Registration Protocol, Section 2:\r\n\r\n> The authorization server MUST ignore any client metadata sent by the client that it does not understand\r\n\r\nIf such an unrecognized field is included into an otherwise legitimate DCR request, the latter would fail. Moreover, it would expose class names and other internal details.\r\n\n\n### Version\n\n19.0.3\n\n### Expected behavior\n\nSuccessful client registration\n\n### Actual behavior\n\n```json\r\n{\r\n    \"error\": \"Unrecognized field \\\"foo\\\" (class org.keycloak.representations.oidc.OIDCClientRepresentation), not marked as ignorable (54 known properties: \\\"tos_uri\\\", \\\"redirect_uris\\\", \\\"client_id\\\", \\\"request_object_signing_alg\\\", \\\"grant_types\\\", \\\"client_id_issued_at\\\", \\\"backchannel_client_notification_endpoint\\\", \\\"client_secret_expires_at\\\", \\\"backchannel_logout_uri\\\", \\\"userinfo_signed_response_alg\\\", \\\"id_token_encrypted_response_enc\\\", \\\"jwks_uri\\\", \\\"client_secret\\\", \\\"default_max_age\\\", \\\"require_auth_time\\\", \\\"request_object_encryption_alg\\\", \\\"software_id\\\", \\\"token_endpoint_auth_method\\\", \\\"require_pushed_authorization_requests\\\", \\\"request_uris\\\", \\\"frontchannel_logout_session_required\\\", \\\"backchannel_logout_session_required\\\", \\\"registration_client_uri\\\", \\\"userinfo_encrypted_response_alg\\\", \\\"software_version\\\", \\\"tls_client_auth_subject_dn\\\", \\\"backchannel_token_delivery_mode\\\", \\\"application_type\\\", \\\"backchannel_authentication_request_signing_alg\\\", \\\"sector_identifier_uri\\\", \\\"contacts\\\", \\\"scope\\\", \\\"logo_uri\\\", \\\"frontchannel_logout_uri\\\", \\\"policy_uri\\\", \\\"id_token_encrypted_response_alg\\\", \\\"subject_type\\\", \\\"request_object_encryption_enc\\\", \\\"token_endpoint_auth_signing_alg\\\" [truncated]])\\n at [Source: (io.quarkus.vertx.http.runtime.VertxInputStream); line: 1, column: 29] (through reference chain: org.keycloak.representations.oidc.OIDCClientRepresentation[\\\"foo\\\"])\"\r\n}\r\n```\n\n### How to Reproduce?\n\n1. Set up client registration policies to allow DCR\r\n2. Make a request:\r\n```\r\nPOST /realms/{{KEYCLOAK_REALM}}/clients-registrations/openid-connect\r\n\r\n{\r\n    \"client_name\": \"Test\",\r\n    \"foo\": \"bar\"\r\n}\r\n```\r\n\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/14946/comments",
    "author": "dteleguin",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-14T12:56:20Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-13T00:06:49Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 14854,
    "title": "Client session lifespan doesn't consider user session lifespan",
    "created_at": "2022-10-12T08:10:19Z",
    "closed_at": "2023-06-05T16:46:25Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/14854",
    "body": "### Describe the bug\n\nWe're using rememberMe option set for 180 days in our realm and we noticed a lot of garbage client sessions due to that.\r\nWe investigated that method getClientSessionLifespanMs of SessionTimeouts class doesn't consider expiration of user session. So for example, if user session was initiated 170 days ago and client session is being refreshed it will be places into Infinispan with lifespan of another 180 days as client session has always refreshed timestamp that doesn't consider first user session creation. After 10 days, user session is correctly evicted but for next 170 days the client session is there unused.\r\nWith ~1.6 millions 'rememberMe' user sessions we end up with ~3 mln garbage client sessions every 2 weeks.\n\n### Version\n\n15.1.1\n\n### Expected behavior\n\nClient session lifespan is not longer than expiration of related user session lifespan.\n\n### Actual behavior\n\nClient session lifespan is always set with lifespan considering current timestamp + rememberMe period.\n\n### How to Reproduce?\n\nTurn on rememberMe option on realm.\r\nLogin and create both user & client sessions. \r\nThen after expiration time, refresh session - user session correctly uses initiated timestamp to compute lifespan but client session uses current timestamp.\n\n### Anything else?\n\nI checked that there are no changes in later Keycloak releases.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/14854/comments",
    "author": "pjbober",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-03-06T09:25:11Z",
        "body": "This might be a valid issue, but Keycloak team don't have time to look at this in the near future. Hopefully we're able to review your PR, Thanks for sending it!"
      }
    ]
  },
  {
    "number": 14322,
    "title": "Javascript Adapter fires clearToken() if checkloginiframe is not set to false",
    "created_at": "2022-09-09T21:28:43Z",
    "closed_at": "2024-10-16T15:22:55Z",
    "labels": [
      "kind/bug",
      "area/adapter/javascript",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/reopened",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/14322",
    "body": "### Describe the bug\n\nWith our app using the Keycloak Javascript adapter, users log in, get redirected back to our app, then use it as normal until the access token expires. When the token is expired, our app is set up to run `updateToken()` automatically. However, the query to the server fails due to no refresh token being sent with the POST request. Upon further inspection, we found that `clearToken()` is being run seconds after log in, removing all tokens from memory.\r\n\r\nAfter looking into the source code and trolling support forums, I found that passing `checkloginiframe: false` into the init options resolves the issue.\r\n\r\nI'm still not sure why this option is necessary. In my opinion, the documentation doesn't really make clear that it's needed. I'm not sure if the documentation needs to be updated to place greater emphasis on this option or if this is an anomalous bug occurring only on localhost environments. Either way, I'm hoping someone can lend some insight as to why this behaviour occurs and potentially take steps to resolve it if necessary.\n\n### Version\n\n19.0.1\n\n### Expected behavior\n\n`updateToken()` is called and the refresh token in memory is used to query the Keycloak server for a new access token.\n\n### Actual behavior\n\n`updateToken()` is called but refresh token is not in memory. POST to Keycloak server fails and access token is not refreshed.\n\n### How to Reproduce?\n\n1. In your app, instantiate a new Keycloak object with your Keycloak server's config: `new Keycloak({ client_id: xxxxx, realm: xxxxx, url: xxxxx })`\r\n2. Call the init() function as such: `keycloak.init({ onLoad: 'check-sso', pkceMethod: 'S256' })` when your app loads. This should trigger a redirect and prompt the user to log in.\r\n3. Set up a way to trigger keycloak's `updateToken()` call when the Access Token expires(through an HTTP interceptor, for ex.)\r\n4. Boot up your app on localhost. Log in with Keycloak and get returned back to your app. Wait 5 minutes for the access token to expire(by default).\n\n### Anything else?\n\n**Environment**\r\n- Local development(localhost)\r\n- Angular app(not using any additional Keycloak auth library, just keycloak-js)\r\n- Mac OS Big Sur",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/14322/comments",
    "author": "Baelx",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-12T13:17:13Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-08-02T00:06:07Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      },
      {
        "user": "jonkoops",
        "created_at": "2024-10-16T15:22:55Z",
        "body": "Did some testing on the latest stable version of Keycloak, and it is no longer possible to reproduce this using the procided steps. Considering nobody else has chimed into this issue it seems that also nobody else is affected, so I think this issue may have been fixed over time.\r\n\r\nI'll close the issue, but if someone is able to reproduce this on the latest version let me know and I will re-open it."
      }
    ]
  },
  {
    "number": 14045,
    "title": "Token endpoint throws NPE / HTTP 500",
    "created_at": "2022-08-26T15:02:17Z",
    "closed_at": "2023-03-07T08:45:08Z",
    "labels": [
      "area/oidc",
      "kind/bug",
      "good first issue",
      "help wanted"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/14045",
    "body": "### Describe the bug\n\nPOST request with empty body to <realm root>/protocol/openid-connect/token causes an HTTP 500 / NPE\n\n### Version\n\n19.0.1\n\n### Expected behavior\n\nAn empty request body (as every possible user input) should never cause an HTTP 500 server error. \r\n\r\nInvalid requests should cause a correct error response (whatever is appropriate).\n\n### Actual behavior\n\nHTTP 500 / NPE is thrown\n\n### How to Reproduce?\n\n1. Create new realm. Create new OIDC client. \r\n\r\n2. Send POST request with empty body to <realm root>/protocol/openid-connect/token\r\n\r\n3. Observe HTTP 500 and a NPE in the server log\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/14045/comments",
    "author": "michael-ylb",
    "comments": [
      {
        "user": "lexcao",
        "created_at": "2022-08-31T16:36:28Z",
        "body": "I think it is not a bug.\r\n\r\nI have reproduced from my local, and the error logs look like this,\r\n```\r\n2022-09-01 00:32:14,212 ERROR [org.keycloak.services.error.KeycloakErrorHandler] (vert.x-worker-thread-2) Uncaught server error: java.lang.NullPointerException\r\n\tat org.jboss.resteasy.plugins.server.BaseHttpRequest.getFormParameters(BaseHttpRequest.java:53)\r\n\tat org.jboss.resteasy.plugins.server.BaseHttpRequest.getDecodedFormParameters(BaseHttpRequest.java:74)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.jboss.resteasy.core.ContextParameterInjector$GenericDelegatingProxy.invoke(ContextParameterInjector.java:166)\r\n\tat com.sun.proxy.$Proxy115.getDecodedFormParameters(Unknown Source)\r\n\tat org.keycloak.protocol.oidc.endpoints.TokenEndpoint.processGrantRequest(TokenEndpoint.java:171)\r\n```\r\n\r\nThe NPE is from `BaseHttpRequest.getFormParameters`, not Keycloak.\r\n\r\nI think it may be related to the content type.\r\nIf I request with empty body but with header\r\n```\r\nContent-Type: application/x-www-form-urlencoded\r\n```\r\nit will show the expected error message\r\n```\r\n{\r\n\t\"error\": \"invalid_request\",\r\n\t\"error_description\": \"Missing form parameter: grant_type\"\r\n}\r\n```\r\n"
      },
      {
        "user": "michael-ylb",
        "created_at": "2022-09-01T06:59:52Z",
        "body": "Thanks for narrowing it down to the content-type.\r\nSo the bug occurs when the content type is missing. \r\n\r\n\r\n(For reference: HTTP status code 4xx indicates client errors that the client has to fix, HTTP status code 5xx indicates server errors, that the server has to fix)"
      },
      {
        "user": "SaiUpadhyayula",
        "created_at": "2023-01-03T16:13:46Z",
        "body": "@mposolda Can I work on this issue?"
      },
      {
        "user": "mposolda",
        "created_at": "2023-01-05T16:00:03Z",
        "body": "@SaiUpadhyayula Sure, Thanks for looking at this"
      },
      {
        "user": "klajdipaja",
        "created_at": "2023-03-06T15:47:56Z",
        "body": "Hi @mposolda, I was looking at this issue to start working on it but looks to me that the issue has been resolved from changes in #15374."
      },
      {
        "user": "mposolda",
        "created_at": "2023-03-07T08:45:08Z",
        "body": "@klajdiPAJA Cool, Thanks! I am closing this then."
      }
    ]
  },
  {
    "number": 13931,
    "title": "Email Test Connection uses wrong email address",
    "created_at": "2022-08-23T02:24:10Z",
    "closed_at": "2024-06-06T00:06:11Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "team/core-shared",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/13931",
    "body": "### Describe the bug\n\n\"Test Connection\" from Realm Email settings putatively uses the parameters entered there to send a test email.\r\n\r\nMany email providers may limit who an email may be \"From\", including Amazon SES.\r\n\r\nThe \"test connection\" button establishes a connection using the connection parameters in the Realm settings, with the EXCEPTION that it sends the mail from the logged-in administrator's on-file email (if any; otherwise it fails completely), instead of the `From` address entered in the Realm email settings.\r\n\r\nThis causes the test to fail with rejection. For example, with Amazon SES I receive the following error:\r\n\r\n```\r\n2022-08-22 22:18:23,869 ERROR [org.keycloak.services.resources.admin.RealmAdminResource] (executor-thread-1) Failed to send email\r\n com.sun.mail.smtp.SMTPSendFailedException: 554 Message rejected: Email address is not verified. The following identities failed the check in region US-EAST-2: <mypersonalemail@domain.com>\r\n```\r\n\r\nTo be clear, I have configured Keycloak to use a `From` address that _is_ verified. As a final positive control experiment, I changed temporarily my admin user account's email to the verified-with-SMTP-provider email and re-tested the \"Test Connection\" function; it worked as expected.\n\n### Version\n\n19.0.1\n\n### Expected behavior\n\nI expect the test connection to use the connection parameters, including the `From` address, entered in the Realm Email settings.\n\n### Actual behavior\n\nThe test connection uses the logged-in administrator's email address as the `From` address. (As a related bug, it also fails completely if the admin has no email)\n\n### How to Reproduce?\n\n_No response_\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/13931/comments",
    "author": "jblachly",
    "comments": [
      {
        "user": "sriharsha-bh1",
        "created_at": "2022-11-09T20:48:06Z",
        "body": "I see the same issue for Forgot password aswell. When as an end-user I click on Forgot Password and enter users email address it tries to use the email of the user but not the email address of From that was given in the email settings"
      },
      {
        "user": "mposolda",
        "created_at": "2023-03-06T12:56:12Z",
        "body": "This might be a valid issue, but Keycloak team don't have time to look at this in the near future. Community contribution is welcome to further investigate and eventually fix this."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-07T20:56:32Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-06T00:06:10Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      },
      {
        "user": "victorfonseca",
        "created_at": "2024-12-05T07:50:03Z",
        "body": "This is a significant issue. Why is it not possible to prioritize it?"
      }
    ]
  },
  {
    "number": 13477,
    "title": "EnableOS annotation not working as expected",
    "created_at": "2022-08-01T23:52:03Z",
    "closed_at": "2024-05-30T00:06:07Z",
    "labels": [
      "area/testsuite",
      "kind/bug",
      "area/dist/quarkus",
      "help wanted",
      "team/cloud-native",
      "team/continuous-testing",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/13477",
    "body": "### Describe the bug\n\nSome tests like `LogginDistTest` are not passing on Windows because the `EnableOnOs` annotation seems to be ignored and tests targeted for Linux are also run.\n\n### Version\n\n19.0.1\n\n### Expected behavior\n\n_No response_\n\n### Actual behavior\n\n_No response_\n\n### How to Reproduce?\n\n_No response_\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/13477/comments",
    "author": "pedroigor",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-02-29T16:41:51Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-05-30T00:06:06Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 13476,
    "title": "Different results when running `help` tests on Windows for both JVM  and Dist modes",
    "created_at": "2022-08-01T23:37:56Z",
    "closed_at": "2024-04-30T18:14:17Z",
    "labels": [
      "area/testsuite",
      "kind/bug",
      "area/dist/quarkus",
      "help wanted",
      "team/cloud-native",
      "team/continuous-testing",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/13476",
    "body": "### Describe the bug\n\nWhen running `help` tests on Windows, the results are different for both JVM and Dist tests. \r\n\r\nWe need to check why and make sure they work just like when running on Linux.\n\n### Version\n\n19.0.1\n\n### Expected behavior\n\n_No response_\n\n### Actual behavior\n\n_No response_\n\n### How to Reproduce?\n\n_No response_\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/13476/comments",
    "author": "pedroigor",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-02-29T16:41:11Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "shawkins",
        "created_at": "2024-04-30T18:14:17Z",
        "body": "Resolved by #28145"
      }
    ]
  },
  {
    "number": 13461,
    "title": "Automatically remove roles in Keycloak based on SAML attributes(with  Azure AD integration)",
    "created_at": "2022-08-01T14:12:53Z",
    "closed_at": "2024-06-03T00:06:43Z",
    "labels": [
      "area/saml",
      "kind/bug",
      "help wanted",
      "area/identity-brokering",
      "team/core-iam",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/13461",
    "body": "### Describe the bug\n\nI have a SAML IdP set up in Keycloak and it is working fine. We get an attribute from SAML called “Groups” which is a list of group IDs. So I set up some mappers of type “Advanced Attribute to Role”. I mapped GroupA to RoleA, GroupB to RoleB, etc. This works fine at first. If a user’s \"Groups\" attribute contains \"GroupA\", then that user is correctly assigned RoleA.\r\n\r\nThe problem is when a user is re-assigned from GroupA to GroupB. Now when that user logs on, he is correctly assigned RoleB, but he retains RoleA from before. If a user simply loses GroupA, that user retains RoleA.\r\n\r\nI want a user to have those roles and ONLY those roles that are mapped in based on his current Groups attribute. And if a user loses a group attribute value, then he should lose the corresponding role.\r\n\r\nI set the sync mode to force so that we overwrite all mapped attributes and roles, in the Settings of your IDP . But still facing the same issue \r\n\r\nHow can I fix this situation? Can this be done using SAML attribute mappers? What’s the proper way to do this?\n\n### Version\n\n15.1.1\n\n### Expected behavior\n\n_No response_\n\n### Actual behavior\n\n_No response_\n\n### How to Reproduce?\n\n_No response_\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/13461/comments",
    "author": "sumanraovakt",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-04-04T09:47:43Z",
        "body": "Thanks for the report, but unfortunately due the amount of other reported issues and other priorities, Keycloak team does not have time to properly triage this bug. So preliminary added to Backlog for now.\r\nIt will be helpful if:\r\n- You can verify if still applicable in latest Keycloak released version. If not, then it is welcome to close this issue.\r\n- If you figure that this may not be a valid bug (for example just a mistake in configuration etc), it will be also welcome to close this issue\r\n- If still applicable in latest version, it will be welcome to add the comment as well, that this was still reproduced with latest Keycloak version as it is very valuable info. Anyone is welcome to comment with this or add other relevant comments to this issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-04T19:31:52Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-03T00:06:35Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      },
      {
        "user": "autoluminescent",
        "created_at": "2025-01-23T08:48:44Z",
        "body": "I have the same issue but with an OIDC IdP, and mapping app roles (not groups) to realm roles. I understand there is no capacity to pick this up, but could I get some tips on what would be a reasonable approach? It feels like a potentially big vulnerability, and I'm sure others have fixed it. Thanks!"
      }
    ]
  },
  {
    "number": 13250,
    "title": "--verbose option doesn't work in Quarkus distribution",
    "created_at": "2022-07-21T10:11:03Z",
    "closed_at": "2023-12-20T12:13:05Z",
    "labels": [
      "kind/enhancement",
      "impact/low",
      "area/dist/quarkus",
      "help wanted",
      "team/cloud-native",
      "release/24.0.0"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/13250",
    "body": "### Describe the bug\r\n\r\nWhen there is an error during Keycloak startup there is the following error message:\r\n```\r\nERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (Quarkus Main Thread) For more details run the same command passing the '--verbose' option. Also you can use '--help' to see the details about the usage of the particular command.\r\n```\r\nHowever, if I add `--verbose` parameter (for example: `./kc.sh start-dev --verbose`) it fails with:\r\n```\r\nUnknown option: '--verbose'\r\n```\r\n\r\n### Version\r\n\r\nmain\r\n\r\n### Expected behavior\r\n\r\n`--verbose` parameter works or Keycloak doesn't suggest using it.\r\n\r\n### Actual behavior\r\n\r\nKeycloak suggests using `--verbose` parameter but it doesn't work.\r\n\r\n### How to Reproduce?\r\n\r\n`./kc.sh start-dev --verbose`\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/13250/comments",
    "author": "mhajas",
    "comments": [
      {
        "user": "mabartos",
        "created_at": "2022-07-21T10:21:36Z",
        "body": "@mhajas AFAIK, the `--verbose` is considered as an option, and according to the helper guide, options are positioned before commands. Therefore, this command should work as expected: `./kc.sh --verbose start-dev`. \r\n\r\nOn the other hand, I'd say it'd be good to have the possibility to define those options regardless of their position. (EDIT: maybe except the `--help` and `--version` -  should be managed differently)"
      },
      {
        "user": "mhajas",
        "created_at": "2022-07-21T10:30:48Z",
        "body": "Thanks for the response @mabartos! You are right, it works this way. Let's leave this open, maybe there is a way to make it also work the other way. "
      },
      {
        "user": "abstractj",
        "created_at": "2022-08-04T15:42:00Z",
        "body": "@mhajas @mabartos considering that the option work as expected, using ./kc.sh --verbose start-dev. I'd say that this issue is not a bug, and instead an enhancement?\r\n\r\nConsidering the current team capacity, I'd defer this issue as `help-wanted`, or even close it. Any thoughts? \r\n\r\n"
      },
      {
        "user": "mhajas",
        "created_at": "2022-08-04T16:27:42Z",
        "body": "Yes, you are right."
      },
      {
        "user": "iankko",
        "created_at": "2023-03-02T10:49:57Z",
        "body": "@abstractj @mhajas @mabartos Unless you want to close this issue, I would take it. Hit it recently trying to debug (get more reasons about the failure to start) trying to start Keycloak image with random CLI options.\r\n\r\nThe fix seems to be pretty straightforward, so unless you want to keep this as learning issue for someone else, I would fix it as part of my onboarding.\r\n\r\nLet me know\r\n\r\nThanks,\r\nJan"
      },
      {
        "user": "mabartos",
        "created_at": "2023-03-02T11:06:12Z",
        "body": "@iankko Thanks for bringing this up again. Assuming the fact we're facing this issue even inside the team, the community might encounter that for sure as well. \r\n\r\nWe should improve UX:\r\n1. at least improve the log message when this case occurs\r\n2. not require a specific order of the property (after that, we'd be able to use it everywhere)\r\n\r\nI'd slightly lean toward the 2. option. We'd probably need to move the property to the AbstractCommand in order to be able to use it in all commands. \r\n\r\nWDYT?"
      },
      {
        "user": "abstractj",
        "created_at": "2023-03-02T14:56:54Z",
        "body": "@iankko it makes sense to keep it open\r\n\r\n@mabartos  +1000 about option 2"
      }
    ]
  },
  {
    "number": 12820,
    "title": "Information Disclosure: Error Message shows ldap internal issues on update password page",
    "created_at": "2022-06-29T12:37:27Z",
    "closed_at": "2024-06-05T00:06:28Z",
    "labels": [
      "kind/bug",
      "impact/low",
      "area/ldap",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/12820",
    "body": "### Describe the bug\n\nKeycloak error message shows ldap internal user dn when the user tries to reset his password, open the reset password link enter a password and submit it. When the ldap had an additional password policy and does not allow the password, the error show ldap internals, which is an information disclosure.\r\n\r\n\r\n\n\n### Version\n\n18.0.0\n\n### Expected behavior\n\nAn one information that the password change was not successful, without any ldap informations\n\n### Actual behavior\n\nAfter submitting the new password, an error message shows the ldap dn of the user\n\n### How to Reproduce?\n\nLdap needs a password policy which Keycloak does not have configured.\r\nProceeded the password reset\r\nWhen submitting the new password the Error message with ldap informations appears\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/12820/comments",
    "author": "Fabi93",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-06T19:17:45Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-05T00:06:27Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 12629,
    "title": "Container build on Windows not working due to line-endings of .sh files (crlf)",
    "created_at": "2022-06-21T10:51:49Z",
    "closed_at": "2022-07-19T06:57:57Z",
    "labels": [
      "status/ready",
      "kind/enhancement",
      "area/dist/quarkus",
      "help wanted"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/12629",
    "body": "### Describe the bug\n\nBuilding the quarkus-container on a windows maschine, it doesn't work directly due to wrong line-endings on the .sh script.\r\n\r\n\n\n### Version\n\n18.0.1\n\n### Expected behavior\n\nA fresh checkout and build should work also on windows when git is changing the line-endings. \r\n\r\nI suggest to add `*.sh text eol=lf` to the `.gitattributes` too.\n\n### Actual behavior\n\n_No response_\n\n### How to Reproduce?\n\n_No response_\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/12629/comments",
    "author": "ghost",
    "comments": [
      {
        "user": "vmuzikar",
        "created_at": "2022-06-27T12:19:21Z",
        "body": "@ghost Thanks for reporting this! Unfortunately, we're unable to prioritize this issue. Although, we'd very much welcome a PR (with as minimum changes as possible :))!"
      }
    ]
  },
  {
    "number": 12319,
    "title": "access token claims are not updated when calling /protocol/openid-connect/token",
    "created_at": "2022-06-02T18:53:26Z",
    "closed_at": "2024-06-12T00:06:26Z",
    "labels": [
      "area/oidc",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/12319",
    "body": "### Describe the bug\r\n\r\nNoticed that access_token claims are not updated when we are trying to update token by calling auth/realms/myrealm/protocol/openid-connect/token endpoint with grant_type: refresh_token or grant_type: authorization_code.\r\n\r\n\r\n\r\n### Version\r\n\r\n17\r\n\r\n### Expected behavior\r\n\r\nPlease review How to Reproduce step.\r\n\r\nI would have thought steps 8 and 9, would update the refresh_token. Is the the same expectation as well?\r\n\r\n### Actual behavior\r\n\r\naccess token claims does not update customerid, shopperid for days until sessions logout is called. \r\n\r\n### How to Reproduce?\r\n\r\n1. Create a new oidc provider, OIDC_Provider. Sync mode is set to '**force**'.\r\n2. Setup 'Attribute Importer' mappers, e.g. customerid, shopperid \r\n3. Create a client for demosp - (**confidential client**)\r\n4. Request authentication from demospa\r\n5. Complete authentication, receive access token and refresh token in demoapp\r\n6. Observe that the claims is good - we haven't populated the customerid, shopperid claims.\r\n7. Proceed to update claims on OIDC_Provider and update customerid and shopperid.   \r\n8, Request a new access token using grant_type=refresh_token and observe that the claim does not have customerid, shopperid from the new access token.\r\n9. Request a new access token using grant_type=authorization_code and observe that the claim does not have customerid, shopperid from the new access token.\r\n10. Log out from the session.\r\n11. Request authentication from demospa\r\n12. Observe the claim customerid, shopperid appears in the access_token.    \r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/12319/comments",
    "author": "mitzen",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2022-06-27T11:06:29Z",
        "body": "I am adding this with the label \"Help wanted\" as Keycloak team probably won't have time to look at this in the near future. Anyone is welcome to investigate this further and eventually send PR for this."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-13T10:24:39Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-12T00:06:25Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 16888,
    "title": "Getting notification with unknown error when trying to create duplicated sub group.",
    "created_at": "2022-05-31T11:03:31Z",
    "closed_at": "2023-03-24T07:13:52Z",
    "labels": [
      "kind/bug",
      "impact/low",
      "area/admin/api",
      "good first issue",
      "help wanted"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/16888",
    "body": "### Describe the bug\n\nGetting error: \"Could not create group unknown_error\" while attempt to create sub group with duplicated name\n\n### Version\n\nKeycloak 999-SNAPSHOT on JVM (powered by Quarkus 2.7.5.Final)\n\n### Expected behavior\n\nShould show notification message \"duplicated group could not be created\" or similar.\n\n### Actual behavior\n\n \"Could not create group unknown_error\"\n\n### How to Reproduce?\n\n1. Go to Groups\r\n2. Create parent group\r\n3. Navigate to parent group details, child groups tab\r\n4. Create a sub group\r\n5. Again create the sub group with same name as previous.\r\n6. Masthead notification show wrong text.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/16888/comments",
    "author": "ikhomyn",
    "comments": [
      {
        "user": "edewit",
        "created_at": "2022-06-13T07:48:46Z",
        "body": "For some reason the top level group creation creates a server side error with the text: `Could not create group Top level group named 'test' already exists.` but on the child level it only return \"unknown_error\". This need a server side change, added the label"
      },
      {
        "user": "mposolda",
        "created_at": "2023-03-08T12:02:59Z",
        "body": "Adding to Backlog as this is really corner-case scenario and probably not any issue for anyone in the production environment. On the other hand, contribution is welcome to fix the error message."
      }
    ]
  },
  {
    "number": 12063,
    "title": "Disable Identity Provider on export/import",
    "created_at": "2022-05-18T07:26:35Z",
    "closed_at": "2024-06-04T00:06:06Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/12063",
    "body": "### Describe the bug\n\nI noticed some issues while migrating realms from one environment (dev, qa, prod) to another, using the realm partial export/import from the admin console.\r\nIf there is an identity provider configured, the `bindCredential` will be stripped.\r\nUnfortunately the identity provider is still enabled, so an user import or any login will cause an authentication failure.\r\nThis could lead to the issue, that the client will be blocked by the identity provider.\n\n### Version\n\n17.0.1\n\n### Expected behavior\n\nAn identity provider is disabled after exporting or importing a realm via admin console.\n\n### Actual behavior\n\nAn identity provider is enabled after exporting or importing a realm via admin console.\n\n### How to Reproduce?\n\n1. add an identity provider, e.g. ldap\r\n2. configure it correctly with `bindCredential`\r\n3. export the realm\r\n4. import the realm\r\n5. identity provider is enabled, but `bindCredential` is invalid\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/12063/comments",
    "author": "simse07",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-04-04T09:36:06Z",
        "body": "Thanks for the report, but unfortunately due the amount of other reported issues and other priorities, Keycloak team does not have time to properly triage this bug. So preliminary added to Backlog for now.\r\nIt will be helpful if:\r\n- You can verify if still applicable in latest Keycloak released version. If not, then it is welcome to close this issue.\r\n- If you figure that this may not be a valid bug (for example just a mistake in configuration etc), it will be also welcome to close this issue\r\n- If still applicable in latest version, it will be welcome to add the comment as well, that this was still reproduced with latest Keycloak version as it is very valuable info. Anyone is welcome to comment with this or add other relevant comments to this issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-05T08:29:29Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-04T00:06:05Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 11955,
    "title": "SAML identity provider Username Template Importer mapper containing : is not restored correctly on Keycloak import",
    "created_at": "2022-05-12T08:11:10Z",
    "closed_at": "2024-06-05T00:06:30Z",
    "labels": [
      "area/saml",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/11955",
    "body": "### Describe the bug\r\n\r\nI have a SAML identity provider Username Template Importer mapper with a template value like `${ALIAS}.${ATTRIBUTE.urn:oid:1.2.3}`. I have exported my configuration and when the configuration is imported on Keycloak startup the template value is changed to `${ALIAS}.oid:1.2.3`.\r\n\r\n### Version\r\n\r\n18.0.0 , 21.0.2\r\n\r\n### Expected behavior\r\n\r\nThe imported template value should match the exported value `${ALIAS}.${ATTRIBUTE.urn:oid:1.2.3}`.\r\n\r\n### Actual behavior\r\n\r\nImported template value is `${ALIAS}.oid:1.2.3`.\r\n\r\n### How to Reproduce?\r\n\r\nCreate a SAML identity provider Username Template Importer mapper with a template value like `${ALIAS}.${ATTRIBUTE.urn:oid:1.2.3}`. Export the configuration and then import it.\r\n\r\n### Anything else?\r\n\r\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/11955/comments",
    "author": "vpmuli",
    "comments": [
      {
        "user": "vpmuli",
        "created_at": "2022-05-12T08:32:00Z",
        "body": "\"When importing a realm, you are able to use placeholders to resolve values from environment variables for any realm configuration.\" Maybe related to this?"
      },
      {
        "user": "mposolda",
        "created_at": "2023-04-04T09:37:11Z",
        "body": "Thanks for the report, but unfortunately due the amount of other reported issues and other priorities, Keycloak team does not have time to properly triage this bug. So preliminary added to Backlog for now.\r\nIt will be helpful if:\r\n- You can verify if still applicable in latest Keycloak released version. If not, then it is welcome to close this issue.\r\n- If you figure that this may not be a valid bug (for example just a mistake in configuration etc), it will be also welcome to close this issue\r\n- If still applicable in latest version, it will be welcome to add the comment as well, that this was still reproduced with latest Keycloak version as it is very valuable info. Anyone is welcome to comment with this or add other relevant comments to this issue."
      },
      {
        "user": "vpmuli",
        "created_at": "2023-04-05T08:45:30Z",
        "body": "Reproduced on 21.0.2."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-06T16:03:43Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-05T00:06:29Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 11809,
    "title": "ldap user federation: user is member of group, but group is not found in user group informations",
    "created_at": "2022-05-03T11:49:35Z",
    "closed_at": "2025-02-04T00:06:01Z",
    "labels": [
      "kind/bug",
      "area/ldap",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/11809",
    "body": "### Describe the bug\n\nIt seems that group membership of an ldap user is synchronized but not published to the user-group informations\r\n\r\nprerequisites: \r\n- ldap user federation with importUser true, sync disabled\r\n- a user U1 already logged in and logged out again\r\n- ldap: add user U1  to group G1\r\n\r\nuser U1 logs in\r\n-> Group G1 has user U1 as member\n\n### Version\n\n17.0.1\n\n### Expected behavior\n\nUser U1 must have a group G1\n\n### Actual behavior\n\nUser U1 does not have a group G1\n\n### How to Reproduce?\n\n_No response_\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/11809/comments",
    "author": "ipavkovic",
    "comments": [
      {
        "user": "sguilhen",
        "created_at": "2022-11-22T21:03:37Z",
        "body": "I was able to reproduce the issue - when user is added to existing group in LDAP, the Groups -> Members correctly lists the user under the group, but the membership column is not updated. Clicking on Users -> searching the user -> clicking on Groups also doesn't display the new group the user is part of.\r\n\r\nMembership was only updated after re-synchronizing the users in the LDAP federation provider."
      },
      {
        "user": "pedroigor",
        "created_at": "2024-03-06T20:36:18Z",
        "body": "@sguilhen Assigning you to review the priority. The reason why it is labeled as important is because the you were able to reproduce the issue and the behavior is not what we expect if the group mapper is properly configured."
      },
      {
        "user": "sguilhen",
        "created_at": "2024-11-01T17:57:18Z",
        "body": "The issue here is that the user is cached on login, and KC won't know about changes made directly in LDAP. Holds true for group membership changes as well as other changes to things like first name, last name, e-mail, etc to invalidate the cache. Once the cache is cleared (which is what happens when we re-synch the users from LDAP), the changes to the user become visible.\r\n\r\nI suggest setting the Periodic changed users sync to ON - this will update only the users that changed in LDAP periodically, and the sync process invalidates the caches of the changed users, so the next login will retrieve an updated user model."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-11-01T19:29:09Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "pedroigor",
        "created_at": "2024-11-01T19:30:44Z",
        "body": "Changing priority to `low` based on what @sguilhen mentioned about periodic syncs and how the provider rely on it to sync changes from LDAP."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2025-02-04T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 11646,
    "title": "REGISTER event not logged during First Broker Flow",
    "created_at": "2022-04-25T11:02:40Z",
    "closed_at": "2022-08-23T08:43:58Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "team/rh-iam"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/11646",
    "body": "### Describe the bug\r\n\r\nVersion : RH-SSO 7.5.0 \r\n\r\nISSUE : REGISTER event is not logged for new user during \"First Broker Login\" flow in RH-SSO 7.5\r\n\r\n \r\n\r\nThe issue is not observed in RH-SSO 7.4\r\n\r\n \r\n\r\n### Steps to Replicate:\r\n\r\n- Configure RH-SSO as a broker, by configuring Identity provider in RH-SSO.\r\n- Disable \"Update Profile\" Default Action, if enabled\r\n- Configure event listener logging level to INFO\r\n\r\n```\r\n               <spi name=\"eventsListener\">\r\n                    <default-provider>jboss-logging</default-provider>\r\n                    <provider name=\"jboss-logging\" enabled=\"true\">\r\n                        <properties>\r\n                            <property name=\"success-level\" value=\"info\"/>\r\n                            <property name=\"error-level\" value=\"warn\"/>\r\n                        </properties>\r\n                    </provider>\r\n                </spi>\r\n```\r\n\r\n- Login into RH-SSO with identity provider. Use new user which is not already registered in RH-SSO.\r\n- Checking server logs, there are 2 events for LOGIN and no event for REGISTER\r\n\r\n```\r\n2022-04-04 21:18:12,155 INFO  [org.keycloak.events] (default task-10) type=LOGIN, realmId=identity-broker-realm, clientId=account-console, userId=1e06fad1-0189-40f8-bf40-655b5fa1abe8, ipAddress=127.0.0.1, identity_provider=oidc, register_method=broker, response_type=code, consent=no_consent_required, identity_provider_identity=rishabh, code_id=42608047-dff5-4148-81de-db66993a4b09, email=rissingh@redhat.com, username=rishabh, response_mode=fragment, authSessionParentId=42608047-dff5-4148-81de-db66993a4b09, authSessionTabId=lqq3jxp7DdM\r\n\r\n2022-04-04 21:18:12,155 INFO  [org.keycloak.events] (default task-10) type=LOGIN, realmId=identity-broker-realm, clientId=account-console, userId=1e06fad1-0189-40f8-bf40-655b5fa1abe8, ipAddress=127.0.0.1, identity_provider=oidc, register_method=broker, response_type=code, consent=no_consent_required, identity_provider_identity=rishabh, code_id=42608047-dff5-4148-81de-db66993a4b09, email=rissingh@redhat.com, username=rishabh, response_mode=fragment, authSessionParentId=42608047-dff5-4148-81de-db66993a4b09, authSessionTabId=lqq3jxp7DdM\r\n ```\r\n\r\n### Observations:\r\n\r\nEventListenerTransaction is added in RH-SSO 7.5. And it seems the same event object from `IdentityBrokerService#afterFirstBrokerLogin` with EventType REGISTER  is passed into `AuthenticationManager.finishedRequiredActions` . In `AuthenticationManager.finishedRequiredActions` the EventType is set to LOGIN\r\n \r\n```\r\n 644     private Response afterFirstBrokerLogin(AuthenticationSessionModel authSession) {\r\n 645         try {\r\n 646             this.event.detail(Details.CODE_ID, authSession.getParentSession().getId())\r\n 647                     .removeDetail(\"auth_method\");\r\n.............\r\n 709                 event.event(EventType.REGISTER)\r\n 710                         .detail(Details.REGISTER_METHOD, \"broker\")\r\n 711                         .detail(Details.EMAIL, federatedUser.getEmail())\r\n 712                         .success();\r\n \r\n...........\r\n\r\n 816     private Response finishBrokerAuthentication(BrokeredIdentityContext context, UserModel federatedUser, AuthenticationSessionModel authSession, String providerId) { \r\n...........\r\n 843             event.detail(Details.CODE_ID, authSession.getParentSession().getId());\r\n 844             return AuthenticationManager.finishedRequiredActions(session, authSession, null, clientConnection, request, session.getContext().getUri(), event);\r\n845         }\r\n```\r\n\r\n### Query:\r\n\r\nThis seems to be a bug. Need your input on the same.\r\n\r\n### Version\r\n\r\n17.0.0\r\n\r\n### Note\r\n\r\nMarek: I did not personally reproduced it, but I think that the observation is correct and this is valid bug.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/11646/comments",
    "author": "mposolda",
    "comments": [
      {
        "user": "lexcao",
        "created_at": "2022-06-14T16:32:49Z",
        "body": "Hi Keycloak team.\r\n\r\nFrom my invisigation, the `REGISTER ` event will be override in `finishedRequiredActions` .\r\nAnd it is same cause as @mposolda said.\r\n\r\nI am going to fix it. I need your suggestion before I begin to code.\r\n\r\n**Proposal A,**\r\nIn `finishedRequiredActions`, avoid to override the same event when the event has already sent.\r\n```\r\n// It could be overridden if the event is not sent.\r\nif (event.getEvent().getId() == null) {\r\n    event.event(EventType.LOGIN);\r\n    event.session(userSession);\r\n    event.success();\r\n}\r\n```\r\nThere will break some tests in `KcOidcBrokerEventTest`.\r\n\r\n**Proposal B**,\r\nIn `afterFirstBrokerLogin`, send a copied `REGISTER` event\r\n```\r\nevent.clone()\r\n    .event(EventType.REGISTER)\r\n    .detail(Details.REGISTER_METHOD, \"broker\")\r\n    .detail(Details.EMAIL, federatedUser.getEmail())\r\n    .success();\r\n```\r\nThere will be one more event for `REGISTER` in logs.\r\n\r\nI would prefer Proposal B, the tests could not break so much.\r\nAdding a new event is safe than updating one.\r\nOr there are some cases I did not cover.\r\nPlease feel free to review and comment.\r\n\r\n### Anything else?\r\n\r\nFrom the `afterFirstBrokerLogin`, the `FEDERATED_IDENTITY_LINK` event could be overridden as same to `REGISTER` event.\r\n```\r\n.............\r\n 687             if (Boolean.parseBoolean(isRegisteredNewUser)) {\r\n                     } else {\r\n 711                   event.event(EventType.FEDERATED_IDENTITY_LINK)\r\n 712                                .success();\r\n                     }\r\n...........\r\n```"
      },
      {
        "user": "rishabhsvats",
        "created_at": "2022-06-29T16:43:29Z",
        "body": "Hi @lexcao , your **Proposal B** seems better approach to me. \r\n\r\nI have drafted a pull request with the change, would it be fine if I raise the pull request."
      },
      {
        "user": "lexcao",
        "created_at": "2022-06-30T02:43:47Z",
        "body": "Thanks for your help, you can make a fix.\r\nI have seen your draft PR, It would be nice if you fix those tests in `KcOidcBrokerEventTest`.\r\n"
      },
      {
        "user": "rishabhsvats",
        "created_at": "2022-06-30T18:07:47Z",
        "body": "Thank you for the input. I have started working on the failing tests. "
      }
    ]
  },
  {
    "number": 11643,
    "title": " Authentication Flow Overrides is not updating when reverted to default",
    "created_at": "2022-04-25T07:56:34Z",
    "closed_at": "2024-06-03T00:06:23Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/11643",
    "body": "### Describe the bug\n\n Authentication Flow Overrides cache not being cleared.\r\n\r\nNote: I m running K8s with 2 replicas.\n\n### Version\n\n18.0.0\n\n### Expected behavior\n\nOnce the client changes Authentication Flow Overrides the change should be reflected.\n\n### Actual behavior\n\nThe cache is not being removed\n\n### How to Reproduce?\n\nI copied the browser's Authentication Flow and changed it to require an OTP.\r\nIt worked perfectly once I updated the client to use the new Authentication Flow Overrides.\r\nWhen I went back to using the default browser Authentication Flow Overrides, it still asked for an OTP token.\r\nI removed the client, Authentication Flow, and replaced it with a new client with the same name, but it still demands an OTP.\r\n\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/11643/comments",
    "author": "anish-dcruz",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-04-04T09:38:50Z",
        "body": "Thanks for the report, but unfortunately due the amount of other reported issues and other priorities, Keycloak team does not have time to properly triage this bug. So preliminary added to Backlog for now.\r\nIt will be helpful if:\r\n- You can verify if still applicable in latest Keycloak released version. If not, then it is welcome to close this issue.\r\n- If you figure that this may not be a valid bug (for example just a mistake in configuration etc), it will be also welcome to close this issue\r\n- If still applicable in latest version, it will be welcome to add the comment as well, that this was still reproduced with latest Keycloak version as it is very valuable info. Anyone is welcome to comment with this or add other relevant comments to this issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-04T08:14:52Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-03T00:06:22Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 11569,
    "title": "OIDC clients can't require JAR if auth requests are sent with PAR",
    "created_at": "2022-04-21T10:11:11Z",
    "closed_at": "2024-07-11T00:06:01Z",
    "labels": [
      "area/oidc",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/11569",
    "body": "### Describe the bug\n\nWhen using the OIDC client setting \"Request Object Required=Request Only\" Keycloak expects a \"request\" parameter containing a JWT to be set when calling the authorization endpoint. In a Pushed Authorization Request (PAR) scenario the JWT is sent to the PAR endpoint instead of the authorization endpoint. Keycloak will currently reject the auth request because it won't include the \"request\" parameter. Keycloak doesn't get that the \"request\" parameter was indeed submitted, only indirectly (through the PAR endpoint).\r\nCurrently the only way to submit JAR request through PAR is to set the following client settings:\r\n- Request Object Required=not required\r\n- Pushed Authorization Request Required=Off\r\n\r\nThis prevent OIDC clients to require simultaneously JAR and PAR.\n\n### Version\n\n17.0.1\n\n### Expected behavior\n\nWhen JAR is required for an OIDC client Keycloak should accept PAR auth requests if a corresponding JAR request was sent to the PAR endpoint\n\n### Actual behavior\n\nAn error message is displayed on screen (invalid request) and the logs contain the following:\r\n\r\n```\r\n2022-04-21 08:50:36,083 WARN  [org.keycloak.services] (executor-thread-1304) KC-SERVICES0097: Invalid request: java.lang.RuntimeException: Client is required to use 'request' parameter.\r\n    at org.keycloak.protocol.oidc.endpoints.request.AuthorizationEndpointRequestParserProcessor.parseRequest(AuthorizationEndpointRequestParserProcessor.java:74)\r\n    at org.keycloak.protocol.oidc.endpoints.AuthorizationEndpoint.process(AuthorizationEndpoint.java:132)\r\n    at org.keycloak.protocol.oidc.endpoints.AuthorizationEndpoint.buildGet(AuthorizationEndpoint.java:112)\r\n    at jdk.internal.reflect.GeneratedMethodAccessor617.invoke(Unknown Source)\r\n```\n\n### How to Reproduce?\n\nSet the following OIDC client settings:\r\n- Request Object Required=request only\r\n- Pushed Authorization Request Required=On\r\n\r\nSend a JAR request to the PAR endpoint\r\nPerform the GET request to the authorization endpoint using the parameter returned by the PAR endpoint\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/11569/comments",
    "author": "vanrar68",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2022-06-27T15:40:55Z",
        "body": "@vanrar68 Thanks for the report, but not sure if this is really bug. Could you please elaborate what you try to achieve and if any of the options below work for you? :\r\n\r\nIn case that PAR is used, the request to the AuthorizationEndpoint would use `request_uri` parameter. So:\r\n- In case that you require client to use PAR, you can use:\r\n```\r\nRequest URI Object Required=request_uri only\r\nPushed Authorization Request Required=On\r\n```\r\n\r\n- In case that you want your client to use either PAR or JAR (through the `request` object), you can use:\r\n```\r\nRequest URI Object Required=request or request_uri\r\nPushed Authorization Request Required=On\r\n```\r\n\r\nThere is also an option to use the parameter `Valid Request URIs` to further limit how the request URIs can look like. Will any of the options work for you?"
      },
      {
        "user": "mposolda",
        "created_at": "2022-06-27T15:41:28Z",
        "body": "I am adding this with the label \"Help wanted\" as Keycloak team probably won't have time to look at this in the near future. Anyone is welcome to investigate this further and eventually send PR for this."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-13T10:26:03Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-11T00:06:00Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 11238,
    "title": "/users/count endpoint returns non json response",
    "created_at": "2022-04-12T07:30:11Z",
    "closed_at": "2024-03-07T21:09:47Z",
    "labels": [
      "kind/bug",
      "area/admin/api",
      "help wanted",
      "team/core-iam"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/11238",
    "body": "### Describe the bug\n\nHi,\r\nI've been playing around with the Keycloak REST API and I've found that the count endpoints return inconsistent responses:\r\n\r\nGET /admin/realms/{realm}/groups/count\r\nexample response: { \"count\": 42 }\r\n\r\nGET /admin/realms/{realm}/users/count\r\nexample response: 42\n\n### Version\n\n17.0.0\n\n### Expected behavior\n\n/users/count should return a JSON response.\n\n### Actual behavior\n\n/users/count just returns a number.\n\n### How to Reproduce?\n\n_No response_\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/11238/comments",
    "author": "lejsekt",
    "comments": [
      {
        "user": "rmartinc",
        "created_at": "2023-03-01T08:46:12Z",
        "body": "Number \"42\" is a valid JSON value, not a valid JSON object, but a valid JSON value you can parse normally. You are right about the inconsistency with the groups endpoint. But modifying this means changing the API that is being used right now. The documentation also states that the response of that endpoint is an integer. I suppose we can create another endpoint, or adding an attribute to produce the same JSON object used in groups to be compatible.\r\n\r\nI don't think this is a major issue so if someone wants to work on it any PR would be much appreciated."
      },
      {
        "user": "pedroigor",
        "created_at": "2024-03-07T21:09:47Z",
        "body": "We are not changing the API contract for the reasons mentioned by @rmartinc. It does not pay off the cost of breaking existing deployments."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-07T21:09:55Z",
        "body": "Thanks for reporting this issue. However, after review this is not considered a valid issue, or has been recently resolved.\n\nAs the issue is not valid it will be automatically closed."
      }
    ]
  },
  {
    "number": 11008,
    "title": "Incorrect get the members of a group imported from LDAP",
    "created_at": "2022-03-30T13:31:56Z",
    "closed_at": "2024-11-01T18:49:56Z",
    "labels": [
      "kind/bug",
      "priority/important",
      "area/ldap",
      "help wanted",
      "team/core-iam",
      "release/26.1.0",
      "release/26.0.6"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/11008",
    "body": "### Describe the bug\n\nI have created two user federations with LDAP (AD_1, AD_2). Imports Users is off.  Both of them will import groups using group-ldap-mapper.\r\n\r\nWhen I try to get the members of a group existing in AD_2 and a user exists with the same username in AD_1, only the user AD_1 is displayed; which logically is not in a group existing only in AD_2.\r\n\r\n\n\n### Version\n\n17.0\n\n### Expected behavior\n\nOnly users imported from a specific LDAP group will appear in the list of group members\n\n### Actual behavior\n\n_No response_\n\n### How to Reproduce?\n\n_No response_\n\n### Anything else?\n\nThe user has the same username but the email is different.",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/11008/comments",
    "author": "BlackKerio",
    "comments": [
      {
        "user": "sguilhen",
        "created_at": "2022-11-23T11:54:23Z",
        "body": "I was able to reproduce the issue on Keycloak 20.0.1. Steps:\r\n\r\n1- run the test LDAP server in testsuite/utils: `mvn exec:java -Pldap`  -> runs the LDAP server in port 10389, pre-loads test users, groups\r\n2- run another LDAP server on a different port: `mvn exec:java -Pldap -Dldap.port=10390`\r\n3- run Keycloak using the old admin console (new console seems to be missing ability to synch the groups): `./kc.sh start-dev --features-disabled=admin2 --features=admin`\r\n4- using a tool like Apache Directory Studio, connect to the second LDAP server make changes to reflect the scenario described by the reporter:\r\n     - edit the entry `jbrown` under `ou=People,dc=keycloak,dc=org`, changing the username to something else (e.g. `Julius` instead of `James`) and change the e-mail as well.\r\n     - remove both group entries (`ldap-admin` and `ldap-user`) under `ou=RealmRoles`\r\n     - add a new group (e.g. `ldap-tester` and add `jbrown` as a member`\r\n\r\nAt this point, the second LDAP server contains a different group, with a user that has the same username of another user in LDAP server 1, but different user data (e-mail, first name).\r\n\r\n5- go to Keycloak admin console, setup both servers in User Federation (follow guidelines in `docs/tetests.md`, adjusting the connection URL of the second server).\r\n- Import Users -> Off, Synch Registrations -> Off, Edit Mode -> READ_ONLY, UUID LDAP attribute -> entryuuid\r\n\r\n6- in the `Mapper` tab, add the `group-ldap-mapper`, setting `LDAP Groups DN` to `ou=RealmRoles,dc=keycloak,dc=org`\r\n7- click on `Synch LDAP Groups to Keycloak`\r\n\r\nOnce this is done for both servers, all the groups should be imported. Navigating to `Groups` in the admin console, one can see both groups from server 1 (`ldap-admin` and `ldap-user`), and also the group from server 2 (`ldap-tester`). \r\n\r\nNow, if we select one of the groups from server 1 and click on `Members`, it will display the wrong `jbrown` user, which was fetched from LDAP server 2."
      },
      {
        "user": "pedroigor",
        "created_at": "2024-03-06T20:38:20Z",
        "body": "@sguilhen Assigning you to review the priority. The reason why it is labeled as important is because the you were able to reproduce the issue and the behavior is not what we expect if the group mapper is properly configured."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-06T21:46:37Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      }
    ]
  },
  {
    "number": 10852,
    "title": "Kerberos auth fails when access to keytab is via a group with GID != UID",
    "created_at": "2022-03-21T19:35:20Z",
    "closed_at": "2024-06-12T00:06:30Z",
    "labels": [
      "area/authentication",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/10852",
    "body": "### Describe the bug\n\nKeycloak is running as user `uid=1002(keycloak) gid=1002(keycloak) groups=1002(keycloak),1003(krb5)`.\r\n\r\nKerberos keytab `/etc/krb5.keytab` is mode `0640`, aka. group readable. When keytab group owner is `keycloak`, kerberos authentication works. When keytab group owner is `krb5`, authentication fails. Further testing reveals authentication failing whenever access to keytab is provided via a group with a different GID than the UID keycloak process is running as.\n\n### Version\n\n17.0.0\n\n### Expected behavior\n\nKerberos Negotiate auth succeeds.\n\n### Actual behavior\n\n```\r\nprincipal is HTTP/my-keycloak.my.domain@MY.DOMAIN\r\nWill use keytab\r\nCommit Succeeded \r\n\r\nFound KeyTab /etc/krb5.keytab for HTTP/my-keycloak.my.domain@MY.DOMAIN\r\nFound KeyTab /etc/krb5.keytab for HTTP/my-keycloak.my.domain@MY.DOMAIN\r\nFound KeyTab /etc/krb5.keytab for HTTP/my-keycloak.my.domain@MY.DOMAIN\r\nFound KeyTab /etc/krb5.keytab for HTTP/my-keycloak.my.domain@MY.DOMAIN\r\nEntered SpNegoContext.acceptSecContext with state=STATE_NEW\r\nSpNegoContext.acceptSecContext: receiving token = a0 82 09 d.... [trimmed]\r\nSpNegoToken NegTokenInit: reading Mechanism Oid = 1.2.840.48018.1.2.2\r\nSpNegoToken NegTokenInit: reading Mechanism Oid = 1.2.840.113554.1.2.2\r\nSpNegoToken NegTokenInit: reading Mechanism Oid = 1.3.6.1.4.1.311.2.2.30\r\nSpNegoToken NegTokenInit: reading Mechanism Oid = 1.3.6.1.4.1.311.2.2.10\r\nSpNegoToken NegTokenInit: reading Mech Token\r\nSpNegoContext.acceptSecContext: received token of type = SPNEGO NegTokenInit\r\nSpNegoContext: negotiated mechanism = 1.2.840.113554.1.2.2\r\nSpNegoContext.acceptSecContext: negotiated mech adjusted to 1.2.840.48018.1.2.2\r\nEntered Krb5Context.acceptSecContext with state=STATE_NEW\r\nJava config name: null\r\nNative config name: /etc/krb5.conf\r\nLoading krb5 profile at /etc/krb5.conf\r\nLoaded from native config\r\nLooking for keys for: HTTP/my-keycloak.my.domain@MY.DOMAIN\r\nLooking for keys for: HTTP/my-keycloak.my.domain@MY.DOMAIN\r\n2022-03-21 21:14:40,962 WARN  [org.keycloak.federation.kerberos.impl.SPNEGOAuthenticator] (executor-thread-5) SPNEGO login failed: java.security.PrivilegedActionException: GSSException: Failure unspecified at GSS-API level (Mechanism level: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP-REQ - AES256 CTS mode with HMAC SHA1-96)\r\n\tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n        [trimmed further backtrace]\r\n```\n\n### How to Reproduce?\n\n- Keycloak running on \"bare metal\", aka. no containers\r\n- Debian, OpenJDK 11\r\n- AD LDAP as user federation source, with Kerberos auth enabled\r\n\r\nAside from enabling Kerberos debug in Keycloak options, using following in `bin/kc.sh`:\r\n\r\n`SERVER_OPTS=\"${SERVER_OPTS} -Dsun.security.krb5.debug=true -Dsun.security.spnego.debug=true\"`\r\n\r\nLet me know if you need to know something more.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/10852/comments",
    "author": "oranki",
    "comments": [
      {
        "user": "waltari2001",
        "created_at": "2022-10-09T16:16:22Z",
        "body": "I am also running kc v17 and keycloak user belongs to the root group only\r\n\r\n$ id keycloak \r\nuid=1000(keycloak) gid=0(root) groups=0(root)\r\n\r\n\r\nThe problem I am having is KC doesn't seem to find the keytab , although it's there.\r\n\r\nDebug is  true storeKey true useTicketCache false useKeyTab false doNotPrompt false ticketCache is null isInitiator true KeyTab is null refreshKrb5Config is false principal is null tryFirstPass is false useFirstPass is false storePass is false clearPass is false\r\n\r\n"
      },
      {
        "user": "oranki",
        "created_at": "2022-10-10T09:00:57Z",
        "body": ">I am also running kc v17 and keycloak user belongs to the root group only\r\n>\r\n> $ id keycloak\r\n> uid=1000(keycloak) gid=0(root) groups=0(root)\r\n\r\nService users should **never** have gid=0. That introduces a potential attack vector, basically granting root privileges for anyone who manages to break in as the service user.\r\n\r\nAs explained in the bug report, if GID != UID, the authentication will always fail.\r\n\r\nYou can get it working by making your keycloak user gid=1000, changing keytab group ownership to gid 1000 and making the file group readable. I'm not sure if the group names are relevant, but I'd use name keycloak for gid=1000."
      },
      {
        "user": "mposolda",
        "created_at": "2023-03-06T10:13:14Z",
        "body": "This might be a valid issue, but Keycloak team don't have time to look at this in the near future. Community contribution is welcome to further investigate and eventually fix this."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-13T10:26:15Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-12T00:06:29Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 10578,
    "title": "Third Party Identity Provider adding null attributes breaking search",
    "created_at": "2022-03-03T17:56:31Z",
    "closed_at": "2024-06-04T00:06:03Z",
    "labels": [
      "area/oidc",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/10578",
    "body": "### Describe the bug\n\nWhen using a third-party identity provider to create a user and not collecting that user's name, the `fed_user_attribute` table is being populated with attributes that are null instead of not having the attributes in the table.\n\n### Version\n\n16.1.1\n\n### Expected behavior\n\nWhen certain attributes are not collected, there should not be rows in the `fed_user_attribute` table for those attributes.\n\n### Actual behavior\n\nWhen certain attributes are not collected, there are rows in the `fed_user_attribute` table for those attributes, but they have null values. This causes the search for that user to throw a null pointer exception.\n\n### How to Reproduce?\n\nHave the ability to sign into Keycloak using a third-party identity provider. Then set the `first login flow` to a flow where you don't `review profile` so that it doesn't collect their name. When the user goes through the registration process with that identity provider, they will not be searchable in the keycloak admin console due to the `FIRST_NAME` and `LAST_NAME` attributes being null.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/10578/comments",
    "author": "HJain01",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-04-04T09:31:51Z",
        "body": "Thanks for the report, but unfortunately due the amount of other reported issues and other priorities, Keycloak team does not have time to properly triage this bug. So preliminary added to Backlog for now.\r\nIt will be helpful if:\r\n- You can verify if still applicable in latest Keycloak released version. If not, then it is welcome to close this issue.\r\n- If you figure that this may not be a valid bug (for example just a mistake in configuration etc), it will be also welcome to close this issue\r\n- If still applicable in latest version, it will be welcome to add the comment as well, that this was still reproduced with latest Keycloak version as it is very valuable info. Anyone is welcome to comment with this or add other relevant comments to this issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-05T08:12:51Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-04T00:06:02Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 10386,
    "title": "Single quotes not being escaped in message_fr.properties when displayed with message.summary",
    "created_at": "2022-02-22T13:31:55Z",
    "closed_at": "2024-06-05T00:06:55Z",
    "labels": [
      "kind/bug",
      "area/translations",
      "good first issue",
      "help wanted",
      "team/community",
      "status/auto-expire",
      "status/auto-bump",
      "priority/normal",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/10386",
    "body": "### Describe the bug\n\nWhen a translation string, located in a message_XX.properties file, contains a double single quotes. \r\nex: \r\nmessage_fr.properties\r\ninternalServerError=Une erreur interne du serveur s''est produite\r\n\r\nAnd that string is used by the ${message.summary?no_esc} theme code, the single quotes are not being escaped and displayed as 2 single quotes instead of a single one.\r\n\r\nWhen a trasnlation string is used with the \"msg(\"XX\")\" theme code, there's no problem.\n\n### Version\n\n16.1.1\n\n### Expected behavior\n\nThe double single quotes should be escaped and a single quote should be displayed.\n\n### Actual behavior\n\nthe double single quote is not being escaped\n\n### How to Reproduce?\n\nGenerate a \"500 server error\" in a french page, the error.ftl page will be triggered and the \"internalServerError=Une erreur interne du serveur s''est produite\" will be displayed.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/10386/comments",
    "author": "cedricguindon",
    "comments": [
      {
        "user": "stianst",
        "created_at": "2022-02-25T10:24:43Z",
        "body": "Wouldn't think you need to escape a single quote, so message should just be `Une erreur interne du serveur s'est produite`"
      },
      {
        "user": "cedricguindon",
        "created_at": "2022-03-10T15:03:56Z",
        "body": "The problem is the fact that the strings in the properties files can be loaded in 2 different ways that i'm aware:\r\nusing the msg('KEY')\r\nand\r\nusing the ${message.summary?no_esc}    <- This one is only used on errors.\r\n\r\nBut the 2 above methods handle the quotes differently,  msg('key') needs to escape a single quote but  message.summary dosent.\r\n\r\nThis creates a problem since the strings loaded from these 2 methods are coming form the properties file, which mean the properties file needs to have 2 different ways of handling strings, 1 for the msg method which requires quote escaping and 1 for the message.summary method which does not need quote escaping.\r\n\r\nIn itself it should not be a problem since you should not be using an error message in a msg('key') method but this makes the properties file contains 2 types of string, 1 that contains escaped characters and another that dosent"
      },
      {
        "user": "romanivna",
        "created_at": "2024-02-02T13:03:11Z",
        "body": "Dear KC Team, any news about this?\r\nItalian, french and even english translations are affected\r\nWe should remember to put 2 quotes every time, it's quite annoying for custom theme and pages..."
      },
      {
        "user": "jonkoops",
        "created_at": "2024-02-02T16:00:29Z",
        "body": "We are currently at capacity, which means the team does not have the time to look at this. The issue is marked as help wanted, so feel free to open up a PR to resolve this issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-06T11:44:27Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-05T00:06:54Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 9755,
    "title": "view-realm permission required to have prefilled \"Default Admin-Initiated Action Lifespan\" in \"Expires In\" field under \"Reset Actions\"",
    "created_at": "2022-01-24T14:09:53Z",
    "closed_at": "2024-06-06T00:06:14Z",
    "labels": [
      "kind/bug",
      "area/admin/fine-grained-permissions",
      "area/admin/api",
      "help wanted",
      "team/core-iam",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/9755",
    "body": "### Describe the bug\n\nHi there,\r\n\r\nI have the requirement in my project to create a role for a keycloak \"helper admin\" who is only able to manage users and groups in one specific realm subordinate to the master realm. \r\n\r\nHowever, if you want a user to be able to send Reset Actions mails to users with the \"Default Admin-Initiated Action Lifespan\" in \"Expires In\" field prefilled under \"Reset Actions\", he has to have the view-realm permission in the client roles for the realm that he is supposed to manage. If I only give him the permissions manage-users, query-groups, query-users, view-users, the field \"Expires In\" is empty and has to be filled in manually (even though a Default Admin-Initiated Action Lifespan is configured for the realm).\r\n\r\nI do not want to give the user the permission view-realm, however, as he would then be able to see the realm settings and partially also gets the impression, that he will be able to change realm settings (even though he hits an error page when trying to do so).\r\n\r\nThanks in advance for looking into this!\r\n\r\nBest Regards\r\nKathrin\n\n### Version\n\n16.1.0\n\n### Expected behavior\n\nField \"Expires In\" under \"Reset Actions\" is prefilled with \"Default Admin-Initiated Action Lifespan\" configured for a realm if the user logged into the admin console has the permission manage-users.\n\n### Actual behavior\n\nField \"Expires In\" under \"Reset Actions\" is empty even if configured for a realm if the user logged into the admin console has the permission manage-users. If the user has the permission view-realm, the field \"Expires In\" is filled with the \"Default Admin-Initiated Action Lifespan\" configured for the realm.\n\n### How to Reproduce?\n\n1) Create user \"User A\" for a realm under the master realm who has the roles manage-users, query-groups, query-users, view-users assigned under the client roles for that realm.\r\n2) Log in as \"User A\".\r\n3) Select a user from the realm and go to \"Credentials\" tab.\r\n4) Field \"Expires in\" is empty even though a \"Default Admin-Initiated Action Lifespan\" is configured for the realm.\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/9755/comments",
    "author": "herrmannkathrin",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2023-04-04T09:29:08Z",
        "body": "Thanks for the report, but unfortunately due the amount of other reported issues and other priorities, Keycloak team does not have time to properly triage this bug. So preliminary added to Backlog for now.\r\nIt will be helpful if:\r\n- You can verify if still applicable in latest Keycloak released version. If not, then it is welcome to close this issue.\r\n- If you figure that this may not be a valid bug (for example just a mistake in configuration etc), it will be also welcome to close this issue\r\n- If still applicable in latest version, it will be welcome to add the comment as well, that this was still reproduced with latest Keycloak version as it is very valuable info. Anyone is welcome to comment with this or add other relevant comments to this issue."
      },
      {
        "user": "jens-hammel",
        "created_at": "2023-10-23T13:16:10Z",
        "body": "In 22.0.4 the \"Default Admin-Initiated Action Lifespan\" in realm-Settings -> Tokens is completely ignored in the Credential Reset Widget. I can see only a request to required-actions but that only contains an array of actions and there is no default time information.\r\nIn line 25 of ResetCredentialDialog.tsx the default values for the form get exported with a hardcoded Value of 43200.\r\n\r\nSo to solve this issue this form should be initiated with the value from the realm which in case of user without view-realm permission must be extended by the \"actionTokenGeneratedByAdminLifespan\" attribute in the response from the request to the realms-resource. \r\nDid not find the place where the realm-attributes get filtered out yet..."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-07T19:43:14Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-06T00:06:14Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 9577,
    "title": "When removing client, remove service account even if disabled",
    "created_at": "2022-01-14T15:21:14Z",
    "closed_at": "2024-06-05T00:06:37Z",
    "labels": [
      "area/oidc",
      "kind/bug",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/9577",
    "body": "### Describe the bug\n\nWhile working on #9563 I noticed this snippet in `org.keycloak.models.cache.infinispan.RealmCacheSession#removeClient`\r\n\r\n```java\r\nif (client.isServiceAccountsEnabled()) {\r\n    UserModel serviceAccount = session.users().getServiceAccount(client);\r\n\r\n    if (serviceAccount != null) {\r\n        session.users().removeUser(realm, serviceAccount);\r\n    }\r\n}\r\n```\r\n\r\nShouldn't the service account be removed even if the client has the feature disabled? \n\n### Version\n\nHead of main\n\n### Expected behavior\n\nAlways remove a service account associated to a client, even if the client has disabled the feature.\n\n### Actual behavior\n\nUntested, I've only been looking at code:\r\n\r\nA service account associated to a client is removed only when the service account feature enabled.\n\n### How to Reproduce?\n\n_No response_\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/9577/comments",
    "author": "guusdk",
    "comments": [
      {
        "user": "mposolda",
        "created_at": "2022-06-27T15:14:53Z",
        "body": "I am adding this with the label \"Help wanted\" as Keycloak team probably won't have time to look at this in the near future. Will be hopefully fixed with the PR from the Keycloak community."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-06T16:40:28Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-06-05T00:06:36Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  },
  {
    "number": 9377,
    "title": "Failed to execute atob on window",
    "created_at": "2022-01-03T10:57:10Z",
    "closed_at": "2024-10-10T10:40:28Z",
    "labels": [
      "kind/bug",
      "area/adapter/javascript",
      "help wanted",
      "team/core-clients",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/reopened",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/9377",
    "body": "### Describe the bug\n\nUncaught DOMException: failed to execute 'atob' on 'window': The string to be decoded is not correctly encoded.\r\n\r\nI get this error at keycloak.js:1071\r\n\r\nThis is here:\r\n\r\n```\r\n        function decodeToken(str) {\r\n            str = str.split('.')[1];p\r\n\r\n            str = str.replace('/-/g', '+');\r\n            str = str.replace('/_/g', '/');\r\n            switch (str.length % 4) {\r\n                case 0:\r\n                    break;\r\n                case 2:\r\n                    str += '==';\r\n                    break;\r\n                case 3:\r\n                    str += '=';\r\n                    break;\r\n                default:\r\n                    throw 'Invalid token';\r\n            }\r\n\r\n            str = decodeURIComponent(escape(atob(str))); // <----------\r\n\r\n            str = JSON.parse(str);\r\n            return str;\r\n        }\r\n```\n\n### Version\n\n\"keycloak-js\": \"^11.0.0\",\n\n### Expected behavior\n\n_No response_\n\n### Actual behavior\n\n_No response_\n\n### How to Reproduce?\n\n_No response_\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/9377/comments",
    "author": "derweise",
    "comments": [
      {
        "user": "jonkoops",
        "created_at": "2022-01-03T15:48:28Z",
        "body": "@derweise We do not actively support version 11 of Keycloak (or `keycloak-js` for that matter), could you use the latest versions of both and confirm the issue is still present? Also please provide more information about the browser you are using as that will help us reproduce the issue."
      },
      {
        "user": "derweise",
        "created_at": "2022-01-04T10:24:56Z",
        "body": "I think this is because the 'memberOf' attribute in keycloak contains non ASCII characters such as (ß,ä,ö,ü) for which atob fails."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-12T13:17:09Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-08-02T00:06:18Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      },
      {
        "user": "jonkoops",
        "created_at": "2024-09-17T14:57:26Z",
        "body": "Re-opening this issue so that we don't lose track of it."
      },
      {
        "user": "jonkoops",
        "created_at": "2024-10-10T10:40:25Z",
        "body": "I am not able to reproduce this issue any longer, and the code for decoding the token has since been changed, so I will assume this issue is fixed. If someone is still able to reproduce this please file a new issue with steps to reproduce it."
      }
    ]
  },
  {
    "number": 8940,
    "title": "Non informative message when trying to create subgroup that already exists",
    "created_at": "2021-11-28T18:38:16Z",
    "closed_at": "2024-09-10T07:05:39Z",
    "labels": [
      "area/admin/api",
      "help wanted"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/8940",
    "body": "### Describe the bug\n\nWhen subgroup already exists keyclock server will return message status code 409 with message \"Unknown_error\" when Endpoint POST \"/{realm}/groups/{id}/children\" is called.\n\n### Version\n\n15.0.2\n\n### Expected behavior\n\nMore informative return message\n\n### Actual behavior\n\nWhen subgroup already exists keyclock server will return message status code 409 with message \"Unknown_error\" when Endpoint POST \"/{realm}/groups/{id}/children\" is called.\n\n### How to Reproduce?\n\nCreate group with body params: {\"name\": \"A\"}, create with body params: {\"name\": \"B\"} with Endpoint POST \"/{realm}/groups/{id_of_group \"A\"}/children\" . This will return status 200. Now we call same end point to create subgroup B with same body and path parameters.  Keyclock server will return message status code 409 with message \"Unknown_error\"\n\n### Anything else?\n\n_No response_",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/8940/comments",
    "author": "MaryamBerg",
    "comments": [
      {
        "user": "abstractj",
        "created_at": "2021-12-23T19:18:47Z",
        "body": "@MarissaTee please try the latest release (16.1.0), and let us know if the issue persists."
      },
      {
        "user": "rmartinc",
        "created_at": "2023-02-17T09:00:41Z",
        "body": "The issue is still the same in last nightly but it's just a minor issue. If someone from the community can help on this would be much appreciated."
      },
      {
        "user": "keshavprashantdeshpande",
        "created_at": "2024-09-09T20:27:43Z",
        "body": "@rmartinc @MaryamBerg This issue is no more reproducible. Now the error message is quite descriptive and according to me this issue can be closed."
      },
      {
        "user": "rmartinc",
        "created_at": "2024-09-10T07:05:39Z",
        "body": "Thanks @keshavprashantdeshpande!\r\n\r\nYes, I have quickly checked and the error message is now `Sibling group named 'xxx' already exists.`\r\n\r\nClosing the issue."
      }
    ]
  },
  {
    "number": 16937,
    "title": "Realms \"endpoint\" needs current realm parameter",
    "created_at": "2021-01-20T09:32:16Z",
    "closed_at": "2024-07-12T00:06:05Z",
    "labels": [
      "kind/bug",
      "help wanted",
      "team/ui",
      "area/admin/client-js",
      "priority/low",
      "status/auto-expire",
      "status/auto-bump",
      "status/expired-by-bot"
    ],
    "url": "https://github.com/keycloak/keycloak/issues/16937",
    "body": "**Describe the bug**\r\nAll of the endpoints use the current realm as default when making the call to the backend except realms.\r\n\r\n**Expected behavior**\r\nFor example:\r\n```javascript\r\nawait kcAdminClient.realms.getUsersManagementPermissions();\r\n```\r\nthis should result in a call getting the users management permissions for the realm set in config.\r\n\r\n**Additional context**\r\nMaybe some of these should be moved to a separate \"endpoint\" and not be under \"realms\"\r\n",
    "comments_url": "https://api.github.com/repos/keycloak/keycloak/issues/16937/comments",
    "author": "edewit",
    "comments": [
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-03-12T13:17:14Z",
        "body": "Due to the amount of issues reported by the community we are not able to prioritise resolving this issue at the moment.\n\nIf you are affected by this issue, upvote it by adding a :thumbsup: to the description. We would also welcome a contribution to fix the issue."
      },
      {
        "user": "keycloak-github-bot[bot]",
        "created_at": "2024-07-12T00:06:04Z",
        "body": "Due to lack of updates in the last 180 days this issue will be automatically closed."
      }
    ]
  }
]