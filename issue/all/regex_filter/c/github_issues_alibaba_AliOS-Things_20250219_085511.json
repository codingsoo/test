[
  {
    "number": 495,
    "title": "epoll support ",
    "created_at": "2018-08-22T11:26:31Z",
    "closed_at": "2018-08-30T02:56:27Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/495",
    "body": "will there be support for **epoll** in the near future?",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/495/comments",
    "author": "EduardShaid",
    "comments": [
      {
        "user": "librae8226",
        "created_at": "2018-08-30T02:56:27Z",
        "body": " No such plan for now."
      }
    ]
  },
  {
    "number": 353,
    "title": "大家有调好的ALIOS的IOT板到云端的传输速度一般能到多少？",
    "created_at": "2018-06-15T03:10:29Z",
    "closed_at": "2022-03-01T11:42:20Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/353",
    "body": "我想做一个远程虚拟串口透传的用于工业领域，有时需要在终端通过云实时的采集一些设备的数据用来调试和分析，只要能达到相当于本地9600波特率的串口效果就行。想选阿里的方案，不知道有没问题",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/353/comments",
    "author": "tongwenzou",
    "comments": [
      {
        "user": "tongwenzou",
        "created_at": "2018-06-15T03:12:05Z",
        "body": "有经验的大牛和阿里的大拿们帮忙确认一下，谢谢！"
      },
      {
        "user": "librae8226",
        "created_at": "2018-06-15T03:26:17Z",
        "body": "网络本身速率没问题，但要看你需要的收发包频率，以及你的设备端实现。建议可以结合你的设备做下实验。"
      },
      {
        "user": "tongwenzou",
        "created_at": "2018-06-15T03:38:52Z",
        "body": "收发包频率那个不会太快，我需要的是远程触发设备才会上传数据，平时的话就监控一些少量的状态那都不是问。相对于传感器或者远程抄表不同的地方是，在调试的时候一次数据包的发送要是连续和及时的，而这一次数据大概也就10K字节的样子。并不需要一直不断的发送，一般都是人为启动发送。"
      }
    ]
  },
  {
    "number": 316,
    "title": "About: MQTT to Cloud with STM32",
    "created_at": "2018-06-02T13:58:16Z",
    "closed_at": "2022-03-01T11:41:01Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/316",
    "body": "关于这个用例，请问一下，硬件需要B-L475E-IOT01A这块板子外，为什么还需要一块庆科的MK3060？",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/316/comments",
    "author": "hptsf",
    "comments": [
      {
        "user": "librae8226",
        "created_at": "2018-06-05T02:40:45Z",
        "body": "因为当时使用了 mk3060 作为外挂的 wifi 模组，at command 通信，SAL封装接口\r\n如果有遗漏请 @Ray148289 补充下"
      }
    ]
  },
  {
    "number": 315,
    "title": "咨询AliOS Thing系统对RAM、Flash存储的资源占用分别是多少？谢谢",
    "created_at": "2018-06-01T09:42:53Z",
    "closed_at": "2022-03-01T11:40:58Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/315",
    "body": "在AliOS Thing的基础上，配置上CoAP、MQTT 等常用协议， 总共会占用多少的RAM？ flash存储总共占用多少？\r\n谢谢。",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/315/comments",
    "author": "lijk6455352",
    "comments": [
      {
        "user": "lijk6455352",
        "created_at": "2018-06-01T09:46:12Z",
        "body": "Ask for a question about hao many RAM & ROM will be used running AliOS Thing OS with CoAP & MQTT ."
      },
      {
        "user": "librae8226",
        "created_at": "2018-06-08T10:07:11Z",
        "body": "根据实际的硬件和编译的应用决定，可以尝试编译一个目标，会在日志中生成 AOS MEMORY MAP\r\n\r\n比如可以参考 `aos make mqttapp@mk3060` 的结果。\r\n这里面也可以根据需要去配置和裁剪，以契合最终的产品需要。\r\n```\r\n                        AOS MEMORY MAP\r\n|=================================================================|\r\n| MODULE                                   | ROM       | RAM      |\r\n|=================================================================|\r\n| newlib_stub                              | 665       | 0        |\r\n| alicrypto                                | 40082     | 8780     |\r\n| kv                                       | 2993      | 36       |\r\n| fota                                     | 2989      | 345      |\r\n| socket_stand                             | 1075      | 0        |\r\n| libc_nano                                | 28436     | 464      |\r\n| vcall                                    | 6756      | 4        |\r\n| kernel_init                              | 1141      | 48       |\r\n| yloop                                    | 1555      | 24       |\r\n| rhino                                    | 14091     | 7721     |\r\n| libplat_gen                              | 469       | 0        |\r\n| framework                                | 317       | 12       |\r\n| vfs                                      | 1821      | 1209     |\r\n| digest_algorithm                         | 2538      | 0        |\r\n| libgcc                                   | 6136      | 0        |\r\n| fota_download                            | 211       | 0        |\r\n| activation                               | 2743      | 8776     |\r\n| fota_mqtt_transport                      | 4278      | 58       |\r\n| libprov                                  | 596       | 0        |\r\n| download_http                            | 2046      | 88       |\r\n| cli                                      | 6033      | 549      |\r\n| mqtt                                     | 14519     | 20       |\r\n| board_mk3060                             | 649       | 24       |\r\n| fota_platform                            | 76        | 0        |\r\n| moc108                                   | 165473    | 52793    |\r\n| armv5                                    | 388       | 0        |\r\n| netmgr                                   | 1887      | 266      |\r\n| mqttapp                                  | 1371      | 268      |\r\n| mbedtls                                  | 28230     | 76       |\r\n| cjson                                    | 2009      | 20       |\r\n| net                                      | 46476     | 3676     |\r\n| iotkit                                   | 15893     | 1705     |\r\n| log                                      | 414       | 20       |\r\n| MQTTPacket                               | 2063      | 4        |\r\n| hal                                      | 298       | 12       |\r\n| *fill*                                   | 466       | 142      |\r\n|=================================================================|\r\n| TOTAL (bytes)                            | 407183    | 87140    |\r\n|=================================================================|\r\n```"
      }
    ]
  },
  {
    "number": 303,
    "title": "redefined functions/structures",
    "created_at": "2018-05-29T08:43:23Z",
    "closed_at": "2022-03-01T11:40:22Z",
    "labels": [
      "question"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/303",
    "body": "In aos1.3.0, the below functions/structures are redefined when compiling linkkitapp. Any config file to avoid compile errors? Thanks!\r\n```\r\nawss_recv_80211_frame_cb_t\r\nawss_wifi_mgmt_frame_cb_t\r\nawss_wifi_scan_result_cb_t\r\nplatform_wifi_mgnt_frame_cb_t\r\nmbedtls_time_t\r\n```",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/303/comments",
    "author": "maggie17",
    "comments": [
      {
        "user": "junjiec",
        "created_at": "2018-05-29T09:12:50Z",
        "body": "which platform？"
      },
      {
        "user": "maggie17",
        "created_at": "2018-05-29T09:22:15Z",
        "body": "our own platform, using xtensa cpu"
      }
    ]
  },
  {
    "number": 953,
    "title": "windows 10下developerkit helloworld 烧写出错",
    "created_at": "2019-04-17T15:31:59Z",
    "closed_at": "2022-03-01T12:04:55Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/953",
    "body": "按照example目录下面的helloworld里面的readme.md一步步进行操作，在烧写之前都没有报错。然后执行“aos upload”命令时出错，log信息如下：\r\n\r\n[INFO]: Currently in aos_sdk_path: 'D:\\Code\\IoT\\AliOS-Things'\r\n[INFO]: Not set target, read target from .config\r\n[INFO]: Target: helloworld@developerkit\r\n\r\nscons: Reading SConscript files ...\r\n[INFO]: Scons to upload!args:{'APPLICATION': 'helloworld', 'COMMAND': 'upload', 'BOARD': 'developerkit'}\r\n\r\n[INFO]: Target: helloworld@developerkit\r\n[INFO]: Currently in aos_sdk_path: 'D:\\Code\\IoT\\AliOS-Things'\r\n\r\n[INFO]: Running cmd:\r\n        'D:\\Code\\IoT\\AliOS-Things/build/cmd/win32/st-flash.exe --reset write D:\\Code\\IoT\\AliOS-Things/out/helloworld@developerkit/binary/helloworld@developerkit.bin 0x08000000'st-flash 1.5.0\r\n2019-04-17T23:14:44 WARN usb.c: Couldn't find any ST-Link/V2 devices\r\n---host_os:Win32\r\n[ERROR]: Firmware upload failed!\r\n\r\n[AliOS-Things] ERROR: \"scons\" returned error code -1.\r\n[AliOS-Things] ERROR: Command \"scons -f D:\\Code\\IoT\\AliOS-Things\\build/ucube.py COMMAND=upload APPLICATION=helloworld BOARD=developerkit\" in \"D:\\Code\\IoT\\AliOS-Things\"\r\n\r\n ",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/953/comments",
    "author": "chq007",
    "comments": [
      {
        "user": "chq007",
        "created_at": "2019-04-17T15:38:53Z",
        "body": "从报错信息看貌似是无法找到st-link/v2 devices, 因此使用stm32 st-link工具测试是否能够连接，发现可以成功连接并看到设备内部内存信息，连接过程的log信息如下：\r\n\r\n23:20:29 : ST-LINK SN : 066BFF554952728381134352\r\n23:20:29 : ST-LINK Firmware version : V2J28M18\r\n23:20:29 : Connected via SWD.\r\n23:20:29 : SWD Frequency = 4,0 MHz.\r\n23:20:29 : Connection mode : Normal.\r\n23:20:29 : Debug in Low Power mode enabled.\r\n23:20:29 : Device ID:0x461 \r\n23:20:29 : Device flash Size : 1MBytes\r\n23:20:29 : Device family :STM32L49x\r\n\r\n个人感觉是vscode里面的st-flash.exe与stm32 st-link utility中使用的设备驱动程序不是同一个。本人菜鸟一个，不知道这种情况如何解决，希望大牛能够指点一下，不胜感谢。"
      },
      {
        "user": "walker2048",
        "created_at": "2019-04-22T00:52:49Z",
        "body": "建议截图一下设备管理界面，看看驱动是否正确安装，之前也有人遇到过驱动安装不正常的"
      },
      {
        "user": "xiaowenxia",
        "created_at": "2019-04-22T01:55:02Z",
        "body": "> 个人感觉是vscode里面的st-flash.exe与stm32 st-link utility中使用的设备驱动程序不是同一个。本人菜鸟一个，不知道这种情况如何解决，希望大牛能够指点一下，不胜感谢。\r\n\r\n是用的同一个驱动程序。\r\n是不是其他程序占用了st-link导致st-flash.exe无法识别呢？\r\n\r\n"
      },
      {
        "user": "zeng-hello",
        "created_at": "2019-07-23T12:27:43Z",
        "body": "请问您现在解决了吗"
      }
    ]
  },
  {
    "number": 858,
    "title": "请问PWM控制，调用哪个接口咧！",
    "created_at": "2019-02-13T11:09:10Z",
    "closed_at": "2022-03-01T12:00:44Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/858",
    "body": "**Is your feature request related to a problem? Please describe.**\r\n请问PWM控制，调用哪个接口咧！\r\nint32_t hal_pwm_init(pwm_dev_t *pwm);\r\nint32_t hal_pwm_start(pwm_dev_t *pwm);\r\nint32_t hal_pwm_stop(pwm_dev_t *pwm);\r\n是这些接口吗，发现芯片级有其对应的PWM API，但是没有实现这几个接口\r\n\r\n**Describe the solution you'd like**\r\n\r\n\r\n**Additional context**\r\n",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/858/comments",
    "author": "phoenixfengqi",
    "comments": [
      {
        "user": "xiaowenxia",
        "created_at": "2019-02-14T01:45:05Z",
        "body": "如果芯片的代码里面没有实现这些接口的话，那就是这款芯片暂时不支持`hal_pwm_*`这些接口哈，需要自己手动实现，或者直接调用芯片的pwm接口。"
      },
      {
        "user": "phoenixfengqi",
        "created_at": "2019-02-18T01:02:28Z",
        "body": "明白，谢谢！"
      }
    ]
  },
  {
    "number": 631,
    "title": "blink@esp8266 build failed",
    "created_at": "2018-10-06T09:16:32Z",
    "closed_at": "2018-10-08T08:32:18Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/631",
    "body": "**Describe the bug**\r\n~~~\r\n> Executing task: aos make blink@esp8266 <\r\n\r\naos-cube version: 0.2.60\r\nCheck if required tools for esp8266 exist\r\nBuild AOS Now\r\nTOOLCHAIN_PATH=/home/xiaodi/work/AliOS-Things/build/compiler/gcc-xtensa-lx106/Linux64/bin/\r\nCompiling auto_component\r\nMaking out/blink@esp8266/libraries/auto_component.a\r\nMaking blink@esp8266.elf\r\nout/blink@esp8266/libraries/blink.a(blink.o):(.literal.app_trigger_low_action+0x8): undefined reference to `hal_gpio_output_low'\r\nout/blink@esp8266/libraries/blink.a(blink.o):(.literal.app_trigger_high_action+0x4): undefined reference to `hal_gpio_output_high'\r\nout/blink@esp8266/libraries/blink.a(blink.o):(.literal.gpio_isr_handler+0x14): undefined reference to `hal_gpio_input_get'\r\nout/blink@esp8266/libraries/blink.a(blink.o):(.literal.gpio_isr_handler+0x18): undefined reference to `hal_gpio_output_toggle'\r\nout/blink@esp8266/libraries/blink.a(blink.o):(.literal.application_start+0x4): undefined reference to `hal_gpio_init'\r\nout/blink@esp8266/libraries/blink.a(blink.o):(.literal.application_start+0x8): undefined reference to `hal_gpio_enable_irq'\r\nout/blink@esp8266/libraries/blink.a(blink.o): In function `app_trigger_low_action':\r\n/home/xiaodi/work/AliOS-Things/app/example/blink/blink.c:46: undefined reference to `hal_gpio_output_low'\r\nout/blink@esp8266/libraries/blink.a(blink.o): In function `app_trigger_high_action':\r\n/home/xiaodi/work/AliOS-Things/app/example/blink/blink.c:52: undefined reference to `hal_gpio_output_high'\r\nout/blink@esp8266/libraries/blink.a(blink.o): In function `gpio_isr_handler':\r\n/home/xiaodi/work/AliOS-Things/app/example/blink/blink.c:39: undefined reference to `hal_gpio_input_get'\r\n/home/xiaodi/work/AliOS-Things/app/example/blink/blink.c:40: undefined reference to `hal_gpio_output_toggle'\r\nout/blink@esp8266/libraries/blink.a(blink.o): In function `application_start':\r\n/home/xiaodi/work/AliOS-Things/app/example/blink/blink.c:63: undefined reference to `hal_gpio_init'\r\n/home/xiaodi/work/AliOS-Things/app/example/blink/blink.c:70: undefined reference to `hal_gpio_init'\r\n/home/xiaodi/work/AliOS-Things/app/example/blink/blink.c:77: undefined reference to `hal_gpio_init'\r\n/home/xiaodi/work/AliOS-Things/app/example/blink/blink.c:80: undefined reference to `hal_gpio_enable_irq'\r\ncollect2: error: ld returned 1 exit status\r\nbuild/aos_target_build.mk:337: recipe for target 'out/blink@esp8266/binary/blink@esp8266.elf' failed\r\nmake[1]: *** [out/blink@esp8266/binary/blink@esp8266.elf] Error 1\r\nbuild/Makefile:265: recipe for target 'main_app' failed\r\nmake: *** [main_app] Error 2\r\n[AliOS-Things] ERROR: \"/\" returned error code 2.\r\n[AliOS-Things] ERROR: Command \"/ h o m e / x i a o d i / w o r k / A l i O S - T h i n g s / b u i l d / c m d / l i n u x 6 4 / m a k e   H O S T _ O S = L i n u x 6 4   T O O L S _R O O T = / h o m e / x i a o d i / w o r k / A l i O S - T h i n g s / b u i l d   - e   - f   b u i l d / M a k e f i l e   b l i n k @ e s p 8 2 6 6\" in \"/home/xiaodi/work/AliOS-Things\"\r\n---\r\nThe terminal process terminated with exit code: 2\r\n~~~\r\n**environment**\r\n1. branch(version): master\r\n2. Desktop OS(windows linux or macOS):ubuntu16\r\n3. example: \r\n\r\n**Expected behavior**\r\n\r\n\r\n**Screenshots**\r\n\r\n\r\n**Additional context**\r\n",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/631/comments",
    "author": "edenleung",
    "comments": [
      {
        "user": "librae8226",
        "created_at": "2018-10-08T03:44:33Z",
        "body": "这个是因为之前esp8266一直缺失gpio的hal层对接。\r\n现在可以参考 @xuhongv 提交的 #563 添加了对 esp8266 gpio 的支持（该PR已合入master）"
      },
      {
        "user": "edenleung",
        "created_at": "2018-10-08T08:32:18Z",
        "body": "good job! \r\n@librae8226 \r\n@xuhongv "
      },
      {
        "user": "xuhongv",
        "created_at": "2018-10-08T08:35:33Z",
        "body": "@saybabi  esp8266的gpio口中断有点特殊，需要不仅仅在```hal```层，还要在业务层做点修改！"
      }
    ]
  },
  {
    "number": 628,
    "title": "关于移植hal_uart的串口中断问题，以及LOG输出",
    "created_at": "2018-09-30T03:06:12Z",
    "closed_at": "2022-03-01T11:52:37Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/628",
    "body": "小白提问：（使用版本AliOS 2.0.0 编译环境IAR）\r\n\r\n1. STM32L4_Cube中的hal_uart_stm32l4.c，为什么串口中断没有用 krhino_intrpt_enter(); 和 krhino_intrpt_exit(); ？是不需要还是忽视了？什么时候需要使用？什么时候不需要使用？烦请大佬解答 谢谢。\r\n\r\n2. Utility中log的使用问题：hal_uart_stm32l4.c中的串口发送使用了Cube HAL库中的阻塞函数 HAL_UART_Transmit(...) ，但是对于RTOS来说 非阻塞 的处理方式岂不更好？于是我改写了下，使用 HAL_UART_Transmit_IT(...) 和 aos_sem_wait(...) 配合。发现LOG输出被打断了。查看发现LOG的实现是三段式的printf宏定义，没有用互斥锁保护，这里是不是不太合适？\r\n",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/628/comments",
    "author": "virnop",
    "comments": [
      {
        "user": "realonlyme",
        "created_at": "2018-09-30T08:48:54Z",
        "body": "1. 我看了源码，是仍然具有这2个函数的，位于AliOS-Things\\platform\\mcu\\stm32l4xx_cube\\hal\\hal_uart_stm32l4.c中的USART1_IRQHandler()等函数 如果你是使用了STCubeMX自动生成了这些ISR，请将其注释掉，用stm32l4xx_cube\\hal下的代码\r\n\r\n2. 我看了下，2.0的代码中hal_uart_send()是信号量和中断方式的发送方式实现的，之前版本可能有没有实现的版本，并且在2.0中的代码用#if 0 ... #endif 关掉了\r\n另外log目前现存的打印方式由于很比较混乱，但是OS本身提供的LOG机制最终会调用到csp_printf，是有保护的。\r\n```\r\n#ifndef csp_printf\r\n__attribute__((weak)) int csp_printf(const char *fmt, ...)\r\n{\r\n    va_list args;\r\n    int ret;\r\n\r\n    ret = aos_mutex_lock(&log_mutex, AOS_WAIT_FOREVER);\r\n    if (ret == 0) {\r\n        va_start(args, fmt);\r\n        ret = vprintf(fmt, args);\r\n        va_end(args);\r\n\r\n        fflush(stdout);\r\n    }\r\n\r\n    aos_mutex_unlock(&log_mutex);\r\n\r\n    return ret;\r\n}\r\n#endif\r\n```\r\n\r\n请确认您是否使用了rel_2.0.0分支\r\n"
      }
    ]
  },
  {
    "number": 626,
    "title": "怎么使用ESP8266的PWM功能？有没有相关的开发文档？",
    "created_at": "2018-09-29T07:13:43Z",
    "closed_at": "2022-03-01T11:52:34Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/626",
    "body": "environment\r\n\r\nbranch(version): master 分支9月21号最新同步\r\nDesktop OS(windows linux or macOS):windows\r\nexample:\r\n\r\n有esp8266 的 libpwm.a库也有pwm.h，然后不知道怎么使用这个pwm功能？",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/626/comments",
    "author": "liefyuan",
    "comments": [
      {
        "user": "realonlyme",
        "created_at": "2018-09-30T08:53:44Z",
        "body": "OS暂时没有对PWM功能做规范，目前如果使用的话请以芯片厂商提供为主，比如ESP8266：\r\n你可以搜索下关键字\"esp8266 PWM\"能查到"
      },
      {
        "user": "xuhongv",
        "created_at": "2018-10-08T08:36:41Z",
        "body": "稍安勿躁，正在快马加鞭未下鞍测试demo，并发布！"
      },
      {
        "user": "liefyuan",
        "created_at": "2018-10-31T03:08:15Z",
        "body": "> \r\n> \r\n> 稍安勿躁，正在快马加鞭未下鞍测试demo，并发布！\r\n\r\n这是我写的demo是基于SDK编程弄出来的，可以用，五路PWM正常输出。\r\n```\r\n/*\r\n * Copyright (C) 2015-2017 Alibaba Group Holding Limited\r\n */\r\n\r\n#include <aos/aos.h>\r\n#include <hal/soc/soc.h>\r\n#include \"stdio.h\"\r\n#include <pwm.h>\r\n#include <gpio.h>\r\n\r\n/**\r\n * Brief:\r\n * This test code shows how to configure gpio and how to use gpio interrupt.\r\n *\r\n * GPIO status:\r\n * GPIO18: output\r\n * GPIO4: output\r\n * GPIO5:  input, pulled up, interrupt from rising edge and falling edge\r\n *\r\n * Test:\r\n * Connect GPIO18 with LED\r\n * Connect GPIO4 with GPIO5\r\n * Generate pulses on GPIO4, that triggers interrupt on GPIO5 to blink the led.\r\n *\r\n */\r\n\r\n#define PWM_0_OUT_IO_MUX PERIPHS_IO_MUX_MTDI_U\r\n#define PWM_0_OUT_IO_NUM 12\r\n#define PWM_0_OUT_IO_FUNC FUNC_GPIO12\r\n\r\n#define PWM_1_OUT_IO_MUX PERIPHS_IO_MUX_MTDO_U\r\n#define PWM_1_OUT_IO_NUM 15\r\n#define PWM_1_OUT_IO_FUNC FUNC_GPIO15\r\n\r\n#define PWM_2_OUT_IO_MUX PERIPHS_IO_MUX_MTCK_U\r\n#define PWM_2_OUT_IO_NUM 13\r\n#define PWM_2_OUT_IO_FUNC FUNC_GPIO13\r\n\r\n#define PWM_3_OUT_IO_MUX PERIPHS_IO_MUX_GPIO4_U\r\n#define PWM_3_OUT_IO_NUM 4\r\n#define PWM_3_OUT_IO_FUNC FUNC_GPIO4\r\n\r\n#define PWM_4_OUT_IO_MUX PERIPHS_IO_MUX_MTMS_U\r\n#define PWM_4_OUT_IO_NUM 14\r\n#define PWM_4_OUT_IO_FUNC FUNC_GPIO14\r\n\r\n#define PWM_CHANNEL 5\r\n\r\nvoid ESP8266_PWM_RUN( void )\r\n{\r\n    /** PWM占空比变量 */\r\n    static uint8_t set_duty = 0;\r\n\r\n    /** 占空比加减标志 */\r\n    static bool f = true;\r\n    if ( f == true )\r\n    {\r\n        if ( ++set_duty >= 100 )\r\n        {\r\n            f = false;\r\n        }\r\n    }\r\n    else\r\n    {\r\n        if ( --set_duty <= 0 )\r\n        {\r\n            f = true;\r\n        }\r\n    }\r\n\r\n    /** 更新PWM通道0的占空比 */\r\n    printf(\"set_duty>>>%d\\r\\n\", set_duty);\r\n    pwm_set_duty( set_duty, 0 );\r\n    pwm_start();\r\n}\r\n\r\n// 输出一个固定的PWM波\r\nvoid esp8266_pwm_output(uint32_t duty, uint8_t channel)\r\n{\r\n    pwm_set_duty(20, 0 );\r\n    pwm_start();\r\n\r\n    // pwm_set_duty(30, 1 );\r\n    // pwm_start();\r\n\r\n    pwm_set_duty(40, 2 );\r\n    pwm_start();\r\n\r\n    pwm_set_duty(50, 3 );\r\n    pwm_start();\r\n\r\n    pwm_set_duty(60, 4 );\r\n    pwm_start();\r\n}\r\n\r\n\r\n/** 初始化PWM配置、系统定时器配置 */\r\nvoid ESP8266_PWM_Init( void )\r\n{\r\n    struct pwm_param pwm_config_t;\r\n\r\n    uint32_t io_info[ ][ 3 ]={\r\n        {PWM_0_OUT_IO_MUX,PWM_0_OUT_IO_FUNC,PWM_0_OUT_IO_NUM},\r\n        {PWM_1_OUT_IO_MUX,PWM_1_OUT_IO_FUNC,PWM_1_OUT_IO_NUM},\r\n        {PWM_2_OUT_IO_MUX,PWM_2_OUT_IO_FUNC,PWM_2_OUT_IO_NUM},\r\n        {PWM_3_OUT_IO_MUX,PWM_3_OUT_IO_FUNC,PWM_3_OUT_IO_NUM},\r\n        {PWM_4_OUT_IO_MUX,PWM_4_OUT_IO_FUNC,PWM_4_OUT_IO_NUM},\r\n    };\r\n\r\n   pwm_config_t.duty[ 0 ] = 0;\r\n   pwm_config_t.freq = 0;\r\n   pwm_config_t.period = 100;\r\n\r\n    pwm_init( pwm_config_t.period, pwm_config_t.duty, PWM_CHANNEL, io_info );\r\n\r\n    // 输出一个固定的PWM波\r\n    // pwm_set_duty(80, 0 );\r\n    // pwm_start();\r\n}\r\n\r\nint application_start(int argc, char *argv[])\r\n{\r\n    ESP8266_PWM_Init();  // PWM 初始化\r\n\r\n    esp8266_pwm_output(80, 0); // 输出固定PWM波\r\n\r\n    aos_loop_run();\r\n\r\n    return 0;\r\n}\r\n```"
      }
    ]
  },
  {
    "number": 600,
    "title": "linkkitapp@esp8266配网成功，但开发版APP显示失败",
    "created_at": "2018-09-19T15:33:25Z",
    "closed_at": "2022-03-01T11:51:25Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/600",
    "body": "develop enveriment:\r\nbranch(version): d1788bf\r\nDesktop OS: linux\r\nexample: linkkitapp\r\nboard：esp8266\r\n\r\n采用按键触发方式配网。\r\n1，上电开机后，按键触发，进入配网模式\r\n2，手机公版APP扫描设备配网二维码，输入家庭wifi密码\r\n3，从串口日志可看出设备联网成功，并重启。\r\n4，APP到界面显示到100%后，显示“设备连接失败”\r\n5，在云端后台能看到设备在线。\r\n\r\n日志黏贴如下：\r\n\r\n    ??A㈦褷飞愆??遍B蚀?黑?釁厐*曞\u0016覀?C?晛M疺\u0016?囊??\u0001?土€Z珪A卲'?蚻K??SJ-睊穿?婈?A?捳鶢?朎燗1惵\r\n奀??J懌矔r'??仲!錃‖謯€\u000b努9\u0016\u0002A?,??娾 ?'S野蛨CCCSQ鋲?\u001bQSSCCC\r\n藛[[[A??[[[[[K\u001c擡宀\u001c?K?K饐[[遊wH\u0012{?[[[[[\r\n龣\bs捙\u001c[o扡悮龣A\b捙\u001c[o扡?薣[[[i?k[{哰[[[KB\u001c擡宀\u001c?K?K饢[圻[q]愛?[[[[[K\u001c殣??僈?K2薣[[Q瑤\u0014?藛[遊K\u001c殣^\u0014?僈?K2僳[A?c?\u0010踿[[[[\r\n貦A\b捙\u001c[o扡?薣[[[Q?k[\u0003藛[遊[\u001a俒[K\u0012\u0012\u0012K倰K\u0012\u0012\u0012K俒K\u0012\u0012\u0012K俒\r\n矯?QQ矝\u0010QQa?骳Q蘉\u001d弌墐[[\u0012\u0012\u0012\u0012K俒\u0012\u0012\u0012\u0012K俒\u0012\u0012\u0012\u0012K俒\u0012\u0012\u0014s捙\u001c[K捳€\u0013CCSSS碿c\u0014QSCCCSK?脥乺翋KA?睽莓覡\f锽???*昬\u0016騹\u0013j!閸?UA瓔?'\u0002\u0003\u0014+汀爅嬚€\u0012j呩黑?lKa睊磯?捖┄j]\u000bA?掑娟湾n\u0002\u0002\u00011皞岮?O砕懰矔珊規辘\u0019\u0017\tA?槵V#\t汖靁\u0016\u0002\u0001芛,挸覑,\u0002?篠S?嶀Wifi init success!!\r\nmode : sta(ec:fa:bc:1f:28:f3)\r\nadd if0\r\ntrace should have cli to control!!!\r\n[000010]<V> aos framework init.\r\nchan 1\r\nchan 6\r\nchan 11\r\nchan 1\r\nchan 2\r\nchan 3\r\nchan 4\r\nchan 5\r\nchan 6\r\nchan 7\r\nchan 8\r\ngpio_isr_handler()\r\ndo_awss_active 0\r\npress\r\nchan 9\r\nchan 10\r\nchan 11\r\nchan 12\r\nchan 13\r\nchan 1\r\nchan 3\r\nchan 6\r\nchan 9\r\nchan 11\r\nchan 12\r\nchan 13\r\nchan 1\r\nchan 6\r\nchan 11\r\n------------------------suspend station\r\nscandone\r\nstate: 0 -> 2 (b0)\r\nstate: 2 -> 3 (0)\r\nstate: 3 -> 5 (10)\r\nadd 0\r\naid 5\r\npm open phy_2,type:2 0 0\r\ncnt \r\n\r\nconnected with CMCC-NyDV, channel 13\r\ndhcp client start...\r\n[WiFi] event 1\r\nip:192.168.1.10,mask:255.255.255.0,gw:192.168.1.1\r\n[WiFi] event 4\r\nsmart_config_stop 819\r\nWifi connected.\r\n[009500]<D> Send List Max-Count:      16\r\n[009500]<D> Observe Server Max-Count: 16\r\n[009500]<D> Observe Client Max-Count: 16\r\n[009500]<D> Resource Max-Count:       32\r\n[009500]<D> MultiCast Address:        224.0.1.187:5683\r\n[009500]<D> Send/Recv Wait time:      2000ms\r\n[009510]<V> wifi_service_event config.ssid CMCC-NyDV\r\n[009520]<D> The uri is /sys/awss/event/connectap/notify\r\n[009520]<D> path: sys,len=3\r\n[009520]<D> path: awss,len=4\r\n[009520]<D> path: event,len=5\r\n[009530]<D> path: connectap,len=9\r\n[009530]<D> path: notify,len=6\r\n[009530]<D> Add message id 1 len 315 to the list\r\n[009530]<D> *********Message Info**********\r\n[009530]<D> Version     : 1\r\n[009530]<D> Code        : 0x2\r\n[009530]<D> Type        : 0x1\r\n[009530]<D> Msgid       : 1\r\n[009530]<D> Option      : 6\r\n[009540]<D> Payload Len : 272\r\n[009540]<D> Token Len   : 4\r\n[009540]<D> Token       : 04030201\r\n[009540]<D> Remote      : 255.255.255.255:5683\r\n[009540]<D> ********************************\r\n[009640]<D> The uri is /sys/awss/event/connectap/notify\r\n[009640]<D> path: sys,len=3\r\n[009650]<D> path: awss,len=4\r\n[009650]<D> path: event,len=5\r\n[009650]<D> path: connectap,len=9\r\n[009650]<D> path: notify,len=6\r\n[009650]<D> Add message id 2 len 315 to the list\r\n[009650]<D> *********Message Info**********\r\n[009650]<D> Version     : 1\r\n[009650]<D> Code        : 0x2\r\n[009660]<D> Type        : 0x1\r\n[009660]<D> Msgid       : 2\r\n[009660]<D> Option      : 6\r\n[009660]<D> Payload Len : 272\r\n[009660]<D> Token Len   : 4\r\n[009660]<D> Token       : 05030201\r\n[009660]<D> Remote      : 255.255.255.255:5683\r\n[009660]<D> ********************************\r\n[009710]<V> reboot system\r\nreboot!\r\nstate: 5 -> 0 (0)\r\nrm 0\r\npm close 7 0 0/2026066\r\ndel if0\r\nusl\r\nsul 0 0\r\n€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€??usuE兯\u0010袽Ia掌WOP\u001cP樛\b]Qkk\u001aC\r\nk楶A瑡C€\r\n櫨\u001ag欵\u0011k\\A袹\u0010e姇o?U?K鴽cq\u0010\u001c惓\u001dQ袏\u0014K\u0012???瓲WV??j傉秹??禞偅?パ?\u0002丗?捼 矈笂?右惌H?Wifi init success!!\r\nmode : sta(ec:fa:bc:1f:28:f3)\r\nadd if0\r\ntrace should have cli to control!!!\r\n[000010]<V> aos framework init.\r\nscandone\r\nstate: 0 -> 2 (b0)\r\nstate: 2 -> 3 (0)\r\nstate: 3 -> 5 (10)\r\nadd 0\r\naid 5\r\npm open phy_2,type:2 0 0\r\ncnt \r\n\r\nconnected with CMCC-NyDV, channel 13\r\ndhcp client start...\r\n[WiFi] event 1\r\nip:192.168.1.10,mask:255.255.255.0,gw:192.168.1.1\r\n[WiFi] event 4\r\n[007540]<V> wifi_service_event config.ssid CMCC-NyDV\r\n[007540]<D> Send List Max-Count:      16\r\n[007540]<D> Observe Server Max-Count: 16\r\n[007540]<D> Observe Client Max-Count: 16\r\n[007540]<D> Resource Max-Count:       32\r\n[007540]<D> MultiCast Address:        224.0.1.187:5683\r\n[007540]<D> Send/Recv Wait time:      2000ms\r\n[007560]<D> The uri is /sys/awss/event/connectap/notify\r\n[007560]<D> path: sys,len=3\r\n[007560]<D> path: awss,len=4\r\n[007560]<D> path: event,len=5\r\n[007560]<D> path: connectap,len=9\r\n[007560]<D> path: notify,len=6\r\n[007560]<D> Add message id 1 len 315 to the list\r\n[007560]<D> *********Message Info**********\r\n[007560]<D> Version     : 1\r\n[007570]<D> Code        : 0x2\r\n[007570]<D> Type        : 0x1\r\n[007570]<D> Msgid       : 1\r\n[007570]<D> Option      : 6\r\n[007570]<D> Payload Len : 272\r\n[007570]<D> Token Len   : 4\r\n[007570]<D> Token       : 04030201\r\n[007570]<D> Remote      : 255.255.255.255:5683\r\n[007570]<D> ********************************\r\n\u001b[0;32mlinkkit_main@line471:\tsample execution time: 1 minutes\r\n\u001b[0m\u001b[0;32mlinkkit_main@line472:\tget tsl from cloud\r\n\u001b[0mlog_cls constructed @3fff2368\r\nslist_cls constructed @3fff2348\r\nslist_cls constructed @3fff2408\r\nslist_cls constructed @3fff2448\r\nslist_cls constructed @3fff2488\r\nslist_cls constructed @3fff24c8\r\nslist_cls constructed @3fff2508\r\ncm_msg_info_cls constructed @3fff8538\r\ndm_cm_impl_cls constructed @3fff2548\r\nslist(callback list) insert node,size:1\r\n[inf] iotx_device_info_init(40): device_info created successfully!\r\n[dbg] iotx_device_info_set(50): start to set device info!\r\n[dbg] iotx_device_info_set(64): device_info set successfully!\r\n[dbg] guider_print_dev_guider_info(248): ....................................................\r\n[dbg] guider_print_dev_guider_info(249):           ProductKey : a1wPbk25xNg\r\n[dbg] guider_print_dev_guider_info(250):           DeviceName : shendeng1\r\n[dbg] guider_print_dev_guider_info(251):             DeviceID : a1wPbk25xNg.shendeng1\r\n[dbg] guider_print_dev_guider_info(253): ....................................................\r\n[dbg] guider_print_dev_guider_info(254):        PartnerID Buf : ,partner_id=AliOSThings\r\n[dbg] guider_print_dev_guider_info(255):         ModuleID Buf : ,module_id=GeneralID\r\n[dbg] guider_print_dev_guider_info(256):           Guider URL : \r\n[dbg] guider_print_dev_guider_info(258):       Guider SecMode : 2 (TLS + Direct)\r\n[dbg] guider_print_dev_guider_info(260):     Guider Timestamp : 2524608000000\r\n[dbg] guider_print_dev_guider_info(261): ....................................................\r\n[dbg] guider_print_dev_guider_info(267): ....................................................\r\n[dbg] guider_print_conn_info(225): -----------------------------------------\r\n[dbg] guider_print_conn_info(226):             Host : a1wPbk25xNg.iot-as-mqtt.cn-shanghai.aliyuncs.com\r\n[dbg] guider_print_conn_info(227):             Port : 1883\r\n[dbg] guider_print_conn_info(230):         ClientID : a1wPbk25xNg.shendeng1|securemode=2,timestamp=2524608000000,signmethod=hmacsha1,gw=0,partner_id=AliOSThings,module_id=GeneralID|\r\n[dbg] guider_print_conn_info(232):       TLS PubKey : 0x40203eec ('-----BEGIN CERTI ...')\r\n[dbg] guider_print_conn_info(235): -----------------------------------------\r\n[inf] IOT_CM_Init(117): cm context initialize\r\n\u001b[0;33mlinked_list_insert@line101\t:linked list(cm event cb list) insert node@3fff2688,size:1\r\n\u001b[0m\u001b[0;33mlinked_list_insert@line101\t:linked list(cm connectivity list) insert node@3fff26a8,size:1\r\n\u001b[0m[inf] iotx_mc_init(1709): MQTT init success!\r\n[inf] _ssl_client_init(176): Loading the CA root certificate ...\r\ncert. version     : 3\r\nserial number     : 04:00:00:00:00:01:15:4B:5A:C3:94\r\nissued  on        : 0000-00-00 00:00:00\r\nexpires on        : 0000-00-00 00:00:00\r\nRSA key size      : 2048 bits\r\n[inf] _ssl_parse_crt(144): crt content:185\r\n[inf] _ssl_client_init(184):  ok (0 skipped)\r\n[inf] _TLSConnectNetwork(340): Connecting to /a1wPbk25xNg.iot-as-mqtt.cn-shanghai.aliyuncs.com/1883...\r\n[dbg] worker_thread(211): \r\nWifi connected.\r\n[inf] _TLSConnectNetwork(357):   . Setting up the SSL/TLS structure...\r\n[inf] _TLSConnectNetwork(367):  ok\r\n[inf] _TLSConnectNetwork(402): Performing the SSL/TLS handshake...\r\n[007750]<D> The uri is /sys/awss/event/connectap/notify\r\n[007750]<D> path: sys,len=3\r\n[007750]<D> path: awss,len=4\r\n[007750]<D> path: event,len=5\r\n[007750]<D> path: connectap,len=9\r\n[007750]<D> path: notify,len=6\r\n[007750]<D> Add message id 2 len 315 to the list\r\n[007760]<D> *********Message Info**********\r\n[007760]<D> Version     : 1\r\n[007760]<D> Code        : 0x2\r\n[007760]<D> Type        : 0x1\r\n[007760]<D> Msgid       : 2\r\n[007760]<D> Option      : 6\r\n[007760]<D> Payload Len : 272\r\n[007760]<D> Token Len   : 4\r\n[007760]<D> Token       : 05030201\r\n[007760]<D> Remote      : 255.255.255.255:5683\r\n[007760]<D> ********************************\r\n[008410]<D> The uri is /sys/awss/event/connectap/notify\r\n[008410]<D> path: sys,len=3\r\n[008410]<D> path: awss,len=4\r\n[008410]<D> path: event,len=5\r\n[008410]<D> path: connectap,len=9\r\n[008410]<D> path: notify,len=6\r\n[008420]<D> Add message id 3 len 315 to the list\r\n[008420]<D> *********Message Info**********\r\n[008420]<D> Version     : 1\r\n[008420]<D> Code        : 0x2\r\n[008420]<D> Type        : 0x1\r\n[008420]<D> Msgid       : 3\r\n[008420]<D> Option      : 6\r\n[008420]<D> Payload Len : 272\r\n[008420]<D> Token Len   : 4\r\n[008420]<D> Token       : 06030201\r\n[008420]<D> Remote      : 255.255.255.255:5683\r\n[008420]<D> ********************************\r\n[008730]<D> The uri is /sys/awss/event/connectap/notify\r\n[008730]<D> path: sys,len=3\r\n[008730]<D> path: awss,len=4\r\n[008730]<D> path: event,len=5\r\n[008730]<D> path: connectap,len=9\r\n[008730]<D> path: notify,len=6\r\n[008740]<D> Add message id 4 len 315 to the list\r\n[008740]<D> *********Message Info**********\r\n[008740]<D> Version     : 1\r\n[008740]<D> Code        : 0x2\r\n[008740]<D> Type        : 0x1\r\n[008740]<D> Msgid       : 4\r\n[008740]<D> Option      : 6\r\n[008740]<D> Payload Len : 272\r\n[008740]<D> Token Len   : 4\r\n[008740]<D> Token       : 07030201\r\n[008740]<D> Remote      : 255.255.255.255:5683\r\n[008740]<D> ********************************\r\n[inf] _TLSConnectNetwork(410):  ok\r\n[inf] _TLSConnectNetwork(414):   . Verifying peer X.509 certificate..\r\n[inf] _real_confirm(93): certificate verification result: 0x00\r\n[inf] iotx_mc_connect(2074): mqtt connect success!\r\n[dbg] iotx_mc_report_mid(2308): MID Report: started in MQTT\r\n[dbg] iotx_mc_report_mid(2325): MID Report: json data = '{\"id\":\"a1wPbk25xNg_shendeng1_mid\",\"params\":{\"_sys_device_mid\":\"GeneralID\",\"_sys_device_pid\":\"AliOSThings\"}}'\r\n[dbg] iotx_mc_report_mid(2341): MID Report: topic name = '/sys/a1wPbk25xNg/shendeng1/thing/status/update'\r\n[dbg] iotx_mc_report_mid(2358): MID Report: finished, IOT_MQTT_Publish() = 0\r\n\u001b[0;33mlinked_list_insert@line101\t:linked list(cm connectivity list) insert node@3fff8858,size:2\r\n\u001b[0m[inf] IOT_ALCS_Construct(305): IOT_ALCS_Construct enter\r\n[inf] iotx_alcs_adapter_init(218): iotx_alcs_adapter_init\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/lan/prefix/get_reply!\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/lan/prefix/update!\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/lan/blacklist/update!\r\n[inf] alcs_mqtt_prefixkey_update(330): start alcs_prefixkey_update\r\n\r\n[inf] __alcs_mqtt_kv_get(60): ALCS KV Get, Key: prefix\r\n[inf] __alcs_mqtt_kv_get(60): ALCS KV Get, Key: deviceSecret\r\n[inf] alcs_mqtt_prefixkey_update(334): The prefix is  , deviceSecret is \r\n[inf] __alcs_mqtt_kv_get(60): ALCS KV Get, Key: blacklist\r\n[inf] alcs_mqtt_blacklist_update(310): The blacklist is \r\n[err] alcs_prefixkey_get(366): ALCS Prefix Get, Topic: /sys/a1wPbk25xNg/shendeng1/thing/lan/prefix/get, Payload: {\"id\":\"0\",\"version\":\"1.0\",\"params\":\"{}\",\"method\":\"thing.lan.prefix.get\"}\r\n\r\ncm_event_handler:\r\n###\r\ndm_cm_impl_regist: uri: /sys/a1wPbk25xNg/shendeng1/thing/enable\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/enable!\r\n[dbg] dm_cm_impl_regist(110): ret = IOT_CM_Register() = 0\r\n\r\ndm_cm_impl_regist: uri: /sys/a1wPbk25xNg/shendeng1/thing/delete\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/delete!\r\n[dbg] dm_cm_impl_regist(110): ret = IOT_CM_Register() = 0\r\n\r\ndm_cm_impl_regist: uri: /sys/a1wPbk25xNg/shendeng1/thing/disable\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/disable!\r\n[dbg] dm_cm_impl_regist(110): ret = IOT_CM_Register() = 0\r\n\r\ndm_cm_impl_regist: uri: /sys/a1wPbk25xNg/shendeng1/thing/dsltemplate/get_reply\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/dsltemplate/get_reply!\r\n[dbg] dm_cm_impl_regist(110): ret = IOT_CM_Register() = 0\r\n\r\ndm_cm_impl_regist: uri: /sys/a1wPbk25xNg/shendeng1/thing/model/down_raw\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/model/down_raw!\r\n[dbg] dm_cm_impl_regist(110): ret = IOT_CM_Register() = 0\r\n\r\ndm_cm_impl_regist: uri: /sys/a1wPbk25xNg/shendeng1/thing/model/up_raw_reply\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/model/up_raw_reply!\r\n[dbg] dm_cm_impl_regist(110): ret = IOT_CM_Register() = 0\r\n\r\nslist(cm message info param list) cleared\r\n\r\nrequest params:\r\n{}\r\n\r\n[inf] iotx_cm_parse_message(1181): payload length = 86\r\n[dbg] dm_cm_impl_send(176): ret = IOT_CM_Send() = 0\r\n\r\nslist(cm message info param list) cleared\r\n\r\n---------------\r\nsubmit an item to queue @3fffade0.\r\n---------------\r\n\r\nevent 0(cloud connected)\r\n###\r\n\r\ncm_event_handler:\r\n###\r\ndm_cm_impl_add_service: uri: /sys/a1wPbk25xNg/shendeng1/thing/enable\r\n[inf] IOT_ALCS_Register_Resource(526): alcs register resource, uri:/sys/a1wPbk25xNg/shendeng1/thing/enable\r\n[dbg] dm_cm_impl_add_service(205): ret = IOT_CM_Add_Service() = 0\r\n\r\ndm_cm_impl_add_service: uri: /sys/a1wPbk25xNg/shendeng1/thing/delete\r\n[inf] IOT_ALCS_Register_Resource(526): alcs register resource, uri:/sys/a1wPbk25xNg/shendeng1/thing/delete\r\n[dbg] dm_cm_impl_add_service(205): ret = IOT_CM_Add_Service() = 0\r\n\r\ndm_cm_impl_add_service: uri: /sys/a1wPbk25xNg/shendeng1/thing/disable\r\n[inf] IOT_ALCS_Register_Resource(526): alcs register resource, uri:/sys/a1wPbk25xNg/shendeng1/thing/disable\r\n[dbg] dm_cm_impl_add_service(205): ret = IOT_CM_Add_Service() = 0\r\n\r\n\r\n---------------\r\nsubmit an item to queue @3fffaf38.\r\n---------------\r\n\r\nevent 3(local connected)\r\n###\r\n[dbg] dm_cm_impl_init(62): ret = IOT_CM_Init() = 0\r\n\r\ndm_cm_impl_add_service: uri: /dev/core/service/dev\r\n[inf] IOT_ALCS_Register_Resource(526): alcs register resource, uri:/dev/core/service/dev\r\n[dbg] dm_cm_impl_add_service(205): ret = IOT_CM_Add_Service() = 0\r\n\r\ndm_thg_mng_cls constructed @3fff83c8\r\ndm_impl_cls constructed @3fff2388\r\n[009220]<D> The uri is /sys/awss/event/connectap/notify\r\n[009220]<D> path: sys,len=3\r\n[009220]<D> path: awss,len=4\r\n[009220]<D> path: event,len=5\r\n[009220]<D> path: connectap,len=9\r\n[009220]<D> path: notify,len=6\r\n[009220]<D> Add message id 5 len 315 to the list\r\n[009220]<D> *********Message Info**********\r\n[009220]<D> Version     : 1\r\n[009230]<D> Code        : 0x2\r\n[009230]<D> Type        : 0x1\r\n[009230]<D> Msgid       : 5\r\n[009230]<D> Option      : 6\r\n[009230]<D> Payload Len : 272\r\n[009230]<D> Token Len   : 4\r\n[009230]<D> Token       : 08030201\r\n[009230]<D> Remote      : 255.255.255.255:5683\r\n[009230]<D> ********************************\r\n[dbg] iotx_mc_cycle(1280): SUBACK\r\n[inf] iotx_cloud_conn_mqtt_event_handle(190): event_type 3\r\n[inf] iotx_cloud_conn_mqtt_event_handle(224): subscribe success, packet-id=7\r\n[inf] iotx_cm_cloud_conn_response_callback(112): rsp_type 1\r\n\r\ncm_event_handler:\r\n###\r\n[inf] dm_cm_event_handler(289): register result:\tresult: 0(success)\tURI: /sys/a1wPbk25xNg/shendeng1/thing/disable\t\r\n\r\nevent 20(register result)\r\n###\r\n[dbg] iotx_mc_cycle(1280): SUBACK\r\n[inf] iotx_cloud_conn_mqtt_event_handle(190): event_type 3\r\n[inf] iotx_cloud_conn_mqtt_event_handle(224): subscribe success, packet-id=1\r\n[dbg] iotx_mc_cycle(1280): SUBACK\r\n[inf] iotx_cloud_conn_mqtt_event_handle(190): event_type 3\r\n[inf] iotx_cloud_conn_mqtt_event_handle(224): subscribe success, packet-id=3\r\n[dbg] iotx_mc_cycle(1280): SUBACK\r\n[err] iotx_mc_handle_recv_SUBACK(1031): There is a identical topic and related handle in list!\r\n[inf] iotx_cloud_conn_mqtt_event_handle(190): event_type 3\r\n[inf] iotx_cloud_conn_mqtt_event_handle(224): subscribe success, packet-id=5\r\n[inf] iotx_cm_cloud_conn_response_callback(112): rsp_type 1\r\n\r\ncm_event_handler:\r\n###\r\n[inf] dm_cm_event_handler(289): register result:\tresult: 0(success)\tURI: /sys/a1wPbk25xNg/shendeng1/thing/enable\t\r\n\r\nevent 20(register result)\r\n###\r\n[dbg] iotx_mc_cycle(1271): PUBACK\r\n[inf] iotx_cloud_conn_mqtt_event_handle(190): event_type 9\r\n\u001b[0;32mon_connect@line93:\tcloud is connected\r\n\u001b[0m\u001b[0;32mon_connect@line93:\tlocal is connected\r\n\u001b[0m[dbg] iotx_mc_cycle(1280): SUBACK\r\n[inf] iotx_cloud_conn_mqtt_event_handle(190): event_type 3\r\n[inf] iotx_cloud_conn_mqtt_event_handle(224): subscribe success, packet-id=2\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /ota/device/upgrade/a1wPbk25xNg/shendeng1!\r\n[009340]<V> cur str=1.3.1\r\n[009340]<V> os ver=1.3.1.0\r\n\r\n[009340]<V> mac=ec.fa.bc.1f.28.f3\r\n\r\n[009340]<V> random =70cbe039\r\n\r\n[009350]<V> -----------------\r\n\r\n[009350]<V> after aos_get_version_info output:\r\n\r\n[009350]<V> 0103010086A14EE2ECFABC1F28F30000000000001123314086A14EE2FCDA8C5F28F3000010203040\r\n\r\n[009350]<V> -----------------\r\n\r\n--- public topic=/sys/a1wPbk25xNg/shendeng1/thing/deviceinfo/update ,payload={\"id\":1,\"version\":\"1.0\",\"params\":[{\"attrKey\":\"SYS_ALIOS_ACTIVATION\",\"attrValue\":\"0103010086A14EE2ECFABC1F28F30000000000001123314086A14EE2FCDA8C5F28F3000010203040\"}],\"method\":\"thing.deviceinfo.update\"}\r\n[009360]<V> cloud_service_event 4\r\n[009370]<V> user sub and pub here\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/awss/enrollee/checkin!\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/awss/enrollee/found_reply!\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/cipher/get_reply!\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/awss/enrollee/match_reply!\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/reset_reply!\r\n[inf] iotx_mc_subscribe(1399): mqtt subscribe success,topic = /sys/a1wPbk25xNg/shendeng1/thing/awss/device/switchap!\r\n[dbg] iotx_mc_cycle(1280): SUBACK\r\n[err] iotx_mc_handle_recv_SUBACK(1031): There is a identical topic and related handle in list!\r\n[inf] iotx_cloud_conn_mqtt_event_handle(190): event_type 3\r\n[inf] iotx_cloud_conn_mqtt_event_handle(224): subscribe success, packet-id=8\r\n[inf] iotx_cm_cloud_conn_response_callback(112): rsp_type 1\r\n\r\ncm_event_handler:\r\n###\r\n[inf] dm_cm_event_handler(289): register result:\tresult: 0(success)\tURI: /sys/a1wPbk25xNg/shendeng1/thing/dsltemplate/get_reply\t\r\n\r\nevent 20(register result)\r\n###\r\n[009440]<V> cloud_service_event 4\r\n[009440]<V> user sub and pub here\r\n[dbg] iotx_mc_cycle(1280): SUBACK\r\n[err] iotx_mc_handle_recv_SUBACK(1031): There is a identical topic and related handle in list!\r\n[inf] iotx_cloud_conn_mqtt_event_handle(190): event_type 3\r\n[inf] iotx_cloud_conn_mqtt_event_handle(224): subscribe success, packet-id=6\r\n[inf] iotx_cm_cloud_conn_response_callback(112): rsp_type 1\r\n\r\ncm_event_handler:\r\n###\r\n[inf] dm_cm_event_handler(289): register result:\tresult: 0(success)\tURI: /sys/a1wPbk25xNg/shendeng1/thing/delete\t\r\n\r\nevent 20(register result)\r\n###\r\n[dbg] iotx_mc_cycle(1288): PUBLISH\r\n[dbg] iotx_mc_handle_recv_PUBLISH(1122): delivering msg ...\r\n[dbg] iotx_mc_deliver_message(877): topic be matched\r\n[inf] __alcs_mqtt_subscribe_callback(87): Receivce Message, Topic: /sys/a1wPbk25xNg/shendeng1/thing/lan/prefix/get_reply\r\n[inf] __alcs_mqtt_kv_set(51): ALCS KV Set, Key: prefix, Val: G7QBQMAt\",\"productKey\":\"a1wPbk25xNg\",\"deviceName\":\"shendeng1\"},\"id\":\"0\",\"message\":\"success\",\"method\":\"thing.lan.prefix.get\",\"version\":\"1.0\"}, Len: 8\r\n[inf] __alcs_mqtt_kv_set(51): ALCS KV Set, Key: deviceSecret, Val: o7az8nSTF5uR8gDY9OdUKYqUSzGnVI6I\",\"prefix\":\"G7QBQMAt\",\"productKey\":\"a1wPbk25xNg\",\"deviceName\":\"shendeng1\"},\"id\":\"0\",\"message\":\"success\",\"method\":\"thing.lan.prefix.get\",\"version\":\"1.0\"}, Len: 32\r\n[dbg] iotx_mc_cycle(1280): SUBACK\r\n[err] iotx_mc_handle_recv_SUBACK(1031): There is a identical topic and related handle in list!\r\n[inf] iotx_cloud_conn_mqtt_event_handle(190): event_type 3\r\n[inf] iotx_cloud_conn_mqtt_event_handle(224): subscribe success, packet-id=9\r\n[inf] iotx_cm_cloud_conn_response_callback(112): rsp_type 1\r\n\r\ncm_event_handler:\r\n###\r\n[inf] dm_cm_event_handler(289): register result:\tresult: 0(success)\tURI: /sys/a1wPbk25xNg/shendeng1/thing/model/down_raw\t\r\n\r\nevent 20(register result)\r\n###\r\n[dbg] iotx_mc_cycle(1280): SUBACK\r\n[err] iotx_mc_handle_recv_SUBACK(1031): There is a identical topic and related handle in list!\r\n[inf] iotx_cloud_conn_mqtt_event_handle(190): event_type 3\r\n[inf] iotx_cloud_conn_mqtt_event_handle(224): subscribe success, packet-id=10\r\n[inf] iotx_cm_cloud_conn_response_callback(112): rsp_type 1\r\n\r\ncm_event_handler:\r\n###\r\n[inf] dm_cm_event_handler(289): register result:\tresult: 0(success)\tURI: /sys/a1wPbk25xNg/shendeng1/thing/model/up_raw_reply\t\r\n\r\nevent 20(register result)\r\n###\r\n[inf] _network_ssl_read(459): ssl recv error: code = -29184, err_str = '?'\r\n[dbg] iotx_mc_read_packet(751): mqtt read error, rc=-1\r\n[dbg] iotx_mc_cycle(1250): readPacket error,result = -1\r\n[009750]<D> The uri is /sys/awss/event/connectap/notify\r\n[009750]<D> path: sys,len=3\r\n[009750]<D> path: awss,len=4\r\n[009750]<D> path: event,len=5\r\n[009750]<D> path: connectap,len=9\r\n[009750]<D> path: notify,len=6\r\n[009760]<D> Add message id 6 len 315 to the list\r\n[009760]<D> *********Message Info**********\r\n[009760]<D> Version     : 1\r\n[009760]<D> Code        : 0x2\r\n[009760]<D> Type        : 0x1\r\n[009760]<D> Msgid       : 6\r\n[009760]<D> Option      : 6\r\n[009760]<D> Payload Len : 272\r\n[009760]<D> Token Len   : 4\r\n[009770]<D> Token       : 09030201\r\n[009770]<D> Remote      : 255.255.255.255:5683\r\n[009770]<D> ********************************\r\n[010370]<D> The uri is /sys/awss/event/connectap/notify\r\n[010370]<D> path: sys,len=3\r\n[010370]<D> path: awss,len=4\r\n[010370]<D> path: event,len=5\r\n[010370]<D> path: connectap,len=9\r\n[010370]<D> path: notify,len=6\r\n[010380]<D> Add message id 7 len 315 to the list\r\n[010380]<D> *********Message Info**********\r\n[010380]<D> Version     : 1\r\n[010380]<D> Code        : 0x2\r\n[010380]<D> Type        : 0x1\r\n[010380]<D> Msgid       : 7\r\n[010380]<D> Option      : 6\r\n[010380]<D> Payload Len : 272\r\n[010380]<D> Token Len   : 4\r\n[010380]<D> Token       : 0A030201\r\n[010390]<D> Remote      : 255.255.255.255:5683\r\n[010390]<D> ********************************",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/600/comments",
    "author": "alexwjye",
    "comments": [
      {
        "user": "YeFly9",
        "created_at": "2019-01-16T08:53:30Z",
        "body": "请问一下您的问题解决了吗？使用的是什么例程，能分享学习一下吗？"
      }
    ]
  },
  {
    "number": 598,
    "title": "aos make linkkitapp@mk3239编译有问题，请求协助下",
    "created_at": "2018-09-19T08:44:00Z",
    "closed_at": "2022-03-01T11:51:20Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/598",
    "body": "**Describe the bug**\r\n\r\n\r\n**environment**\r\n1. branch(version): \r\n2. Desktop OS(windows linux or macOS):\r\n3. example: \r\n\r\n**Expected behavior**\r\n\r\n\r\n**Screenshots**\r\n\r\n\r\n**Additional context**\r\n",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/598/comments",
    "author": "QiJiaHai",
    "comments": [
      {
        "user": "QiJiaHai",
        "created_at": "2018-09-19T08:45:51Z",
        "body": "主分支不行，然后切到1.3.3还是不行 windows电脑开发的"
      },
      {
        "user": "QiJiaHai",
        "created_at": "2018-09-19T08:47:58Z",
        "body": "> Executing task: aos make linkkitapp@mk3239 <\r\n\r\naos-cube version: 0.2.59\r\nCheck if required tools for mk3239 exist\r\nBuild AOS Now\r\nTOOLCHAIN_PATH=C:/Users/qijiahai/Desktop/wulian/alios-things-AliOS-Things-rel_1.3.3/AliOS-Things/build/compiler/gcc-arm-none-eabi/Win32/bin/\r\nComponents: linkkitapp board_mk3239 stm32f4xx vcall kernel_init auto_component linkkit_sdk iotx-hal netmgr framework libywss uOTA cjson cli armv7m newlib_stub rhino mbedtls digest_algorithm Lib_SPI_Flash_Library net STM32F4xx_Peripheral_Drivers activation chip_code kv yloop hal alicrypto STM32F4xx_Peripheral_Libraries log vfs vfs_device\r\nSkipping building bootloader due to \\\"total\\\" is not set\r\n\r\nprocess_begin: CreateProcess(NULL, sh ././framework/protocol/linkkit/sdk/iotx_sdk_make_win.sh out/linkkitapp@mk3239/libraries ./example/linkkitapp, ...) failed.\r\nmake (e=2): 系统找不到指定的文件。\r\nmake.exe[1]: *** [build/aos_target_build.mk:262: out/linkkitapp@mk3239/libraries/libiot_sdk.a] Error 2\r\nmake.exe[1]: *** Waiting for unfinished jobs....\r\nmake.exe: *** [build/Makefile:265: main_app] Error 2\r\n[AliOS-Things] ERROR: \"C\" returned error code 2.\r\n[AliOS-Things] ERROR: Command \"C : / U s e r s / q i j i a h a i / D e s k t o p / w u l i a n / a l i o s - t h i n g s - A l i O S - T h i n g s - r e l _ 1 . 3 . 3 / A l i O S - T h i n g s / b u i l d \\ c m d / w i n 3 2 / m a k e . e x e   H O S T _ O S = W i n 3 2   T O O L S _ R O O T = C : / U s e r s / q i j i a h a i / D e s k t o p / w u l i a n / a l i o s - t h i n g s - A l i O S - T h i n g s - r e l _ 1 . 3 . 3 / A l i O S - T h i n g s / b u i l d   - e   - f   b u i l d / M a k e f i l e   l i n k k i t a p p @ m k 3 2 3 9\" in \"C:\\Users\\qijiahai\\Desktop\\wulian\\alios-things-AliOS-Things-rel_1.3.3\\AliOS-Things\"\r\n---\r\nThe terminal process terminated with exit code: 1\r\n\r\nTerminal will be reused by tasks, press any key to close it.\r\n\r\n这个是报错日志"
      },
      {
        "user": "Ellsion",
        "created_at": "2019-06-21T05:20:49Z",
        "body": "我也遇到了同样的问题，请问您解决了吗？"
      }
    ]
  },
  {
    "number": 513,
    "title": "有大佬用过JS的UART来接收外设吗？",
    "created_at": "2018-08-27T07:24:08Z",
    "closed_at": "2022-03-01T11:48:21Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/513",
    "body": "**Describe the bug**\r\n我按照文档里给的代码来用JS来操作UART，不过这么测都是只能往外发，而不能接收，按照文档代码也不行，不知道大家是怎么接收的，能教教吗\r\n\r\n**environment**\r\n1. branch(version): \r\n2. Desktop OS(windows linux or macOS):\r\n3. example: \r\n\r\n**Expected behavior**\r\n\r\n\r\n**Screenshots**\r\n\r\n\r\n**Additional context**\r\n",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/513/comments",
    "author": "Zhou-JiaJun",
    "comments": [
      {
        "user": "librae8226",
        "created_at": "2018-08-29T03:29:52Z",
        "body": "@David-ZhouJiaJun \r\n板子是用的 Developer Kit? 你的 board_config.json 和 js 代码能贴出来不。如果有日志的话可以一起。"
      },
      {
        "user": "jweihsz",
        "created_at": "2018-08-29T03:48:19Z",
        "body": "@David-ZhouJiaJun \r\nhello，可以这样试试：\r\n```\r\nvar handle=UART.open('uart2');\r\nif(handle>0){\r\nvar value = UART.write(handle,'hello\\r\\n');\r\nUART.on(handle,function(data){     //监听串口数据\r\n    console.log(data);    \r\n});\r\n} else {\r\n\tconsole.log('open uart2 fail!');\r\n}\r\n```"
      },
      {
        "user": "Zhou-JiaJun",
        "created_at": "2018-08-29T03:50:36Z",
        "body": "@jweihsz 这就是和文档里的一模一样呀，我就是这样写的，但是没用，你这样试过吗？可以接收吗？我这样写的时候on的回调方法一直不执行"
      },
      {
        "user": "jweihsz",
        "created_at": "2018-08-29T04:01:26Z",
        "body": "@David-ZhouJiaJun \r\non方法如果一直没数据，那么需要核查下：hal_uart_recv_II()这个方法是否OK，如果这个这个方法OK，可以再去看module_uart.c中的uart_handle()方法，这个方法中会调用hal_uart_recv_II(),看这里是否正常。这样大致就能定位出你提到的问题。"
      },
      {
        "user": "Zhou-JiaJun",
        "created_at": "2018-08-29T04:03:25Z",
        "body": "@jweihsz 好的，主要是不想用C写，难得可以用js写"
      }
    ]
  },
  {
    "number": 489,
    "title": "ESP8266编译错误",
    "created_at": "2018-08-16T15:05:14Z",
    "closed_at": "2018-08-17T08:22:09Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/489",
    "body": "**Describe the bug**\r\nExecuting task: aos make helloworld@esp8266 <\r\n\r\naos-cube version: 0.2.50\r\nCheck if required tools for esp8266 exist\r\nMaking config file for first time\r\nprocessing components: helloworld esp8266 platform/mcu/esp8266 vcall init auto_component\r\napp_version:app-1.0.0-20180816.2301\r\nkernel_version:AOS-R-1.3.1\r\napp_version:app-1.0.0-20180816.2301\r\nkernel_version:AOS-R-1.3.1\r\nBuild AOS Now\r\nTOOLCHAIN_PATH=/Users/chenmeng/LoT/AliOS-Things/build/compiler/gcc-xtensa-lx106/OSX/bin/\r\nCompiling alicrypto\r\nCompiling auto_component\r\nCompiling cli\r\nCompiling board_esp8266\r\nCompiling framework\r\nCompiling hal\r\nCompiling helloworld\r\nCompiling kernel_init\r\nCompiling vfs_device\r\nCompiling newlib_stub\r\nCompiling log\r\nCompiling kv\r\nCompiling xtensa\r\nCompiling esp8266\r\nCompiling rhino\r\nCompiling vcall\r\nCompiling espos\r\nkernel/vcall/espos/platform/rhino/espos_queue.c: In function 'espos_queue_create':\r\nkernel/vcall/espos/platform/rhino/espos_queue.c:53:12: warning: assignment makes integer from pointer without a cast [enabled by default]\r\n     *queue = (espos_queue_t *)kqueue;\r\n            ^\r\nCompiling vfs\r\nCompiling yloop\r\nMaking out/helloworld@esp8266/ld/eagle.app.v6.new.1024.app1.ld\r\nMaking out/helloworld@esp8266/libraries/alicrypto.a\r\nMaking out/helloworld@esp8266/libraries/auto_component.a\r\nMaking out/helloworld@esp8266/libraries/cli.a\r\nMaking out/helloworld@esp8266/libraries/board_esp8266.a\r\nMaking out/helloworld@esp8266/libraries/framework.a\r\nMaking out/helloworld@esp8266/libraries/hal.a\r\nMaking out/helloworld@esp8266/libraries/helloworld.a\r\nMaking out/helloworld@esp8266/libraries/kernel_init.a\r\nMaking out/helloworld@esp8266/libraries/vfs_device.a\r\nMaking out/helloworld@esp8266/libraries/newlib_stub.a\r\nMaking out/helloworld@esp8266/libraries/log.a\r\nMaking out/helloworld@esp8266/libraries/kv.a\r\nMaking out/helloworld@esp8266/libraries/xtensa.a\r\nMaking out/helloworld@esp8266/libraries/esp8266.a\r\nMaking out/helloworld@esp8266/libraries/rhino.a\r\nMaking out/helloworld@esp8266/libraries/vcall.a\r\nMaking out/helloworld@esp8266/libraries/espos.a\r\nMaking out/helloworld@esp8266/libraries/vfs.a\r\nMaking out/helloworld@esp8266/libraries/yloop.a\r\nMaking helloworld@esp8266.elf\r\n\r\nMaking helloworld@esp8266.bin\r\nMaking helloworld@esp8266.hex\r\nno definite address hint,using default mem configuration\r\n\r\n                        AOS MEMORY MAP\r\n|=================================================================|\r\n| MODULE                                   | ROM       | RAM      |\r\n|=================================================================|\r\n| newlib_stub                              | 0         | 277      |\r\n| kv                                       | 0         | 3622     |\r\n| vcall                                    | 0         | 2686     |\r\n| kernel_init                              | 0         | 782      |\r\n| rhino                                    | 0         | 17957    |\r\n| framework                                | 0         | 382      |\r\n| vfs                                      | 0         | 3367     |\r\n| libgcc                                   | 0         | 1196     |\r\n| libmain                                  | 0         | 30187    |\r\n| libpp                                    | 0         | 62406    |\r\n| esp8266                                  | 0         | 9072     |\r\n| board_esp8266                            | 0         | 305      |\r\n| libcirom                                 | 0         | 29505    |\r\n| yloop                                    | 0         | 1396     |\r\n| libnet80211                              | 0         | 45787    |\r\n| xtensa                                   | 0         | 6863     |\r\n| libhal                                   | 0         | 37       |\r\n| log                                      | 0         | 533      |\r\n| espos                                    | 0         | 1138     |\r\n| helloworld                               | 0         | 236      |\r\n| cli                                      | 0         | 6612     |\r\n| hal                                      | 0         | 207      |\r\n| libwpa                                   | 0         | 17862    |\r\n| liblwip                                  | 0         | 39438    |\r\n| libcrypto                                | 0         | 14512    |\r\n| libphy                                   | 0         | 48619    |\r\n| *fill*                                   | 0         | 1604     |\r\n|=================================================================|\r\n| TOTAL (bytes)                            | 0         | 346588   |\r\n|=================================================================|\r\n/Users/xxxx/LoT/AliOS-Things/build/cmd/osx/dash: 1: python2: not found\r\nmv: eagle.app.flash.bin: No such file or directory\r\nBuild complete\r\nMaking .gdbinit\r\n最后无法找到文件eagle.app.flash.bin，最后binary文件夹下没有文件xxxxx@esp8266-0x1000.bin\r\n**environment**\r\n1. branch(version):  最新版本\r\n2. Desktop OS(windows linux or macOS): macOS\r\n3. example: \r\n\r\n**Expected behavior**\r\n\r\n\r\n**Screenshots**\r\n\r\n\r\n**Additional context**\r\n",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/489/comments",
    "author": "godchenmeng",
    "comments": [
      {
        "user": "librae8226",
        "created_at": "2018-08-17T06:25:35Z",
        "body": "这里面有两个问题：\r\n1. Mac 下的 python 环境没有 python2 这个东西，其实它是个软链接。\r\n    解决方法：\r\n    1) 可以直接把它链接到 python2.7\r\n    2) 修改 `platform/mcu/esp8266/gen_crc_bin.mk`: `python2` -> `python`\r\n2. 不会生成 xxx@esp8266-0x1000.bin\r\n    解决方法：修改 `site_scons/scons_upload.py`，如下\r\n````\r\ndiff --git a/site_scons/scons_upload.py b/site_scons/scons_upload.py\r\nindex ec0511b80d..417db4c97e 100755\r\n--- a/site_scons/scons_upload.py\r\n+++ b/site_scons/scons_upload.py\r\n@@ -101,7 +101,7 @@ def upload_esp8266(target, aos_path):\r\n         error('Unsupported Operating System!')\r\n     cmd = 'esptool.py'\r\n     port = miniterm.ask_for_port()\r\n-    image_path = os.path.join(os.getcwd(), 'out', target, 'binary', target + '-0x1000.bin').replace('\\\\', '/')\r\n+    image_path = os.path.join(os.getcwd(), 'out', target, 'binary', target').replace('\\\\', '/')\r\n     boot_bin_path = os.path.join(aos_path, 'platform/mcu/esp8266/bsp/boot_v1.7_921600.bin').replace('\\\\', '/')\r\n     init_bin_path = os.path.join(aos_path, 'platform/mcu/esp8266/bsp/esp_init_data_default.bin').replace('\\\\', '/')\r\n     blank_bin_path = os.path.join(aos_path, 'platform/mcu/esp8266/bsp/blank.bin').replace('\\\\', '/')\r\n````"
      },
      {
        "user": "godchenmeng",
        "created_at": "2018-08-17T08:22:09Z",
        "body": "谢谢，解决了我的问题，一切还是源于对alios-things的配置不熟悉"
      },
      {
        "user": "chenyulun",
        "created_at": "2019-01-30T07:18:01Z",
        "body": "@librae8226 \r\n后面的` ^M`什么作用？"
      },
      {
        "user": "xiaowenxia",
        "created_at": "2019-01-30T07:19:46Z",
        "body": "@chenyulun 这是换行符的问题，没有什么影响的。"
      },
      {
        "user": "librae8226",
        "created_at": "2019-01-30T07:23:05Z",
        "body": "> @librae8226\r\n> 后面的` ^M`什么作用？\r\n\r\n是文件格式的问题，为避免引起困惑，已修改，多谢提示😁"
      }
    ]
  },
  {
    "number": 487,
    "title": "ESP32 开机执行do_awss_active无法配网",
    "created_at": "2018-08-15T07:41:49Z",
    "closed_at": "2022-03-01T11:47:13Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/487",
    "body": "**Describe the bug**\r\n\r\n\r\n**environment**\r\n1. branch(version): \r\n2. Desktop OS: ubutnu 16.04\r\n3. example: \r\n\r\n**Expected behavior**\r\n代码如下：\r\n```c\r\nint application_start(int argc, char **argv)\r\n{\r\n#ifdef CSP_LINUXHOST\r\n    signal(SIGPIPE, SIG_IGN);\r\n#endif\r\n#if AOS_ATCMD\r\n    at.set_mode(ASYN);\r\n    at.init(AT_RECV_PREFIX, AT_RECV_SUCCESS_POSTFIX,\r\n            AT_RECV_FAIL_POSTFIX, AT_SEND_DELIMITER, 1000);\r\n#endif\r\n\r\n\r\n#ifdef WITH_SAL\r\n    sal_init();\r\n#endif\r\n    aos_set_log_level(AOS_LL_DEBUG);\r\n\r\n    netmgr_init();\r\n    aos_register_event_filter(EV_WIFI, wifi_service_event, NULL);\r\n#ifdef CONFIG_YWSS\r\n    aos_register_event_filter(EV_KEY, linkkit_key_process, NULL);\r\n    aos_register_event_filter(EV_YUNIO, cloud_service_event, NULL);\r\n#endif\r\n\r\n#if (defined (CONFIG_AOS_CLI) && defined (CONFIG_YWSS))\r\n    aos_cli_register_command(&resetcmd);\r\n    aos_cli_register_command(&ncmd);\r\n#endif\r\n    aos_task_new(\"netmgr\", start_netmgr, NULL, 4096);\r\n\r\n    do_awss_active();\r\n    aos_loop_run();\r\n\r\n    return 0;\r\n}\r\n```\r\n期望开机能够配网成功\r\n\r\n**Screenshots**\r\n实际情况出现如下错误：\r\nSSID: [Wxxxxx]\r\nhint frame: offset:52, F, sn:292\r\nsrc:bcec5debc2cf, bssid:fcd733ec7a14\r\n16+0 [100] 294 F 3e2\r\n16+1 [100] 295 F 123\r\n16+2 [100] 296 F 1bf\r\n16+3 [100] 297 F 220\r\n16+4 [98] 299 F 280\r\n16+5 [98] 29a F 317\r\n16+6 [98] 29b F 3aa\r\n16+7 [98] 29c F 426\r\n16+8 [98] 29d F 4a7\r\n24+0 [100] 2a1 F 3e3\r\n24+0 [100] 2ac F 3e3\r\n24+1 [100] 2ad F 119\r\n24+2 [100] 2ae F 181\r\n24+3 [100] 2af F 20f\r\n24+4 [98] 2b1 F 29d\r\n0+0 [100] 2b2 F 4e0\r\n0+0 [100] 2b3 F 4e0\r\n0+0 [100] 2b4 F 4e0\r\n0+1 [98] 2b6 F 11c\r\n0+2 [98] 2b7 F 18f\r\n0+3 [98] 2b8 F 208\r\nssid auto-complete: Wxxxxx\r\n0+4 [98] 2b9 F 28e\r\n0+5 [96] 2bb F 337\r\n                         uplimit [96] -> [98]\r\n0+6 [98] 2bc F 3d8\r\n                         uplimit [98] -> [99]\r\n0+7 [99] 2bd F 445\r\n                         uplimit [99] -> [100]\r\n0+8 [100] 2be F 4cc\r\n        enter try_to_sync_pos: data mismatch\r\n        X+8 [1] 2be F 4cc\r\n        exit try_to_sync_pos: group frame\r\n[8]=cc, [8]=4cc\r\n[24]=4a7, [8]=4cc\r\nmatch=1, match_group=8, match_end=8\r\n        X = 0, score=2, match=1, reason=3\r\n8+0 [100] 2bf F 3e1\r\n8+0 [100] 2c1 F 3e1\r\n8+1 [100] 2c2 F 149\r\n8+2 [100] 2c3 F 1c6\r\n8+3 [100] 2c4 F 245\r\n8+4 [98] 2c6 F 291\r\n                         uplimit [98] -> [99]\r\n8+5 [99] 2c7 F 33b\r\n8+6 [99] 2c8 F 382\r\n8+7 [99] 2c9 F 404\r\n8+8 [99] 2ca F 4ac\r\n\r\n\r\n62 65 65 62 65 65 65 65\r\n65 65 65 65 63 63 63 63\r\n64 64 64 62 62 62 62 62\r\n64 64 64 62\r\n\r\n␛[32m1c ␛[32m0f ␛[32m08 ␛[32m0e ␛[32m37 ␛[32m58 ␛[32m45 ␛[32m4c\r\n␛[32m49 ␛[32m46 ␛[32m45 ␛[32m11 ␛[32m3b ␛[32m02 ␛[32m04 ␛[32m2c\r\n␛[32m23 ␛[32m3f ␛[32m20 ␛[32m00 ␛[32m17 ␛[32m2a ␛[32m26 ␛[32m27\r\n␛[32m19 ␛[32m01 ␛[32m0f ␛[32m1d\r\n\r\n**Additional context**\r\n",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/487/comments",
    "author": "fanday",
    "comments": [
      {
        "user": "librae8226",
        "created_at": "2018-08-17T06:29:56Z",
        "body": "请问是否有在 APP 端正确触发配网行为？"
      },
      {
        "user": "fanday",
        "created_at": "2018-08-20T00:38:47Z",
        "body": "目前是采用智能家居App扫描平台上的配网二维码，进入配网模式的，请问还需要额外的操作吗？"
      },
      {
        "user": "librae8226",
        "created_at": "2018-08-24T06:52:12Z",
        "body": "@fanday `do_awss_active();` 放在 start_netmgr 之前试试"
      },
      {
        "user": "librae8226",
        "created_at": "2018-08-24T07:15:45Z",
        "body": "另外如果四元组信息不对，可能导致密码无法解出，请确认四元组信息。"
      },
      {
        "user": "fanday",
        "created_at": "2018-09-03T00:47:07Z",
        "body": "@librae8226 Release 1.3.3版本可以正常配网，谢谢支持。"
      }
    ]
  },
  {
    "number": 485,
    "title": "编译tinyengine_app@esp8266时mqtt模块报错",
    "created_at": "2018-08-14T15:17:39Z",
    "closed_at": "2022-03-01T11:47:07Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/485",
    "body": "编译tinyengine_app@esp8266时mqtt模块报错\r\n同样的方式编译esp32正常\r\n求助，谢谢\r\n```bash\r\n$ aos make tinyengine_app@esp8266\r\naos-cube version: 0.2.49\r\nCheck if required tools for esp8266 exist\r\nMaking config file for first time\r\nprocessing components: tinyengine_app esp8266 platform/mcu/esp8266 vcall init auto_component\r\napp_version:app-1.0.0-20180814.2312\r\nframework/tinyengine/tinyengine.mk:59: BUILD_TYPE=release_log \r\nframework/tinyengine/tinyengine.mk:60: tiny_engine_BUILD_TYPE= \r\nframework/tinyengine/tinyengine.mk:61: HOST_ARCH=xtensa \r\nframework/tinyengine/tinyengine.mk:62: CONFIG_SYSINFO_PRODUCT_MODEL=ALI_AOS_ESP8266 \r\nkernel_version:AOS-R-1.3.1\r\napp_version:app-1.0.0-20180814.2312\r\nframework/tinyengine/tinyengine.mk:59: BUILD_TYPE=release_log \r\nframework/tinyengine/tinyengine.mk:60: tiny_engine_BUILD_TYPE= \r\nframework/tinyengine/tinyengine.mk:61: HOST_ARCH=xtensa \r\nframework/tinyengine/tinyengine.mk:62: CONFIG_SYSINFO_PRODUCT_MODEL=ALI_AOS_ESP8266 \r\nkernel_version:AOS-R-1.3.1\r\nBuild AOS Now\r\nTOOLCHAIN_PATH=/Users/ZDF/Workspace/Git/AliOS-Things/build/compiler/gcc-xtensa-lx106/OSX/bin/\r\nCompiling spiffs\r\nCompiling alicrypto\r\nCompiling auto_component\r\nCompiling base64\r\nCompiling cjson\r\nCompiling cli\r\nCompiling mqtt\r\nIn file included from ./include/aos/aos.h:18:0,\r\n                 from framework/connectivity/mqtt/mqtt_client.c:41:\r\n./include/aos/list.h:162:0: warning: \"list_entry\" redefined [enabled by default]\r\n #define list_entry(ptr, type, member) \\\r\n ^\r\nIn file included from ./framework/protocol/linkkit/iotkit/base/utils/LITE-utils/src/lite-utils.h:33:0,\r\n                 from framework/connectivity/mqtt/mqtt_client.c:26:\r\n./framework/protocol/linkkit/iotkit/base/utils/LITE-utils/src/lite-list.h:248:0: note: this is the location of the previous definition\r\n #define list_entry(ptr, type, member) \\\r\n ^\r\nCompiling MQTTPacket\r\nCompiling digest_algorithm\r\nCompiling board_esp8266\r\nCompiling fota\r\nCompiling fota_download\r\nCompiling download_http\r\nCompiling socket_stand\r\nCompiling fota_platform\r\nCompiling fota_mqtt_transport\r\nframework/fota/platform/mqtt/ota_transport.c: In function 'ota_mqtt_publish':\r\nframework/fota/platform/mqtt/ota_transport.c:106:5: warning: passing argument 3 of 'mqtt_publish' discards 'const' qualifier from pointer target type [enabled by default]\r\n     ret =  mqtt_publish(topic_name, 1, msg, strlen(msg) + 1);\r\n     ^\r\nIn file included from framework/fota/platform/mqtt/ota_transport.c:17:0:\r\n./framework/connectivity/mqtt/./mqtt_instance.h:125:5: note: expected 'void *' but argument is of type 'const char *'\r\n int mqtt_publish(char *topic, int qos, void *data, int len);\r\n     ^\r\nCompiling framework\r\nframework/fota/platform/mqtt/version_report.c: In function 'active_publish':\r\nframework/fota/platform/mqtt/version_report.c:102:5: warning: passing argument 3 of 'mqtt_publish' discards 'const' qualifier from pointer target type [enabled by default]\r\n     ret =  mqtt_publish(topic_name, 1, msg, strlen(msg) + 1);\r\n     ^\r\nIn file included from framework/fota/platform/mqtt/version_report.c:13:0:\r\n./framework/connectivity/mqtt/./mqtt_instance.h:125:5: note: expected 'void *' but argument is of type 'const char *'\r\n int mqtt_publish(char *topic, int qos, void *data, int len);\r\n     ^\r\nCompiling tiny_engine\r\nframework/tinyengine/bone-framwork/bone-engine/jse/be_jse_symbol.c: In function '_new_func_code_symbol':\r\nframework/tinyengine/bone-framwork/bone-engine/jse/be_jse_symbol.c:469:17: warning: initialization discards 'const' qualifier from pointer target type [enabled by default]\r\n     char* ptr = lex->src+charFrom;\r\n                 ^\r\nIn file included from ././framework/tinyengine/bone-framwork/common/inc/utils/be_common.h:18:0,\r\n                 from ././framework/tinyengine/bone-framwork/osal/include/be_osal.h:17,\r\n                 from framework/tinyengine/bone-framwork/bone-engine/native-modules/fs/module_fs.c:10:\r\n././framework/tinyengine/bone-framwork/common/inc/utils/be_list.h:85:0: warning: \"list_entry\" redefined [enabled by default]\r\n #define list_entry(ptr, type, field) container_of(ptr, type, field)\r\n ^\r\nIn file included from ./include/aos/aos.h:18:0,\r\n                 from ./include/hal/base.h:8,\r\n                 from ././framework/tinyengine/../../include/hal/hal.h:11,\r\n                 from framework/tinyengine/bone-framwork/bone-engine/native-modules/fs/module_fs.c:7:\r\n./include/aos/list.h:162:0: note: this is the location of the previous definition\r\n #define list_entry(ptr, type, member) \\\r\n ^\r\nIn file included from ././framework/tinyengine/bone-framwork/common/inc/utils/be_common.h:18:0,\r\n                 from ././framework/tinyengine/bone-framwork/osal/include/be_osal.h:17,\r\n                 from framework/tinyengine/bone-framwork/bone-engine/native-modules/http/module_http.c:17:\r\n././framework/tinyengine/bone-framwork/common/inc/utils/be_list.h:85:0: warning: \"list_entry\" redefined [enabled by default]\r\n #define list_entry(ptr, type, field) container_of(ptr, type, field)\r\n ^\r\nIn file included from ./include/aos/aos.h:18:0,\r\n                 from ./include/hal/base.h:8,\r\n                 from ././framework/tinyengine/../../include/hal/hal.h:11,\r\n                 from framework/tinyengine/bone-framwork/bone-engine/native-modules/http/module_http.c:8:\r\n./include/aos/list.h:162:0: note: this is the location of the previous definition\r\n #define list_entry(ptr, type, member) \\\r\n ^\r\nIn file included from ./include/aos/aos.h:18:0,\r\n                 from ./include/hal/base.h:8,\r\n                 from ././framework/tinyengine/../../include/hal/hal.h:11,\r\n                 from framework/tinyengine/bone-framwork/bone-engine/native-modules/js-lite/module_timers.c:9:\r\n./include/aos/list.h:162:0: warning: \"list_entry\" redefined [enabled by default]\r\n #define list_entry(ptr, type, member) \\\r\n ^\r\nIn file included from ././framework/tinyengine/bone-framwork/common/inc/utils/be_common.h:18:0,\r\n                 from ././framework/tinyengine/bone-framwork/osal/include/be_osal.h:17,\r\n                 from framework/tinyengine/bone-framwork/bone-engine/native-modules/js-lite/module_timers.c:7:\r\n././framework/tinyengine/bone-framwork/common/inc/utils/be_list.h:85:0: note: this is the location of the previous definition\r\n #define list_entry(ptr, type, field) container_of(ptr, type, field)\r\n ^\r\nIn file included from ./include/aos/aos.h:18:0,\r\n                 from ./include/hal/base.h:8,\r\n                 from ././framework/tinyengine/../../include/hal/hal.h:11,\r\n                 from framework/tinyengine/bone-framwork/bone-engine/native-modules/js-lite/module_process.c:9:\r\n./include/aos/list.h:162:0: warning: \"list_entry\" redefined [enabled by default]\r\n #define list_entry(ptr, type, member) \\\r\n ^\r\nIn file included from ././framework/tinyengine/bone-framwork/common/inc/utils/be_common.h:18:0,\r\n                 from ././framework/tinyengine/bone-framwork/osal/include/be_osal.h:17,\r\n                 from framework/tinyengine/bone-framwork/bone-engine/native-modules/js-lite/module_process.c:7:\r\n././framework/tinyengine/bone-framwork/common/inc/utils/be_list.h:85:0: note: this is the location of the previous definition\r\n #define list_entry(ptr, type, field) container_of(ptr, type, field)\r\n ^\r\nframework/tinyengine/bone-framwork/bone-engine/native-modules/mqtt/module_mqtt.c: In function 'module_handle_cb':\r\nframework/tinyengine/bone-framwork/bone-engine/native-modules/mqtt/module_mqtt.c:181:13: error: 'for' loop initial declarations are only allowed in C99 mode\r\n             for (int i = 0; i < sizeof(k_ipad); i++)\r\n             ^\r\nframework/tinyengine/bone-framwork/bone-engine/native-modules/mqtt/module_mqtt.c:181:13: note: use option -std=c99 or -std=gnu99 to compile your code\r\nframework/tinyengine/bone-framwork/bone-engine/native-modules/mqtt/module_mqtt.c:227:22: error: redefinition of 'i'\r\n             for (int i = 0; i < sizeof(out); ++i)\r\n                      ^\r\nframework/tinyengine/bone-framwork/bone-engine/native-modules/mqtt/module_mqtt.c:181:22: note: previous definition of 'i' was here\r\n             for (int i = 0; i < sizeof(k_ipad); i++)\r\n                      ^\r\nframework/tinyengine/bone-framwork/bone-engine/native-modules/mqtt/module_mqtt.c:227:13: error: 'for' loop initial declarations are only allowed in C99 mode\r\n             for (int i = 0; i < sizeof(out); ++i)\r\n             ^\r\nframework/tinyengine/bone-framwork/bone-engine/native-modules/mqtt/module_mqtt.c:233:17: error: 'for' loop initial declarations are only allowed in C99 mode\r\n                 for (int j = 0; j < 2; ++j)\r\n                 ^\r\nmake[1]: *** [out/tinyengine_app@esp8266/Modules/./framework/tinyengine/bone-framwork/bone-engine/native-modules/mqtt/module_mqtt.o] Error 1\r\nmake[1]: *** Waiting for unfinished jobs....\r\nmake: *** [main_app] Error 2\r\n[AliOS-Things] ERROR: \"/\" returned error code 2.\r\n[AliOS-Things] ERROR: Command \"/ U s e r s / Z D F / W o r k s p a c e / G i t / A l i O S - T h i n g s / b u i l d / c m d / o s x / m a k e   H O S T _ O S = O S X   T O O L S _ R O O T = / U s e r s / Z D F / W o r k s p a c e / G i t / A l i O S - T h i n g s / b u i l d   - e   - f   b u i l d / M a k e f i l e   t i n y e n g i n e _ a p p @ e s p 8 2 6 6\" in \"/Users/ZDF/Workspace/Git/AliOS-Things\"\r\n---\r\n```",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/485/comments",
    "author": "imairy",
    "comments": [
      {
        "user": "wuzhun1001",
        "created_at": "2018-08-15T01:54:58Z",
        "body": "当前官方发布版本TinyEngine仅支持MK3060，esp32devkitc，developerkit。其他版型没有验证过，如果开发者需要支持其他版型如esp8266，可自行解决相关问题。\r\n贴图中的错误是因为编译器不支持c99，需要添加编译选项。"
      },
      {
        "user": "Jianlong0430",
        "created_at": "2018-08-30T07:38:51Z",
        "body": "@wuzhun1001 能否帮忙在README.md说明下对环境的依赖关系，如已验证过的开发板。关于README.md可以参考example下面的README.md。"
      },
      {
        "user": "Jianlong0430",
        "created_at": "2018-08-30T08:17:19Z",
        "body": "@imairy ,可查看framework/tinyengine/README.md，编译固件及下载里面有写到：当前已经验证通过的版型有 mk3060，esp32devkitc，developerkit。后续在example/tinyengine_app里面会有相应的README.md。"
      }
    ]
  },
  {
    "number": 444,
    "title": "ESP8266 串口一次发送数据较多时，出现数据丢失",
    "created_at": "2018-07-26T08:37:39Z",
    "closed_at": "2022-03-01T11:45:19Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/444",
    "body": "使用cli功能时，串口助手一次性向ESP8266发送数据超过50个，ESP8266接收会出现数据丢失的现象。波特率74880。",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/444/comments",
    "author": "xuruijuangood",
    "comments": [
      {
        "user": "braveheart007",
        "created_at": "2018-09-12T01:55:23Z",
        "body": "CLI是不是相当于8266的AT指令呢？"
      }
    ]
  },
  {
    "number": 393,
    "title": "linkkitapp@developerkit无法连上阿里云",
    "created_at": "2018-07-03T05:37:48Z",
    "closed_at": "2022-03-01T11:43:48Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/393",
    "body": "```\r\n[dbg] iotx_device_info_set(50): start to set device info!\r\n[dbg] iotx_device_info_set(64): device_info set successfully!\r\n[inf] IOT_MQTT_Construct(2496): mqtt version: 1.0\r\n[inf] iotx_mc_init(1753): MQTT init success!\r\n[inf] _ssl_client_init(139): Loading the CA root certificate ...\r\n[inf] _ssl_client_init(146):  ok (0 skipped)\r\n[inf] _TLSConnectNetwork(307): Connecting to /a1gtd3bHx72.iot-as-mqtt.cn-shanghai.aliyuncs.com/1883...\r\n[inf] _TLSConnectNetwork(324):   . Setting up the SSL/TLS structure...\r\n[inf] _TLSConnectNetwork(334):  ok\r\n[inf] _TLSConnectNetwork(369): Performing the SSL/TLS handshake...\r\nchan 11\r\n[inf] _TLSConnectNetwork(373): failed  ! mbedtls_ssl_handshake returned -0x2562\r\nchan 1\r\n[inf] _network_ssl_disconnect(473): need release client crt&key\r\n[inf] _network_ssl_disconnect(482): ssl_disconnect\r\n[088330]<V> IOTX_CONN_CLOUD_FAIL\r\n[inf] HAL_SSL_Destroy(512): handle is NULL\r\n[err] iotx_mc_connect(2100): TCP or TLS Connection failed\r\n[inf] HAL_SSL_GetFd(489): handle is NULL\r\n[inf] HAL_SSL_Destroy(512): handle is NULL\r\n[inf] iotx_mc_disconnect(2253): mqtt disconnect!\r\nchan 2\r\n[inf] iotx_mc_release(2299): mqtt release!\r\n[inf] iotx_cloud_conn_mqtt_init(434): MQTT construct failed\r\n\u001b[0;33mlinked_list_insert@line127\t:linked list(cm connectivity list) insert node@0x2000a950,size:2\r\n\u001b[0m[inf] IOT_ALCS_Construct(558): IOT_ALCS_Construct enter\r\n[inf] iotx_alcs_adapter_init(313): iotx_alcs_adapter_init\r\n```\r\nlog出来发现是[inf] _TLSConnectNetwork(373): failed  ! mbedtls_ssl_handshake returned -0x2562这里出错了",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/393/comments",
    "author": "Bloodance",
    "comments": [
      {
        "user": "submarinezy",
        "created_at": "2018-07-29T14:33:51Z",
        "body": "问题解决了吗？"
      }
    ]
  },
  {
    "number": 377,
    "title": "Developer Kit默认程序怎么烧录？",
    "created_at": "2018-06-26T03:55:45Z",
    "closed_at": "2022-03-01T11:43:06Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/377",
    "body": "如题？谢谢！",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/377/comments",
    "author": "huangguozhen",
    "comments": [
      {
        "user": "msbtx",
        "created_at": "2018-06-26T05:42:42Z",
        "body": "请扫描天猫旗舰店二维码，加入钉钉群或者qq群，群内有提供出厂bin文件"
      }
    ]
  },
  {
    "number": 345,
    "title": "example中deviceIO例程无法运行",
    "created_at": "2018-06-13T03:31:57Z",
    "closed_at": "2022-03-01T11:42:06Z",
    "labels": [
      "help wanted",
      "improvement"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/345",
    "body": "没有.mk文件，自己补充了.mk后，又报头文件找不到。请帮忙完善下demo",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/345/comments",
    "author": "tomly",
    "comments": [
      {
        "user": "librae8226",
        "created_at": "2018-06-13T09:59:03Z",
        "body": "想了解什么内容呢？如果其他example里有的话也可以先参考下的"
      },
      {
        "user": "jason-sophia",
        "created_at": "2018-06-13T10:26:57Z",
        "body": "deviceIO是keil工程下的demo，对应到project/Keil/STM32L496G-Discovery/device_io目录的keil工程，后续我们增加相应的说明"
      }
    ]
  },
  {
    "number": 326,
    "title": "aos-cube 依赖 scons 一直安装不成功",
    "created_at": "2018-06-04T09:30:02Z",
    "closed_at": "2022-03-01T11:41:26Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/326",
    "body": "问题描述： 环境下，`aos-cube` 依赖 `scons` 一直安装不成功，导致 `aos-cube` 无法安装，在实验用机均出现此状况。\r\n\r\n环境：OS X 10.13，Python 2.7.15, `setuptools` 39.2.0, `wheel` 0.31.1\r\n\r\n错误代码：\r\n\r\n```shell\r\nRunning setup.py install for scons ... error\r\n\r\n    Complete output from command /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -u -c \"import setuptools, tokenize;__file__='/private/tmp/pip-install-RIQgaT/scons/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /private/tmp/pip-record-pxsHqb/install-record.txt --single-version-externally-managed --compile --user --prefix=:\r\n\r\n    usage: -c [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]\r\n\r\n       or: -c --help [cmd1 cmd2 ...]\r\n\r\n       or: -c --help-commands\r\n\r\n       or: -c cmd --help\r\n  error: option --single-version-externally-managed not recognized\r\n    ----------------------------------------\r\n\r\nCommand \"/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -u -c \"import setuptools, tokenize;__file__='/private/tmp/pip-install-RIQgaT/scons/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /private/tmp/pip-record-pxsHqb/install-record.txt --single-version-externally-managed --compile --user --prefix=\" failed with error code 1 in /private/tmp/pip-install-RIQgaT/scons/\r\n```",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/326/comments",
    "author": "cxlwill",
    "comments": [
      {
        "user": "librae8226",
        "created_at": "2018-06-04T11:39:26Z",
        "body": "谢谢，很多朋友遇到了\r\n请更新下 python 的 `setuptools` 和 `wheel` 包\r\n```\r\npip install --upgrade setuptools\r\npip install --upgrade wheel\r\n```"
      },
      {
        "user": "cxlwill",
        "created_at": "2018-06-04T12:31:57Z",
        "body": "已经是最新版了，还是出错。"
      },
      {
        "user": "librae8226",
        "created_at": "2018-06-05T02:38:32Z",
        "body": "这样的话推荐使用 `virtualenv`\r\n```\r\npip install virtualenv\r\nvirtualenv ~/.virtualenvs/python-venv\r\n. ~/.virtualenvs/python-venv/bin/activate\r\npip install --upgrade setuptools\r\npip install --upgrade wheel\r\npip install aos-cube\r\n```"
      },
      {
        "user": "wgj1922",
        "created_at": "2018-06-05T22:38:05Z",
        "body": "我安装时也碰到了这个问题，按照网上给的各种方法试过，都解决不了。\r\n后来我是把安装包下载到本地安装成功的，方法如下，可以参考：\r\n* 先下载你要安装的包，并解压到磁盘下（待下载链接在执行pip install命令失败时，会打印出来，将这个链接拷贝出来，在浏览器中输入就可以直接下载本地安装包）；\r\n* 命令行方式，进入到该安装包的setup.py 目录下 ；\r\n* 执行 python setup.py build\r\n* 执行 python setup.py install"
      },
      {
        "user": "cxlwill",
        "created_at": "2018-06-11T07:33:14Z",
        "body": "@wgj1922 亲测可行，非常感谢！"
      },
      {
        "user": "laoyouji007",
        "created_at": "2018-06-19T09:49:21Z",
        "body": "@wgj1922 \r\n解压安装完scons之后，还要再次运行一下命令才行：pip install --user aos-cube  确实可行！"
      },
      {
        "user": "dupig",
        "created_at": "2018-08-10T11:34:07Z",
        "body": "在Mac上调用路径不正确会导致烧录时scons无效。解决方法是去VS终端输入which scons看看是不是在python 2.7目录下。如果是在系统的usr/local/bin目录下则在finder里删掉，然后调用路径就会更新回python 2.7的目录就OK了。"
      }
    ]
  },
  {
    "number": 283,
    "title": "linkkitapp ssl连接失败",
    "created_at": "2018-05-23T05:40:17Z",
    "closed_at": "2018-05-29T02:54:01Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/283",
    "body": "在我们自己的硬件平台上移植了Alios，包括wifi hal和sal，运行linkkitapp时发现，每次在ssl连接过程都会出错，错误表现为以下几点：\r\n1. 串口打印输出如下：可以看到在mbedtls_ssl_write_finished的时候socket意外关闭。\r\n\r\n```\r\n[inf] _TLSConnectNetwork(362):   . Setting up the SSL/TLS structure...\r\n[inf] _TLSConnectNetwork(372):  ok\r\n[inf] _TLSConnectNetwork(407): Performing the SSL/TLS handshake...\r\nmbedtls_ssl_handshake_client_step: ssl->state = 0\r\nmbedtls_ssl_handshake_client_step: ssl->state = 1\r\nmbedtls_ssl_handshake_client_step: ssl->state = 2\r\nmbedtls_ssl_handshake_client_step: ssl->state = 3\r\nmbedtls_ssl_handshake_client_step: ssl->state = 4\r\nmbedtls_ssl_handshake_client_step: ssl->state = 5\r\nmbedtls_ssl_handshake_client_step: ssl->state = 6\r\nmbedtls_ssl_handshake_client_step: ssl->state = 7\r\nmbedtls_ssl_handshake_client_step: ssl->state = 8\r\nmbedtls_ssl_handshake_client_step: ssl->state = 9\r\nmbedtls_ssl_handshake_client_step: ssl->state = 10\r\nmbedtls_ssl_handshake_client_step: ssl->state = 11\r\nSOCK_CLOSE: index 0 handle 4350332 res 0\r\nrecv failed!\r\nmbedtls_ssl_handshake_client_step: ssl->state = 12\r\n```\r\n\r\n2. 空口抓包发现，设备在发送Change Cipher Spec之后，马上会收到server发过来的TCP RST信息，导致socket关闭。\r\n3. 之前使用alinkapp的时候没有发现该问题，即ssl能够成功完成对接。对比两者（alinkapp和linkkitapp）ssl连接过程中发送的数据，也没有发现什么异常，但是linkkitapp每次都会收到TCP RST信息，导致最后ssl失败。\r\n4. alinkapp和linkkitapp使用的server是不一样的，linkkitapp的server在ssl连接过程中有什么不一样的吗？代码里是否需要什么特殊配置？\r\n\r\n谢谢！",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/283/comments",
    "author": "maggie17",
    "comments": [
      {
        "user": "Ray148289",
        "created_at": "2018-05-23T05:57:31Z",
        "body": "是否有在iot_import_product.h中修改三元组呢"
      },
      {
        "user": "maggie17",
        "created_at": "2018-05-23T07:14:20Z",
        "body": "iot_import_product.h中改了以下参数：\r\nPRODUCT_KEY\r\nPRODUCT_SECRET\r\nDEVICE_NAME\r\nDEVICE_SECRET\r\n依然会有上述问题出现"
      },
      {
        "user": "maggie17",
        "created_at": "2018-05-28T03:15:34Z",
        "body": "附上完整的串口打印信息如下：\r\n\r\n\r\n```\r\nshell> Connected to Hydra, Auth completed\r\n\r\nshell> _dhc_setip Got IP address 10.75.58.181\r\nDNS 0: 10.253.157.26\r\nDNS 1: 10.253.157.27\r\n[012300]<V> wifi_service_event config.ssid Hydra\r\nlinkkit_main@line470:   sample execution time: 1 minutes\r\nlinkkit_main@line471:   Not get tsl from cloud\r\nlog_cls constructed @0x48ac38\r\nslist_cls constructed @0x48ac58\r\nslist_cls constructed @0x48ac98\r\nslist_cls constructed @0x48acd8\r\nslist_cls constructed @0x48ad18\r\nslist_cls constructed @0x48ad58\r\nslist_cls constructed @0x48ad98\r\ncm_msg_info_cls constructed @0x494fd0\r\ndm_cm_impl_cls constructed @0x48add8\r\nslist(callback list) insert node,size:1\r\n[inf] iotx_device_info_init(40): device_info created successfully!\r\n[dbg] iotx_device_info_set(50): start to set device info!\r\n[dbg] iotx_device_info_set(64): device_info set successfully!\r\n[dbg] guider_print_dev_guider_info(248): ....................................................\r\n[dbg] guider_print_dev_guider_info(249):           ProductKey : b1OR5pgr0l4\r\n[dbg] guider_print_dev_guider_info(250):           DeviceName : u1bpUt9rkbk0m9xfKtFj\r\n[dbg] guider_print_dev_guider_info(251):             DeviceID : b1OR5pgr0l4.u1bpUt9rkbk0m9xfKtFj\r\n[dbg] guider_print_dev_guider_info(253): ....................................................\r\n[dbg] guider_print_dev_guider_info(254):        PartnerID Buf : ,partner_id=AliOSThings\r\n[dbg] guider_print_dev_guider_info(255):         ModuleID Buf : ,module_id=GeneralID\r\n[dbg] guider_print_dev_guider_info(256):           Guider URL : \r\n[dbg] guider_print_dev_guider_info(258):       Guider SecMode : 2 (TLS + Direct)\r\n[dbg] guider_print_dev_guider_info(260):     Guider Timestamp : 2524608000000\r\n[dbg] guider_print_dev_guider_info(261): ....................................................\r\n[dbg] guider_print_dev_guider_info(267): ....................................................\r\n[dbg] guider_print_conn_info(225): -----------------------------------------\r\n[dbg] guider_print_conn_info(226):             Host : b1OR5pgr0l4.iot-as-mqtt.cn-shanghai.aliyuncs.com\r\n[dbg] guider_print_conn_info(227):             Port : 1883\r\n[dbg] guider_print_conn_info(230):         ClientID : b1OR5pgr0l4.u1bpUt9rkbk0m9xfKtFj|securemode=2,timestamp=2524608000000,signmethod=hmacsha1,gw=0,partner_id=AliOSThings,module_id=GeneralID|\r\n[dbg] guider_print_conn_info(232):       TLS PubKey : 0x450edc ('-----BEGIN CERTIFICATE-----\r\nMIIDdTCCAl2gAwIBAgILBAAAAAABFUtaw5QwDQYJKoZIhvcNAQEFBQAwVzELMAkG\r\nA1UEBhMCQkUxGTAXBgNVBAoTEEdsb2JhbFNpZ24gbnYtc2ExEDAOBgNVBAsTB1Jv\r\nb3QgQ0ExGzAZBgNVBAMTEkdsb2JhbFNpZ24gUm9vdCBDQTAeFw05ODA5MDExMjAw8¬H ...\r\n[dbg] guider_print_conn_info(235): -----------------------------------------\r\n[inf] IOT_CM_Init(117): cm context initialize\r\nlinked_list_insert@line101      :linked list(cm event cb list) insert node@0x48af18,size:1\r\nlinked_list_insert@line101      :linked list(cm connectivity list) insert node@0x48af38,size:1\r\n[inf] iotx_mc_init(1705): MQTT init success!\r\n[inf] _ssl_client_init(176): Loading the CA root certificate ...\r\ncert. version     : 3\r\nserial number     : 04:00:00:00:00:01:15:4B:5A:C3:94\r\nissued  on        : 0000-00-00 00:00:00\r\nexpires on        : 0000-00-00 00:00:00\r\nRSA key size      : 2048 bits\r\n[inf] _ssl_parse_crt(144): crt content:185\r\n[inf] _ssl_client_init(184):  ok (0 skipped)\r\n[inf] _TLSConnectNetwork(345): Connecting to /b1OR5pgr0l4.iot-as-mqtt.cn-shanghai.aliyuncs.com/1883...\r\n\r\nLooked up b1OR5pgr0l4.iot-as-mqtt.cn-shanghai.aliyuncs.com as 139.196.135.135\r\nSOCK_OPEN: index 0 handle 4350332\r\nSOCK_CONNECT: index 0 handle 4350332 res 0\r\n[inf] _TLSConnectNetwork(362):   . Setting up the SSL/TLS structure...\r\n[inf] _TLSConnectNetwork(372):  ok\r\n[inf] _TLSConnectNetwork(407): Performing the SSL/TLS handshake...\r\nmbedtls_ssl_handshake_client_step: ssl->state = 0\r\nmbedtls_ssl_handshake_client_step: ssl->state = 1\r\nmbedtls_ssl_handshake_client_step: ssl->state = 2\r\nmbedtls_ssl_handshake_client_step: ssl->state = 3\r\nmbedtls_ssl_handshake_client_step: ssl->state = 4\r\nmbedtls_ssl_handshake_client_step: ssl->state = 5\r\nmbedtls_ssl_handshake_client_step: ssl->state = 6\r\nmbedtls_ssl_handshake_client_step: ssl->state = 7\r\nmbedtls_ssl_handshake_client_step: ssl->state = 8\r\nmbedtls_ssl_handshake_client_step: ssl->state = 9\r\nmbedtls_ssl_handshake_client_step: ssl->state = 10\r\nmbedtls_ssl_handshake_client_step: ssl->state = 11\r\nSOCK_CLOSE: index 0 handle 4350332 res 0\r\nrecv failed!\r\nmbedtls_ssl_handshake_client_step: ssl->state = 12\r\n```"
      },
      {
        "user": "junjiec",
        "created_at": "2018-05-29T02:56:43Z",
        "body": "@maggie17 问题解决了？可以写下解决办法吗？"
      },
      {
        "user": "maggie17",
        "created_at": "2018-05-29T04:19:54Z",
        "body": "@junjiec Hi，应该是网络问题，之前一直用的公司wifi，ssl连接出错，今天换了个别的wifi网络（手机热点），就能正常连接了"
      }
    ]
  },
  {
    "number": 125,
    "title": "LD error",
    "created_at": "2018-02-11T05:58:01Z",
    "closed_at": "2018-05-23T06:43:34Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/125",
    "body": "/home/fine/aos/build/compiler/arm-none-eabi-5_4-2016q3-20160926/Linux64/bin/../lib/gcc/arm-none-eabi/5.4.1/../../../../arm-none-eabi/bin/ld: error: ././platform/mcu/mt2523/project/mt2523_hdk/apps/iot_sdk_demo/lib/iot.a(deflate.o) uses VFP register arguments, out/helloworld@mt2523/binary/helloworld@mt2523.elf does not\r\n/home/fine/aos/build/compiler/arm-none-eabi-5_4-2016q3-20160926/Linux64/bin/../lib/gcc/arm-none-eabi/5.4.1/../../../../arm-none-eabi/bin/ld: failed to merge target specific data of file ././platform/mcu/mt2523/project/mt2523_hdk/apps/iot_sdk_demo/lib/iot.a(deflate.o)\r\n/home/fine/aos/build/compiler/arm-none-eabi-5_4-2016q3-20160926/Linux64/bin/../lib/gcc/arm-none-eabi/5.4.1/../../../../arm-none-eabi/bin/ld: error: ././platform/mcu/mt2523/project/mt2523_hdk/apps/iot_sdk_demo/lib/iot.a(infback.o) uses VFP register arguments, out/helloworld@mt2523/binary/helloworld@mt2523.elf does not\r\n/home/fine/aos/build/compiler/arm-none-eabi-5_4-2016q3-20160926/Linux64/bin/../lib/gcc/arm-none-eabi/5.4.1/../../../../arm-none-eabi/bin/ld: failed to merge target specific data of file ././platform/mcu/mt2523/project/mt2523_hdk/apps/iot_sdk_demo/lib/iot.a(infback.o)\r\n/home/fine/aos/build/compiler/arm-none-eabi-5_4-2016q3-20160926/Linux64/bin/../lib/gcc/arm-none-eabi/5.4.1/../../../../arm-none-eabi/bin/ld: error: ././platform/mcu/mt2523/project/mt2523_hdk/apps/iot_sdk_demo/lib/iot.a(inflate.o) uses VFP register arguments, out/helloworld@mt2523/binary/helloworld@mt2523.elf does not\r\n/home/fine/aos/build/compiler/arm-none-eabi-5_4-2016q3-20160926/Linux64/bin/../lib/gcc/arm-none-eabi/5.4.1/../../../../arm-none-eabi/bin/ld: failed to merge target specific data of file ././platform/mcu/mt2523/project/mt2523_hdk/apps/iot_sdk_demo/lib/iot.a(inflate.o)\r\n/home/fine/aos/build/compiler/arm-none-eabi-5_4-2016q3-20160926/Linux64/bin/../lib/gcc/arm-none-eabi/5.4.1/../../../../arm-none-eabi/bin/ld: error: ././platform/mcu/mt2523/project/mt2523_hdk/apps/iot_sdk_demo/lib/iot.a(inftrees.o) uses VFP register arguments, out/helloworld@mt2523/binary/helloworld@mt2523.elf does not\r\n",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/125/comments",
    "author": "Ever-Never",
    "comments": [
      {
        "user": "Ever-Never",
        "created_at": "2018-02-11T06:00:14Z",
        "body": "配置自己交叉编译器 ?   $(TOOLCHAIN_PATH)$(TOOLCHAIN_PREFIX)"
      },
      {
        "user": "librae8226",
        "created_at": "2018-05-23T06:43:34Z",
        "body": "硬浮点的编译选项 `-mfloat-abi` 需要统一，如果把不同编译选项编出来的目标链接到一起，就会报这个问题"
      }
    ]
  },
  {
    "number": 113,
    "title": "标准C malloc被重定向，如何增加RTOS heap size和  如何C heap  和 RTOS heap 一起使用，如何调整内存layout",
    "created_at": "2018-02-08T03:32:30Z",
    "closed_at": "2018-05-23T06:32:15Z",
    "labels": [
      "help wanted"
    ],
    "url": "https://github.com/alibaba/AliOS-Things/issues/113",
    "body": "",
    "comments_url": "https://api.github.com/repos/alibaba/AliOS-Things/issues/113/comments",
    "author": "Ever-Never",
    "comments": [
      {
        "user": "librae8226",
        "created_at": "2018-05-23T06:32:15Z",
        "body": "需要根据特定的platform和board，调整相应的 .ld 或是启动文件，暂无统一接口\r\n先close了，如果还有问题请reopen"
      }
    ]
  }
]