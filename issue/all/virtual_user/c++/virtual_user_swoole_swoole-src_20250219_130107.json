[
  {
    "id": "https://github.com/swoole/swoole-src/issues/5580",
    "source": {
      "issue_number": 5580
    },
    "initial_question": {
      "title": "Create a Swoole WebSocket server that subscribes to new messages from Redis using Redis Pub/Sub.",
      "body": "Hi everyone, could someone tell how to send an event from a process to server. I am creating a WebSocket server with Redis pub/sub and subscribing to a Redis channel in the WebSocket server process, but how to pass data to server?\r\nOr is there another approach?\r\nIf I write the subscribing code in the workerStart event, the webSocket server will not accept new connections. \r\n```\r\n$this->server->on(\"workerStart\", function ($server, $workerId) use ($redis) {\r\n    $redis->subscribe(['chat_channel'], function ($redis, $channel, $message) {\r\n        foreach ($this->server->connections as $fd) {\r\n              $this->server->push($fd, json_encode($message));\r\n        }\r\n    });\r\n});\r\n```\r\nI guess this is because the phpredis client is blocking, but how to write a code that will accept messages from Redis and broadcast them to connected users? \r\n\r\nI am really struggling with this. Please help if you know how to solve it.  Thank you very much!\r\n\r\n\r\n4. What version of Swoole are you using (show your `php --ri swoole`)?\r\n\r\n```\r\nphp --ri swoole\r\n\r\nswoole\r\n\r\nSwoole => enabled\r\nAuthor => Swoole Team <team@swoole.com>\r\nVersion => 6.0.0-dev\r\nBuilt => Oct  7 2024 17:07:28\r\ncoroutine => enabled with boost asm context\r\nepoll => enabled\r\neventfd => enabled\r\nsignalfd => enabled\r\ncpu_affinity => enabled\r\nspinlock => enabled\r\nrwlock => enabled\r\nhttp2 => enabled\r\njson => enabled\r\npcre => enabled\r\nzlib => 1.2.11\r\nbrotli => E16781312/D16781312\r\nmutex_timedlock => enabled\r\npthread_barrier => enabled\r\nfutex => enabled\r\n\r\nDirective => Local Value => Master Value\r\nswoole.enable_library => On => On\r\nswoole.enable_fiber_mock => Off => Off\r\nswoole.enable_preemptive_scheduler => Off => Off\r\nswoole.display_errors => On => On\r\nswoole.use_shortname => On => On\r\nswoole.unixsock_buffer_size => 8388608 => 8388608\r\n```\r\n\r\n5. What is your machine environment used (show your `uname -a` & `php -v` & `gcc -v`) ?\r\n```\r\nLinux developer-v3 5.4.0-26-generic #30-Ubuntu SMP Mon Apr 20 16:58:30 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\nPHP 8.3.14 (cli) (built: Nov 21 2024 05:47:02) (NTS)\r\n\r\n``` \r\n"
    },
    "satisfaction_conditions": [
      "WebSocket server must maintain active connections while processing Redis messages",
      "Redis subscription must run concurrently with main server process",
      "Messages from Redis must be broadcast to all valid WebSocket connections",
      "WebSocket connections must be validated before message delivery",
      "Server must handle Redis channel subscription without interruption"
    ],
    "created_at": "2024-11-21T20:06:44Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/5545",
    "source": {
      "issue_number": 5545
    },
    "initial_question": {
      "title": "\"PHP Deprecated\" warning",
      "body": "Please answer these questions before submitting your issue.\r\n\r\n1. What did you do? If possible, provide a simple script for reproducing the error.\r\n\r\nRunning code:\r\n```php\r\n\r\nnamespace test;\r\n\r\nuse Swoole\\Runtime;\r\n\r\nRuntime::enableCoroutine(true, SWOOLE_HOOK_TCP);\r\n\r\ngo(function () {\r\n  $redis = new \\Redis();\r\n\r\n  if (!$redis->connect('127.0.0.1', 6379)) {\r\n    throw new \\RedisException(\"Unable to connect to Redis\", 2);\r\n  }\r\n\r\n  echo \"Redis connected\\n\";\r\n});\r\n```\r\n\r\n2. What did you expect to see?\r\n\r\n> Redis connected\r\n\r\n3. What did you see instead?\r\n\r\n> PHP Deprecated:  Swoole\\Event::rshutdown(): Event::wait() in shutdown function is deprecated in Unknown on line 0\r\n>\r\n> Deprecated: Swoole\\Event::rshutdown(): Event::wait() in shutdown function is deprecated in Unknown on line 0\r\n> Redis connected\r\n\r\n4. What version of Swoole are you using (show your `php --ri swoole`)?\r\n\r\n**`> php --ri swoole`**\r\n> \r\n> swoole\r\n> \r\n> Swoole => enabled\r\n> Author => Swoole Team <team@swoole.com>\r\n> Version => 5.1.4\r\n> Built => Sep 17 2024 22:29:47\r\n> coroutine => enabled with boost asm context\r\n> eventfd => enabled\r\n> kqueue => enabled\r\n> cpu_affinity => enabled\r\n> spinlock => enabled\r\n> rwlock => enabled\r\n> http2 => enabled\r\n> json => enabled\r\n> zlib => 1.3\r\n> mutex_timedlock => enabled\r\n> pthread_barrier => enabled\r\n> mysqlnd => enabled\r\n> async_redis => enabled\r\n> \r\n> Directive => Local Value => Master Value\r\n> swoole.enable_coroutine => On => On\r\n> swoole.enable_library => Off => Off\r\n> swoole.enable_fiber_mock => Off => Off\r\n> swoole.enable_preemptive_scheduler => On => On\r\n> swoole.display_errors => On => On\r\n> swoole.use_shortname => On => On\r\n> swoole.unixsock_buffer_size => 2621440 => 2621440\r\n\r\n5. What is your machine environment used (show your `uname -a` & `php -v` & `gcc -v`) ?\r\n\r\n**`> uname -a`**\r\n> FreeBSD web 14.1-RELEASE-p5 FreeBSD 14.1-RELEASE-p5 GENERIC amd64\r\n\r\n**`> php -v`**\r\n> PHP 8.3.12 (cli) (built: Sep 29 2024 01:11:14) (NTS)\r\n> Copyright (c) The PHP Group\r\n> Zend Engine v4.3.12, Copyright (c) Zend Technologies\r\n>     with Zend OPcache v8.3.12, Copyright (c), by Zend Technologies\r\n\r\n**`> gcc -v`**\r\n> Using built-in specs.\r\n> COLLECT_GCC=gcc\r\n> COLLECT_LTO_WRAPPER=/usr/local/libexec/gcc13/gcc/x86_64-portbld-freebsd14.0/13.3.0/lto-wrapper\r\n> Target: x86_64-portbld-freebsd14.0\r\n> Configured with: /wrkdirs/usr/ports/lang/gcc13/work/gcc-13.3.0/configure --enable-multilib --with-build-config=bootstrap-debug --disable-nls --enable-gnu-indirect-function --enable-host-shared --enable-plugin --libdir=/usr/local/lib/gcc13 --libexecdir=/usr/local/libexec/gcc13 --program-suffix=13 --with-as=/usr/local/bin/as --with-gmp=/usr/local --with-gxx-include-dir=/usr/local/lib/gcc13/include/c++/ --with-gxx-libcxx-include-dir=/usr/include/c++/v1 --with-ld=/usr/local/bin/ld --with-pkgversion='FreeBSD Ports Collection' --with-system-zlib --without-zstd --enable-languages=c,c++,objc,fortran,jit --prefix=/usr/local --localstatedir=/var --mandir=/usr/local/share/man --infodir=/usr/local/share/info/gcc13 --build=x86_64-portbld-freebsd14.0\r\n> Thread model: posix\r\n> Supported LTO compression algorithms: zlib\r\n> gcc version 13.3.0 (FreeBSD Ports Collection)"
    },
    "satisfaction_conditions": [
      "Redis connection successfully establishes within the coroutine",
      "Coroutine execution completes without premature termination"
    ],
    "created_at": "2024-10-25T15:18:39Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/5017",
    "source": {
      "issue_number": 5017
    },
    "initial_question": {
      "title": "swoole\u8fdb\u7a0b\u4e2d\u4f7f\u7528\u534f\u7a0b\u6b7b\u9501\u95ee\u9898",
      "body": "### \u73b0\u8c61\r\nswoole\u8fdb\u7a0b\u4e2d\uff0c\u521b\u5efa\u534f\u7a0b\uff0c\u4f7f\u7528\u534f\u7a0b\u5ba2\u6237\u7aef\u4ece\u670d\u52a1\u7aef\u6536\u53d6\u6d88\u606f\uff0c\u7ed3\u679c\u62a5\u9519`[FATAL ERROR]: all coroutines (count: 1) are asleep - deadlock!`\r\n\r\n### \u7b80\u5316\u4ee3\u7801\r\n\r\n```php\r\n<?php\r\n\r\nuse Swoole\\Process;\r\n\r\nclass DeadLock\r\n{\r\n    public function startProcess()\r\n    {\r\n        $t = new Swoole\\Process(function () {\r\n            swoole_async_set(['enable_coroutine' => true]);\r\n            go(function (){\r\n                for (; ;) {\r\n                    Swoole\\Coroutine\\System::sleep(1);\r\n                    var_dump('dd');\r\n                }\r\n            });\r\n        });\r\n        $t->start();\r\n    }\r\n}\r\n\r\n$proc = new Process(function () {\r\n    swoole_async_set(['enable_coroutine' => false]);\r\n    $cls = new DeadLock();\r\n    //$cls->startProcess(); 1. \u6b64\u5904\u8c03\u7528\u4e0d\u62a5\u9519\r\n    \\Swoole\\Timer::after(1000, function () use ($cls) {\r\n        $cls->startProcess(); //2. \u6b64\u5904\u8c03\u7528\u4f1a\u62a5\u9519\r\n    });\r\n});\r\n$proc->start();\r\n```\r\n\r\n### \u73af\u5883\u4fe1\u606f\r\nphp\u7248\u672c\uff1a7.2.34\r\nswoole\u7248\u672c\uff1a\r\n```\r\nSwoole => enabled\r\nAuthor => Swoole Team <team@swoole.com>\r\nVersion => 4.8.9\r\nBuilt => May 10 2022 20:17:44\r\ncoroutine => enabled with boost asm context\r\nkqueue => enabled\r\nrwlock => enabled\r\npcre => enabled\r\nzlib => 1.2.11\r\nasync_redis => enabled\r\n\r\nDirective => Local Value => Master Value\r\nswoole.enable_coroutine => On => On\r\nswoole.enable_library => On => On\r\nswoole.enable_preemptive_scheduler => Off => Off\r\nswoole.display_errors => On => On\r\nswoole.use_shortname => On => On\r\nswoole.unixsock_buffer_size => 262144 => 262144\r\n```"
    },
    "satisfaction_conditions": [
      "Event loop must be properly initialized and maintained",
      "Process hierarchy must maintain correct coroutine state",
      "Coroutine execution context must be preserved",
      "Process termination must be properly handled"
    ],
    "created_at": "2023-03-29T10:07:31Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/5011",
    "source": {
      "issue_number": 5011
    },
    "initial_question": {
      "title": "Swoole 5.0.1 \u5728User Process\u4e2d\u904d\u5386 $server->connections \u4e3a\u7a7a\uff0c\u800c\u5728onReceive\u904d\u5386\u4e0d\u4e3a\u7a7a\uff0c\u8fd9\u662fBug\u5417\uff1f",
      "body": null
    },
    "satisfaction_conditions": [
      "Server mode configuration allows access to connections"
    ],
    "created_at": "2023-03-16T01:28:37Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/5004",
    "source": {
      "issue_number": 5004
    },
    "initial_question": {
      "title": "Connect EVENT: \"Invalid frame header\"",
      "body": "### Invalid frame header\r\nPlease answer these questions before submitting your issue.\r\n\r\n1. What did you do? If possible, provide a simple script for reproducing the error.\r\n\u5ba2\u6237\u7aef\u8fde\u63a5\u65f6\uff0c\u7a81\u7136\u53d1\u73b0\u62a5\u201c**Invalid frame header**\u201d\r\n\r\n\u670d\u52a1\u7aef\u76f4\u63a5\u8fdb\u5165 Close\u4e8b\u4ef6\r\n\r\n2. What did you expect to see?\r\n\u5f53\u65f6\u5565\u90fd\u6b63\u5e38\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u95ee\u9898\u4e4b\u524d\u4e5f\u51fa\u73b0\u591a\u5f88\u591a\u6b21\uff0cInvalid frame header\uff0c\u540e\u6765\u89e3\u51b3\u4e86\uff0c\u5fd8\u8bb0\u600e\u4e48\u89e3\u51b3\u4e86\u3002\uff08\u5404\u79cd\u641c\u4e5f\u662f\u6ca1\u6709\u7ed3\u679c\uff0c\u6240\u4ee5\u4eca\u5929\u63d0\u4e00\u4e2aissue\u8bb0\u5f55\u4e00\u4e0b\u6700\u540e\u89e3\u51b3\u529e\u6cd5\uff0c\u4ee5\u5907\u540e\u67e5\u3002\uff09\r\n\r\n3. What did you see instead?\r\n\u8fde\u63a5\u63d0\u793a\u201cError\u201d\r\n\r\n4. What version of Swoole are you using (show your `php --ri swoole`)?\r\nVersion => 4.4.17\r\nBuilt => Jun 29 2020 18:34:48\r\ncoroutine => enabled\r\nepoll => enabled\r\neventfd => enabled\r\nsignalfd => enabled\r\ncpu_affinity => enabled\r\nspinlock => enabled\r\nrwlock => enabled\r\nsockets => enabled\r\nopenssl => OpenSSL 1.0.2k-fips  26 Jan 2017\r\nhttp2 => enabled\r\npcre => enabled\r\nzlib => 1.2.7\r\nmutex_timedlock => enabled\r\npthread_barrier => enabled\r\nfutex => enabled\r\nasync_redis => enabled\r\n\r\nDirective => Local Value => Master Value\r\nswoole.enable_coroutine => On => On\r\nswoole.enable_library => On => On\r\nswoole.enable_preemptive_scheduler => Off => Off\r\nswoole.display_errors => On => On\r\nswoole.use_shortname => On => On\r\nswoole.unixsock_buffer_size => 8388608 => 8388608\r\n\r\n\r\n5. What is your machine environment used (show your `uname -a` & `php -v` & `gcc -v`) ?\r\n\u90fd\u5f88\u6807\u51c6\u7684\u73af\u5883\uff0c\u6628\u5929\u53ef\u4ee5\uff0c\u4eca\u5929\u5c31\u4e0d\u884c\u3002\r\n\r\n"
    },
    "satisfaction_conditions": [
      "WebSocket-specific message sending methods must be used instead of raw TCP methods"
    ],
    "created_at": "2023-03-09T01:46:31Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/4438",
    "source": {
      "issue_number": 4438
    },
    "initial_question": {
      "title": "How to stop the process pool so that it waits for all the workers to finish?",
      "body": "In the my crawlers program with worker pool on kill (SIGTERM) signal program stops  immediately and doesn't wait until workers stop.\r\n\r\nPlease help to fix that prototype code, so it will exit after all workers stop:\r\n\r\n```\r\n<?php\r\n\r\ndeclare(strict_types=1);\r\n\r\n$workerNum = 5;\r\n\r\n$pool = new Swoole\\Process\\Pool($workerNum);\r\n\r\n$pool->on(\"WorkerStart\", function ($pool, $workerId) {\r\n    $sleep = rand(3, 6);\r\n    echo \"Worker#$workerId: sleep for $sleep seconds\\n\";\r\n    sleep($sleep);\r\n});\r\n\r\n$pool->on(\"WorkerStop\", function ($pool, $workerId) {\r\n    echo \"Worker#$workerId is stopped\\n\";\r\n    sleep(1);\r\n});\r\n\r\n$pool->start();\r\n\r\n```\r\n\r\nEnv parameters:\r\n\r\n```\r\nphp --ri swoole\r\n\r\nswoole\r\n\r\nSwoole => enabled\r\nAuthor => Swoole Team <team@swoole.com>\r\nVersion => 4.6.5\r\nBuilt => Apr 24 2021 09:19:13\r\ncoroutine => enabled with boost asm context\r\nkqueue => enabled\r\nrwlock => enabled\r\nopenssl => OpenSSL 1.1.1k  25 Mar 2021\r\ndtls => enabled\r\nhttp2 => enabled\r\npcre => enabled\r\nzlib => 1.2.11\r\nbrotli => E16777225/D16777225\r\nasync_redis => enabled\r\n\r\nDirective => Local Value => Master Value\r\nswoole.enable_coroutine => On => On\r\nswoole.enable_library => On => On\r\nswoole.enable_preemptive_scheduler => Off => Off\r\nswoole.display_errors => On => On\r\nswoole.use_shortname => On => On\r\nswoole.unixsock_buffer_size => 262144 => 262144\r\n```\r\n\r\n5. What is your machine environment used (show your `uname -a` & `php -v` & `gcc -v`) ?\r\n\r\n```\r\n[1] 7055\r\n[2] 7056\r\nDarwin MacBook-X.local 20.6.0 Darwin Kernel Version 20.6.0: Mon Aug 30 06:12:20 PDT 2021; root:xnu-7195.141.6~3/RELEASE_ARM64_T8101 arm64\r\n[1]  - done       uname -a\r\nPHP 7.4.23 (cli) (built: Aug 27 2021 10:07:08) ( NTS )\r\nCopyright (c) The PHP Group\r\nZend Engine v3.4.0, Copyright (c) Zend Technologies\r\n[2]  + done       php -v\r\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\r\nApple clang version 13.0.0 (clang-1300.0.29.3)\r\nTarget: arm64-apple-darwin20.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n```\r\n\r\n"
    },
    "satisfaction_conditions": [
      "Worker processes must gracefully handle termination signals",
      "All worker processes must complete their current tasks before shutting down",
      "Termination status must be properly communicated between manager and worker processes",
      "Worker shutdown sequence must be observable through logging or output"
    ],
    "created_at": "2021-10-15T20:44:58Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/4424",
    "source": {
      "issue_number": 4424
    },
    "initial_question": {
      "title": "Question regarding file system security",
      "body": "Hi, I was wondering if swoole prevents file system transversal in the Swoole\\Http\\Response->sendfile() and Swoole\\Coroutine\\FastCGI\\Client::call() methods. What are the security implications of these and similar methods in swoole?"
    },
    "satisfaction_conditions": [
      "Application-level security controls must be implemented by the developer",
      "File access permissions must be explicitly validated",
      "Data transmission functionality remains unaffected by security implementations"
    ],
    "created_at": "2021-10-07T02:20:22Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/4326",
    "source": {
      "issue_number": 4326
    },
    "initial_question": {
      "title": "[BUG?] Coroutine::cancel not cancelling coroutine.",
      "body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What did you do? If possible, provide a simple script for reproducing the error.\r\n\r\nWhile testing `Coroutine::cancel` I noticed that the call will only cancel one IO call within the cancelled coroutine.\r\nSo either the documentation lost something in translation, or it doesn't actually cancel the coroutine.\r\n\r\n```php\r\n<?php\r\nuse Swoole\\Coroutine;\r\n\r\nforeach (['php --ri swoole', 'uname -a', 'php -v', 'gcc -v'] as $cmd) {\r\n    echo \"\\n----- $cmd ----\\n\";\r\n    echo `$cmd`;\r\n    echo \"\\n------------\\n\";\r\n}\r\n\r\nCo\\run(function () {\r\n    echo \"\\n Hello - \" . time();\r\n    $c = Co\\go(function () {\r\n        Co\\defer(function () {\r\n            echo \"\\n Cancel - \" . time();\r\n        });\r\n        Co::sleep(2);\r\n        echo \"\\n Hello A - \" . time() . \" \" . (Coroutine::isCanceled() ? 'Y' : 'N');\r\n        Co::sleep(2);\r\n        echo \"\\n Hello B - \" . time() . \" \" . (Coroutine::isCanceled() ? 'Y' : 'N');\r\n    });\r\n    echo \"\\n Started: $c\";\r\n    if (Coroutine::cancel($c) === true) {\r\n        echo \"\\n Cancelled: $c\";\r\n    } else {\r\n        echo \"\\nswoole_last_error: \" . swoole_last_error();\r\n    }\r\n});\r\n```\r\n\r\n2. What did you expect to see?\r\n\r\nExpected the coroutine #2 to be cancelled, and not be processed any more\r\n```\r\n Hello - 1626696957\r\n Started: 2\r\n Cancelled: 2\r\n Cancel - 1626696957 <-- should be the start time (+0-1sec on second change)\r\n```\r\n\r\n3. What did you see instead?\r\n\r\nThe first `sleep` was interrupted, the coroutine continued to run.\r\n```\r\n Hello - 1626696957\r\n Started: 2\r\n Hello A - 1626696957 Y\r\n Cancelled: 2\r\n Hello B - 1626696959 N  <--- at the very least, this should probably be Y for cid #2\r\n Cancel - 1626696959 <-- it's actually the start time +2sec, since the second `sleep` was not cancelled.\r\n```\r\n\r\n\r\n4. What version of Swoole are you using (show your `php --ri swoole`)?\r\n\r\n```\r\n----- php --ri swoole ----\r\n\r\nswoole\r\n\r\nSwoole => enabled\r\nAuthor => Swoole Team <team@swoole.com>\r\nVersion => 4.7.0\r\nBuilt => Jul 16 2021 10:49:14\r\ncoroutine => enabled with boost asm context\r\nepoll => enabled\r\neventfd => enabled\r\nsignalfd => enabled\r\ncpu_affinity => enabled\r\nspinlock => enabled\r\nrwlock => enabled\r\nsockets => enabled\r\nopenssl => OpenSSL 1.1.1d  10 Sep 2019\r\ndtls => enabled\r\nhttp2 => enabled\r\npcre => enabled\r\nzlib => 1.2.11\r\nmutex_timedlock => enabled\r\npthread_barrier => enabled\r\nfutex => enabled\r\nmysqlnd => enabled\r\nasync_redis => enabled\r\n\r\nDirective => Local Value => Master Value\r\nswoole.enable_coroutine => On => On\r\nswoole.enable_library => On => On\r\nswoole.enable_preemptive_scheduler => Off => Off\r\nswoole.display_errors => On => On\r\nswoole.use_shortname => On => On\r\nswoole.unixsock_buffer_size => 8388608 => 8388608\r\n```\r\n\r\n\r\n5. What is your machine environment used (show your `uname -a` & `php -v` & `gcc -v`) ?\r\n\r\n```\r\n----- uname -a ----\r\nLinux ca60602a12a0 4.15.0-46-generic #49-Ubuntu SMP Wed Feb 6 09:33:07 UTC 2019 x86_64 GNU/Linux\r\n\r\n\r\n----- php -v ----\r\nPHP 8.0.0 (cli) (built: Dec  1 2020 03:14:26) ( NTS )\r\nCopyright (c) The PHP Group\r\nZend Engine v4.0.0-dev, Copyright (c) Zend Technologies\r\n    with Zend OPcache v8.0.0, Copyright (c), by Zend Technologies\r\n\r\n\r\n----- gcc -v ----\r\nUsing built-in specs.\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/8/lto-wrapper\r\nOFFLOAD_TARGET_NAMES=nvptx-none\r\nOFFLOAD_TARGET_DEFAULT=1\r\nTarget: x86_64-linux-gnu\r\nConfigured with: ../src/configure -v --with-pkgversion='Debian 8.3.0-6' --with-bugurl=file:///usr/share/doc/gcc-8/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++ --prefix=/usr --with-gcc-major-version-only --program-suffix=-8 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --enable-bootstrap --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --enable-default-pie --with-system-zlib --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\r\nThread model: posix\r\ngcc version 8.3.0 (Debian 8.3.0-6) \r\n```\r\n"
    },
    "satisfaction_conditions": [
      "Coroutine::cancel() must resume execution of the target coroutine rather than terminate it",
      "The first blocking operation after cancel() must return false",
      "Coroutine::isCanceled() must return true immediately after cancellation",
      "Subsequent blocking operations must continue to function normally",
      "Deferred functions must still execute at coroutine completion"
    ],
    "created_at": "2021-07-19T12:18:16Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/3564",
    "source": {
      "issue_number": 3564
    },
    "initial_question": {
      "title": "WARNING swPipeUnsock_create(:83): socketpair() failed, Error: Too many open files[24]",
      "body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What did you do? If possible, provide a simple script for reproducing the error.\r\n\r\nI'm downloading many small files from the Internet using file_get_contents, then writing using file_put_contents.  I have these inside a swoole process function.  At around the 500 file mark, I get this error:\r\n\r\n`WARNING swPipeUnsock_create(:83): socketpair() failed, Error: Too many open files[24]`\r\n\r\nExample script:\r\n\r\n```\r\n$data = array(<URLs of over 500 files>);\r\n\r\nforeach($data as $abc) {\r\n\r\n    $processes[ $abc ] = new \\Swoole\\Process(function () use ($abc) {\r\n\r\n        $bca = file_get_contents($abc);\r\n\r\n        file_put_contents(\"dir/path/to/new/file.abc\",$bca);\r\n\r\n    }\r\n\r\n    $processes[ $data ]->start();\r\n\r\n}\r\n```\r\n\r\nI even tried using the wait command after 100 processes at a time.  Do I need to allow more time for swoole to close the process?\r\n\r\n2. What did you expect to see?\r\n\r\nNo error\r\n\r\n\r\n3. What did you see instead?\r\n\r\n`WARNING swPipeUnsock_create(:83): socketpair() failed, Error: Too many open files[24]`\r\n\r\n4. What version of Swoole are you using (show your `php --ri swoole`)?\r\n\r\nLatest\r\n\r\n5. What is your machine environment used (show your `uname -a` & `php -v` & `gcc -v`) ?\r\n\r\nDebian 10 Buster\r\n"
    },
    "satisfaction_conditions": [
      "System must successfully handle concurrent processing of 500+ files without file descriptor exhaustion",
      "Process communication channels must be properly managed",
      "Solution must maintain process isolation when multiple scripts are running",
      "Inter-process communication must remain functional if required by the application"
    ],
    "created_at": "2020-08-12T03:25:42Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/3156",
    "source": {
      "issue_number": 3156
    },
    "initial_question": {
      "title": "phpize \u62a5\u9519",
      "body": "php\u7248\u672c 7.2.26\r\n\u64cd\u4f5c\u7cfb\u7edfcentos7\r\nswoole 4.4.16\r\n\r\nPackage libtool-2.4.2-22.el7_3.x86_64 already installed and latest version\r\nPackage automake-1.13.4-3.el7.noarch already installed and latest version\r\nPackage autoconf-2.69-11.el7.noarch already installed and latest version\r\n\r\n\u9700\u8981\u7684\u8f6f\u4ef6\u90fd\u88c5\u4e86\uff0c\u4f46\u662f\u5728\u6267\u884cphpize\u7684\u65f6\u5019\u4f1a\u62a5\u63aa\u5982\u4e0b\uff1a\r\n\r\n[root@lnp swoole]# phpize\r\nConfiguring for:\r\nPHP Api Version:         20170718\r\nZend Module Api No:      20170718\r\nZend Extension Api No:   320170718\r\nunknown channel 9: _AC_PROG_LIBTOOL is expanded from...\r\naclocal.m4:3326: AC_PROG_LIBTOOL is expanded from...\r\nconfigure.ac:149: the top level])\r\nobsolete at /usr/share/autoconf/Autom4te/Channels.pm line 638.\r\n\tAutom4te::Channels::msg('9: _AC_PROG_LIBTOOL is expanded from...\\x{a}aclocal.m4:3326: AC_P...', 'configure.ac:149', 'warning: The macro `AC_LANG_RESTORE\\' is obsolete.\\x{a}You should...', 'partial', 1) called at /usr/bin/autom4te line 1026\r\n\r\n\r\n\u6c42\u95ee\u89e3\u51b3\u529e\u6cd5\uff0c\u8c22\u8c22"
    },
    "satisfaction_conditions": [
      "Source code files must be located in a directory accessible by the virtual machine's native filesystem",
      "The environment must maintain compatibility between PHP version and Swoole version"
    ],
    "created_at": "2020-03-03T10:58:09Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/3126",
    "source": {
      "issue_number": 3126
    },
    "initial_question": {
      "title": "coroutine::list  \u904d\u5386\u5f53\u524d\u8fdb\u7a0b\u4e2d\u6b63\u5728\u8fd0\u884c\u7684\u534f\u7a0b\u603b\u662f\u591a\u4e00\u4e2a",
      "body": "```php\r\n<?php\r\n\r\nuse  \\Swoole\\Coroutine;\r\nuse  \\Swoole\\Coroutine\\WaitGroup;\r\nuse  \\Swoole\\Coroutine\\Channel;\r\n\r\nCoroutine::create(function() {\r\n\t\r\n\t$wg=new  WaitGroup();\r\n\t\r\n\t$wg->add(1);\r\n\t//  \u7b2c\u4e00\u6b21\u6253\u5370CoroutineList\uff0c \u4f1a\u8f93\u51fa\u4e3b\u534f\u7a0bID\uff08=1\uff09\r\n\tforeach(Coroutine::list()  as $key=>$Cid){\r\n\t\tvar_dump(\"\u8fdb\u7a0b\u4e2d\u6b63\u5728\u8fd0\u884c\u7684\u534f\u7a0bID:\".$Cid);\r\n\t}\r\n\t\r\n\tCoroutine::create(function()  use($wg) {\r\n\t\t$Cid=Coroutine::getCid();\r\n\t\tvar_dump(\"A.\u65b0\u542f\u52a8\u534f\u7a0bID\".$Cid);\r\n\t\tCoroutine::sleep(2);\r\n\t\t$wg->done();\r\n\t\t\r\n\t});\r\n\r\n\t$wg->wait();  //  \u7b49\u5f85A\u534f\u7a0b\u8fd0\u884c\u7ed3\u675f\r\n\t\r\n\t\tforeach(Coroutine::list()  as $key=>$Cid){\r\n\t\tvar_dump(\"\u8fdb\u7a0b\u4e2d\u6b63\u5728\u8fd0\u884c\u7684\u534f\u7a0bID: \".$Cid);   //  \u8fd9\u91cc\u904d\u5386\u7684\u65f6\u5019A\u534f\u7a0b\uff08ID=2\uff09\u4e3a\u4ec0\u4e48\u4f1a\u88ab\u904d\u5386\u51fa\u6765\uff1f\r\n\t}\r\n\t\r\n\t$wg->add(1);\r\n\tCoroutine::create(function()  use($wg) {\r\n\t\t$Cid=Coroutine::getCid();\r\n\t\tvar_dump(\"B.\u65b0\u542f\u52a8\u534f\u7a0bID\".$Cid);\r\n\t\tCoroutine::sleep(2);\r\n\t\t$wg->done();\r\n\t\t\r\n\t});\t\r\n\t$wg->wait();  //  \u7b49\u5f85B\u534f\u7a0b\u8fd0\u884c\u7ed3\u675f\r\n\t\r\n\t\tforeach(Coroutine::list()  as $key=>$Cid){\r\n\t\tvar_dump(\"\u8fdb\u7a0b\u4e2d\u6b63\u5728\u8fd0\u884c\u7684\u534f\u7a0bID: \".$Cid); //  \u8fd9\u91cc\u904d\u5386\u7684\u65f6\u5019B\u534f\u7a0b\uff08ID=3\uff09\u4e3a\u4ec0\u4e48\u4f1a\u88ab\u904d\u5386\u51fa\u6765\uff1f\r\n\t}\r\n\t\r\n});\r\n\r\n```\r\n\u8fd0\u884c\u4ee5\u4e0a\u4ee3\u7801\uff0c\u7ed3\u679c\uff1a\r\n```php\r\nstring(34) \"\u8fdb\u7a0b\u4e2d\u6b63\u5728\u8fd0\u884c\u7684\u534f\u7a0bID:1\"\r\nstring(20) \"A.\u65b0\u542f\u52a8\u534f\u7a0bID2\"\r\n\r\nstring(35) \"\u8fdb\u7a0b\u4e2d\u6b63\u5728\u8fd0\u884c\u7684\u534f\u7a0bID: 2\"   //  \u8fd9\u91cc$wg->wait()  \u7b49\u5f85 A\u534f\u7a0b\uff08ID=2\uff09\u7ed3\u675f\uff0c\u624d\u904d\u5386\u72b6\u6001\uff0c\u4e3a\u4ec0\u4e48A\u534f\u7a0b\u4f1a\u51fa\u73b0\u5728list\u5217\u8868\uff1f\r\n\r\nstring(35) \"\u8fdb\u7a0b\u4e2d\u6b63\u5728\u8fd0\u884c\u7684\u534f\u7a0bID: 1\"\r\nstring(20) \"B.\u65b0\u542f\u52a8\u534f\u7a0bID3\"\r\n\r\nstring(35) \"\u8fdb\u7a0b\u4e2d\u6b63\u5728\u8fd0\u884c\u7684\u534f\u7a0bID: 3\"  //  \u8fd9\u91cc$wg->wait()  \u7b49\u5f85 B\u534f\u7a0b\u7ed3\u675f\uff0c\u624d\u904d\u5386\u72b6\u6001\uff0c\u4e3a\u4ec0\u4e48B\u534f\u7a0b\uff08ID=3\uff09\u4f1a\u51fa\u73b0\u5728list\u5217\u8868\uff1f\r\nstring(35) \"\u8fdb\u7a0b\u4e2d\u6b63\u5728\u8fd0\u884c\u7684\u534f\u7a0bID: 1\"\r\n\r\n```"
    },
    "satisfaction_conditions": [
      "Coroutine state transitions must be properly tracked during WaitGroup operations",
      "Coroutine scheduling order must be preserved and observable",
      "Parent-child coroutine relationships must be properly maintained"
    ],
    "created_at": "2020-02-21T17:09:44Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/3052",
    "source": {
      "issue_number": 3052
    },
    "initial_question": {
      "title": "Can we rely on websocket FD number not being repeated?",
      "body": "This is a general question, not a bug, so I don't think the issue template applies.\r\n\r\nFor reference, I am using the latest version of swoole with PHP 7.4.0 on Alpine Linux (Docker).\r\n\r\nMy question: When running a websocket server, like so:\r\n\r\n```php\r\n$server = new Swoole\\WebSocket\\Server(\"0.0.0.0\", 9501);\r\n\r\n$server->on('message', function (Swoole\\WebSocket\\Server $server, $frame) \r\n{\r\n    echo \"receive from {$frame->fd}:{$frame->data},opcode:{$frame->opcode},fin:{$frame->finish}\\n\";\r\n    $server->push($frame->fd, \"this is server\");\r\n});\r\n```\r\nis it safe to assume that `$frame->fd` will be the same for messages for the same connection?\r\n\r\nAlso, if a particular `$frame->fd` is re-used, will this only be after an explicit `onClose` event?\r\n\r\nThe background for this question is that we want to allow users to log in via a websocket, and want to check whether it is sufficient to just authenticate users at the start and maintain a list of authenticated FDs on the backend, or whether we need to get the client to send us a session ID/token with every frame.\r\n\r\nThanks!"
    },
    "satisfaction_conditions": [
      "Connection identifier (fd) remains consistent throughout a single websocket connection's lifetime",
      "Connection identifier reuse only occurs after previous connection closure",
      "System must handle identifier exhaustion gracefully",
      "Connection identifiers must be unique among all active connections"
    ],
    "created_at": "2020-01-07T17:26:22Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/3042",
    "source": {
      "issue_number": 3042
    },
    "initial_question": {
      "title": "\u534f\u7a0bserver\u4fe1\u53f7\u6355\u83b7\u7684\u7591\u95ee",
      "body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What did you do? If possible, provide a simple script for reproducing the error.\r\n\r\n\u6211\u5728\u4f7f\u7528\u534f\u7a0b\u7248http server\u65f6\u9700\u8981\u6355\u83b7\u7a0b\u5e8f\u9000\u51fa\u4fe1\u53f7\uff0c\u6bd4\u5982SIGINT/SIGTERM\uff0c\u4f46\u6839\u636e\u6587\u6863\u5e76\u4e0d\u80fd\u5f88\u597d\u7406\u89e3\u5982\u4f55\u4f7f\u7528\uff0c\u4ee5\u4e0b\u662f\u51e0\u4e2a\u5c1d\u8bd5\u7684\u5199\u6cd5\uff0c\u6709\u7684\u80fd\u6355\u83b7\uff0c\u4f46\u4e0d\u4f18\u96c5\uff0c\u6709\u7684\u5c31\u62a5\u9519\u6216\u65e0\u6cd5\u6355\u83b7\r\n\r\n\u2460 \u4f7f\u7528Process::signal()\uff0c\u5728scheduler->start()\u4e4b\u524d\u7ed1\u5b9a\u51fd\u6570\uff0c\u76f4\u63a5\u62a5\u9519\u4e86: eventLoop has already been created\uff0c\u5728start\u4e4b\u540e\u5199\u53c8\u65e0\u6cd5\u6355\u83b7\u4fe1\u53f7\r\n```php\r\n<?php\r\n\r\nuse Swoole\\Coroutine;\r\nuse Swoole\\Coroutine\\Http\\Server;\r\nuse Swoole\\Event;\r\nuse Swoole\\Process;\r\nuse Swoole\\Timer;\r\n\r\n\r\n$scheduler = new Coroutine\\Scheduler();\r\n\r\n$handler = function ($signal) {\r\n    echo 'Caught signal: ' . $signal . PHP_EOL;\r\n\r\n    Event::exit();\r\n};\r\n\r\nProcess::signal(SIGINT, $handler);\r\n\r\n$scheduler->add(function () {\r\n    echo 'Starting server ...' . PHP_EOL;\r\n\r\n    $server = new Server('127.0.0.1', 3003);\r\n    $server->start();\r\n});\r\n\r\n$scheduler->start();\r\n```\r\n\u2461 \u4f7f\u7528pcntl_signal() + pcntl_async_signals(true)\uff0c\u65e0\u6cd5\u6355\u83b7\u4fe1\u53f7\r\n```php\r\n<?php\r\n\r\nuse Swoole\\Coroutine;\r\nuse Swoole\\Coroutine\\Http\\Server;\r\nuse Swoole\\Event;\r\nuse Swoole\\Process;\r\nuse Swoole\\Timer;\r\n\r\n\r\n$scheduler = new Coroutine\\Scheduler();\r\n\r\n$handler = function ($signal) {\r\n    echo 'Caught signal: ' . $signal . PHP_EOL;\r\n\r\n    Event::exit();\r\n};\r\n\r\npcntl_async_signals(true);\r\npcntl_signal(SIGINT, $handler);\r\n\r\n$scheduler->add(function () {\r\n    echo 'Starting server ...' . PHP_EOL;\r\n\r\n    $server = new Server('127.0.0.1', 3003);\r\n    $server->start();\r\n});\r\n\r\n$scheduler->start();\r\n```\r\n\u2462 \u4f7f\u7528pcntl_signal() + pcntl_signal_dispatch() + Timer::tick() \u80fd\u6355\u83b7\u4fe1\u53f7\uff0c\u4f46\u4e0d\u591f\u4f18\u96c5\r\n```php\r\n<?php\r\n\r\nuse Swoole\\Coroutine;\r\nuse Swoole\\Coroutine\\Http\\Server;\r\nuse Swoole\\Event;\r\nuse Swoole\\Process;\r\nuse Swoole\\Timer;\r\n\r\n\r\n$scheduler = new Coroutine\\Scheduler();\r\n\r\n$handler = function ($signal) {\r\n    echo 'Caught signal: ' . $signal . PHP_EOL;\r\n\r\n    Event::exit();\r\n};\r\n\r\npcntl_signal(SIGINT, $handler);\r\n\r\n\r\n$scheduler->add(function () {\r\n    echo 'Starting server ...' . PHP_EOL;\r\n\r\n    Timer::tick(1000, function () {\r\n        pcntl_signal_dispatch();\r\n    });\r\n\r\n    $server = new Server('127.0.0.1', 3003);\r\n    $server->start();\r\n});\r\n\r\n$scheduler->start();\r\n```\r\n\r\n2. What did you expect to see?\r\n\r\n\u4f7f\u7528\u67d0\u4e2a\u6700\u4f73\u5b9e\u8df5\u7684\u5199\u6cd5\u5b9e\u73b0\u4fe1\u53f7\u6355\u83b7\u548c\u7a0b\u5e8f\u5e73\u6ed1\u9000\u51fa\r\n\r\n3. What did you see instead?\r\n\r\n\u6240\u4ee5\u6211\u60f3\u77e5\u9053\uff0c\u600e\u6837\u624d\u662f\u7b26\u5408\u6700\u4f73\u5b9e\u8df5\u7684\u5199\u6cd5\uff1f\u6211\u5728\u6587\u6863\u4e2d\u6ca1\u770b\u5230\u76f8\u5173\u4ecb\u7ecd\uff0c\u8c22\u8c22\r\n\r\n4. What version of Swoole are you using (show your `php --ri swoole`)?\r\n\r\nswoole: 4.4.14\r\n\r\n5. What is your machine environment used (including version of kernel & php & gcc) ?\r\n\r\nphp: 7.4.1\r\ngcc: 7.3.0\r\n\r\n"
    },
    "satisfaction_conditions": [
      "Signal handler successfully captures SIGINT/SIGTERM signals",
      "Server gracefully shuts down when signals are received",
      "Signal handling works within coroutine context",
      "Signal handler registration occurs at the appropriate timing",
      "Implementation follows idiomatic coroutine patterns"
    ],
    "created_at": "2019-12-27T06:27:54Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2679",
    "source": {
      "issue_number": 2679
    },
    "initial_question": {
      "title": "MacOS MoJave10.14.5\u7f16\u8bd1\u5b89\u88c5swoolev4.4.0\u5931\u8d25",
      "body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What did you do? If possible, provide a simple script for reproducing the error.\r\n\r\n```\r\n phpize-7.3.5 \r\n./configure  \r\nsudo make && make install\r\n```\r\n\r\n2. What did you expect to see?\r\n\r\n\u6b63\u5e38\u5b89\u88c5swoole\r\n\r\n3. What did you see instead?\r\n\r\n\u5b89\u88c5\u7684\u6269\u5c55\u76ee\u5f55\u4e0d\u662f\u6211\u9884\u671f\u7684\r\n```\r\nInstalling shared extensions:     /usr/lib/php/extensions/no-debug-non-zts-20160303/\r\ncp: /usr/lib/php/extensions/no-debug-non-zts-20160303/#INST@26485#: Permission denied\r\nmake: *** [install-modules] Error 1\r\n```\r\n\r\n4. What version of Swoole are you using (show your `php --ri swoole`)?\r\n\r\ngit clone\u7684\u6700\u65b0\u7248\u672cv4.4.0\r\n\r\n5. What is your machine environment used (including version of kernel & php & gcc) ?\r\n\r\nOS: MacOS Mojave10.14.5 \uff0c\u5df2\u7ecf\u5173\u6389\u4e86rootless(csrutil disable)\r\nPHP:**\u5305\u542b\u9ed8\u8ba4\u7684php7.1.23 \u8fd8\u6709\u6211\u81ea\u5df1\u5b89\u88c5XAMPP\u5305\u542b\u76847.3.5**\r\n```\r\n$ gcc -v\r\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\r\nApple LLVM version 10.0.1 (clang-1001.0.46.4)\r\nTarget: x86_64-apple-darwin18.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n```\r\n\r\n\r\n\r\n-----------------------------\u5b89\u88c5\u8fc7\u7a0b\uff08\u4f7f\u7528XAMPP\u7684PHP7.3.5\uff09--------------------------\r\n```\r\n$ phpize-7.3.5 .\r\nConfiguring for:\r\nPHP Api Version:         20180731\r\nZend Module Api No:      20180731\r\nZend Extension Api No:   320180731\r\n\r\n$ ./configure\r\nchecking for grep that handles long lines and -e... /usr/bin/grep\r\nchecking for egrep... /usr/bin/grep -E\r\nchecking for a sed that does not truncate output... /usr/bin/sed\r\nchecking for cc... cc\r\nchecking whether the C compiler works... yes\r\nchecking for C compiler default output file name... a.out\r\nchecking for suffix of executables... \r\nchecking whether we are cross compiling... no\r\nchecking for suffix of object files... o\r\nchecking whether we are using the GNU C compiler... yes\r\nchecking whether cc accepts -g... yes\r\nchecking for cc option to accept ISO C89... none needed\r\nchecking how to run the C preprocessor... cc -E\r\nchecking for icc... no\r\nchecking for suncc... no\r\nchecking whether cc understands -c and -o together... yes\r\nchecking for system library directory... lib\r\nchecking if compiler supports -R... no\r\nchecking if compiler supports -Wl,-rpath,... yes\r\nchecking build system type... x86_64-apple-darwin18.6.0\r\nchecking host system type... x86_64-apple-darwin18.6.0\r\nchecking target system type... x86_64-apple-darwin18.6.0\r\nchecking for PHP prefix... /usr\r\nchecking for PHP includes... -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib\r\nchecking for PHP extension directory... /usr/lib/php/extensions/no-debug-non-zts-20160303\r\nchecking for PHP installed headers prefix... /usr/include/php\r\n....\r\n\r\n```\r\n\r\n\u8fd9\u91cc\u53d1\u73b0\u9ed8\u8ba4\u7528\u7684\u662f\u7cfb\u7edf\u81ea\u5e26\u7684PHP\uff0c\u4ee5\u53ca\u9ed8\u8ba4\u7684\u6269\u5c55\u76ee\u5f55\r\n```\r\nsudo make && make install \r\nBuild complete.\r\nDon't forget to run 'make test'.\r\n....\r\ndsymutil .libs/swoole.so || :\r\ncreating swoole.la\r\n(cd .libs && rm -f swoole.la && ln -s ../swoole.la swoole.la)\r\n/bin/sh /Users/spark/work/downloads/swoole-src/libtool --mode=install cp ./swoole.la /Users/spark/work/downloads/swoole-src/modules\r\ncp ./.libs/swoole.so /Users/spark/work/downloads/swoole-src/modules/swoole.so\r\ncp ./.libs/swoole.lai /Users/spark/work/downloads/swoole-src/modules/swoole.la\r\n----------------------------------------------------------------------\r\nLibraries have been installed in:\r\n   /Users/spark/work/downloads/swoole-src/modules\r\n\r\nIf you ever happen to want to link against installed libraries\r\nin a given directory, LIBDIR, you must either use libtool, and\r\nspecify the full pathname of the library, or use the `-LLIBDIR'\r\nflag during linking and do at least one of the following:\r\n   - add LIBDIR to the `DYLD_LIBRARY_PATH' environment variable\r\n     during execution\r\n\r\nSee any operating system documentation about shared libraries for\r\nmore information, such as the ld(1) and ld.so(8) manual pages.\r\n----------------------------------------------------------------------\r\n\r\n\r\nInstalling shared extensions:     /usr/lib/php/extensions/no-debug-non-zts-20160303/\r\ncp: /usr/lib/php/extensions/no-debug-non-zts-20160303/#INST@26485#: Permission denied\r\nmake: *** [install-modules] Error 1\r\n```\r\n\r\n\r\n\u8bf7\u95ee\u5982\u4f55\u6307\u5b9a\u6211\u81ea\u5df1\u5b89\u88c5\u7684PHP\u8def\u5f84\u53ca\u6269\u5c55\u8def\u5f84\uff0c\u6307\u5b9a\u540e\u53ef\u5426\u89e3\u51b3\u6b64\u95ee\u9898\uff1f\r\n\r\n\u611f\u8c22\uff0c\r\n\r\n\r\n"
    },
    "satisfaction_conditions": [
      "Configuration process recognizes correct PHP API version"
    ],
    "created_at": "2019-07-12T07:03:49Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2615",
    "source": {
      "issue_number": 2615
    },
    "initial_question": {
      "title": "How to implement ini_set()",
      "body": "I have got to set this\r\n     ini_set('session.cookie_httponly',1);\r\n\r\nbut I dont know if this is compatible with swoole registered cookie like\r\n     $res->cookie()\r\n"
    },
    "satisfaction_conditions": [
      "Solution must be compatible with Swoole's cookie handling mechanism",
      "Cookie security settings must be configurable at the application level"
    ],
    "created_at": "2019-06-08T00:36:44Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2479",
    "source": {
      "issue_number": 2479
    },
    "initial_question": {
      "title": "request \u56de\u8c03\u4e2d\u5f02\u5e38\u9000\u51fa\u65f6  4.2.10 \u7248\u672c\u4f1a\u56de\u8c03 register_shutdown_function \u51fd\u6570,  \u4f464.2.11\u4e4b\u540e\u5c31\u4e0d\u4f1a\u56de\u8c03 register_shutdown_function",
      "body": "\r\nrequest \u56de\u8c03\u4e2d\u5f02\u5e38\u9000\u51fa\u65f6\r\n\r\n4.2.10 \u7248\u672c\u4f1a\u56de\u8c03 register_shutdown_function \u51fd\u6570,  \u4f464.2.11\u4e4b\u540e\u5c31\u4e0d\u4f1a\u56de\u8c03 register_shutdown_function\r\n\r\n\u6d4b\u8bd5\u7a0b\u5e8f:\r\n```php\r\n<?php\r\n$http = new swoole_http_server(\"0.0.0.0\", 9501, SWOOLE_BASE);\r\n\r\nregister_shutdown_function ( function  ()\r\n{\r\n    echo \"===================================\\n\";\r\n    echo \"== do register_shutdown_function ==\\n\";\r\n    echo \"===================================\\n\";\r\n});\r\n\r\n$http->on('request', function ($req, $resp) {\r\n\r\n    //\u8ba9\u7a0b\u5e8f\u5f02\u5e38\u9000\u51fa\r\n    $s= new \\XXX();\r\n\r\n});\r\n\r\n$http->start();\r\n\r\n```\r\n\r\nVersion => 4.2.10\r\n\r\n\u6b63\u5e38\u6709\u56de\u8c03\u5230:  do register_shutdown_function \r\n\r\n\u5b83\u7684\u8f93\u51fa:\r\n```\r\nPHP Fatal error:  Uncaught Error: Class 'XXX' not found in /home/jim/server.php:20\r\nStack trace:\r\n#0 {main}\r\n  thrown in /home/jim/server.php on line 20\r\n===================================\r\n== do register_shutdown_function == \r\n===================================\r\n[2019-04-03 16:34:05 *3827.0]   ERROR   zm_deactivate_swoole (ERROR 503): Fatal error: Uncaught Error: Cl\r\nass 'XXX' not found in /home/jim/server.php:20                                                          \r\nStack trace:\r\n#0 {main}\r\n  thrown in /home/jim/server.php on line 20.\r\n```\r\n\r\nVersion => 4.2.11\r\n\r\n\u6ca1\u6709 \u5f02\u5e38\u9000\u51fa \u6ca1\u6709\u56de\u8c03\u5230:  register_shutdown_function \r\n\r\n\r\n\u5b83\u7684\u8f93\u51fa:\r\n```\r\nlocalhost:~$ php server.php \r\nPHP Fatal error:  Uncaught Error: Class 'XXX' not found in /home/jim/server.php:20\r\nStack trace:\r\n#0 {main}\r\n  thrown in /home/jim/server.php on line 20\r\n\r\n```\r\n"
    },
    "satisfaction_conditions": [
      "Error handling must successfully catch fatal errors related to class instantiation",
      "Error information must be capturable for client response"
    ],
    "created_at": "2019-04-03T08:45:16Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2427",
    "source": {
      "issue_number": 2427
    },
    "initial_question": {
      "title": "\u4e00\u4e2a\u7531max_request \u5bfc\u81f4\u7684\u5f02\u5e38",
      "body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What did you do? If possible, provide a simple script for reproducing the error.\r\nA\u6587\u4ef6\uff1a\r\n```\r\n<?php\r\n$http = new Swoole\\Http\\Server(\"127.0.0.1\", 9501);\r\n$http->set([\r\n        \"worker_num\"=>1,\r\n        \"max_request\"=>10\r\n]);\r\n$http->on('request', function ($request, $response) {\r\n        $cli = new Swoole\\Coroutine\\Http\\Client('127.0.0.1', 9502);\r\n        $cli->setHeaders([\r\n                'Host' => \"localhost\",\r\n                \"User-Agent\" => 'Chrome/49.0.2587.3',\r\n                'Accept' => 'text/html,application/xhtml+xml,application/xml',\r\n                'Accept-Encoding' => 'gzip',\r\n        ]);\r\n        $cli->set([ 'timeout' => 1]);\r\n        $cli->get('/');\r\n        echo $cli->body;\r\n        $cli->close();\r\n        $response->end(\"<h1>9501 Hello Swoole. #\".rand(1000, 9999).\"</h1>\");\r\n});\r\n$http->start();\r\n```\r\n\r\nB\u6587\u4ef6:\r\n```\r\n<?php\r\n$http = new Swoole\\Http\\Server(\"127.0.0.1\", 9502);\r\n$http->set([\r\n        \"worker_num\"=>1,\r\n        \"max_request\"=>1000\r\n]);\r\n$http->on('request', function ($request, $response) {\r\n    $response->end(\"<h1>Hello Swoole. #\".rand(1000, 9999).\"</h1>\");\r\n});\r\n$http->start();\r\n```\r\n\r\n\u542f\u52a8\u540e\uff0c\u8bf7\u6c42A\u670d\u52a1\uff0cA\u670d\u52a1\u903b\u8f91\u4f1a\u53d1\u9001\u4e00\u4e2a\u8bf7\u6c42\u5230B\u670d\u52a1\u3002\r\n\u6d4b\u8bd5\u65f6\u76f4\u63a5curl \u8bf7\u6c42A\u670d\u52a1\u7aef\u53e3\u3002\r\n\r\n2. What did you expect to see?\r\n\u670d\u52a1\u8bbe\u7f6emax_request\u4e3a10\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\u5e94\u8be5\u90fd\u662f\u6b63\u5e38\u8bf7\u6c42\u3002A\u670d\u52a110\u6b21\u8bf7\u6c42\u540e\u81ea\u52a8\u9000\u51faworker\u5e76\u4e14\u7528\u53e6\u5916\u4e00\u4e2aworker\u66ff\u4ee3\u3002\r\n\r\n\r\n3. What did you see instead?\r\n\u4f46curl\u7b2c\u5341\u6b21\u8bf7\u6c42\u65f6\u5361\u4f4f\u4e0d\u8fd4\u56de\u3002\u5982\u679c\u5c06A\u670d\u52a1\u6539\u6210SWOOLE_BASE\u6a21\u5f0f\uff0c\u4f1a\u5bfc\u81f4\u8fd4\u56decurl: (52) Empty reply from server\r\n\u7b2c\u5341\u4e00\u6b21\u8bf7\u6c42\u6b63\u5e38\u3002\r\n\r\n4. What version of Swoole are you using (show your `php --ri swoole`)?\r\n\r\n```\r\nswoole\r\n\r\nSwoole => enabled\r\nAuthor => Swoole Team <team@swoole.com>\r\nVersion => 4.3.0\r\nBuilt => Mar 12 2019 21:45:06\r\ncoroutine => enabled\r\nepoll => enabled\r\neventfd => enabled\r\nsignalfd => enabled\r\ncpu_affinity => enabled\r\nspinlock => enabled\r\nrwlock => enabled\r\nopenssl => OpenSSL 1.0.1j 15 Oct 2014\r\nhttp2 => enabled\r\npcre => enabled\r\nzlib => enabled\r\nmutex_timedlock => enabled\r\npthread_barrier => enabled\r\nfutex => enabled\r\nasync_redis => enabled\r\n\r\nDirective => Local Value => Master Value\r\nswoole.enable_coroutine => On => On\r\nswoole.display_errors => On => On\r\nswoole.use_shortname => On => On\r\nswoole.unixsock_buffer_size => 8388608 => 8388608\r\n```\r\n\r\n\r\n5. What is your machine environment used (including version of kernel & php & gcc) ?\r\ngcc version 4.8.5 20150623 (Red Hat 4.8.5-4) (GCC) \r\nlinux\u7248\u672c\uff1a3.10.104\r\nphp :\r\n```\r\nPHP 7.2.1 (cli) (built: Jan 11 2018 19:22:45) ( NTS )\r\nCopyright (c) 1997-2017 The PHP Group\r\nZend Engine v3.2.0, Copyright (c) 1998-2017 Zend Technologies\r\n```\r\n\r\n\u7f16\u8bd1\u65f6\u4fee\u6539\u4e86\uff1a\r\n\u53bb\u6389 SW_HTTP_100_CONTINUE \u6ce8\u91ca"
    },
    "satisfaction_conditions": [
      "Service must maintain stability across worker transitions"
    ],
    "created_at": "2019-03-12T13:58:23Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2413",
    "source": {
      "issue_number": 2413
    },
    "initial_question": {
      "title": "\u5173\u4e8edefer\u6a21\u5f0f\u4e0b\u534f\u7a0bhttp\u5ba2\u6237\u7aef\u8bbe\u7f6e\u8d85\u65f6\u7684\u4e00\u70b9\u7591\u95ee",
      "body": "\u6211\u8d774\u4e2a\u534f\u7a0bhttp\u5ba2\u6237\u7aef\uff0c\u8bbe\u7f6e\u8d85\u65f6\u4e3a10s\uff0c\u53d1post\u8bf7\u6c42(\u5373Coroutine\\Http\\Client->post\uff0c\u5e76set([ 'timeout' => 10 ]))\uff0c\u7ed3\u679c\u8fc7\u4e8640s\u624d\u8fd4\u56de\uff0c\u662f\u4e0d\u662f\u5e94\u8be510s\u8fd4\u56de\u5462\uff1f\r\n\r\n\u4e0b\u9762\u662f\u7248\u672c\u4fe1\u606f\uff1a\r\nCentOS Linux release 7.3.1611 (Core) \r\n\r\nPHP 7.2.15 (cli) (built: Mar  1 2019 11:41:54) ( NTS )\r\nCopyright (c) 1997-2018 The PHP Group\r\nZend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies\r\n    with Zend OPcache v7.2.15, Copyright (c) 1999-2018, by Zend Technologies\r\n\r\nSwoole => enabled\r\nAuthor => Swoole Team <team@swoole.com>\r\nVersion => 4.2.13\r\nBuilt => Mar  1 2019 11:43:30\r\ncoroutine => enabled\r\nepoll => enabled\r\neventfd => enabled\r\nsignalfd => enabled\r\ncpu_affinity => enabled\r\nspinlock => enabled\r\nrwlock => enabled\r\npcre => enabled\r\nzlib => enabled\r\nmutex_timedlock => enabled\r\npthread_barrier => enabled\r\nfutex => enabled\r\nasync_redis => enabled\r\nDirective => Local Value => Master Value\r\nswoole.enable_coroutine => On => On\r\nswoole.display_errors => On => On\r\nswoole.use_shortname => On => On\r\nswoole.fast_serialize => Off => Off\r\nswoole.unixsock_buffer_size => 8388608 => 8388608"
    },
    "satisfaction_conditions": [
      "Concurrent requests must execute in parallel"
    ],
    "created_at": "2019-03-08T02:22:53Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2389",
    "source": {
      "issue_number": 2389
    },
    "initial_question": {
      "title": "\u5404\u4f4d\u5927\u795e\u5e2e\u5fd9\u770b\u4e0b\u8fd9\u4e2a\u662f\u4e0d\u662fswoole\u7684\u4e00\u4e2abug",
      "body": "\u8bf7\u95ee\u4e0b\u6211\u5728swoole\\server\u4e2d\u65b0\u589e\u76d1\u542c\u4e00\u4e2a\u7aef\u53e3,\u542f\u7528\u4e86websocket\u534f\u8bae\u89e3\u6790.\u5728onOpen\u7684\u56de\u8c03\u4e2d\u62ff\u5230\u7684server\u5bf9\u8c61\u4e3a\u4ec0\u4e48\u662fswoole\\server\u5bf9\u8c61\u800c\u4e0d\u662fwebsocket\\server\u5bf9\u8c61,\u800c\u5728onMessage\u56de\u8c03\u4e2d\u62ff\u5230\u7684\u5374\u662fwebsocket\\server\u5bf9\u8c61,\u6309\u7406\u6765\u8bf4\u5728onOpen\u56de\u8c03\u4e2d\u7684server\u5bf9\u8c61\u4e0d\u5e94\u8be5\u662fwebsocket\\server\u5bf9\u8c61\u5417?"
    },
    "satisfaction_conditions": [
      "Port listening functionality is preserved"
    ],
    "created_at": "2019-02-26T10:07:32Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2312",
    "source": {
      "issue_number": 2312
    },
    "initial_question": {
      "title": "Coroutine Channel question",
      "body": "```php\r\n// a.php\r\n$chan = new \\Swoole\\Coroutine\\Channel();\r\ngo(function () use ($chan) {\r\n    $chan->push(1);\r\n//    $chan->push(2);\r\n});\r\n// php a.php\r\n// \u6267\u884c\u5b8c\u9000\u51fa\r\n\r\n// a.php\r\n$chan = new \\Swoole\\Coroutine\\Channel();\r\ngo(function () use ($chan) {\r\n    $chan->push(1);\r\n    $chan->push(2);\r\n});\r\n// php a.php\r\n// \u4e3a\u4ec0\u4e48\u4f1a\u963b\u585e\r\n\r\n```"
    },
    "satisfaction_conditions": [
      "Channel capacity constraints are respected",
      "Program execution flow matches channel state",
      "Channel blocking behavior is consistent",
      "Coroutine execution is properly managed"
    ],
    "created_at": "2019-01-14T05:07:54Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2304",
    "source": {
      "issue_number": 2304
    },
    "initial_question": {
      "title": "\u540c\u6b65\u6a21\u5f0f\u4e0b\uff0c\u7b49\u5f85\u67d0\u4e2a\u534f\u7a0b\u7ed3\u675f\u518d\u54cd\u5e94\uff0c\u600e\u4e48\u5904\u7406\u5462\uff1fchan\u53ea\u80fd\u5728\u534f\u7a0b\u91cc\u7528",
      "body": ""
    },
    "satisfaction_conditions": [
      "Worker must process requests sequentially without overlap",
      "Static variables/properties must maintain consistency",
      "Coroutine operations must complete before request ends",
      "System must support concurrent operations within a single request",
      "Request handling must be resumable after blocking operations"
    ],
    "created_at": "2019-01-10T07:27:28Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2162",
    "source": {
      "issue_number": 2162
    },
    "initial_question": {
      "title": "[bug]\u5728\u5b9a\u65f6\u5668\u4e2d\u521b\u5efa\u5b50\u7a0b\u5e8f\u4f1a\u76f4\u63a5\u53d8\u6210\u50f5\u5c38",
      "body": "timer \u672c\u8eab\u662f\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u6258\u7ba1\u5728manager\u4e0b\u3002\r\n\u770b\u5b98\u65b9\u6587\u6863\uff0c\u597d\u50cf\u8bf4 start\u4f1a\u6e05\u9664\u7236\u8fdb\u7a0b\u7684 timer\uff0c\u4f46\u662f\u6211\u8fd9\u4e2atimer\u53ef\u4ee5\u4e00\u76f4\u6253\u5370log\uff0c\u4f46\u662f\u5b59\u8fdb\u7a0b\u521b\u5efa\u51fa\u6765\u5c31\u662f\u50f5\u5c38\uff08\u5b83\u7684\u7236\u8fdb\u7a0b\u662f\u8fd9\u4e2atimer\u8fdb\u7a0b\uff0c\u800ctimer\u8fdb\u7a0b\u6ca1\u6b7b\uff09\r\n\r\n\u8bf4\u660e\uff1a\u521b\u5efa\u5b59\u8fdb\u7a0b\u65f6\u65e0\u62a5\u9519\uff0c\u6210\u529f\u8fd4\u56depid\u3002\u5b59\u8fdb\u7a0b\u91cc\u7684 exec \u4e0d\u4f1a\u6709\u9519\uff0c\u8ddf\u5b83\u6ca1\u5173\uff0c\u5199\u4ec0\u4e48\u90fd\u8fd9\u6837\u3002\r\n\r\n```php\r\n<?php\r\n\r\nnamespace Pkg\\Swoola\\Components\\Swoole\\Process;\r\n\r\ntrait QueueWorkerTrait\r\n{\r\n    protected $queueWorkerPids = [];\r\n\r\n    public function addQueueWorker()\r\n    {\r\n        $self = $this;\r\n        $process = new \\Swoole\\Process(function(\\Swoole\\Process $worker) {\r\n            \\Pkg\\Swoola\\set_process_name('swoola - timer process ');\r\n            \\Swoole\\Process::signal(SIGCHLD, function($sig) {\r\n                // \u5fc5\u987b\u4e3afalse\uff0c\u975e\u963b\u585e\u6a21\u5f0f\r\n                while($ret = \\Swoole\\Process::wait(false)) {\r\n                    echo \"PID={$ret['pid']}\\n\";\r\n                }\r\n            });\r\n\r\n            swoole_timer_tick(1000, function() {\r\n                if (!$this->queueWorkerPids) {\r\n                    $this->createQueueWorker();\r\n                } else {\r\n                    foreach ($this->queueWorkerPids as $idx => $pid) {\r\n                        $current_time = date('H:i:s');\r\n                        if (\\Swoole\\Process::kill($pid, 0)) {\r\n                            echo \"PID[{$pid}] is alived({$current_time}).\\n\";\r\n                        } else {\r\n                            echo \"PID[{$pid}] is died.\\n\";\r\n                            unset($this->queueWorkerPids[$idx]);\r\n                            $this->createQueueWorker($idx);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        $this->server->addProcess($process);\r\n        // $process->start();\r\n    }\r\n\r\n    protected function createQueueWorker($idx = null)\r\n    {\r\n        $num = is_null($idx) ? 2 : 1;\r\n\r\n        for ($i = 0; $i < $num; $i++) {\r\n            $process = new \\Swoole\\Process(function(\\Swoole\\Process $worker) use($i, $idx) {\r\n                $worker->exec(PHP_BINARY, [SWOOLA_APP_DIR.'/artisan', 'queue:work']);\r\n            });\r\n\r\n            $pid = $process->start();\r\n            if (is_null($idx)) {\r\n                $this->queueWorkerPids[$i] = $pid;\r\n            } else {\r\n                $this->queueWorkerPids[$idx] = $pid;\r\n            }\r\n\r\n            // if ($pid) {\r\n\r\n            // } else {\r\n            //     $errno = swoole_errno();\r\n            //     var_dump(swoole_strerror($errno));\r\n            // }\r\n        }\r\n    }\r\n}\r\n\r\n```"
    },
    "satisfaction_conditions": [
      "Process monitoring system must maintain active tracking of child processes",
      "SIGCHLD signal handling must function correctly",
      "Process status checking mechanism must operate reliably"
    ],
    "created_at": "2018-11-29T06:38:24Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2055",
    "source": {
      "issue_number": 2055
    },
    "initial_question": {
      "title": "\u4f7f\u7528idea \u5f00\u53d1\uff0c\u5e76\u6253\u5f00xdebug \u76d1\u63a7\u540e\uff0c\u5982\u679c\u4f7f\u7528\u540c\u4e00\u4e2a\u7aef\u53e3\u505a\u76d1\u542c\uff0c\u4f1a\u5bfc\u81f4\u65e0\u6cd5\u6267\u884c\u7b2c\u4e8c\u4e2aphp \u547d\u4ee4",
      "body": "\u4f7f\u7528idea \u5f00\u53d1\uff0c\u5e76\u6253\u5f00xdebug \u76d1\u63a7\u540e\uff0c\u5982\u679c\u4f7f\u7528\u540c\u4e00\u4e2a\u7aef\u53e3\u505a\u76d1\u542c\uff0c\u4f1a\u5bfc\u81f4\u65e0\u6cd5\u6267\u884c\u7b2c\u4e8c\u4e2aphp \u547d\u4ee4"
    },
    "satisfaction_conditions": [
      "Each Xdebug debugging session must use a unique port",
      "Multiple PHP commands with Xdebug enabled must be able to execute concurrently"
    ],
    "created_at": "2018-10-23T06:44:44Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/2031",
    "source": {
      "issue_number": 2031
    },
    "initial_question": {
      "title": "Does not work installed signal if in swoole_process run a sleep(1) function",
      "body": "Hi,\r\n\r\nI wrote a simple daemon program that starts up a few subprocesses. I also set up a signal handler for the master and child processes with swoole::signal(). If I use sleep(1) within the child process, the child process does not respond to the signal given by swoole::kill(). usleep (1000000) function does not have this problem.\r\n\r\n// $worker is master process\r\n```php \r\n        $process = new swoole_process(function(swoole_process $process) use($worker, $id){\r\n            \r\n            if (self::$status === self::STATUS_STARTING) {\r\n                self::resetStd();\r\n            }\r\n            \r\n            self::$pidMap  = array();\r\n            self::$workers = array($worker->workerId => $worker);\r\n            Timer::delAll();\r\n            \r\n            $process->name('Messenger: worker process  ' . $worker->name);\r\n            $worker->setUserAndGroup();\r\n            $worker->id = $id;\r\n            \r\n            self::$status = self::STATUS_RUNNING;\r\n        \r\n            register_shutdown_function(array(\"\\\\Jetmail\\\\Server\\\\Messenger\", 'checkErrors'));\r\n            self::reinstallSignal();\r\n            \r\n            // Init Timer.\r\n            Timer::init();\r\n            \r\n            $timerid = Timer::add(3,function()use($process,&$timerid){\r\n                \r\n                while($msg = $process->pop()){\r\n                    if ($msg === false) {\r\n                        break;\r\n                    }\r\n\r\n                    sleep(1);\r\n                    //usleep(1000000);\r\n                }\r\n            },[1,2,3],true);            \r\n        });\r\n        \r\n        $process->useQueue(rand(1,1000), swoole_process::IPC_NOWAIT);\r\n        $pid = $process->start();\r\n```\r\n\r\n\r\nI do not know this is a bug or my knowledge is incomplete. I applied sleep (1) instead of a specific task until I did the daemon program. Program execution is waiting for 1 second to simulate the execution time of the real task\r\n\r\nSubprocess's reactions to the signal were never responded, and there was a program state when child processes ceased as soon as they received a signal. I always sent the SIGUSR2 signal.\r\n\r\n\r\nswoole support => enabled\r\nVersion => 4.1.2\r\nAuthor => Swoole Group[email: team@swoole.com]\r\ncoroutine => enabled\r\nepoll => enabled\r\neventfd => enabled\r\nsignalfd => enabled\r\ncpu affinity => enabled\r\nspinlock => enabled\r\nrwlock => enabled\r\nsockets => enabled\r\nopenssl => enabled\r\nhttp2 => enabled\r\npcre => enabled\r\nzlib => enabled\r\nbrotli => enabled\r\nmutex_timedlock => enabled\r\npthread_barrier => enabled\r\nfutex => enabled\r\nmysqlnd => enabled\r\nredis client => enabled\r\npostgresql client => enabled\r\n\r\nDirective => Local Value => Master Value\r\nswoole.enable_coroutine => On => On\r\nswoole.aio_thread_num => 2 => 2\r\nswoole.display_errors => On => On\r\nswoole.use_namespace => On => On\r\nswoole.use_shortname => On => On\r\nswoole.fast_serialize => Off => Off\r\nswoole.unixsock_buffer_size => 8388608 => 8388608\r\n\r\n\r\nPhp version: PHP 7.2.9 (cli) (built: Aug 17 2018 16:21:18) ( NTS )\r\nKernel: Arch Linux, Linux malinal-arch 4.18.6-arch1-1-ARCH #1 SMP PREEMPT Wed Sep 5 11:54:09 UTC 2018 x86_64 GNU/Linux\r\ngcc: gcc 8.2.1+20180831-1\r\n\r\n\r\nThanks for your help.\r\n"
    },
    "satisfaction_conditions": [
      "Solution must be compatible with Swoole's event-driven architecture"
    ],
    "created_at": "2018-10-12T00:49:55Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1991",
    "source": {
      "issue_number": 1991
    },
    "initial_question": {
      "title": "Unable to load dynamic library 'swoole'",
      "body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What did you do? If possible, provide a recipe for reproducing the error.\r\n\r\n    `updated php from 7.1.x to 7.2.10 and rebuilt and reinstalled php-swoole AUR package`\r\n\r\n\r\n2. What did you expect to see?\r\n    `swoole ext loaded with php properly`\r\n\r\n\r\n3. What did you see instead?\r\n`PHP Warning:  PHP Startup: Unable to load dynamic library 'swoole' (tried: /usr/lib/php/modules/swoole (/usr/lib/php/modules/swoole: cannot open shared object file: No such file or directory), /usr/lib/php/modules/swoole.so (/usr/lib/php/modules/swoole.so: undefined symbol: strpprintf)) in Unknown on line 0`\r\n\r\n\r\n4. What version of Swoole are you using (`php --ri swoole`)?\r\n\r\n    `4.2.1`\r\n\r\n\r\n5. What is your machine environment used (including version of kernel & php & gcc) ? \r\n```\r\nArch Linux \r\n4.17.14.a-1-hardened x86_64\r\nphp 7.2.10\r\ngcc 8.2.1+20180831-1\r\n```\r\n\r\n\r\n6. If you are using ssl, what is your openssl version?\r\n    `openssl 1.1.1-1`\r\n\r\nNOTE: `/usr/lib/php/modules/swoole.so does exist in filesystem.`\r\n`swoole ext won't load whether i have .so in php.ini or not.`\r\n\r\nThanks"
    },
    "satisfaction_conditions": [
      "Extension binary must be present in the correct PHP modules directory"
    ],
    "created_at": "2018-09-19T14:16:40Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1977",
    "source": {
      "issue_number": 1977
    },
    "initial_question": {
      "title": "Does \\Co::getUid() has the possibility to return same number in a worker process?",
      "body": "for example:\r\n\\Co:;getUid() return 117, after some time, but before worker reload, may it return 117 again?"
    },
    "satisfaction_conditions": [
      "Coroutine IDs can be reused within the same worker process",
      "Coroutine IDs start from 1 and have an upper limit",
      "Coroutine ID allocation follows a first-available position strategy",
      "Concurrent coroutine count must stay within system limits"
    ],
    "created_at": "2018-09-17T11:51:31Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1886",
    "source": {
      "issue_number": 1886
    },
    "initial_question": {
      "title": "http_sever and websocket_server",
      "body": "I don't get it. How can I make a http_server and a websocket_server in one process? \r\n\r\ntried to create two instanced but wont work\r\n\r\nWarning: Swoole\\Server::__construct(): server is running. unable to create swoole_server."
    },
    "satisfaction_conditions": [
      "Single server process handles both HTTP and WebSocket connections",
      "Server responds appropriately to both HTTP requests and WebSocket messages",
      "Protocol upgrade from HTTP to WebSocket functions correctly",
      "Alternative solution required for HTTP/2 support"
    ],
    "created_at": "2018-08-15T17:32:56Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1710",
    "source": {
      "issue_number": 1710
    },
    "initial_question": {
      "title": "Enable sockets support, require sockets extension.",
      "body": "\u770b\u4e86 make.sh \u91cc\u7684\u811a\u672c\uff0c\u542f\u7528\u90a3\u51e0\u4e2a\u53c2\u6570\u7f16\u8bd1\u7684\u8bdd\u4f1a\u62a5\u9519\uff0c\u5230\u5904\u627e\u4e86\u6ca1\u627e\u5230\u5982\u4f55\u5904\u7406\u8fd9\u91cc\u7684\u7f16\u8bd1\u9519\u8bef\uff0c\u8bf7\u5b98\u65b9\u51fa\u4e00\u4e2a\u6587\u6863\u8bf4\u660e\u4e00\u4e0b\u554a\uff0c\u6c42\u52a9\u4e86"
    },
    "satisfaction_conditions": [
      "Compilation errors related to sockets are resolved",
      "System is using a compatible software version"
    ],
    "created_at": "2018-06-12T11:17:00Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1551",
    "source": {
      "issue_number": 1551
    },
    "initial_question": {
      "title": "TCP Server onReceive wrong $data",
      "body": " Please help. What can I do with it?\r\n\r\n1. What did you do? If possible, provide a recipe for reproducing the error.\r\n\r\nClients:\r\n```php\r\n for( $i = 0; $i <=1; $i++) {\r\n            $client = new \\swoole_client(SWOOLE_SOCK_TCP, SWOOLE_SOCK_ASYNC);\r\n\r\n            $client->on(\"connect\", function($cli) use ($serial_number) {\r\n                $cli->send(\"Data\\r\\n\");\r\n            });\r\n\r\n            $client->on(\"receive\", function($cli, $data) use ($serial_number) {\r\n                echo \"Received: \".$data.' '.date(\"Y-m-d H:i:s\").\"\\r\\n\";\r\n            });\r\n\r\n            $client->on(\"error\", function($cli) use ($client){\r\n                echo \"Connect failed\\n\";\r\n            });\r\n\r\n            $client->on(\"close\", function($cli) use ($serial_number) {\r\n                echo \"Connection close\\n\";\r\n            });\r\n\r\n            $client->connect($ip, $port, 0.5);\r\n        }\r\n```\r\n\r\nServer (short)\r\n```php\r\n$server = new \\swoole_server($ip, $port, SWOOLE_BASE, SWOOLE_SOCK_TCP);\r\n        $server->set(array(\r\n            'task_worker_num'           =>4,\r\n            'worker_num'                => 4,\r\n            'debug_mode'                => 1,\r\n            'open_eof_check'           => true,\r\n            'package_eof'              => \"\\r\\n\",\r\n            'open_eof_split'           => true,\r\n        ));\r\n\r\n\r\n    public function onReceive(\\swoole_server $server, $fd, $from_id, $data )\r\n    {\r\n        var_dump($data);\r\n        echo \"Get Message From Client {$fd}:{$data}\\n\";\r\n    }\r\n```\r\n2. What did you expect to see?\r\n\r\n`string(6) \"Data\r\n\"`\r\n\r\n3. What did you see instead?\r\n\r\n`string(6) \"Data\r\n\"\r\nstring(6) \"Data\r\n\"`\r\n\r\n`string(6) \"string(6) \"Data\r\nData\r\n\"\r\n\"`\r\n\r\n4. What version of Swoole are you using (`php --ri swoole`)?\r\n\r\n 1.10.3\r\n\r\n\r\n5. What is your machine environment used (including version of kernel & php & gcc) ? \r\nphp  7.1.14\r\nmac os 10.13.4\r\n\r\n\r\n\r\n\r\n"
    },
    "satisfaction_conditions": [
      "Message content integrity is preserved"
    ],
    "created_at": "2018-04-07T11:23:36Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1538",
    "source": {
      "issue_number": 1538
    },
    "initial_question": {
      "title": "Warning: Swoole\\Server::on(): Unknown event types[WorkerExit]",
      "body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What did you do? If possible, provide a recipe for reproducing the error.\r\n\r\n```PHP\r\n$swoole = new \\swoole_http_server('127.0.0.1', 52100, \\SWOOLE_PROCESS);\r\n$swoole->on('WorkerExit', function(){\r\n});\r\n$swoole->on('Request', function(){\r\n});\r\n$swoole->start();\r\n```\r\n\r\n2. What did you expect to see?\r\n\r\nstart without this warning\r\n\r\n3. What did you see instead?\r\n`Warning: Swoole\\Server::on(): Unknown event types[WorkerExit] in xxx.php on line 4`\r\n\r\n\r\n4. What version of Swoole are you using (`php --ri swoole`)?\r\nswoole\r\n\r\nswoole support => enabled\r\nVersion => 2.0.7\r\nAuthor => tianfeng.han[email: mikan.tenny@gmail.com]\r\nepoll => enabled\r\neventfd => enabled\r\ntimerfd => enabled\r\nsignalfd => enabled\r\ncpu affinity => enabled\r\nspinlock => enabled\r\nrwlock => enabled\r\nasync http/websocket client => enabled\r\nLinux Native AIO => enabled\r\npcre => enabled\r\nzlib => enabled\r\nmutex_timedlock => enabled\r\npthread_barrier => enabled\r\n\r\nDirective => Local Value => Master Value\r\nswoole.aio_thread_num => 2 => 2\r\nswoole.display_errors => On => On\r\nswoole.use_namespace => On => On\r\nswoole.fast_serialize => Off => Off\r\nswoole.unixsock_buffer_size => 8388608 => 8388608\r\n\r\n\r\n\r\n5. What is your machine environment used (including version of kernel & php & gcc) ? \r\n- `uname -a`: Linux e4ddd26a0eff 4.9.60-linuxkit-aufs #1 SMP Mon Nov 6 16:00:12 UTC 2017 x86_64 GNU/Linux\r\n- `cat /etc/issue`:  Debian GNU/Linux 8 \\n \\l\r\n- `php -v`: \r\nHP 5.6.32 (cli) (built: Nov  4 2017 11:29:44)\r\nCopyright (c) 1997-2016 The PHP Group\r\nZend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies\r\n    with Zend OPcache v7.0.6-dev, Copyright (c) 1999-2016, by Zend Technologies\r\n- `gcc -v`:\r\nUsing built-in specs.\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.9/lto-wrapper\r\nTarget: x86_64-linux-gnu\r\nConfigured with: ../src/configure -v --with-pkgversion='Debian 4.9.2-10' --with-bugurl=file:///usr/share/doc/gcc-4.9/README.Bugs --enable-languages=c,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.9 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.9 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --disable-vtable-verify --enable-plugin --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-4.9-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-4.9-amd64 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-4.9-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --enable-multiarch --with-arch-32=i586 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\r\nThread model: posix\r\ngcc version 4.9.2 (Debian 4.9.2-10)\r\n\r\n\r\n6. If you are using ssl, what is your openssl version?\r\n\r\nno ssl\r\n\r\n\r\n"
    },
    "satisfaction_conditions": [
      "Server configuration remains compatible with PHP 5.6.x environment"
    ],
    "created_at": "2018-03-24T02:20:16Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1527",
    "source": {
      "issue_number": 1527
    },
    "initial_question": {
      "title": "Swoole not supported HTTP Client SSL SNI? (ssl handshake failure)",
      "body": "Swoole not supported HTTP_Client SSL SNI?\r\n\r\nTest script:\r\n\r\n```\r\n<?php\r\n\r\n$domain = 'intoconsultoria.com';\r\n$ip = gethostbyname($domain);\r\n\r\n$cli = new swoole_http_client($ip, 443, true);\r\n\r\n$cli->set(array(\r\n    'timeout' => -1,\r\n    'debug_mode'=> 1,\r\n));\r\n\r\n$cli->setHeaders([\r\n    'Host' => $domain,\r\n    'cache-control' => 'no-cache',\r\n]);\r\n\r\n$cli->get('/', function ($cli) {\r\n    print_r($cli->body);\r\n});\r\n\r\n?>\r\n```\r\n\r\nOutput: WARNING swSSL_connect: SSL_connect() failed. Error: (null)[1]\r\n\r\nTest SSL with openssl (without SNI):\r\n```\r\nshell: openssl s_client -connect intoconsultoria.com:443\r\n\r\noutput: SSL routines:ssl3_read_bytes:tlsv1 alert internal error:ssl/record/rec_layer_s3.c:1399:SSL alert number 80\r\n```\r\n\r\nTest SSL with openssl (with SNI):\r\n\r\n```\r\nshell: openssl s_client -connect intoconsultoria.com:443 -servername intoconsultoria.com\r\n\r\nSsl test successfully.\r\n```\r\n\r\nHow to make swoole work properly with SSL-SNI?\r\n\r\n\r\n"
    },
    "satisfaction_conditions": [
      "SSL/TLS handshake must complete successfully with SNI support",
      "HTTP client must properly identify target hostname for SSL certificate validation",
      "Connection must work when accessing server by IP while maintaining proper hostname verification",
      "HTTP client configuration must enable proper SSL/TLS negotiation"
    ],
    "created_at": "2018-03-18T03:38:36Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1524",
    "source": {
      "issue_number": 1524
    },
    "initial_question": {
      "title": "php\u7684\u5185\u90e8\u5f02\u5e38,\u5728error_handle\u5904\u7406\u540e,worker\u8fdb\u7a0b\u9000\u51fa,\u4e0d\u7ba1\u662f\u534f\u7a0b\u7248\u672c\u6216\u975e\u534f\u7a0b\u7248\u672c\u90fd\u662f\u5982\u6b64",
      "body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What did you do? If possible, provide a recipe for reproducing the error.\r\n```php\r\n<?php\r\n\r\nset_error_handler('errorHandle');\r\n$http = new swoole_http_server(\"127.0.0.1\", 9501);\r\n\r\nfunction testWeb(\\Swoole\\Http\\Response $response)\r\n{\r\n    $response->header(\"Content-Type\", \"text/html\");\r\n    //\u5185\u90e8\u5f02\u5e38\r\n    require 'ab.php';\r\n    //\u666e\u901a\u53ef\u6355\u83b7\r\n    //$a = $b;\r\n    //throw new \\Exception('aaa');\r\n    $response->end('<html>hello</html>');\r\n}\r\n\r\n$http->on(\"request\", function (\\Swoole\\Http\\Request $request, $response) {\r\n    try{\r\n        testWeb($response);\r\n    }catch (Exception $e){\r\n        echo 'e';\r\n    }catch (Throwable $t){\r\n        echo 't';\r\n    }finally{\r\n        echo 'f';\r\n    }\r\n});\r\n\r\nfunction errorHandle($errno, $errstr, $errfile, $errline)\r\n{\r\n    if (!(error_reporting() & $errno)) {\r\n        // This error code is not included in error_reporting, so let it fall\r\n        // through to the standard PHP error handler\r\n        return false;\r\n    }\r\n    /* Don't execute PHP internal error handler */\r\n    return true;\r\n}\r\n\r\n$http->start();\r\n```\r\n\r\n2. What did you expect to see?\r\n\r\n\u8fdb\u7a0b\u4e0d\u5e94\u9000\u51fa,\u4e0d\u5e94\u8be5\u4e2d\u65ad\u4ee3\u7801\u7684\u6267\u884c,\u540e\u679c\u4e5f\u662f\u4e25\u91cd\u7684,\u6bd4\u5982\u534f\u7a0b\u5904\u7406\u4e2d\u65ad\u4e86\r\n\r\n3. What did you see instead?\r\n\r\n/usr/local/Cellar/php71/7.1.13_24/bin/php -dxdebug.remote_enable=1 -dxdebug.remote_mode=req -dxdebug.remote_port=9000 -dxdebug.remote_host=127.0.0.1 /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php\r\nPHP Fatal error:  require(): Failed opening required 'ab.php' (include_path='.:') in /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php on line 12\r\nPHP Stack trace:\r\nPHP   1. {main}() /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php:0\r\nPHP   2. swoole_http_server->start() /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php:40\r\nPHP   3. {closure:/Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php:16-27}($request = *uninitialized*, $response = *uninitialized*) /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php:40\r\nPHP   4. testWeb($response = *uninitialized*) /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php:18\r\n\r\nFatal error: require(): Failed opening required 'ab.php' (include_path='.:') in /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php on line 12\r\n\r\nCall Stack:\r\n    0.0387     358592   1. {main}() /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php:0\r\n    0.0463     362440   2. swoole_http_server->start() /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php:40\r\n    3.5838     367992   3. {closure:/Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php:16-27}(???, ???) /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php:40\r\n    3.5839     367992   4. testWeb(???) /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php:18\r\n\r\n[2018-03-17 10:43:15 *2497.0]\tERROR\tzm_deactivate_swoole (ERROR 503): Fatal error: require(): Failed opening required 'ab.php' (include_path='.:') in /Users/tsingsun/workspace/ThirdTools/yii2-swoole/demo/web/swoole_ori_server.php on line 12.\r\n[2018-03-17 10:43:15 $2496.0]\tWARNING\tswManager_check_exit_status: worker#0 abnormal exit, status=255, signal=0\r\n\r\n\r\n4. What version of Swoole are you using (`php --ri swoole`)?\r\n\r\nswoole 1.10.1 2.1.1 ,2.0.12 \r\n\r\n5. What is your machine environment used (including version of kernel & php & gcc) ? \r\n\r\nmac\r\nphp 7.1.8\r\n\r\n6. If you are using ssl, what is your openssl version?\r\n\r\n\r\n\r\n\r\n"
    },
    "satisfaction_conditions": [
      "Fatal errors must be properly logged before process termination",
      "Process termination must be handled gracefully",
      "Error information must include stack trace details",
      "System must maintain expected behavior for uncatchable errors"
    ],
    "created_at": "2018-03-17T02:45:00Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1520",
    "source": {
      "issue_number": 1520
    },
    "initial_question": {
      "title": "How create new process when parent process already set timer",
      "body": "I know I should set timer when all child process created. \r\nBut, I want to catch `SIGCHLD` signal and create a new child process.\r\n```PHP\r\nSwoole\\Process::signal(SIGCHLD, function ($sig) {\r\n    while ($ret = Swoole\\Process::wait(false)) {\r\n        // create a new child process\r\n        $p = new Swoole\\Process('callback_function');\r\n        $p->start();\r\n    }\r\n});\r\n```\r\nThis new child process inherit parent timer ? \r\nHow can I avoid this problem ? \r\nClear timer in child process callback function ?"
    },
    "satisfaction_conditions": [
      "Child processes must start with clean timer state",
      "Signal handling for SIGCHLD must function correctly",
      "New child processes can be created after other children terminate",
      "Each process must maintain its own independent timer context"
    ],
    "created_at": "2018-03-14T16:14:22Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1442",
    "source": {
      "issue_number": 1442
    },
    "initial_question": {
      "title": "Swoole\\Http\\Server swoole_http_server is same\uff1f",
      "body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What did you do? If possible, provide a recipe for reproducing the error.\r\n\r\n    I see use `Swoole\\Http\\Server` but not `swoole_http_server` in readme document.\r\n\r\n    It means i can use `Swoole\\Server` or `Swoole\\Client` too ? I want know how many class i can use by the namespace way.\r\n\r\n\r\n\r\n2. What did you expect to see?\r\n\r\n    Changelog about this.\r\n\r\n3. What did you see instead?\r\n\r\n    none.\r\n\r\n4. What version of Swoole are you using (`php --ri swoole`)?\r\n\r\n    none.\r\n\r\n5. What is your machine environment used (including version of kernel & php & gcc) ? \r\n\r\n    none.\r\n\r\n6. If you are using ssl, what is your openssl version?\r\n\r\n    none.\r\n\r\n\r\n\r\n\r\n  "
    },
    "satisfaction_conditions": [
      "Correct class name equivalence is established between procedural and namespaced syntax",
      "Complete mapping of available class aliases is provided",
      "Consistent naming pattern demonstration between aliases and namespaced versions"
    ],
    "created_at": "2018-01-09T05:48:19Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1299",
    "source": {
      "issue_number": 1299
    },
    "initial_question": {
      "title": "swoole\u505aRPC client\u7aef\u8c03\u7528\u9891\u7e41\u53d1\u751f8002\u62168009\u62a5\u9519",
      "body": "Swoole/Client/RPC.php\r\n`\r\n /**\r\n     * \u5c1d\u8bd5\u91cd\u8fde\u4e00\u6b21\r\n     */\r\n    for ($i = 0; $i < 2; $i++)\r\n    {\r\n        $ret = $socket->connect($host, $port, $this->timeout);\r\n        if ($ret === false and ($socket->errCode == 114 or $socket->errCode == 115))\r\n        {\r\n            //\u5f3a\u5236\u5173\u95ed\uff0c\u91cd\u8fde\r\n            $socket->close(true);\r\n            continue;\r\n        }\r\n        else\r\n        {\r\n            break;\r\n        }\r\n    }\r\n`\r\n$socket->errCode\u8fd4\u56de114\uff0c115\r\n\r\n\u8bf7\u95ee\u8fd9\u662f\u4ec0\u4e48\u539f\u56e0\r\n "
    },
    "satisfaction_conditions": [
      "Connection timeout errors (114/115) are eliminated",
      "RPC client maintains stable connections to the server",
      "Software version is compatible with required functionality",
      "Connection timeout settings are appropriate for the use case"
    ],
    "created_at": "2017-07-26T06:16:25Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1270",
    "source": {
      "issue_number": 1270
    },
    "initial_question": {
      "title": "\u534f\u7a0bmysql\u5ba2\u6237\u7aef",
      "body": "\u6700\u8fd1\u5728\u9879\u76ee\u91cc\u4f7f\u7528\u534f\u7a0bMysql\u5ba2\u6237\u7aef\uff0c\u6709\u90e8\u5206\u4e1a\u52a1\u5fc5\u987b\u4f7f\u7528\u4e8b\u52a1\u64cd\u4f5c\uff0c\u4f46\u662f\u76ee\u524d\u6ca1\u6709\u652f\u6301\u4e8b\u52a1\uff0c\u8bf7\u95ee\u4e0b\uff0c\u6709\u540e\u7eed\u589e\u52a0\u8ba1\u5212\u4e48\u3002"
    },
    "satisfaction_conditions": [
      "Transaction operations must be supported in coroutine MySQL client",
      "Basic transaction commands (start, commit, rollback) must execute successfully",
      "Solution must be compatible with existing coroutine MySQL client implementation"
    ],
    "created_at": "2017-07-04T08:58:32Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1083",
    "source": {
      "issue_number": 1083
    },
    "initial_question": {
      "title": "How i can check is connecton was closed clean or not in WebsocketServer?",
      "body": "In JavaScript i can check is connection was normaly closed or not by this code:\r\n```\r\n                var socket = new WebSocket(\"ws://127.0.0.1:9501\");\r\n                socket.onclose = function(event){\r\n                  if(event.wasClean){\r\n                    alert('Good close.');\r\n                  }else{\r\n                    alert('Bad close. Connection broken');\r\n                  }\r\n                };\r\n```\r\n\r\nCan I check it in Swoole WebsocketServer?\r\n\r\n"
    },
    "satisfaction_conditions": [
      "Connection closure status must be detectable",
      "Status information must be retrievable server-side",
      "Binary status indication"
    ],
    "created_at": "2017-02-14T01:21:37Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/1011",
    "source": {
      "issue_number": 1011
    },
    "initial_question": {
      "title": "Mac OS X 10.11.6 \u6e90\u7801\u7f16\u8bd1 swoole-src-1.9.0-stable  \u5f00\u542f --enable-openssl \u7f16\u8bd1\u4e0d\u901a\u8fc7",
      "body": "**gcc -v** \u7248\u672c                                                 \r\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\r\nApple LLVM version 8.0.0 (clang-800.0.42.1)\r\nTarget: x86_64-apple-darwin15.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n\r\n**openssl version -a** \u7248\u672c\r\nOpenSSL 1.0.2j  26 Sep 2016\r\nbuilt on: reproducible build, date unspecified\r\nplatform: darwin64-x86_64-cc\r\noptions:  bn(64,64) rc4(ptr,int) des(idx,cisc,16,int) idea(int) blowfish(idx)\r\ncompiler: clang -I. -I.. -I../include  -fPIC -fno-common -DOPENSSL_PIC -DZLIB_SHARED -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -arch x86_64 -O3 -DL_ENDIAN -Wall -DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_MONT5 -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DVPAES_ASM -DBSAES_ASM -DWHIRLPOOL_ASM -DGHASH_ASM -DECP_NISTZ256_ASM\r\nOPENSSLDIR: \"/usr/local/etc/openssl\"\r\n\r\n**Mac OS X \u7248\u672c**\r\nProductName:\tMac OS X\r\nProductVersion:\t10.11.6\r\nBuildVersion:\t15G1108\r\n\r\n**PHP\u7248\u672c**\r\n\r\nPHP 5.6.29 (cli) (built: Dec  8 2016 23:03:30)\r\nCopyright (c) 1997-2016 The PHP Group\r\nZend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies\r\n\r\n**\u7f16\u8bd1\u53c2\u6570\uff1a**\r\n\r\n./configure --with-php-config=/usr/bin/php-config --enable-openssl\r\n\r\n**\u62a5\u9519\u4fe1\u606f\uff1a\uff08\u6709\u7701\u7565\uff09**\r\n/Users/ws/Downloads/swoole-src-1.9.0-stable/include/swoole.h/Users/ws/Downloads/swoole-src-1.9.0-stable/include/swoole.h::353353::1010::  fatal errorfatal error: : 'openssl/ssl.h''openssl/ssl.h'  filefile  notnot  foundfound\r\n\r\n#include <openssl/ssl.h>#include <openssl/ssl.h>\r\n\r\n         ^         ^\r\n\r\n1 error generated.\r\n\r\n/Users/ws/Downloads/swoole-src-1.9.0-stable/include/swoole.h:353:10: fatal error: 'openssl/ssl.h' file not found\r\n#include <openssl/ssl.h>\r\n         ^\r\n\r\n/Users/ws/Downloads/swoole-src-1.9.0-stable/include/swoole.h:353:10: fatal error: 'openssl/ssl.h' file not found\r\n#include <openssl/ssl.h>\r\n         ^\r\nmake: *** [swoole_websocket_server.lo] Error 1\r\n1 error generated.\r\n1 error generated.\r\nmake: *** [swoole_mmap.lo] Error 1\r\nmake: *** [src/protocol/MimeTypes.lo] Error 1\r\n1 error generated.\r\nmake: *** [swoole_mysql.lo] Error 1\r\n1 error generated.\r\nmake: *** [swoole_http_server.lo] Error 1\r\n1 error generated.\r\n1 error generated.\r\nmake: *** [swoole_module.lo] Error 1\r\nmake: *** [swoole_http_client.lo] Error 1\r\n1 error generated.\r\n1 error generated.\r\nmake: *** [swoole_server.lo] Error 1\r\nmake: *** [swoole_client.lo] Error 1\r\n1 error generated.\r\nmake: *** [swoole.lo] Error 1\r\n\r\n\u539f\u6765\u662f\u901a\u8fc7 brew \u5b89\u88c5\u7684swoole\r\n\r\nswoole\r\n\r\nswoole support => enabled\r\nVersion => 1.8.11\r\nAuthor => tianfeng.han[email: mikan.tenny@gmail.com]\r\nkqueue => enabled\r\nrwlock => enabled\r\nasync http/websocket client => enabled\r\npcre => enabled\r\nzlib => enabled\r\n\r\nDirective => Local Value => Master Value\r\nswoole.aio_thread_num => 2 => 2\r\nswoole.display_errors => On => On\r\nswoole.use_namespace => Off => Off\r\nswoole.message_queue_key => 0 => 0\r\nswoole.unixsock_buffer_size => 8388608 => 8388608\r\n\r\n\u73b0\u5728\u60f3\u4f7f\u7528 wss \uff0c\u6240\u4ee5\u60f3\u91cd\u65b0\u7f16\u8bd1 \u5f00\u542f openssl \u652f\u6301"
    },
    "satisfaction_conditions": [
      "System must maintain compatibility with existing OpenSSL dependencies"
    ],
    "created_at": "2017-01-07T08:27:27Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/940",
    "source": {
      "issue_number": 940
    },
    "initial_question": {
      "title": "zend_mm_heap corrupted",
      "body": "When declare swoole server in class, like so :\r\n\r\n```\r\n<?php\r\nclass Server {\r\n  private $server;\r\n  public function run() {\r\n    $this->server = new swoole_websocket_server(\"0.0.0.0\", 443, SWOOLE_BASE, SWOOLE_SOCK_TCP | SWOOLE_SSL);\r\n    $this->server->start();\r\n  }\r\n}\r\n$srv = new Server();\r\n$srv->run();\r\n```\r\n\r\nI get \"zend_mm_heap corrupted\" error\r\nBUT\r\nwhen you run the server directly :\r\n\r\n```\r\n<?php\r\n$server = new swoole_websocket_server(\"0.0.0.0\", 443, SWOOLE_BASE, SWOOLE_SOCK_TCP | SWOOLE_SSL);\r\n```\r\n\r\nit's ok"
    },
    "satisfaction_conditions": [
      "Swoole WebSocket server initializes without heap corruption when instantiated within a class",
      "Server maintains memory integrity during execution",
      "Class-based server implementation behaves identically to direct instantiation"
    ],
    "created_at": "2016-12-09T18:52:38Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/921",
    "source": {
      "issue_number": 921
    },
    "initial_question": {
      "title": "coredump with swoole_http_server",
      "body": "swoole\u914d\u7f6e\uff1a\r\n\r\n> \r\n            'worker_num'      => 8, //worker process num\r\n            'backlog'         => 16, //listen backlog \r\n            'max_request'     => 5000,\r\n            'task_worker_num' => 8,\r\n            'task_worker_max' => 16,\r\n            'dispatch_mode'      => 3,   \r\n            'user'               => 'rrxuser',\r\n            'group'              => 'rrxuser',\r\n            'open_tcp_nodelay'   => 1,   \r\n            'enable_reuse_port'  => 1,\r\n            'log_file'           => '/data/logs/swoole.log',\r\n            'log_level'          => 0,   \r\n            'daemonize'          => 1,   \r\n            'package_max_length' => 5242880,\r\n\r\n\r\n\r\n\r\ncore bt:\r\n\r\n#0  zend_mm_alloc_small (heap=0x7fa343800040, ptr=0x7fa31fb3c540, size=<value optimized out>, copy_size=352) at /data/php7-src/php-7.0.9/Zend/zend_alloc.c:1295\r\n#1  zend_mm_alloc_heap (heap=0x7fa343800040, ptr=0x7fa31fb3c540, size=<value optimized out>, copy_size=352) at /data/php7-src/php-7.0.9/Zend/zend_alloc.c:1366\r\n#2  zend_mm_realloc_heap (heap=0x7fa343800040, ptr=0x7fa31fb3c540, size=<value optimized out>, copy_size=352) at /data/php7-src/php-7.0.9/Zend/zend_alloc.c:1644\r\n#3  0x0000000000850dc2 in zend_string_realloc (execute_data=0x7fa343814bf0) at /data/php7-src/php-7.0.9/Zend/zend_string.h:187\r\n#4  ZEND_CONCAT_SPEC_TMPVAR_TMPVAR_HANDLER (execute_data=0x7fa343814bf0) at /data/php7-src/php-7.0.9/Zend/zend_vm_execute.h:44737\r\n#5  0x0000000000805190 in execute_ex (ex=<value optimized out>) at /data/php7-src/php-7.0.9/Zend/zend_vm_execute.h:417\r\n#6  0x00000000007b8ba8 in zend_call_function (fci=0x7ffdaf001620, fci_cache=0x7ffdaf001670) at /data/php7-src/php-7.0.9/Zend/zend_execute_API.c:866\r\n#7  0x00000000006be0b9 in zif_array_map (execute_data=<value optimized out>, return_value=0x7fa3438147c0) at /data/php7-src/php-7.0.9/ext/standard/array.c:5349\r\n#8  0x000000000083c998 in ZEND_DO_FCALL_BY_NAME_SPEC_HANDLER (execute_data=0x7fa343814710) at /data/php7-src/php-7.0.9/Zend/zend_vm_execute.h:714\r\n#9  0x0000000000805190 in execute_ex (ex=<value optimized out>) at /data/php7-src/php-7.0.9/Zend/zend_vm_execute.h:417\r\n#10 0x00000000007b8ba8 in zend_call_function (fci=0x7ffdaf0018a0, fci_cache=0x7ffdaf001820) at /data/php7-src/php-7.0.9/Zend/zend_execute_API.c:866\r\n#11 0x00000000007b913a in call_user_function_ex (function_table=<value optimized out>, object=<value optimized out>, function_name=<value optimized out>, retval_ptr=<value optimized out>, \r\n    param_count=<value optimized out>, params=<value optimized out>, no_separation=0, symbol_table=0x0) at /data/php7-src/php-7.0.9/Zend/zend_execute_API.c:685\r\n#12 0x00007fa342c4a311 in sw_call_user_function_ex (serv=0x193bc20, req=<value optimized out>) at /data/php7-src/swoole-src/php7_wrapper.h:232\r\n#13 http_onReceive (serv=0x193bc20, req=<value optimized out>) at /data/php7-src/swoole-src/swoole_http_server.c:981\r\n#14 0x00007fa342c75b02 in swWorker_onTask (factory=<value optimized out>, task=0x7ffdaf001b30) at /data/php7-src/swoole-src/src/network/Worker.c:193\r\n#15 0x00007fa342c75c6b in swWorker_onPipeReceive (reactor=<value optimized out>, event=0x7ffdaf003ba0) at /data/php7-src/swoole-src/src/network/Worker.c:563\r\n#16 0x00007fa342c675d0 in swReactorEpoll_wait (reactor=0x193cdd0, timeo=<value optimized out>) at /data/php7-src/swoole-src/src/reactor/ReactorEpoll.c:258\r\n#17 0x00007fa342c76abf in swWorker_loop (factory=<value optimized out>, worker_id=<value optimized out>) at /data/php7-src/swoole-src/src/network/Worker.c:510\r\n#18 0x00007fa342c73d63 in swManager_spawn_worker (factory=0x193c050, worker_id=2) at /data/php7-src/swoole-src/src/network/Manager.c:669\r\n#19 0x00007fa342c747a9 in swManager_start (factory=0x193c050) at /data/php7-src/swoole-src/src/network/Manager.c:133\r\n#20 0x00007fa342c6464a in swFactoryProcess_start (factory=0x193c050) at /data/php7-src/swoole-src/src/factory/FactoryProcess.c:86\r\n#21 0x00007fa342c6a4ff in swServer_start (serv=0x193bc20) at /data/php7-src/swoole-src/src/network/Server.c:658\r\n#22 0x00007fa342c48eaf in zim_swoole_http_server_start (execute_data=0x7fa343813a50, return_value=0x7fa343813a40) at /data/php7-src/swoole-src/swoole_http_server.c:1388\r\n#23 0x000000000083d2b8 in ZEND_DO_FCALL_SPEC_HANDLER (execute_data=0x7fa343813840) at /data/php7-src/php-7.0.9/Zend/zend_vm_execute.h:842\r\n#24 0x0000000000805190 in execute_ex (ex=<value optimized out>) at /data/php7-src/php-7.0.9/Zend/zend_vm_execute.h:417\r\n#25 0x00000000008582eb in zend_execute (op_array=0x7fa34387d000, return_value=<value optimized out>) at /data/php7-src/php-7.0.9/Zend/zend_vm_execute.h:458\r\n#26 0x00000000007c5b43 in zend_execute_scripts (type=8, retval=0x0, file_count=3) at /data/php7-src/php-7.0.9/Zend/zend.c:1427\r\n#27 0x00000000007680b0 in php_execute_script (primary_file=0x7ffdaf0072b0) at /data/php7-src/php-7.0.9/main/main.c:2494\r\n#28 0x000000000085c64a in do_cli (argc=3, argv=0x1803440) at /data/php7-src/php-7.0.9/sapi/cli/php_cli.c:974\r\n#29 0x000000000085ce4a in main (argc=3, argv=0x1803440) at /data/php7-src/php-7.0.9/sapi/cli/php_cli.c:1344\r\n\r\n\r\nphp\u7248\u672c\uff1a7.0.\r\nswoole\u7248\u672c\uff1a1.9.0\r\n\u628aworker_num\u548cbacklog\u8c03\u62104\u5c31\u6ca1\u95ee\u9898\uff0c8\u5c31\u4f1acore,16\u4e5f\u4f1a\uff0c\r\n\r\n"
    },
    "satisfaction_conditions": [
      "PHP process optimization settings must be compatible with Swoole's multi-worker configuration"
    ],
    "created_at": "2016-11-24T15:00:09Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/912",
    "source": {
      "issue_number": 912
    },
    "initial_question": {
      "title": "\u5728swoole_websocket_server start\u56de\u8c03\u542f\u52a8\u7684swoole_process\u4e2d\u65e0\u6cd5\u5411\u5ba2\u6237\u7aefpush\u6d88\u606f?",
      "body": "\u5b9e\u4f8b\u4ee3\u7801\u5982\u4e0b:\r\n```php\r\n<?php\r\n$server = new \\swoole_websocket_server(\"0.0.0.0\", 9443);\r\n\r\n$server->set(array(\r\n    'worker_num' => 1,\r\n    'max_request' => 500,\r\n    'task_worker_num' => 1,\r\n    'max_connection' => 1024\r\n));\r\n\r\n$server->on('start', function (\\swoole_websocket_server $server) {\r\n    $pid = getmypid();\r\n    $mPid = getmypid();\r\n    echo \"this is Master pid: $mPid\\n\";\r\n    \r\n    $process = new swoole_process('process');\r\n    $pid = $process->start();\r\n});\r\n\r\n$server->on('message', function (\\swoole_websocket_server $server, $frame) {\r\n    echo \"receive from {$frame->fd}:{$frame->data},opcode:{$frame->opcode},fin:{$frame->finish} workerid: {$server->worker_id}\\n\";\r\n});\r\n\r\n$server->on('task', function (\\swoole_server $serv, $task_id, $from_id, $data) {});\r\n$server->on('finish', function (\\swoole_server $serv, $task_id, $from_id, $data) {});\r\n\r\n$server->start();\r\n\r\nfunction process(swoole_process $process)\r\n{\r\n    global $server;\r\n    swoole_set_process_name(\"php processor\");\r\n    // \u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5, 20\u79d2\u540e\u5411\u5ba2\u6237\u7aef\u5faa\u73af\u53d1\u9001\u6570\u636e\r\n    swoole_timer_after(20 * 1000, function() use ($server){\r\n        foreach ($server->connections as $fd) {\r\n            var_dump($fd);\r\n            $server->push($fd, 'hello');\r\n        }\r\n    });\r\n    \r\n}\r\n```\r\n20\u79d2\u540e, var_dump\u51fa\u4e86fd, \u4f46\u662f\u5ba2\u6237\u7aef\u6ca1\u6709\u6536\u5230\u6570\u636e."
    },
    "satisfaction_conditions": [
      "WebSocket server process must successfully send messages to connected clients",
      "Process must have access to valid WebSocket server connections",
      "Process must be properly integrated with the WebSocket server",
      "Timer-based message sending must execute as expected"
    ],
    "created_at": "2016-11-15T02:39:40Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/870",
    "source": {
      "issue_number": 870
    },
    "initial_question": {
      "title": "\u8bf7\u95eeswoole_http_request->header \u80fd\u652f\u6301\u53d1\u9001 nginx sendfile \u7684X-Accel-Redirect \u5417",
      "body": "\u5982\u9898\n"
    },
    "satisfaction_conditions": [
      "HTTP header customization is supported"
    ],
    "created_at": "2016-10-10T12:08:30Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/636",
    "source": {
      "issue_number": 636
    },
    "initial_question": {
      "title": "Unix domain Socket\u5957\u63a5\u5b57\u6587\u4ef6\u5c5e\u6027\u5982\u4f55\u66f4\u6539\uff1f",
      "body": "\u589e\u52a0linux domain socket\u7684\u652f\u6301\n$serv->addlistener(\"/var/run/myserv.sock\", 0, SWOOLE_UNIX_STREAM);\n\n\u672c\u673afpm\u6a21\u5f0f(nobody\u7528\u6237)\u4e0b\uff0cphp\u65e0\u6cd5\u901a\u8fc7 /var/run/myserv.sock \u8fde\u63a5\u670d\u52a1\n/var/run/myserv.sock\u6587\u4ef6\u53ea\u6709root\u7528\u6237\u624d\u5177\u6709\u8bfb\u5199\u6743\u9650\uff0c\u5982\u4f55\u6539\u53d8\u6b64\u6587\u4ef6\u5c5e\u6027\uff0c\u8ba9\u5176\u5b83\u7528\u6237\u53ef\u4ee5\u8fde\u63a5\n"
    },
    "satisfaction_conditions": [
      "Unix domain socket file must be accessible by non-root users",
      "Socket file permissions must be modified after socket creation"
    ],
    "created_at": "2016-04-19T08:51:19Z"
  },
  {
    "id": "https://github.com/swoole/swoole-src/issues/464",
    "source": {
      "issue_number": 464
    },
    "initial_question": {
      "title": "onReceive\u4e2d\u4f1a\u6536\u5230\u622a\u65ad\u7684\u6570\u636e",
      "body": "\u8bbe\u7f6e\u4e86\\r\\n\\r\\n\u4e3a\u7ed3\u675f\u7b26,\u8fde\u7eed\u53d1\u9001100\u6bb5\u6570\u636e(\u7528fsockopen\u6253\u5f00, \u7136\u540e\u901a\u8fc7write\u53d1\u9001, \u5faa\u73af100\u6b21, \u6700\u540eclose), \u5176\u4e2d\u6bcf\u6bb5\u6570\u636e\u7684\u6700\u540e\u4e5f\u7528\\r\\n\\r\\n\u4f5c\u4e3a\u7ed3\u675f\n\u4f46\u662f\u6709\u4e9b\u65f6\u5019, \u53d1\u9001\u7684100\u6bb5\u6570\u636e\u4e2d,\u4f1a\u67091-2\u6bb5\u6570\u636e\u51fa\u9519, \u7ecf\u8fc7\u65e5\u5fd7\u6253\u5370, \u53d1\u73b0\u6570\u636e\u88ab\u622a\u65ad\u4e86\n\u4e2d\u95f4\u5e76\u6ca1\u6709\\r\\n\\r\\n, \u4f46\u662f\u88ab\u62c6\u6210\u4e862\u6b21onReceive\n\n\u6211\u81ea\u5df1\u7528\u65e5\u5fd7\u6253\u5370\u4e86\u4e00\u4e0b, \u53d1\u73b0onReceive\u7684\u56de\u8c03\u51fd\u6570\u91cc\u9762\u6253\u5370\u7684\u6570\u636e, \u88ab\u62c6\u6210\u4e862\u6b21\n[2015-12-31 16:52:53][DEBUG][Command][IndexManager/save_log:81][0][save_log]{\"logger_name\":\"Story_online\",\"timestamp\":\"2015-12-31 16:52:53\",\"file\":\"App\\/Lib\\/Action\\/Story\\/T\n[2015-12-31 16:52:53][DEBUG][Command][IndexManager/save_log:89]save log to db error: <E9><9D><9E><E6><B3><95><E6><95><B0><E6><8D><AE>\n<E5><AF><B9><E8><B1><A1><EF><BC><81>\n[2015-12-31 16:52:53][DEBUG][Command][IndexManager/save_log:81][0][save_log]estAction.class.php\",\"line\":23,\"class_name\":\"TestAction\",\"method\":\"log\",\"level\":6,\"message\":\"bianwei42\",\"thread\":\"29697\"}\n[2015-12-31 16:52:53][DEBUG][Command][IndexManager/save_log:89]save log to db error: <E9><9D><9E><E6><B3><95><E6><95><B0><E6><8D><AE>\n<E5><AF><B9><E8><B1><A1><EF><BC><81>\n[2015-12-31 16:52:53][DEBUG][Command][IndexManager/save_log:81][0][save_log]{\"logger_name\":\"Story_online\",\"timestamp\":\"2015-12-31 16:52:53\",\"file\":\"App\\/Lib\\/Action\\/Story\\/TestAction.class.php\",\"line\":23,\"class_name\":\"TestAction\",\"method\":\"log\",\"level\":6,\"message\":\"bianwei43\",\"thread\":\"29697\"}\n[2015-12-31 16:52:53][DEBUG][Command][IndexManager/save_log:81][0][save_log]{\"logger_name\":\"Story_online\",\"timestamp\":\"2015-12-31 16:52:53\",\"file\":\"App\\/Lib\\/Action\\/Story\\/TestAction.class.php\",\"line\":23,\"class_name\":\"TestAction\",\"method\":\"log\",\"level\":6,\"message\":\"bianwei44\",\"thread\":\"29697\"}\n"
    },
    "satisfaction_conditions": [
      "Data stream must be received as complete, untruncated messages",
      "Message boundaries must be properly recognized using \\r\\n\\r\\n delimiter",
      "All 100 consecutive data segments must be received without data loss",
      "Receiver configuration must prevent message fragmentation"
    ],
    "created_at": "2015-12-31T09:01:10Z"
  }
]